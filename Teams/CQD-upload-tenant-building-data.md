---
title: Отправка данных клиента и здания на панели мониторинга качества звонков (CQD)
author: CarolynRowe
ms.author: crowe
manager: serdars
ms.reviewer: mikedav, siunies, gageames
ms.topic: article
ms.tgt.pltfrm: cloud
ms.service: msteams
ms.collection:
- M365-voice
search.appverid: MET150
audience: Admin
appliesto:
- Skype for Business
- Microsoft Teams
ms.localizationpriority: medium
f1.keywords:
- NOCSH
ms.custom:
- Reporting
- seo-marvel-apr2020
description: Узнайте, как передавать данные клиента и здания на панели мониторинга качества звонков (CQD).
ms.openlocfilehash: d999098a2d920c8709ae1878ac94648451c00f0b
ms.sourcegitcommit: 548978550d58f8657d7035b57b736e9cf9b15984
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/23/2022
ms.locfileid: "69163229"
---
# <a name="upload-tenant-and-building-data-in-call-quality-dashboard-cqd"></a>Отправка данных клиента и здания на панели мониторинга качества звонков (CQD)


Чтобы максимально эффективно использовать панель мониторинга качества звонков (CQD), рекомендуется отправить данные клиента и здания. Существует 2 типа файлов данных клиента: [Сборка](#upload-building-data-file) и [Конечная точка](#endpoint-data-file).

Пример шаблона данных клиента можно скачать [здесь](https://github.com/MicrosoftDocs/OfficeDocs-SkypeForBusiness/blob/live/Teams/downloads/locations-template.zip?raw=true). Сведения о сопоставлении зданий см. в статье [Создание схемы здания для CQD](CQD-building-mapping.md).

На панели мониторинга сводных отчетов CQD выберите **Отправка данных клиента** в меню **Параметры** CQD (значок шестеренки в верхней части CQD). Отсюда администраторы могут передавать сведения о зданиях и конечных точках своей организации, например сопоставление IP-адресов и географических сведений, сопоставление каждой беспроводной точки доступа и ее MAC-адреса и т. д.

1. Откройте CQD (из Центра администрирования Teams или по адресу [https://cqd.teams.microsoft.com](https://cqd.teams.microsoft.com)), затем щелкните значок шестеренки в правом верхнем углу и выберите **Отправка данных клиента** на странице **сводных отчетов** .

   ![Снимок экрана: диалоговое окно, которое появляется во время отправки данных.](media/qerguide-image-tenantdataupload.png)
    
2. Кроме того, если вы впервые посещаете CQD, вам будет предложено передать данные о сборке. Вы можете выбрать **Отправить сейчас** , чтобы быстро перейти на страницу **Отправки данных клиента** .

   ![Снимок экрана: баннер, который уведомляет пользователя о передаче данных о сборке.](media/qerguide-image-buildingdatauploadbanner.png)

3. На странице **Отправка данных клиента** нажмите кнопку **Обзор** , чтобы выбрать файл данных.

4. Выбрав файл данных, укажите **дату начала** и при необходимости укажите дату окончания.

5. После выбора **даты начала** выберите **Отправить** , чтобы отправить файл в CQD. <br><br>Перед отправкой файла он проверяется. В случае сбоя проверки отображается сообщение об ошибке с запросом на исправление файла. На следующем рисунке показана ошибка, возникающая при неправильном количестве столбцов в файле данных.

   ![Пример диалогового окна, отображающего ошибку отправки данных здания.](media/qerguide-image-buildingdatauploaderror.png)
 
6. Если во время проверки ошибки не возникают, отправка файла будет выполнена успешно. Затем файл отправленных данных можно просмотреть в таблице **Мои отправки** , в которой показан полный список всех отправленных файлов для текущего клиента в нижней части этой страницы.

> [!NOTE]
> Обработка файла сборки может занять до четырех часов. <br><br> Если вы уже отправили файл сборки и вам нужно добавить подсети, которые могли быть пропущены или исключены, измените исходный файл, добавив новые подсети, удалите текущий файл и повторно отправьте новый измененный файл. В CQD может быть только один активный файл данных сборки. 


## <a name="upload-building-data-file"></a>Отправка файла данных сборки

Первый тип файла данных клиента в CQD — это файл данных **сборки** . Столбец Подсеть получается путем развертывания столбца Network+NetworkRange, а затем присоединения столбца подсети к первой или второй подсети записи вызова, чтобы отобразить сведения о здании, городе, стране или регионе. Формат файла данных, отправляемого вами, должен соответствовать следующим критериям, чтобы пройти проверку перед отправкой:
  
- Файл должен быть TSV-файлом (столбцы разделены tab) или файлом .csv (столбцы разделяются запятыми).

- Файл данных не содержит строку заголовка таблицы. Ожидается, что первая строка файла данных будет реальными, а не метками заголовков, такими как "Сеть".

- Типы данных в файле могут быть только String, Integer или Boolean. Для типа данных Integer значение должно быть числовым. Логические значения должны быть либо 0, либо 1.

- Если столбец использует тип данных String, поле данных может быть пустым, но по-прежнему должно быть разделено вкладкой или запятой. Пустое поле данных просто присваивает пустое строковое значение.

- Существует 1 000 000 расширенных строк на файл данных клиента.

- Для каждой строки должно быть 15 столбцов, каждый столбец должен иметь соответствующий тип данных, а столбцы должны находиться в порядке, указанном в следующей таблице (с разделителями-запятыми или вкладками):

  **Создание формата файла данных**
  
  | Имя столбца        | Тип данных | Пример                   | Рекомендации              |
  |--------------------|-----------|---------------------------|-----------------------|
  | NetworkIP          | String    | 192.168.1.0               | Обязательно              |
  | NetworkName        | String    | США/Сиэтл/СИЭТЛ-SEA-1 | Обязательный<sup>1</sup>  |
  | NetworkRange       | Число    | 26                        | Обязательно              |
  | BuildingName       | String    | СИЭТЛ-СИ-1             | Обязательный<sup>1</sup>  |
  | OwnershipType      | String    | Contoso                   | Необязательно<sup>4</sup>  |
  | BuildingType       | String    | Завершение РАБОТЫ ИТ-специалистов            | Необязательно<sup>4</sup>  |
  | BuildingOfficeType | String    | Инженерных               | Необязательно<sup>4</sup>  |
  | City               | String    | Сиэтл                   | Рекомендуется           |
  | ZipCode            | String    | 98001                     | Рекомендуется           |
  | Страны            | String    | Нам                        | Рекомендуется           |
  | State              | String    | Красноярский край                        | Рекомендуется           |
  | Region             | String    | MSUS                      | Рекомендуется           |
  | InsideCorp<sup>2</sup>         | Bool      | 1             | Обязательно              |
  | ExpressRoute<sup>3</sup>       | Bool      | 0             | Обязательно              |
  | VPN;                | Bool      | 0                         | Необязательно               |

  <sup>1</sup> Хотя для CQD не требуется, шаблоны настроены для отображения имени здания и сети.

  <sup>2</sup> Этот параметр можно использовать для отражения того, находится ли подсеть внутри корпоративной сети. Вы можете настроить использование для других целей.

  <sup>3</sup> Этот параметр можно использовать, чтобы определить, использует ли сеть Azure ExpressRoute. Вы можете настроить использование для других целей.  
  
  <sup>4</sup> Хотя эти необязательные столбцы называются, чтобы предложить значения, которыми их может потребоваться заполнить, можно настроить использование для других целей. Например: Приоритет сети - `Tier 1, Tier 2, Tier 3` 

  **Пример строки:**

  `192.168.1.0,USA/Seattle/SEATTLE-SEA-1,26,SEATTLE-SEA-1,Contoso,IT Termination,Engineering,Seattle,98001,US,WA,MSUS,1,0,0`

> [!IMPORTANT]
> Диапазон сети можно использовать для представления суперсети (сочетание нескольких подсетей с одним префиксом маршрутизации). Все отправки новых зданий будут проверяться на наличие перекрывающихся диапазонов. Если вы ранее отправили файл сборки, необходимо скачать текущий файл и повторно отправить его, чтобы определить перекрытия и устранить проблему перед отправкой повторно. Любое перекрытие ранее отправленных файлов может привести к неправильному сопоставлению подсетей со зданиями в отчетах. Некоторые реализации VPN не сообщают точно сведения о подсети. 
>
> Столбец VPN является необязательным и по умолчанию будет равен 0. Если для столбца VPN задано значение 1, подсеть, представленная этой строкой, будет полностью развернута, чтобы соответствовать всем IP-адресам в подсети. Используйте это экономно и только для VPN-подсетей, так как полное расширение этих подсетей окажет негативное влияние на время запросов, связанных с данными сборки. Если расширение подсети приведет к превышению ограничения строки расширения в 1 000 000, файл сборки не будет принят.


### <a name="supernetting"></a>Суперсеть

Вместо определения каждой подсети можно использовать суперсеть, которая обычно называется маршрутизацией Inter-Domain без классов (CIDR). *Суперсеть* — это сочетание нескольких подсетей, которые совместно используют один префикс маршрутизации. Вместо добавления записи для каждой подсети можно использовать адрес с суперсетью. Суперсеть поддерживается, но мы не рекомендуем ее использовать.

Например, маркетинговое здание Contoso состоит из следующих подсетей:

-   10.1.0.0/24 — первый этаж
-   10.1.1.0/24 — второй этаж
-   10.1.2.0/24 — третий этаж
-   10.1.3.0/24 — четвертый этаж

Вместо добавления записи для каждой подсети можно использовать адрес с надсетью — в этом примере 10.1.0.0/22.

-   Сеть = 10.1.0.0
-   Диапазон сети = 22

Вот несколько аспектов, которые следует учитывать перед реализацией суперсети:

-   Суперсеть может использоваться только в сопоставлении подсети с 8-разрядной и 28-разрядной маской.

-   Сверхсеть занимает меньше времени, но это связано с уменьшением объема данных. Предположим, что проблема с качеством связана с подсетью 10.1.2.0. Если вы реализовали суперсеть, вы не будете знать, где в здании находится подсеть и какой тип сети (например, лаборатория). Если бы вы определили все подсети для здания и отправили сведения о расположении этажа, вы сможете увидеть это различие.

-   Важно убедиться, что адрес надсети правильный и не перехватывает нежелательные подсети.

-   Довольно часто в данных можно найти 192.168.0.0. Для многих организаций это означает, что пользователь находится дома. Для других это схема IP-адресов для вспомогательного офиса. Если в вашей организации есть офисы, использующие эту конфигурацию, не включайте ее в файл сборки, так как с помощью [общих подсетей](quality-of-experience-review-guide.md#common-subnets) трудно отличить домашнюю и внутреннюю сети. 

> [!IMPORTANT]
> Диапазон сети можно использовать для представления суперсети. Все новые файлы данных здания будут проверяться на наличие перекрывающихся диапазонов. Если вы ранее загрузили файл сборки, скачайте текущий файл и снова отправьте его, чтобы определить перекрытия и устранить проблему. Любое перекрытие ранее отправленных файлов может привести к неправильному сопоставлению подсетей со зданиями в отчетах.

### <a name="vpn"></a>VPN;

В качестве данных о взаимодействии (QoE), отправляемых клиентами в Майкрософт 365 или Office 365, откуда получаются данные CQD, включается флаг VPN. CQD будет видеть это как первое и второе измерения VPN. Однако этот флаг зависит от отчетов поставщиков VPN в Windows о том, что зарегистрированный VPN-сетевой адаптер является адаптером удаленного доступа. Не все поставщики VPN правильно регистрируют адаптеры удаленного доступа. Из-за этого вы не сможете использовать встроенные фильтры запросов VPN. Используйте столбец VPN, описанный выше, чтобы точно пометить и определить подсети VPN. Кроме того, рекомендуется помечать vpn-сети для удобной идентификации в отчетах. Ниже приведены два примера того, как помечать подсети VPN:

- Определите **сетевое имя** , введя "VPN" в этом поле для подсетей VPN.

  ![Снимок экрана отчета QCD с vpn-подключением с сетевым именем.](media/qerguide-image-vpnnetworkname.png)

- Определите **имя здания** , введя "VPN" в этом поле для подсетей VPN.

  ![Снимок экрана отчета QCD с vpn-подключением с именем здания.](media/qerguide-image-vpnbuildingname.png)

> [!NOTE]
> Vpn-подключения, как известно, неправильно идентифицируют тип сетевого подключения как проводное, если базовое подключение является беспроводным. При анализе качества VPN-подключений нельзя предположить, что тип подключения был точно определен.

## <a name="endpoint-data-file"></a>Файл данных конечной точки

Другим типом файла данных клиента CQD является файл данных **конечной точки** . Значения столбцов используются в столбце First Client Endpoint Name (Имя конечной точки клиента) или Second Client Endpoint Name (Имя второй конечной точки клиента) для отображения сведений о конечной точке Make, Model или Type. Формат файла данных, отправляемого вами, должен соответствовать следующим критериям, чтобы пройти проверку перед отправкой:

- Файл должен быть TSV-файлом (столбцы разделены tab) или файлом .csv (столбцы разделяются запятыми).

- Содержимое файла данных не включает заголовки таблицы. Первая строка файла данных должна быть реальными данными, а не меткой заголовка, такой как EndpointName.

- Во всех семи столбцах используется только тип данных String. Максимальная допустимая длина составляет 64 символа.

- В записях учитывается регистр; EndpointName **ABC123** будет рассматриваться как уникальное из EndpointName **abc123**.

- Поле данных может быть пустым, но по-прежнему должно быть разделено вкладкой или запятой. Пустое поле данных просто присваивает пустое строковое значение.

- EndpointName должно быть уникальным, в противном случае отправка завершается ошибкой. Если имеется повторяющаяся строка или две строки, использующие одно и то же имя_конечной точки, конфликт приведет к неправильному соединению.

- EndpointLabel1, EndpointLabel2 и EndpointLabel3 — это настраиваемые метки. Они могут быть пустыми строками или значениями, такими как "НОУТБУК ИТ-отдела, назначенный 2018" или "Тег ресурса 5678".

- Для каждой строки должно быть семь столбцов, и столбцы должны быть в следующем порядке:

  **Порядок полей:**

  EndpointName, EndpointMake, EndpointModel, EndpointType, EndpointLabel1, EndpointLabel2, EndpointLabel3

  **Пример строки:**

  `1409W3534, Fabrikam, Model 123, Laptop, IT designated 2018 Laptop, Asset Tag 5678, Purchase 2018`

## <a name="update-a-building-file"></a>Обновление файла сборки

При сборе сведений о сборке и подсети администраторы часто отправляют файл сборки в нескольких итерациях с течением времени, добавляя новые подсети и сведения о их зданиях по мере его доступности. В этом случае потребуется повторно отправить файл сборки. Этот процесс похож на начальную отправку, как описано в предыдущем разделе, за некоторыми исключениями, как указано в следующем разделе.

> [!Important]
> Одновременно может быть активен только один файл сборки. Несколько файлов сборки не являются накопительными.

## <a name="add-net-new-subnets"></a>Добавление новых сетевых подсетей

В некоторых случаях вам потребуется добавить в CQD новые сетевые подсети, которые изначально не были частью топологии сети. Чтобы добавить новые сетевые подсети, выполните следующие действия на странице **Отправка данных клиента** в CQD:

1.  Скачайте исходный файл, если у вас еще нет актуальной копии.

1.  Удалите текущий файл в CQD.

1.  Измените исходный файл сборки и укажите дату окончания по крайней мере за один день до получения новых подсетей.

1.  Добавьте новые подсети в исходный файл сборки.

1.  Отправьте измененный файл сборки и задайте дату начала на один день после окончания предыдущего файла сборки.

## <a name="add-missing-subnets"></a>Добавление отсутствующих подсетей

После отправки сведений о сборке для управляемых сетей каждая управляемая сеть должна иметь связь со зданием. Однако это не всегда так; как правило, несколько подсетей пропускаются. Чтобы найти эти отсутствующие сети, просмотрите страницу **"Отчет о недостающих подсетях** " на странице **"Отчеты о качестве взаимодействия"** в CQD. Все подсети отображаются с 10 или более аудиопотоков, которые не определены в файле данных здания и помечаются как внешние. Убедитесь, что в этом списке нет управляемых сетей. Если подсети отсутствуют, выполните следующую процедуру, чтобы обновить исходный файл данных сборки и повторно отправить его в CQD.

1. Перейдите на страницу **Отправка данных клиента** в CQD.

1. Скачайте исходный файл, если у вас еще нет актуальной копии.

1. Удалите текущий файл в CQD.

1. Добавьте новые подсети в исходный файл.

1. Отправьте файл сборки. Обязательно задайте дату начала не менее восьми месяцев назад, чтобы CQD обрабатывал исторические данные.


> [!IMPORTANT]
> Вам потребуется добавить идентификатор клиента в качестве фильтра запроса для **второго идентификатора клиента** в этот отчет, чтобы отфильтровать отчет, чтобы просмотреть только данные клиента вашей организации. В противном случае в отчете будут отображаться федеративные подсети.

> [!NOTE] 
> Не забудьте настроить фильтр отчета за год месяца в соответствии с текущим месяцем. Выберите **Изменить** и измените фильтр отчета **За год месяца** , чтобы сохранить новый месяц по умолчанию.


## <a name="related-topics"></a>См. также

[Создание схемы построения для CQD](CQD-building-mapping.md)

[Улучшение и мониторинг качества звонков для Teams](monitor-call-quality-qos.md)

[Что такое CQD?](CQD-what-is-call-quality-dashboard.md)

[Настройка панели мониторинга качества звонков (CQD)](turning-on-and-using-call-quality-dashboard.md)

[Данные и отчеты CQD](CQD-data-and-reports.md)

[Использование CQD для управления качеством звонков и собраний](quality-of-experience-review-guide.md)

[Измерения и меры, доступные в CQD](dimensions-and-measures-available-in-call-quality-dashboard.md)

[Классификация потоков в CQD](stream-classification-in-call-quality-dashboard.md)

[Использование Power BI для анализа данных CQD](CQD-Power-BI-query-templates.md)
