---
title: Развертывание управления комнатами Microsoft Teams с помощью монитора Azure
ms.author: v-lanac
author: lanachin
ms.reviewer: Turgayo
manager: serdars
audience: ITPro
ms.topic: quickstart
ms.service: msteams
localization_priority: Normal
ms.collection:
- M365-collaboration
ms.custom: ''
ms.assetid: d86ff657-ee92-4b06-aee3-d4c43090bdcb
description: В этой статье рассказывается, как развернуть управление устройствами в Microsoft Teams с помощью монитора Azure.
ms.openlocfilehash: 12936113a951f90bb1a3bed72f71d09f1f72ccd9
ms.sourcegitcommit: 0dcd078947a455a388729fd50c7a939dd93b0b61
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2019
ms.locfileid: "37569944"
---
# <a name="deploy-microsoft-teams-rooms-management-with-azure-monitor"></a><span data-ttu-id="54b86-103">Развертывание управления комнатами Microsoft Teams с помощью монитора Azure</span><span class="sxs-lookup"><span data-stu-id="54b86-103">Deploy Microsoft Teams Rooms management with Azure Monitor</span></span>

<span data-ttu-id="54b86-104">В этой статье объясняется, как настроить и развернуть объединенное и конечное Управление устройствами Microsoft Teams с помощью монитора Azure.</span><span class="sxs-lookup"><span data-stu-id="54b86-104">This article discusses how to set up and deploy integrated, end-to-end management of Microsoft Teams Rooms devices by using Azure Monitor.</span></span>

<span data-ttu-id="54b86-105">Вы можете настроить службу журналов в службе Azure для предоставления базовой телеметрии и оповещений, которые помогут вам управлять комнатами в Microsoft Teams, где находятся устройства для Конференц зал.</span><span class="sxs-lookup"><span data-stu-id="54b86-105">You can configure Log Analytics within Azure Monitor to provide basic telemetry and alerts that will help you manage Microsoft Teams Rooms meeting room devices.</span></span> <span data-ttu-id="54b86-106">По мере того как ваше решение для управления будет превышено, вы можете развернуть дополнительные возможности данных и управления, чтобы создать более подробное представление о доступности и быстродействии устройства.</span><span class="sxs-lookup"><span data-stu-id="54b86-106">As your management solution matures, you might decide to deploy additional data and management capabilities to create a more detailed view of device availability and performance.</span></span>

<span data-ttu-id="54b86-107">Следуя этим инструкциям, вы можете использовать панель мониторинга, как в следующем примере, для получения подробных отчетов о состоянии доступности устройства, работоспособности приложения и оборудования, а также Microsoft Teams для распространения версий приложений и операционной системы.</span><span class="sxs-lookup"><span data-stu-id="54b86-107">By following this guide, you can use a dashboard like the following example to get detailed status reporting for device availability, application and hardware health, and Microsoft Teams Rooms application and operating system version distribution.</span></span>

<span data-ttu-id="54b86-108">![Снимок экрана, на котором показан пример аналитического анализа журнала для комнат Microsoft Teams](../media/Deploy-Azure-Monitor-1.png "Образец аналитического журнала для комнат Microsoft Teams")</span><span class="sxs-lookup"><span data-stu-id="54b86-108">![Screen shot of sample Log Analytics view for Microsoft Teams Rooms](../media/Deploy-Azure-Monitor-1.png "Sample Log Analytics view for Microsoft Teams Rooms")</span></span>

<span data-ttu-id="54b86-109">В общих чертах вам необходимо выполнить следующие задачи.</span><span class="sxs-lookup"><span data-stu-id="54b86-109">At a high level, you need to perform the following tasks:</span></span>


1. [<span data-ttu-id="54b86-110">Проверка конфигурации Analytics log</span><span class="sxs-lookup"><span data-stu-id="54b86-110">Validate Log Analytics configuration</span></span>](azure-monitor-deploy.md#validate_LogAnalytics)
2. [<span data-ttu-id="54b86-111">Настройка тестовых устройств для настройки службы управления журналом</span><span class="sxs-lookup"><span data-stu-id="54b86-111">Configure test devices for Log Analytics management setup</span></span>](azure-monitor-deploy.md#configure_test_devices)
3. [<span data-ttu-id="54b86-112">Сопоставление настраиваемых полей</span><span class="sxs-lookup"><span data-stu-id="54b86-112">Map custom fields</span></span>](azure-monitor-deploy.md#Custom_fields)
4. [<span data-ttu-id="54b86-113">Определение представлений комнат Microsoft Teams в службе анализа журналов</span><span class="sxs-lookup"><span data-stu-id="54b86-113">Define the Microsoft Teams Rooms views in Log Analytics</span></span>](azure-monitor-deploy.md#Define_Views)
5. [<span data-ttu-id="54b86-114">Определение оповещений</span><span class="sxs-lookup"><span data-stu-id="54b86-114">Define alerts</span></span>](azure-monitor-deploy.md#Alerts)
6. [<span data-ttu-id="54b86-115">Настройка наблюдения для всех устройств</span><span class="sxs-lookup"><span data-stu-id="54b86-115">Configure all devices for Monitoring</span></span>](azure-monitor-deploy.md#configure_all_devices)
7. [<span data-ttu-id="54b86-116">Настройка дополнительных решений для монитора Azure</span><span class="sxs-lookup"><span data-stu-id="54b86-116">Configure additional Azure Monitor solutions</span></span>](azure-monitor-deploy.md#Solutions)

> [!IMPORTANT]
> <span data-ttu-id="54b86-117">Несмотря на то, что в минимальной конфигурации служба Azure log Analytics может отслеживать компьютер под управлением операционной системы Windows, по-прежнему некоторые комнаты Microsoft Teams — конкретные действия, которые необходимо выполнить, прежде чем приступить к развертыванию агентов для всех Microsoft Teams. Устройства комнаты.</span><span class="sxs-lookup"><span data-stu-id="54b86-117">Although with minimal configuration, Azure Monitor Log Analytics can monitor a computer running a Windows operating system, there are still some Microsoft Teams Rooms–specific steps that you need to take before you start deploying agents to all Microsoft Teams Rooms devices.</span></span>
> <span data-ttu-id="54b86-118">Поэтому мы настоятельно рекомендуем выполнить все действия по настройке в правильном порядке для управления установкой и конфигурацией.</span><span class="sxs-lookup"><span data-stu-id="54b86-118">Therefore, we highly recommend you perform all configuration steps in the right order for a controlled setup and configuration.</span></span> <span data-ttu-id="54b86-119">Качество конечного результата очень сильно зависит от качества начальной конфигурации.</span><span class="sxs-lookup"><span data-stu-id="54b86-119">The quality of the end result very much depends on the quality of the initial configuration.</span></span>

## <a name="validate-log-analytics-configuration"></a><span data-ttu-id="54b86-120">Проверка конфигурации Analytics log</span><span class="sxs-lookup"><span data-stu-id="54b86-120">Validate Log Analytics configuration</span></span>
<span data-ttu-id="54b86-121"><a name="validate_LogAnalytics"> </a></span><span class="sxs-lookup"><span data-stu-id="54b86-121"></span></span>

<span data-ttu-id="54b86-122">Для сбора журналов из комнат Microsoft Teams необходимо иметь рабочую область "анализ журналов".</span><span class="sxs-lookup"><span data-stu-id="54b86-122">You need to have a Log Analytics workspace to start collecting logs from Microsoft Teams Rooms devices.</span></span> <span data-ttu-id="54b86-123">Рабочая область — это уникальная среда для анализа журналов с собственным хранилищем данных, источниками данных и решениями.</span><span class="sxs-lookup"><span data-stu-id="54b86-123">A workspace is a unique Log Analytics environment with its own data repository, data sources, and solutions.</span></span> <span data-ttu-id="54b86-124">Если у вас уже есть рабочая область с аналитическим журналом, вы можете использовать ее для наблюдения за развертыванием комнат Microsoft Teams, а также создать специальную рабочую область для анализа журналов, относящуюся к потребностям мониторинга Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="54b86-124">If you already have an existing Log Analytics workspace, you might use it to monitor your Microsoft Teams Rooms deployment or alternatively, you can create a dedicated Log Analytics workspace specific to your Microsoft Teams Rooms monitoring needs.</span></span>

<span data-ttu-id="54b86-125">Если вам нужно создать новую рабочую область для анализа журналов, следуйте инструкциям в статье [Создание рабочей области для службы анализа журналов на портале Azure](https://docs.microsoft.com/azure/azure-monitor/learn/quick-create-workspace)</span><span class="sxs-lookup"><span data-stu-id="54b86-125">If you need to create a new Log Analytics workspace, follow the instructions in the article [Create a Log Analytics workspace in the Azure portal](https://docs.microsoft.com/azure/azure-monitor/learn/quick-create-workspace)</span></span>

> [!NOTE]
> <span data-ttu-id="54b86-126">Для использования службы анализа журналов с монитором Azure необходимо иметь активную подписку на Azure.</span><span class="sxs-lookup"><span data-stu-id="54b86-126">To use Log Analytics with Azure Monitor, you need to have an active Azure subscription.</span></span> <span data-ttu-id="54b86-127">Если у вас нет подписки на Azure, вы можете создать [бесплатную пробную подписку](https://azure.microsoft.com/free) в качестве отправной точки.</span><span class="sxs-lookup"><span data-stu-id="54b86-127">If you don’t have an Azure subscription, you can create [a free trial subscription](https://azure.microsoft.com/free) as a starting point.</span></span>

### <a name="configure-log-analytics-to-collect-microsoft-teams-rooms-event-logs"></a><span data-ttu-id="54b86-128">Настройка службы журнала для сбора журналов событий Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="54b86-128">Configure Log Analytics to collect Microsoft Teams Rooms event logs</span></span>

<span data-ttu-id="54b86-129">Аналитика журнала собирает только события из журналов событий Windows, указанных в параметрах.</span><span class="sxs-lookup"><span data-stu-id="54b86-129">Log Analytics only collects events from the Windows event logs that are specified in the settings.</span></span> <span data-ttu-id="54b86-130">Для каждого журнала собираются только события, для которых выбраны определенные серьезности.</span><span class="sxs-lookup"><span data-stu-id="54b86-130">For each log, only the events with the selected severities are collected.</span></span>

<span data-ttu-id="54b86-131">Для сбора журналов, необходимых для отслеживания состояния устройства и приложения Microsoft Teams, необходимо настроить Analytics log.</span><span class="sxs-lookup"><span data-stu-id="54b86-131">You need to configure Log Analytics to collect the logs required to monitor Microsoft Teams Rooms device and application status.</span></span> <span data-ttu-id="54b86-132">В Microsoft Teams комнаты используются для работы с журналом событий **системы комнаты Skype** .</span><span class="sxs-lookup"><span data-stu-id="54b86-132">Microsoft Teams Rooms devices use the **Skype Room System** event log.</span></span>

<span data-ttu-id="54b86-133">Настройка службы журнала для сбора событий в комнатах Microsoft Teams в разделе " [Источники данных журнала событий Windows" на мониторе Azure](https://docs.microsoft.com/azure/azure-monitor/platform/data-sources-windows-events)</span><span class="sxs-lookup"><span data-stu-id="54b86-133">To configure Log Analytics to collect the Microsoft Teams Rooms events, see [Windows event log data sources in Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/platform/data-sources-windows-events)</span></span>

<span data-ttu-id="54b86-134">![Снимок экрана с параметрами журнала событий](../media/Deploy-Azure-Monitor-2.png "Параметры журнала событий")</span><span class="sxs-lookup"><span data-stu-id="54b86-134">![Screen shot of event log settings](../media/Deploy-Azure-Monitor-2.png "Event log settings")</span></span>

> [!IMPORTANT]
> <span data-ttu-id="54b86-135">Настройте параметры журнала событий Windows и введите в качестве имени журнала событий **систему Skype Room** , а затем установите флажки **Ошибка**, **предупреждение**и **сведения** .</span><span class="sxs-lookup"><span data-stu-id="54b86-135">Configure Windows Event Log settings and enter **Skype Room System** as event log name, and then select the **Error**, **Warning**, and **Information** check boxes.</span></span>

## <a name="configure-test-devices-for-azure-monitoring"></a><span data-ttu-id="54b86-136">Настройка тестовых устройств для мониторинга Azure</span><span class="sxs-lookup"><span data-stu-id="54b86-136">Configure test devices for Azure Monitoring</span></span>
<span data-ttu-id="54b86-137"><a name="configure_test_devices"> </a></span><span class="sxs-lookup"><span data-stu-id="54b86-137"></span></span>

<span data-ttu-id="54b86-138">Для отслеживания событий, связанных с комнатами Microsoft Teams, необходимо подготовить аналитический журнал, чтобы получить доступ к ним.</span><span class="sxs-lookup"><span data-stu-id="54b86-138">You need to prepare Log Analytics to be able to monitor Microsoft Teams Rooms–related events.</span></span> <span data-ttu-id="54b86-139">Для начала вам потребуется развернуть агенты наблюдения (Майкрософт) только в одной или двух комнатах Microsoft Teams, к которым у вас есть физический доступ, и получить эти тестовые устройства для создания данных и их последующего помещения в рабочую область "анализ журналов".</span><span class="sxs-lookup"><span data-stu-id="54b86-139">To start with, you need to deploy Microsoft Monitoring agents to just one or two Microsoft Teams Rooms devices that you have physical access to, and get those test devices generate some data and push it to the Log Analytics workspace.</span></span>

### <a name="install-microsoft-monitoring-agents-to-test-devices"></a><span data-ttu-id="54b86-140">Установка агентов наблюдения (Майкрософт) на тестирование устройств</span><span class="sxs-lookup"><span data-stu-id="54b86-140">Install Microsoft Monitoring agents to test devices</span></span>

<span data-ttu-id="54b86-141">Развертывание агента Microsoft Monitoring Agent на тестовом устройстве с помощью инструкций, приведенных в разделе [Подключение компьютеров с Windows к службе Analytics log в Azure](https://docs.microsoft.com/azure/azure-monitor/platform/agent-windows).</span><span class="sxs-lookup"><span data-stu-id="54b86-141">Deploy the Microsoft Monitoring agent to the test devices by using the instructions provided in [Connect Windows computers to the Log Analytics service in Azure](https://docs.microsoft.com/azure/azure-monitor/platform/agent-windows).</span></span> <span data-ttu-id="54b86-142">В этой статье приведены подробные сведения о процедуре развертывания Microsoft Monitoring Agent для Windows, инструкции по получению ***идентификатора рабочей области*** для анализа журналов и ***первичному ключу*** для получения данных о том, к которым подключены устройства Microsoft Teams. Развертывание монитора Azure и инструкции по проверке соединения агента с экземпляром службы журнала.</span><span class="sxs-lookup"><span data-stu-id="54b86-142">This article provides detailed information about the steps for deploying Microsoft Monitoring Agent for Windows, instructions for obtaining the Log Analytics ***Workspace ID*** and the ***primary key*** to get Microsoft Teams Rooms devices connected to your Azure Monitor deployment, and steps to verify agent connectivity to Log Analytics instance.</span></span>

### <a name="generate-sample-microsoft-teams-rooms-events"></a><span data-ttu-id="54b86-143">Создание образцов событий комнат Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="54b86-143">Generate sample Microsoft Teams Rooms events</span></span>

<span data-ttu-id="54b86-144">После развертывания агента Microsoft Monitoring на тестовом устройстве убедитесь, что данные о необходимых данных журнала событий собраны монитором Azure.</span><span class="sxs-lookup"><span data-stu-id="54b86-144">After the Microsoft Monitoring agent is deployed onto the test devices, verify that the required event log data is collected by Azure Monitor.</span></span>

> [!NOTE]
> <span data-ttu-id="54b86-145">После установки Microsoft Monitoring Agent перезагрузите устройство и убедитесь, что запущено приложение собрания Microsoft Teams, в котором можно создать новые события в журнале событий.</span><span class="sxs-lookup"><span data-stu-id="54b86-145">Reboot the device after the installation of the Microsoft Monitoring agent, and make sure that Microsoft Teams Rooms Meeting app is started, so that it can generate new events into the Event Log.</span></span>

1.  <span data-ttu-id="54b86-146">Войдите на [портал Microsoft Azure](https://portal.azure.com) и выберите рабочую область в службе аналитики журнала.</span><span class="sxs-lookup"><span data-stu-id="54b86-146">Sign in to the [Microsoft Azure portal](https://portal.azure.com) and go to Log Analytics and select your workspace.</span></span>

2.  <span data-ttu-id="54b86-147">Перечислите события пульса, созданные с помощью устройства Microsoft Teams (комната):</span><span class="sxs-lookup"><span data-stu-id="54b86-147">List the heartbeat events generated by a Microsoft Teams Rooms device:</span></span>
    1.  <span data-ttu-id="54b86-148">Выберите рабочую область и перейдите в раздел **журналы** и используйте запрос, чтобы получить записи пульса, для которых будут использоваться пользовательские поля для комнат Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="54b86-148">Select your workspace and go to **Logs** and use a query to retrieve the heartbeat records that will have the custom fields for Microsoft Teams Rooms.</span></span>
    2.  <span data-ttu-id="54b86-149">Образец запроса:`Event | where Source == "SRS-App" and EventID == 2000`</span><span class="sxs-lookup"><span data-stu-id="54b86-149">Sample query: `Event | where Source == "SRS-App" and EventID == 2000`</span></span>

3.  <span data-ttu-id="54b86-150">Убедитесь в том, что запрос возвращает записи журнала, которые содержат события, созданные приложением "собрания комнат Microsoft Teams".</span><span class="sxs-lookup"><span data-stu-id="54b86-150">Make sure that the query returns log records that include events generated by the Microsoft Teams Rooms meetings app.</span></span>

4.  <span data-ttu-id="54b86-151">Создавайте аппаратные ошибки и проверяйте, зарегистрированы в службе аналитики журнала Azure необходимые события.</span><span class="sxs-lookup"><span data-stu-id="54b86-151">Generate a hardware issue, and validate that the required events are logged in Azure Log Analytics.</span></span>
    1.  <span data-ttu-id="54b86-152">Отключите один из периферийных устройств в разделе Проверка системы комнат Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="54b86-152">Unplug one of the peripheral devices on the test Microsoft Teams Rooms system.</span></span> <span data-ttu-id="54b86-153">Это может быть экран камеры, динамика, микрофона или передней комнаты</span><span class="sxs-lookup"><span data-stu-id="54b86-153">This could be the camera, speakerphone, microphone, or Front Room Display</span></span>
    2.  <span data-ttu-id="54b86-154">Подождите 10 минут, пока журнал событий не будет заполнен службой Azure log Analytics.</span><span class="sxs-lookup"><span data-stu-id="54b86-154">Wait 10 minutes for the event log to be populated in Azure Log Analytics.</span></span>
    3.  <span data-ttu-id="54b86-155">Перечислите события об ошибках оборудования с помощью запроса:`Event | where Source == "SRS-App" and EventID == 3001`</span><span class="sxs-lookup"><span data-stu-id="54b86-155">Use a query to list hardware error events: `Event | where Source == "SRS-App" and EventID == 3001`</span></span>

5.  <span data-ttu-id="54b86-156">Создание ошибки приложения и проверка того, что в журнал записываются необходимые события.</span><span class="sxs-lookup"><span data-stu-id="54b86-156">Generate an application issue, and validate that the required events are logged.</span></span>
    1.  <span data-ttu-id="54b86-157">Измените конфигурацию приложения Microsoft Teams, а затем введите неверный адрес (SIP) и пароль для протокола запуска сеанса.</span><span class="sxs-lookup"><span data-stu-id="54b86-157">Modify Microsoft Teams Rooms application configuration, and type an incorrect Session Initiation Protocol (SIP) address/password pair.</span></span>
    2.  <span data-ttu-id="54b86-158">Подождите 10 минут, пока журнал событий не будет заполнен службой Azure log Analytics.</span><span class="sxs-lookup"><span data-stu-id="54b86-158">Wait 10 minutes for the event log to be populated in Azure Log Analytics.</span></span>
    3.  <span data-ttu-id="54b86-159">Использование запроса для перечисления событий, возникающих при ошибке приложения:`Event | where Source == "SRS-App" and EventID == 2001 and EventLevel == 1`</span><span class="sxs-lookup"><span data-stu-id="54b86-159">Use a query to list application error events: `Event | where Source == "SRS-App" and EventID == 2001 and EventLevel == 1`</span></span>

> [!IMPORTANT]
> <span data-ttu-id="54b86-160">Эти журналы событий являются обязательными, прежде чем можно будет настроить настраиваемые поля.</span><span class="sxs-lookup"><span data-stu-id="54b86-160">These sample event logs are required before custom fields can be configured.</span></span> <span data-ttu-id="54b86-161">Не переходите к следующему шагу, пока не соберете нужные журналы событий.</span><span class="sxs-lookup"><span data-stu-id="54b86-161">Don’t proceed to the next step until you have collected the required event logs.</span></span>

## <a name="map-custom-fields"></a><span data-ttu-id="54b86-162">Сопоставление настраиваемых полей</span><span class="sxs-lookup"><span data-stu-id="54b86-162">Map custom fields</span></span>
<span data-ttu-id="54b86-163"><a name="Custom_fields"> </a></span><span class="sxs-lookup"><span data-stu-id="54b86-163"></span></span>

<span data-ttu-id="54b86-164">Пользовательские поля используются для извлечения определенных данных из журналов событий.</span><span class="sxs-lookup"><span data-stu-id="54b86-164">You use custom fields to extract specific data from the event logs.</span></span> <span data-ttu-id="54b86-165">Необходимо определить пользовательские поля, которые будут использоваться позже с плитками, представлениями панели мониторинга и оповещениями.</span><span class="sxs-lookup"><span data-stu-id="54b86-165">You need to define custom fields that will be used later with your tiles, dashboard views, and alerts.</span></span> <span data-ttu-id="54b86-166">Прежде чем приступить к созданию настраиваемых полей, просмотрите [пользовательские поля в службе анализа журналов](https://docs.microsoft.com/azure/azure-monitor/platform/custom-fields) и ознакомьтесь с концепциями.</span><span class="sxs-lookup"><span data-stu-id="54b86-166">See [Custom fields in Log Analytics](https://docs.microsoft.com/azure/azure-monitor/platform/custom-fields) and become familiar with the concepts before you start creating your custom fields.</span></span>

<span data-ttu-id="54b86-167">Чтобы извлечь пользовательские поля из журналов записанных событий, выполните указанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="54b86-167">To extract your custom fields out of the captured event logs, follow these steps:</span></span>

1.  <span data-ttu-id="54b86-168">Войдите на [портал Microsoft Azure](https://portal.azure.com) и выберите рабочую область в службе аналитики журнала.</span><span class="sxs-lookup"><span data-stu-id="54b86-168">Sign in to the [Microsoft Azure portal](https://portal.azure.com) and go to Log Analytics and select your workspace.</span></span>

2. <span data-ttu-id="54b86-169">Перечислите события, созданные с помощью устройства Microsoft Teams комнаты:</span><span class="sxs-lookup"><span data-stu-id="54b86-169">List the events generated by a Microsoft Teams Rooms device:</span></span>
   1.  <span data-ttu-id="54b86-170">Перейдите в раздел **журналы** и используйте запрос, чтобы получить записи, для которых будет задано настраиваемое поле.</span><span class="sxs-lookup"><span data-stu-id="54b86-170">Go to **Logs** and use a query to retrieve the records that will have the custom field.</span></span>
   2.  <span data-ttu-id="54b86-171">Образец запроса:`Event | where Source == "SRS-App" and EventID == 2000`</span><span class="sxs-lookup"><span data-stu-id="54b86-171">Sample query: `Event | where Source == "SRS-App" and EventID == 2000`</span></span>

3. <span data-ttu-id="54b86-172">Выберите одну из записей, нажмите кнопку слева и запустите Мастер извлечения полей.</span><span class="sxs-lookup"><span data-stu-id="54b86-172">Select one of the records, select the button to the left, and start the field extraction wizard.</span></span>
4. <span data-ttu-id="54b86-173">Выделим данные, которые вы хотите извлечь из Рендереддескриптион, и укажите название поля.</span><span class="sxs-lookup"><span data-stu-id="54b86-173">Highlight the data you’d like to extract from the RenderedDescription and provide a Field Title.</span></span> <span data-ttu-id="54b86-174">Имена полей, которые следует использовать, приведены в таблице 1.</span><span class="sxs-lookup"><span data-stu-id="54b86-174">The field names that you should use are provided in Table 1.</span></span>

   <span data-ttu-id="54b86-175">![Определение настраиваемого поля](../media/Deploy-Azure-Monitor-4.png "Определение настраиваемого поля")</span><span class="sxs-lookup"><span data-stu-id="54b86-175">![Custom field definition](../media/Deploy-Azure-Monitor-4.png "Custom field definition")</span></span>

5. <span data-ttu-id="54b86-176">Используйте сопоставления, показанные в *таблице 1*.</span><span class="sxs-lookup"><span data-stu-id="54b86-176">Use the mappings shown in *Table 1*.</span></span> <span data-ttu-id="54b86-177">После того как вы определите новое \*\* \_\*\* поле, в службе аналитики журнала будет автоматически добавлена строка CF.</span><span class="sxs-lookup"><span data-stu-id="54b86-177">Log Analytics will automatically append the **\_CF** string when you define the new field.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="54b86-178">Помните, что в полях JSON и Analytics журнала учитывается регистр.</span><span class="sxs-lookup"><span data-stu-id="54b86-178">Remember that all JSON and Log Analytics fields are case-sensitive.</span></span>
> 
> <span data-ttu-id="54b86-179">Обратите внимание на запросы, необходимые для каждого настраиваемого поля в приведенной ниже таблице.</span><span class="sxs-lookup"><span data-stu-id="54b86-179">Pay attention to the queries required for each custom field in the table below.</span></span> <span data-ttu-id="54b86-180">Для того чтобы успешно извлекать пользовательские значения полей, необходимо использовать правильные запросы для службы анализа журнала.</span><span class="sxs-lookup"><span data-stu-id="54b86-180">You need to use the correct queries for Log Analytics to successfully extract custom field values.</span></span>
> 
 <span data-ttu-id="54b86-181">![Определение настраиваемого поля](../media/Deploy-Azure-Monitor-5.png "Определение настраиваемого поля")</span><span class="sxs-lookup"><span data-stu-id="54b86-181">![Custom field definition](../media/Deploy-Azure-Monitor-5.png "Custom field definition")</span></span>

<span data-ttu-id="54b86-182">**Таблица 1**</span><span class="sxs-lookup"><span data-stu-id="54b86-182">**Table 1**</span></span>

| <span data-ttu-id="54b86-183">**Поле JSON**</span><span class="sxs-lookup"><span data-stu-id="54b86-183">**JSON field**</span></span>                   | <span data-ttu-id="54b86-184">**Настраиваемое поле "анализ журнала"**</span><span class="sxs-lookup"><span data-stu-id="54b86-184">**Log Analytics custom field**</span></span> | <span data-ttu-id="54b86-185">**Идентификатор события**</span><span class="sxs-lookup"><span data-stu-id="54b86-185">**Event ID**</span></span> | <span data-ttu-id="54b86-186">**Запрос, используемый для извлечения**</span><span class="sxs-lookup"><span data-stu-id="54b86-186">**Query to use with the extraction**</span></span>                   |
|:---------------------------------|:-------------------------------|:-------------|:-------------------------------------------------------|
| <span data-ttu-id="54b86-187">Описание</span><span class="sxs-lookup"><span data-stu-id="54b86-187">Description</span></span>                      | <span data-ttu-id="54b86-188">срсевентдескриптион</span><span class="sxs-lookup"><span data-stu-id="54b86-188">SRSEventDescription</span></span>         | <span data-ttu-id="54b86-189">**2000**</span><span class="sxs-lookup"><span data-stu-id="54b86-189">**2000**</span></span>     | <span data-ttu-id="54b86-190">Событие \| , в котором Source = = "SRS-App" и EventID = = 2000</span><span class="sxs-lookup"><span data-stu-id="54b86-190">Event \| where Source == "SRS-App" and EventID == 2000</span></span> |
| <span data-ttu-id="54b86-191">ResourceState</span><span class="sxs-lookup"><span data-stu-id="54b86-191">ResourceState</span></span>                    | <span data-ttu-id="54b86-192">срсресаурцестате</span><span class="sxs-lookup"><span data-stu-id="54b86-192">SRSResourceState</span></span>            | <span data-ttu-id="54b86-193">**2000**</span><span class="sxs-lookup"><span data-stu-id="54b86-193">**2000**</span></span>     | <span data-ttu-id="54b86-194">Событие \| , в котором Source = = "SRS-App" и EventID = = 2000</span><span class="sxs-lookup"><span data-stu-id="54b86-194">Event \| where Source == "SRS-App" and EventID == 2000</span></span> |
| <span data-ttu-id="54b86-195">OperationName</span><span class="sxs-lookup"><span data-stu-id="54b86-195">OperationName</span></span>                    | <span data-ttu-id="54b86-196">срсоператионнаме</span><span class="sxs-lookup"><span data-stu-id="54b86-196">SRSOperationName</span></span>            | <span data-ttu-id="54b86-197">**2000**</span><span class="sxs-lookup"><span data-stu-id="54b86-197">**2000**</span></span>     | <span data-ttu-id="54b86-198">Событие \| , в котором Source = = "SRS-App" и EventID = = 2000</span><span class="sxs-lookup"><span data-stu-id="54b86-198">Event \| where Source == "SRS-App" and EventID == 2000</span></span> |
| <span data-ttu-id="54b86-199">OperationResult</span><span class="sxs-lookup"><span data-stu-id="54b86-199">OperationResult</span></span>                  | <span data-ttu-id="54b86-200">срсоператионресулт</span><span class="sxs-lookup"><span data-stu-id="54b86-200">SRSOperationResult</span></span>          | <span data-ttu-id="54b86-201">**2000**</span><span class="sxs-lookup"><span data-stu-id="54b86-201">**2000**</span></span>     | <span data-ttu-id="54b86-202">Событие \| , в котором Source = = "SRS-App" и EventID = = 2000</span><span class="sxs-lookup"><span data-stu-id="54b86-202">Event \| where Source == "SRS-App" and EventID == 2000</span></span> |
| <span data-ttu-id="54b86-203">OS</span><span class="sxs-lookup"><span data-stu-id="54b86-203">OS</span></span>                               | <span data-ttu-id="54b86-204">срсосверсион</span><span class="sxs-lookup"><span data-stu-id="54b86-204">SRSOSVersion</span></span>                | <span data-ttu-id="54b86-205">**2000**</span><span class="sxs-lookup"><span data-stu-id="54b86-205">**2000**</span></span>     | <span data-ttu-id="54b86-206">Событие \| , в котором Source = = "SRS-App" и EventID = = 2000</span><span class="sxs-lookup"><span data-stu-id="54b86-206">Event \| where Source == "SRS-App" and EventID == 2000</span></span> |
| <span data-ttu-id="54b86-207">Версия ОС</span><span class="sxs-lookup"><span data-stu-id="54b86-207">OSVersion</span></span>                        | <span data-ttu-id="54b86-208">срсослонгверсион</span><span class="sxs-lookup"><span data-stu-id="54b86-208">SRSOSLongVersion</span></span>            | <span data-ttu-id="54b86-209">**2000**</span><span class="sxs-lookup"><span data-stu-id="54b86-209">**2000**</span></span>     | <span data-ttu-id="54b86-210">Событие \| , в котором Source = = "SRS-App" и EventID = = 2000</span><span class="sxs-lookup"><span data-stu-id="54b86-210">Event \| where Source == "SRS-App" and EventID == 2000</span></span> |
| <span data-ttu-id="54b86-211">Alias</span><span class="sxs-lookup"><span data-stu-id="54b86-211">Alias</span></span>                            | <span data-ttu-id="54b86-212">срсалиас</span><span class="sxs-lookup"><span data-stu-id="54b86-212">SRSAlias</span></span>                    | <span data-ttu-id="54b86-213">**2000**</span><span class="sxs-lookup"><span data-stu-id="54b86-213">**2000**</span></span>     | <span data-ttu-id="54b86-214">Событие \| , в котором Source = = "SRS-App" и EventID = = 2000</span><span class="sxs-lookup"><span data-stu-id="54b86-214">Event \| where Source == "SRS-App" and EventID == 2000</span></span> |
| <span data-ttu-id="54b86-215">DisplayName</span><span class="sxs-lookup"><span data-stu-id="54b86-215">DisplayName</span></span>                      | <span data-ttu-id="54b86-216">срсдисплайнаме</span><span class="sxs-lookup"><span data-stu-id="54b86-216">SRSDisplayName</span></span>              | <span data-ttu-id="54b86-217">**2000**</span><span class="sxs-lookup"><span data-stu-id="54b86-217">**2000**</span></span>     | <span data-ttu-id="54b86-218">Событие \| , в котором Source = = "SRS-App" и EventID = = 2000</span><span class="sxs-lookup"><span data-stu-id="54b86-218">Event \| where Source == "SRS-App" and EventID == 2000</span></span> |
| <span data-ttu-id="54b86-219">AppVersion</span><span class="sxs-lookup"><span data-stu-id="54b86-219">AppVersion</span></span>                       | <span data-ttu-id="54b86-220">срсаппверсион</span><span class="sxs-lookup"><span data-stu-id="54b86-220">SRSAppVersion</span></span>               | <span data-ttu-id="54b86-221">**2000**</span><span class="sxs-lookup"><span data-stu-id="54b86-221">**2000**</span></span>     | <span data-ttu-id="54b86-222">Событие \| , в котором Source = = "SRS-App" и EventID = = 2000</span><span class="sxs-lookup"><span data-stu-id="54b86-222">Event \| where Source == "SRS-App" and EventID == 2000</span></span> |
| <span data-ttu-id="54b86-223">IPv4Address</span><span class="sxs-lookup"><span data-stu-id="54b86-223">IPv4Address</span></span>                      | <span data-ttu-id="54b86-224">SRSIPv4Address</span><span class="sxs-lookup"><span data-stu-id="54b86-224">SRSIPv4Address</span></span>              | <span data-ttu-id="54b86-225">**2000**</span><span class="sxs-lookup"><span data-stu-id="54b86-225">**2000**</span></span>     | <span data-ttu-id="54b86-226">Событие \| , в котором Source = = "SRS-App" и EventID = = 2000</span><span class="sxs-lookup"><span data-stu-id="54b86-226">Event \| where Source == "SRS-App" and EventID == 2000</span></span> |
| <span data-ttu-id="54b86-227">IPv6Address</span><span class="sxs-lookup"><span data-stu-id="54b86-227">IPv6Address</span></span>                      | <span data-ttu-id="54b86-228">SRSIPv6Address</span><span class="sxs-lookup"><span data-stu-id="54b86-228">SRSIPv6Address</span></span>              | <span data-ttu-id="54b86-229">**2000**</span><span class="sxs-lookup"><span data-stu-id="54b86-229">**2000**</span></span>     | <span data-ttu-id="54b86-230">Событие \| , в котором Source = = "SRS-App" и EventID = = 2000</span><span class="sxs-lookup"><span data-stu-id="54b86-230">Event \| where Source == "SRS-App" and EventID == 2000</span></span> |
| <span data-ttu-id="54b86-231">Состояние микрофона конференции</span><span class="sxs-lookup"><span data-stu-id="54b86-231">Conference Microphone status</span></span>     | <span data-ttu-id="54b86-232">срсконфмикрофонестатус</span><span class="sxs-lookup"><span data-stu-id="54b86-232">SRSConfMicrophoneStatus</span></span>     | <span data-ttu-id="54b86-233">**3001**</span><span class="sxs-lookup"><span data-stu-id="54b86-233">**3001**</span></span>     | <span data-ttu-id="54b86-234">Событие \| , в котором Source = = "SRS-App" и EventID = = 3001</span><span class="sxs-lookup"><span data-stu-id="54b86-234">Event \| where Source == "SRS-App" and EventID == 3001</span></span> |
| <span data-ttu-id="54b86-235">Состояние динамика Конференции</span><span class="sxs-lookup"><span data-stu-id="54b86-235">Conference Speaker status</span></span>        | <span data-ttu-id="54b86-236">срсконфспеакерстатус</span><span class="sxs-lookup"><span data-stu-id="54b86-236">SRSConfSpeakerStatus</span></span>        | <span data-ttu-id="54b86-237">**3001**</span><span class="sxs-lookup"><span data-stu-id="54b86-237">**3001**</span></span>     | <span data-ttu-id="54b86-238">Событие \| , в котором Source = = "SRS-App" и EventID = = 3001</span><span class="sxs-lookup"><span data-stu-id="54b86-238">Event \| where Source == "SRS-App" and EventID == 3001</span></span> |
| <span data-ttu-id="54b86-239">Состояние динамика по умолчанию</span><span class="sxs-lookup"><span data-stu-id="54b86-239">Default Speaker status</span></span>           | <span data-ttu-id="54b86-240">срсдефаултспеакерстатус</span><span class="sxs-lookup"><span data-stu-id="54b86-240">SRSDefaultSpeakerStatus</span></span>     | <span data-ttu-id="54b86-241">**3001**</span><span class="sxs-lookup"><span data-stu-id="54b86-241">**3001**</span></span>     | <span data-ttu-id="54b86-242">Событие \| , в котором Source = = "SRS-App" и EventID = = 3001</span><span class="sxs-lookup"><span data-stu-id="54b86-242">Event \| where Source == "SRS-App" and EventID == 3001</span></span> |
| <span data-ttu-id="54b86-243">Состояние камеры</span><span class="sxs-lookup"><span data-stu-id="54b86-243">Camera status</span></span>                    | <span data-ttu-id="54b86-244">срскамерастатус</span><span class="sxs-lookup"><span data-stu-id="54b86-244">SRSCameraStatus</span></span>             | <span data-ttu-id="54b86-245">**3001**</span><span class="sxs-lookup"><span data-stu-id="54b86-245">**3001**</span></span>     | <span data-ttu-id="54b86-246">Событие \| , в котором Source = = "SRS-App" и EventID = = 3001</span><span class="sxs-lookup"><span data-stu-id="54b86-246">Event \| where Source == "SRS-App" and EventID == 3001</span></span> |
| <span data-ttu-id="54b86-247">Состояние отображения на передней стороне комнаты</span><span class="sxs-lookup"><span data-stu-id="54b86-247">Front of Room Display status</span></span>     | <span data-ttu-id="54b86-248">срсфордстатус</span><span class="sxs-lookup"><span data-stu-id="54b86-248">SRSFORDStatus</span></span>               | <span data-ttu-id="54b86-249">**3001**</span><span class="sxs-lookup"><span data-stu-id="54b86-249">**3001**</span></span>     | <span data-ttu-id="54b86-250">Событие \| , в котором Source = = "SRS-App" и EventID = = 3001</span><span class="sxs-lookup"><span data-stu-id="54b86-250">Event \| where Source == "SRS-App" and EventID == 3001</span></span> |
| <span data-ttu-id="54b86-251">Состояние датчика движения</span><span class="sxs-lookup"><span data-stu-id="54b86-251">Motion Sensor status</span></span>             | <span data-ttu-id="54b86-252">срсмотионсенсорстатус</span><span class="sxs-lookup"><span data-stu-id="54b86-252">SRSMotionSensorStatus</span></span>       | <span data-ttu-id="54b86-253">**3001**</span><span class="sxs-lookup"><span data-stu-id="54b86-253">**3001**</span></span>     | <span data-ttu-id="54b86-254">Событие \| , в котором Source = = "SRS-App" и EventID = = 3001</span><span class="sxs-lookup"><span data-stu-id="54b86-254">Event \| where Source == "SRS-App" and EventID == 3001</span></span> |
| <span data-ttu-id="54b86-255">Состояние приема HDMI</span><span class="sxs-lookup"><span data-stu-id="54b86-255">HDMI Ingest status</span></span>               | <span data-ttu-id="54b86-256">сршдмиинжестстатус</span><span class="sxs-lookup"><span data-stu-id="54b86-256">SRSHDMIIngestStatus</span></span>         | <span data-ttu-id="54b86-257">**3001**</span><span class="sxs-lookup"><span data-stu-id="54b86-257">**3001**</span></span>     | <span data-ttu-id="54b86-258">Событие \| , в котором Source = = "SRS-App" и EventID = = 3001</span><span class="sxs-lookup"><span data-stu-id="54b86-258">Event \| where Source == "SRS-App" and EventID == 3001</span></span> |


## <a name="define-the-microsoft-teams-rooms-views-in-log-analytics"></a><span data-ttu-id="54b86-259">Определение представлений комнат Microsoft Teams в службе анализа журналов</span><span class="sxs-lookup"><span data-stu-id="54b86-259">Define the Microsoft Teams Rooms views in Log Analytics</span></span>
<span data-ttu-id="54b86-260"><a name="Define_Views"> </a></span><span class="sxs-lookup"><span data-stu-id="54b86-260"></span></span>

<span data-ttu-id="54b86-261">После сбора данных и сопоставления настраиваемых полей можно использовать конструктор представлений для разработки панели мониторинга с различными плитками для наблюдения за событиями комнат Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="54b86-261">After data is collected and custom fields are mapped, you can use View Designer to develop a dashboard containing various tiles to monitor Microsoft Teams Rooms events.</span></span> <span data-ttu-id="54b86-262">Используйте конструктор представлений для создания следующих плиток.</span><span class="sxs-lookup"><span data-stu-id="54b86-262">Use View Designer to create the following tiles.</span></span> <span data-ttu-id="54b86-263">Дополнительные сведения можно найти [в разделе Создание настраиваемых представлений с помощью конструктора представлений в службе анализа журналов](https://docs.microsoft.com/azure/azure-monitor/platform/view-designer)</span><span class="sxs-lookup"><span data-stu-id="54b86-263">For more information, see [Create custom views by using View Designer in Log Analytics](https://docs.microsoft.com/azure/azure-monitor/platform/view-designer)</span></span>

> [!NOTE]
> <span data-ttu-id="54b86-264">Предыдущие шаги в этом руководстве должны быть выполнены для правильной работы плиток панели мониторинга.</span><span class="sxs-lookup"><span data-stu-id="54b86-264">Previous steps in this guide should have been completed for the dashboard tiles to work properly.</span></span>

### <a name="create-a-microsoft-teams-rooms-dashboard-by-using-the-import-method"></a><span data-ttu-id="54b86-265">Создание панели мониторинга Microsoft Teams с помощью метода импорта</span><span class="sxs-lookup"><span data-stu-id="54b86-265">Create a Microsoft Teams Rooms dashboard by using the import method</span></span>

<span data-ttu-id="54b86-266">Вы можете импортировать панель мониторинга Microsoft Teams, чтобы быстро начать наблюдать за вашими устройствами.</span><span class="sxs-lookup"><span data-stu-id="54b86-266">You can import an Microsoft Teams Rooms dashboard and start monitoring your devices quickly.</span></span> <span data-ttu-id="54b86-267">Чтобы импортировать панель мониторинга, выполните указанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="54b86-267">Take the following steps to import the dashboard:</span></span>

1.  <span data-ttu-id="54b86-268">Скачайте файл панели мониторинга [SkypeRoomSystems_v2. омсвиев](https://go.microsoft.com/fwlink/?linkid=835675) .</span><span class="sxs-lookup"><span data-stu-id="54b86-268">Get the [SkypeRoomSystems_v2.omsview](https://go.microsoft.com/fwlink/?linkid=835675) dashboard file.</span></span>
2.  <span data-ttu-id="54b86-269">Войдите на [портал Microsoft Azure](https://portal.azure.com) и выберите рабочую область в службе аналитики журнала.</span><span class="sxs-lookup"><span data-stu-id="54b86-269">Sign in to the [Microsoft Azure portal](https://portal.azure.com) and go to Log Analytics and select your workspace.</span></span>
3.  <span data-ttu-id="54b86-270">Откройте **Конструктор представлений**.</span><span class="sxs-lookup"><span data-stu-id="54b86-270">Open **View Designer**.</span></span>
4.  <span data-ttu-id="54b86-271">Нажмите кнопку **Импорт**, а затем выберите файл **SkypeRoomSystems_v2. омсвиев** .</span><span class="sxs-lookup"><span data-stu-id="54b86-271">Select **Import**, and then select the **SkypeRoomSystems_v2.omsview** file.</span></span>
5.  <span data-ttu-id="54b86-272">Нажмите кнопку **сохранить**.</span><span class="sxs-lookup"><span data-stu-id="54b86-272">Select **Save**.</span></span>

### <a name="create-a-microsoft-teams-rooms-dashboard-manually"></a><span data-ttu-id="54b86-273">Создание панели мониторинга Microsoft Teams в помещениях вручную</span><span class="sxs-lookup"><span data-stu-id="54b86-273">Create a Microsoft Teams Rooms dashboard manually</span></span>

<span data-ttu-id="54b86-274">Кроме того, вы можете создать собственную панель мониторинга и добавить только плитки, которые вы хотите отслеживать.</span><span class="sxs-lookup"><span data-stu-id="54b86-274">Alternatively, you can create your own dashboard and add only the tiles that you wish to monitor.</span></span>

#### <a name="configure-the-overview-tile"></a><span data-ttu-id="54b86-275">Настройка плитки обзора</span><span class="sxs-lookup"><span data-stu-id="54b86-275">Configure the Overview Tile</span></span>

1.  <span data-ttu-id="54b86-276">Откройте **Конструктор представлений**.</span><span class="sxs-lookup"><span data-stu-id="54b86-276">Open **View Designer**.</span></span>
2.  <span data-ttu-id="54b86-277">Щелкните **плитку обзор**и выберите в коллекции **два числа** .</span><span class="sxs-lookup"><span data-stu-id="54b86-277">Select **Overview Tile**, and then select **Two numbers** from the gallery.</span></span>
3.  <span data-ttu-id="54b86-278">Назовите плитку " **комнаты Microsoft Teams**".</span><span class="sxs-lookup"><span data-stu-id="54b86-278">Name the tile **Microsoft Teams Rooms**.</span></span>
4.  <span data-ttu-id="54b86-279">Определите **первый фрагмент**:</span><span class="sxs-lookup"><span data-stu-id="54b86-279">Define the **First Tile**:</span></span><br>
    <span data-ttu-id="54b86-280">**Условные обозначения:** Устройства, которые отправили пакеты пульса хотя бы один раз в течение прошлого месяца</span><span class="sxs-lookup"><span data-stu-id="54b86-280">**Legend:** Devices that sent a heartbeat at least once within the last month</span></span><br>
    <span data-ttu-id="54b86-281">**Запрос:**```Event | where EventLog == "Skype Room System" and TimeGenerated > ago(30d) | summarize TotalSRSDevices = dcount(Computer)```</span><span class="sxs-lookup"><span data-stu-id="54b86-281">**Query:** ```Event | where EventLog == "Skype Room System" and TimeGenerated > ago(30d) | summarize TotalSRSDevices = dcount(Computer)```</span></span>
5.  <span data-ttu-id="54b86-282">Определите **вторую плитку**.</span><span class="sxs-lookup"><span data-stu-id="54b86-282">Define the **Second Tile**:</span></span><br>
    <span data-ttu-id="54b86-283">**Условные обозначения:** Активные устройства, которые отправили пульс за последний час</span><span class="sxs-lookup"><span data-stu-id="54b86-283">**Legend:** Active devices that sent a heartbeat within the last hour</span></span><br>
    <span data-ttu-id="54b86-284">**Запрос:**```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" and TimeGenerated > ago(1h) | summarize TotalSRSDevices = dcount(Computer)```</span><span class="sxs-lookup"><span data-stu-id="54b86-284">**Query:** ```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" and TimeGenerated > ago(1h) | summarize TotalSRSDevices = dcount(Computer)```</span></span>
6.  <span data-ttu-id="54b86-285">Нажмите кнопку **Применить**.</span><span class="sxs-lookup"><span data-stu-id="54b86-285">Select **Apply**.</span></span>

### <a name="create-a-tile-that-displays-active-devices"></a><span data-ttu-id="54b86-286">Создание плитки, отображающей активные устройства</span><span class="sxs-lookup"><span data-stu-id="54b86-286">Create a tile that displays active devices</span></span>

1.  <span data-ttu-id="54b86-287">Нажмите кнопку **Просмотр панели мониторинга** , чтобы начать добавление плиток.</span><span class="sxs-lookup"><span data-stu-id="54b86-287">Select **View Dashboard** to start adding your tiles.</span></span>
2.  <span data-ttu-id="54b86-288">Выберите **число & списка** из коллекции</span><span class="sxs-lookup"><span data-stu-id="54b86-288">Select **Number & list** from the gallery</span></span>
3.  <span data-ttu-id="54b86-289">Определите **Общие** свойства:</span><span class="sxs-lookup"><span data-stu-id="54b86-289">Define the **General** properties:</span></span><br>
    <span data-ttu-id="54b86-290">**Название группы:** Состояние пульса</span><span class="sxs-lookup"><span data-stu-id="54b86-290">**Group Title:** Heartbeat Status</span></span><br>
    <span data-ttu-id="54b86-291">**Новая Группа:** Выбрал</span><span class="sxs-lookup"><span data-stu-id="54b86-291">**New Group:** Selected</span></span>
4.  <span data-ttu-id="54b86-292">Определите свойства **плитки** .</span><span class="sxs-lookup"><span data-stu-id="54b86-292">Define the **Tile** properties:</span></span><br>
    <span data-ttu-id="54b86-293">**Условные обозначения:** Активные устройства (пакеты пульса, отправленные за последние 20 минут)</span><span class="sxs-lookup"><span data-stu-id="54b86-293">**Legend:** Active devices (heartbeat sent in the last 20 minutes)</span></span><br>
    <span data-ttu-id="54b86-294">\*\*Запрос для плитки: \*\* ```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" and TimeGenerated > ago(20m) | summarize AggregatedValue = count() by Computer | count```</span><span class="sxs-lookup"><span data-stu-id="54b86-294">**Tile Query:** ```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" and TimeGenerated > ago(20m) | summarize AggregatedValue = count() by Computer | count```</span></span>
5.  <span data-ttu-id="54b86-295">Определите свойства **списка** .</span><span class="sxs-lookup"><span data-stu-id="54b86-295">Define the **List** properties:</span></span><br>
    <span data-ttu-id="54b86-296">**Запрос списка:**```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" and TimeGenerated > ago(20m) | summarize TimeGenerated = max(TimeGenerated) by Computer | order by TimeGenerated```</span><span class="sxs-lookup"><span data-stu-id="54b86-296">**List Query:** ```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" and TimeGenerated > ago(20m) | summarize TimeGenerated = max(TimeGenerated) by Computer | order by TimeGenerated```</span></span>
6.  <span data-ttu-id="54b86-297">Определение **заголовков столбцов**:</span><span class="sxs-lookup"><span data-stu-id="54b86-297">Define **Column Titles**:</span></span><br>
    <span data-ttu-id="54b86-298">**Name (имя):** Имя компьютера</span><span class="sxs-lookup"><span data-stu-id="54b86-298">**Name:** Computer Name</span></span><br>
    <span data-ttu-id="54b86-299">**Value (значение):** Последний периодических сигналов</span><span class="sxs-lookup"><span data-stu-id="54b86-299">**Value:** Last Heartbeat</span></span>
7.  <span data-ttu-id="54b86-300">Определение **запроса навигации**.</span><span class="sxs-lookup"><span data-stu-id="54b86-300">Define **Navigation Query**.</span></span><br>
    ```search {selected item} | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize arg_max(TimeGenerated, *) by Computer | project TimeGenerated, Computer, SRSAlias_CF, SRSAppVersion_CF, SRSOSVersion_CF, SRSOSLongVersion_CF, SRSIPv4Address_CF, SRSIPv6Address_CF, SRSOperationName_CF, SRSOperationResult_CF, SRSResourceState_CF, SRSEventDescription_CF```
8.  <span data-ttu-id="54b86-301">Нажмите кнопку **Применить**, а затем — **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="54b86-301">Select **Apply**, and then **Close**.</span></span>

### <a name="create-a-tile-that-displays-devices-that-have-connectivity-issues"></a><span data-ttu-id="54b86-302">Создание плитки, на которой отображаются устройства с неполадками подключения</span><span class="sxs-lookup"><span data-stu-id="54b86-302">Create a tile that displays devices that have connectivity issues</span></span>

1.  <span data-ttu-id="54b86-303">В коллекции выберите **число & список** и добавьте новую плитку.</span><span class="sxs-lookup"><span data-stu-id="54b86-303">Select **Number & list** from the gallery, and then add a new tile.</span></span>
2.  <span data-ttu-id="54b86-304">Определите **Общие** свойства:</span><span class="sxs-lookup"><span data-stu-id="54b86-304">Define the **General** properties:</span></span><br>
    <span data-ttu-id="54b86-305">**Название группы:** Оставьте пустым</span><span class="sxs-lookup"><span data-stu-id="54b86-305">**Group Title:** Leave empty</span></span><br>
    <span data-ttu-id="54b86-306">**Новая Группа:** Не выбрано</span><span class="sxs-lookup"><span data-stu-id="54b86-306">**New Group:** Not Selected</span></span>
3.  <span data-ttu-id="54b86-307">Определите свойства **плитки** .</span><span class="sxs-lookup"><span data-stu-id="54b86-307">Define the **Tile** properties:</span></span><br>
    <span data-ttu-id="54b86-308">**Условные обозначения:** Неактивные устройства (за последние 20 минут не отправлялись пакеты пульса)</span><span class="sxs-lookup"><span data-stu-id="54b86-308">**Legend:** Inactive Devices (no heartbeat message sent in the last 20 minutes)</span></span><br>
    <span data-ttu-id="54b86-309">\*\*Запрос для плитки: \*\* ```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize LastHB = max(TimeGenerated) by Computer | where LastHB < ago(20m) | count```</span><span class="sxs-lookup"><span data-stu-id="54b86-309">**Tile Query:** ```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize LastHB = max(TimeGenerated) by Computer | where LastHB < ago(20m) | count```</span></span>
4.  <span data-ttu-id="54b86-310">Определите свойства **списка** .</span><span class="sxs-lookup"><span data-stu-id="54b86-310">Define the **List** properties:</span></span><br>
    <span data-ttu-id="54b86-311">**Запрос списка:**```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize TimeGenerated = max(TimeGenerated) by Computer | where TimeGenerated < ago(20m) | order by TimeGenerated```</span><span class="sxs-lookup"><span data-stu-id="54b86-311">**List Query:** ```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize TimeGenerated = max(TimeGenerated) by Computer | where TimeGenerated < ago(20m) | order by TimeGenerated```</span></span>
5.  <span data-ttu-id="54b86-312">Определение **заголовков столбцов**:</span><span class="sxs-lookup"><span data-stu-id="54b86-312">Define **Column Titles**:</span></span><br>
    <span data-ttu-id="54b86-313">**Name (имя):** Имя компьютера</span><span class="sxs-lookup"><span data-stu-id="54b86-313">**Name:** Computer Name</span></span><br>
    <span data-ttu-id="54b86-314">**Value (значение):** Последний периодических сигналов</span><span class="sxs-lookup"><span data-stu-id="54b86-314">**Value:** Last Heartbeat</span></span>
6.  <span data-ttu-id="54b86-315">Определение **запроса навигации**:</span><span class="sxs-lookup"><span data-stu-id="54b86-315">Define **Navigation Query**:</span></span><br>
    ```search {selected item} | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize arg_max(TimeGenerated, *) by Computer | project TimeGenerated, Computer, SRSAlias_CF, SRSAppVersion_CF, SRSOSVersion_CF, SRSOSLongVersion_CF, SRSIPv4Address_CF, SRSIPv6Address_CF, SRSOperationName_CF, SRSOperationResult_CF, SRSResourceState_CF, SRSEventDescription_CF```
7.  <span data-ttu-id="54b86-316">Нажмите кнопку **Применить**, а затем — **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="54b86-316">Select **Apply**, and then **Close**.</span></span>

### <a name="create-a-tile-that-displays-devices-that-have-a-hardware-error"></a><span data-ttu-id="54b86-317">Создание плитки, на которой выводятся устройства с аппаратной ошибкой</span><span class="sxs-lookup"><span data-stu-id="54b86-317">Create a tile that displays devices that have a hardware error</span></span>

1.  <span data-ttu-id="54b86-318">В коллекции выберите **число & список** и добавьте новую плитку.</span><span class="sxs-lookup"><span data-stu-id="54b86-318">Select **Number & list** from the gallery, and then add a new tile.</span></span>
2.  <span data-ttu-id="54b86-319">Определите **Общие** свойства:</span><span class="sxs-lookup"><span data-stu-id="54b86-319">Define the **General** properties:</span></span><br>
    <span data-ttu-id="54b86-320">**Название группы:** Состояние оборудования</span><span class="sxs-lookup"><span data-stu-id="54b86-320">**Group Title:** Hardware Status</span></span><br>
    <span data-ttu-id="54b86-321">**Новая Группа:** Выбрал</span><span class="sxs-lookup"><span data-stu-id="54b86-321">**New Group:** Selected</span></span>
3.  <span data-ttu-id="54b86-322">Определите свойства **плитки** .</span><span class="sxs-lookup"><span data-stu-id="54b86-322">Define the **Tile** properties:</span></span><br>
    <span data-ttu-id="54b86-323">**Условные обозначения:** Устройства, на которых произошла ошибка оборудования за последний час</span><span class="sxs-lookup"><span data-stu-id="54b86-323">**Legend:** Devices that experienced a hardware error in the last hour</span></span><br>
    <span data-ttu-id="54b86-324">\*\*Запрос для плитки: \*\* ```Event | where EventLog == "Skype Room System" and EventLevelName == "Error" and EventID == "3001" and TimeGenerated > ago(1h) | summarize AggregatedValue = count() by Computer | count```</span><span class="sxs-lookup"><span data-stu-id="54b86-324">**Tile Query:** ```Event | where EventLog == "Skype Room System" and EventLevelName == "Error" and EventID == "3001" and TimeGenerated > ago(1h) | summarize AggregatedValue = count() by Computer | count```</span></span>
4.  <span data-ttu-id="54b86-325">Определите свойства **списка** .</span><span class="sxs-lookup"><span data-stu-id="54b86-325">Define the **List** properties:</span></span><br>
    <span data-ttu-id="54b86-326">**Запрос списка:**```Event | where EventLog == "Skype Room System" and EventLevelName == "Error" and EventID == "3001" and TimeGenerated > ago(1h) | summarize TimeGenerated = max(TimeGenerated) by Computer | order by TimeGenerated```</span><span class="sxs-lookup"><span data-stu-id="54b86-326">**List Query:** ```Event | where EventLog == "Skype Room System" and EventLevelName == "Error" and EventID == "3001" and TimeGenerated > ago(1h) | summarize TimeGenerated = max(TimeGenerated) by Computer | order by TimeGenerated```</span></span>
5.  <span data-ttu-id="54b86-327">Определение **заголовков столбцов**:</span><span class="sxs-lookup"><span data-stu-id="54b86-327">Define **Column Titles**:</span></span><br>
    <span data-ttu-id="54b86-328">**Name (имя):** Имя компьютера</span><span class="sxs-lookup"><span data-stu-id="54b86-328">**Name:** Computer Name</span></span><br>
    <span data-ttu-id="54b86-329">**Value (значение):** Последняя ошибка</span><span class="sxs-lookup"><span data-stu-id="54b86-329">**Value:** Last Error</span></span>
6.  <span data-ttu-id="54b86-330">Определение **запроса навигации**:</span><span class="sxs-lookup"><span data-stu-id="54b86-330">Define **Navigation Query**:</span></span><br>
    ```search {selected item} | where EventLog == "Skype Room System" and EventID == 3001 and EventLevelName == "Error" | summarize arg_max(TimeGenerated, *) by Computer | project TimeGenerated, Computer, SRSAlias_CF, SRSAppVersion_CF, SRSOSVersion_CF, SRSOSLongVersion_CF, SRSIPv4Address_CF, SRSIPv6Address_CF, SRSOperationName_CF, SRSOperationResult_CF, SRSResourceState_CF, SRSConfMicrophoneStatus_CF, SRSConfSpeakerStatus_CF, SRSDefaultSpeakerStatus_CF, SRSCameraStatus_CF, SRSFORDStatus_CF, SRSMotionSensorStatus_CF, SRSHDMIIngestStatus_CF, SRSEventDescription_CF | sort by TimeGenerated desc```
7.  <span data-ttu-id="54b86-331">Нажмите кнопку **Применить**, а затем — **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="54b86-331">Select **Apply**, and then **Close**.</span></span>

### <a name="create-a-tile-that-displays-microsoft-teams-rooms-operating-system-versions"></a><span data-ttu-id="54b86-332">Создание плитки, отображающей операционные системы комнат Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="54b86-332">Create a tile that displays Microsoft Teams Rooms Operating System versions</span></span>

1.  <span data-ttu-id="54b86-333">Выберите в коллекции **& список "кольца** ", а затем добавьте новую плитку.</span><span class="sxs-lookup"><span data-stu-id="54b86-333">Select **Donut & list** from the gallery, and then add a new tile.</span></span>
2.  <span data-ttu-id="54b86-334">Определите **Общие** свойства:</span><span class="sxs-lookup"><span data-stu-id="54b86-334">Define the **General** properties:</span></span><br>
    <span data-ttu-id="54b86-335">**Название группы:** Сведения об операционной системе</span><span class="sxs-lookup"><span data-stu-id="54b86-335">**Group Title:** Operating System details</span></span><br>
    <span data-ttu-id="54b86-336">**Новая Группа:** Выбрал</span><span class="sxs-lookup"><span data-stu-id="54b86-336">**New Group:** Selected</span></span>
3.  <span data-ttu-id="54b86-337">Определите свойства **верхнего колонтитула** .</span><span class="sxs-lookup"><span data-stu-id="54b86-337">Define the **Header** properties:</span></span><br>
    <span data-ttu-id="54b86-338">**Название:** Версии операционной системы</span><span class="sxs-lookup"><span data-stu-id="54b86-338">**Title:** Operating System versions</span></span><br>
    <span data-ttu-id="54b86-339">**Подзаголовок:** Устройства с определенными версиями ОС</span><span class="sxs-lookup"><span data-stu-id="54b86-339">**Subtitle:** Devices running specific OS versions</span></span>
4.  <span data-ttu-id="54b86-340">Определите свойства **кольца** :</span><span class="sxs-lookup"><span data-stu-id="54b86-340">Define the **Donut** properties:</span></span><br>
    <span data-ttu-id="54b86-341">**Запрос:**```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize OS_Version = max(SRSOSLongVersion_CF) by Computer | summarize AggregatedValue = count() by OS_Version | sort by OS_Version asc```</span><span class="sxs-lookup"><span data-stu-id="54b86-341">**Query:** ```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize OS_Version = max(SRSOSLongVersion_CF) by Computer | summarize AggregatedValue = count() by OS_Version | sort by OS_Version asc```</span></span><br>
    <span data-ttu-id="54b86-342">**Выровнять текст по центру:** Устройств</span><span class="sxs-lookup"><span data-stu-id="54b86-342">**Center Text:** Devices</span></span><br>
    <span data-ttu-id="54b86-343">**Операция:** Сумма</span><span class="sxs-lookup"><span data-stu-id="54b86-343">**Operation:** Sum</span></span>
5.  <span data-ttu-id="54b86-344">Определите свойства **списка** .</span><span class="sxs-lookup"><span data-stu-id="54b86-344">Define the **List** properties.</span></span><br>
    <span data-ttu-id="54b86-345">**Запрос списка:**```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize SRSOSLongVersion_CF = max(SRSOSLongVersion_CF) by Computer | sort by Computer asc```</span><span class="sxs-lookup"><span data-stu-id="54b86-345">**List Query:** ```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize SRSOSLongVersion_CF = max(SRSOSLongVersion_CF) by Computer | sort by Computer asc```</span></span><br>
    <span data-ttu-id="54b86-346">**Скрыть диаграмму:** Выбрал</span><span class="sxs-lookup"><span data-stu-id="54b86-346">**Hide Graph:** Selected</span></span><br>
    <span data-ttu-id="54b86-347">**Включите спарклайны:** Не выбрано</span><span class="sxs-lookup"><span data-stu-id="54b86-347">**Enable Sparklines:** Not selected</span></span>
6.  <span data-ttu-id="54b86-348">Определение **заголовков столбцов**.</span><span class="sxs-lookup"><span data-stu-id="54b86-348">Define **Column Titles**.</span></span><br>
    <span data-ttu-id="54b86-349">**Name (имя):** Имя компьютера</span><span class="sxs-lookup"><span data-stu-id="54b86-349">**Name:** Computer Name</span></span><br>
    <span data-ttu-id="54b86-350">**Value (значение):** Оставьте пустым</span><span class="sxs-lookup"><span data-stu-id="54b86-350">**Value:** Leave Empty</span></span>
7.  <span data-ttu-id="54b86-351">Определение **запроса навигации**.</span><span class="sxs-lookup"><span data-stu-id="54b86-351">Define **Navigation Query**.</span></span><br>
    ```search {selected item} | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize arg_max(TimeGenerated, *) by Computer | project TimeGenerated, Computer, SRSDisplayName_CF, SRSAlias_CF, SRSAppVersion_CF, SRSOSVersion_CF, SRSOSLongVersion_CF, SRSIPv4Address_CF, SRSIPv6Address_CF, SRSOperationName_CF, SRSOperationResult_CF, SRSResourceState_CF, SRSEventDescription_CF```
8.  <span data-ttu-id="54b86-352">Нажмите кнопку **Применить** , а затем — **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="54b86-352">Select **Apply** and then **Close**.</span></span>

### <a name="create-a-tile-that-displays-microsoft-teams-rooms-application-versions"></a><span data-ttu-id="54b86-353">Создание плитки, отображающей версии приложений Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="54b86-353">Create a tile that displays Microsoft Teams Rooms application versions</span></span>

1.  <span data-ttu-id="54b86-354">Выберите в коллекции **& список "кольца** ", а затем добавьте новую плитку.</span><span class="sxs-lookup"><span data-stu-id="54b86-354">Select **Donut & list** from the gallery, and then add a new tile.</span></span>
2.  <span data-ttu-id="54b86-355">Определите **Общие** свойства:</span><span class="sxs-lookup"><span data-stu-id="54b86-355">Define the **General** properties:</span></span><br>
    <span data-ttu-id="54b86-356">**Название группы:** Сведения о приложениях в комнатах Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="54b86-356">**Group Title:** Microsoft Teams Rooms application details</span></span><br>
    <span data-ttu-id="54b86-357">**Новая Группа:** Выбрал</span><span class="sxs-lookup"><span data-stu-id="54b86-357">**New Group:** Selected</span></span>
3.  <span data-ttu-id="54b86-358">Определите свойства **верхнего колонтитула** .</span><span class="sxs-lookup"><span data-stu-id="54b86-358">Define the **Header** properties:</span></span><br>
    <span data-ttu-id="54b86-359">**Название:** Версии приложения</span><span class="sxs-lookup"><span data-stu-id="54b86-359">**Title:** Application versions</span></span><br>
    <span data-ttu-id="54b86-360">**Подзаголовок:** Устройства, на которых выполняются определенные версии приложений</span><span class="sxs-lookup"><span data-stu-id="54b86-360">**Subtitle:** Devices running specific application versions</span></span>
4.  <span data-ttu-id="54b86-361">Определите свойства **кольца** :</span><span class="sxs-lookup"><span data-stu-id="54b86-361">Define the **Donut** properties:</span></span><br>
    <span data-ttu-id="54b86-362">**Запрос:**```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize App_Version = max(SRSAppVersion_CF) by Computer | summarize AggregatedValue = count() by App_Version | sort by App_Version asc```</span><span class="sxs-lookup"><span data-stu-id="54b86-362">**Query:** ```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize App_Version = max(SRSAppVersion_CF) by Computer | summarize AggregatedValue = count() by App_Version | sort by App_Version asc```</span></span><br>
    <span data-ttu-id="54b86-363">**Выровнять текст по центру:** Устройств</span><span class="sxs-lookup"><span data-stu-id="54b86-363">**Center Text:** Devices</span></span><br>
    <span data-ttu-id="54b86-364">**Операция:** Сумма</span><span class="sxs-lookup"><span data-stu-id="54b86-364">**Operation:** Sum</span></span>
5.  <span data-ttu-id="54b86-365">Определите свойства **списка** .</span><span class="sxs-lookup"><span data-stu-id="54b86-365">Define the **List** properties.</span></span><br>
    <span data-ttu-id="54b86-366">**Запрос списка:**```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize SRSAppVersion_CF = max(SRSAppVersion_CF) by Computer | sort by Computer asc```</span><span class="sxs-lookup"><span data-stu-id="54b86-366">**List Query:** ```Event | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize SRSAppVersion_CF = max(SRSAppVersion_CF) by Computer | sort by Computer asc```</span></span><br>
    <span data-ttu-id="54b86-367">**Скрыть диаграмму:** Выбрал</span><span class="sxs-lookup"><span data-stu-id="54b86-367">**Hide Graph:** Selected</span></span><br>
    <span data-ttu-id="54b86-368">**Включите спарклайны:** Не выбрано</span><span class="sxs-lookup"><span data-stu-id="54b86-368">**Enable Sparklines:** Not selected</span></span>
6.  <span data-ttu-id="54b86-369">Определение **заголовков столбцов**.</span><span class="sxs-lookup"><span data-stu-id="54b86-369">Define **Column Titles**.</span></span><br>
    <span data-ttu-id="54b86-370">**Name (имя):** Имя компьютера</span><span class="sxs-lookup"><span data-stu-id="54b86-370">**Name:** Computer Name</span></span><br>
    <span data-ttu-id="54b86-371">**Value (значение):** Оставьте пустым</span><span class="sxs-lookup"><span data-stu-id="54b86-371">**Value:** Leave Empty</span></span>
7.  <span data-ttu-id="54b86-372">Определение **запроса навигации**.</span><span class="sxs-lookup"><span data-stu-id="54b86-372">Define **Navigation Query**.</span></span><br>
    ```search {selected item} | where EventLog == "Skype Room System" and SRSOperationName_CF == "Heartbeat" | summarize arg_max(TimeGenerated, *) by Computer | project TimeGenerated, Computer, SRSAlias_CF, SRSAppVersion_CF, SRSOSVersion_CF, SRSOSLongVersion_CF, SRSIPv4Address_CF, SRSIPv6Address_CF, SRSOperationName_CF, SRSOperationResult_CF, SRSResourceState_CF, SRSEventDescription_CF```
8.  <span data-ttu-id="54b86-373">Нажмите кнопку **Применить** , а затем — **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="54b86-373">Select **Apply** and then **Close**.</span></span>

### <a name="create-a-tile-that-displays-devices-that-have-an-application-error"></a><span data-ttu-id="54b86-374">Создание плитки, на которой отображаются устройства с ошибкой приложения</span><span class="sxs-lookup"><span data-stu-id="54b86-374">Create a tile that displays devices that have an application error</span></span>

1.  <span data-ttu-id="54b86-375">В коллекции выберите **число & список** и добавьте новую плитку.</span><span class="sxs-lookup"><span data-stu-id="54b86-375">Select **Number & list** from the gallery, and then add a new tile.</span></span>
2.  <span data-ttu-id="54b86-376">Определите **Общие** свойства.</span><span class="sxs-lookup"><span data-stu-id="54b86-376">Define the **General** properties.</span></span><br>
    <span data-ttu-id="54b86-377">**Название группы:** Оставьте пустым</span><span class="sxs-lookup"><span data-stu-id="54b86-377">**Group Title:** Leave empty</span></span><br>
    <span data-ttu-id="54b86-378">**Новая Группа:** Не выбрано</span><span class="sxs-lookup"><span data-stu-id="54b86-378">**New Group:** Not Selected</span></span>
3.  <span data-ttu-id="54b86-379">Определите свойства **плитки** .</span><span class="sxs-lookup"><span data-stu-id="54b86-379">Define the **Tile** properties.</span></span><br>
    <span data-ttu-id="54b86-380">**Условные обозначения:** Устройства, на которых возникла ошибка приложения за последний час</span><span class="sxs-lookup"><span data-stu-id="54b86-380">**Legend:** Devices that experienced an application error in the last hour</span></span><br>
    <span data-ttu-id="54b86-381">\*\*Запрос для плитки: \*\* ```Event | where EventLog == "Skype Room System" and EventLevelName == "Error" and EventID == "2001" and TimeGenerated > ago(1h) | summarize AggregatedValue = count() by Computer | count```</span><span class="sxs-lookup"><span data-stu-id="54b86-381">**Tile Query:** ```Event | where EventLog == "Skype Room System" and EventLevelName == "Error" and EventID == "2001" and TimeGenerated > ago(1h) | summarize AggregatedValue = count() by Computer | count```</span></span>
4.  <span data-ttu-id="54b86-382">Определите свойства **списка** .</span><span class="sxs-lookup"><span data-stu-id="54b86-382">Define the **List** properties.</span></span><br>
    <span data-ttu-id="54b86-383">**Запрос списка:**```Event | where EventLog == "Skype Room System" and EventLevelName == "Error" and EventID == "2001" and TimeGenerated > ago(1h) | summarize TimeGenerated = max(TimeGenerated) by Computer | order by TimeGenerated```</span><span class="sxs-lookup"><span data-stu-id="54b86-383">**List Query:** ```Event | where EventLog == "Skype Room System" and EventLevelName == "Error" and EventID == "2001" and TimeGenerated > ago(1h) | summarize TimeGenerated = max(TimeGenerated) by Computer | order by TimeGenerated```</span></span>
5.  <span data-ttu-id="54b86-384">Определение **заголовков столбцов**.</span><span class="sxs-lookup"><span data-stu-id="54b86-384">Define **Column Titles**.</span></span><br>
    <span data-ttu-id="54b86-385">**Name (имя):** Имя компьютера</span><span class="sxs-lookup"><span data-stu-id="54b86-385">**Name:** Computer Name</span></span><br>
    <span data-ttu-id="54b86-386">**Value (значение):** Последняя ошибка</span><span class="sxs-lookup"><span data-stu-id="54b86-386">**Value:** Last Error</span></span>
6.  <span data-ttu-id="54b86-387">Определение **запроса навигации**.</span><span class="sxs-lookup"><span data-stu-id="54b86-387">Define **Navigation Query**.</span></span><br>
    ```search {selected item} | where EventLog == "Skype Room System" and EventID == 2001 and EventLevelName == "Error" | summarize arg_max(TimeGenerated, *) by Computer | project TimeGenerated, Computer, SRSAlias_CF, SRSAppVersion_CF, SRSOSVersion_CF, SRSOSLongVersion_CF, SRSIPv4Address_CF, SRSIPv6Address_CF, SRSOperationName_CF, SRSOperationResult_CF, SRSResourceState_CF, SRSEventDescription_CF | sort by TimeGenerated desc```
7.  <span data-ttu-id="54b86-388">Нажмите кнопку **Применить** , а затем — **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="54b86-388">Select **Apply** and then **Close**.</span></span>

### <a name="create-a-tile-that-displays-devices-that-have-been-restarted"></a><span data-ttu-id="54b86-389">Создание плитки, отображающей устройства, которые были перезапущены</span><span class="sxs-lookup"><span data-stu-id="54b86-389">Create a tile that displays devices that have been restarted</span></span>

1.  <span data-ttu-id="54b86-390">В коллекции выберите **число & список** и добавьте новую плитку.</span><span class="sxs-lookup"><span data-stu-id="54b86-390">Select **Number & list** from the gallery, and then add a new tile.</span></span>
2.  <span data-ttu-id="54b86-391">Определите **Общие** свойства.</span><span class="sxs-lookup"><span data-stu-id="54b86-391">Define the **General** properties.</span></span><br>
    <span data-ttu-id="54b86-392">**Название группы:** Оставьте пустым</span><span class="sxs-lookup"><span data-stu-id="54b86-392">**Group Title:** Leave empty</span></span><br>
    <span data-ttu-id="54b86-393">**Новая Группа:** Не выбрано</span><span class="sxs-lookup"><span data-stu-id="54b86-393">**New Group:** Not Selected</span></span>
3.  <span data-ttu-id="54b86-394">Определите свойства **плитки** .</span><span class="sxs-lookup"><span data-stu-id="54b86-394">Define the **Tile** properties.</span></span><br>
    <span data-ttu-id="54b86-395">**Условные обозначения:** Устройства, на которых приложение было перезагружено за последние 24 часа, и количество перезапусков</span><span class="sxs-lookup"><span data-stu-id="54b86-395">**Legend:** Devices where the application was restarted in the last 24 hours, and number of restarts</span></span><br>
    <span data-ttu-id="54b86-396">\*\*Запрос для плитки: \*\* ```Event | where EventLog == "Skype Room System" and EventID == "4000" and TimeGenerated > ago(24h) | summarize AggregatedValue = count() by Computer | count```</span><span class="sxs-lookup"><span data-stu-id="54b86-396">**Tile Query:** ```Event | where EventLog == "Skype Room System" and EventID == "4000" and TimeGenerated > ago(24h) | summarize AggregatedValue = count() by Computer | count```</span></span>
4.  <span data-ttu-id="54b86-397">Определите свойства **списка** .</span><span class="sxs-lookup"><span data-stu-id="54b86-397">Define the **List** properties.</span></span><br>
    <span data-ttu-id="54b86-398">**Запрос списка:**```Event | where EventLog == "Skype Room System" and EventID == "4000" and TimeGenerated > ago(24h) | order by TimeGenerated | summarize AggregatedValue = count(EventID) by Computer```</span><span class="sxs-lookup"><span data-stu-id="54b86-398">**List Query:** ```Event | where EventLog == "Skype Room System" and EventID == "4000" and TimeGenerated > ago(24h) | order by TimeGenerated | summarize AggregatedValue = count(EventID) by Computer```</span></span>
5.  <span data-ttu-id="54b86-399">Определение **заголовков столбцов**.</span><span class="sxs-lookup"><span data-stu-id="54b86-399">Define **Column Titles**.</span></span><br>
    <span data-ttu-id="54b86-400">**Name (имя):** Имя компьютера</span><span class="sxs-lookup"><span data-stu-id="54b86-400">**Name:** Computer Name</span></span><br>
    <span data-ttu-id="54b86-401">**Value (значение):** Количество перезапусков</span><span class="sxs-lookup"><span data-stu-id="54b86-401">**Value:** Number of Restarts</span></span>
6.  <span data-ttu-id="54b86-402">Определение **запроса навигации**.</span><span class="sxs-lookup"><span data-stu-id="54b86-402">Define **Navigation Query**.</span></span><br>
    ```search {selected item} | where EventLog == "Skype Room System" and EventID == "4000" and TimeGenerated > ago(24h) | project TimeGenerated, Computer, SRSAlias_CF, SRSAppVersion_CF, SRSOSVersion_CF, SRSOSLongVersion_CF, SRSIPv4Address_CF, SRSIPv6Address_CF, SRSOperationName_CF, SRSOperationResult_CF, SRSResourceState_CF, SRSEventDescription_CF```
7.  <span data-ttu-id="54b86-403">Нажмите кнопку **Применить** , а затем — **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="54b86-403">Select **Apply** and then **Close**.</span></span>
8.  <span data-ttu-id="54b86-404">Нажмите кнопку **сохранить** , чтобы сохранить панель мониторинга.</span><span class="sxs-lookup"><span data-stu-id="54b86-404">Select **Save** to save your dashboard.</span></span>

<span data-ttu-id="54b86-405">Теперь вы закончите создание представлений.</span><span class="sxs-lookup"><span data-stu-id="54b86-405">Now you’ve completed creating your views.</span></span>

## <a name="configure-alerts-in-azure-monitor"></a><span data-ttu-id="54b86-406">Настройка оповещений на мониторе Azure</span><span class="sxs-lookup"><span data-stu-id="54b86-406">Configure Alerts in Azure Monitor</span></span>
<span data-ttu-id="54b86-407"><a name="Alerts"> </a></span><span class="sxs-lookup"><span data-stu-id="54b86-407"></span></span>

<span data-ttu-id="54b86-408">Монитор Azure может создавать оповещения для уведомления администраторов об ошибке при возникновении проблем с консолью комнат Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="54b86-408">Azure Monitor can raise alerts to notify the administrators, when a Microsoft Teams Rooms console encounters an issue.</span></span>

<span data-ttu-id="54b86-409">Монитор Azure включает встроенный механизм предупреждений, который выполняется через запланированные операции поиска по журналу через регулярные интервалы.</span><span class="sxs-lookup"><span data-stu-id="54b86-409">Azure Monitor includes a built-in alerting mechanism that runs through scheduled log searches at regular intervals.</span></span> <span data-ttu-id="54b86-410">Если результаты поиска в журнале совпадают с определенными критериями, создается запись оповещения.</span><span class="sxs-lookup"><span data-stu-id="54b86-410">If the results of the log search match some particular criteria, an alert record is created.</span></span>

<span data-ttu-id="54b86-411">После этого правило может автоматически запускать одно или несколько действий для упреждающего уведомления о предупреждении или вызова другого процесса.</span><span class="sxs-lookup"><span data-stu-id="54b86-411">The rule can then automatically run one or more actions to proactively notify you of the alert or invoke another process.</span></span> <span data-ttu-id="54b86-412">Ниже перечислены возможные параметры оповещения.</span><span class="sxs-lookup"><span data-stu-id="54b86-412">The possible options with alerts are:</span></span>
-   <span data-ttu-id="54b86-413">Отправка сообщения электронной почты</span><span class="sxs-lookup"><span data-stu-id="54b86-413">Sending an email</span></span>
-   <span data-ttu-id="54b86-414">Вызов внешнего процесса посредством запроса HTTP POST</span><span class="sxs-lookup"><span data-stu-id="54b86-414">Invoking an external process through an HTTP POST request</span></span>
-   <span data-ttu-id="54b86-415">Запуск Runbook в службе автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="54b86-415">Starting a runbook in Azure Automation service</span></span>

<span data-ttu-id="54b86-416">Дополнительные сведения об оповещениях на мониторе Azure см. в разделе [оповещения журнала на мониторе Azure](https://docs.microsoft.com/azure/azure-monitor/platform/alerts-unified-log) .</span><span class="sxs-lookup"><span data-stu-id="54b86-416">See [Log alerts in Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/platform/alerts-unified-log) to learn more about the alerts in Azure Monitor.</span></span>

> [!NOTE]
> <span data-ttu-id="54b86-417">В следующих примерах отправляются уведомления по электронной почте о том, что устройство Microsoft Teams комнаты генерирует оборудование или ошибку приложения.</span><span class="sxs-lookup"><span data-stu-id="54b86-417">The following examples send email alerts when a Microsoft Teams Rooms device generates a hardware or an application error.</span></span>

### <a name="configure-an-email-alert-for-microsoft-teams-rooms-hardware-issues"></a><span data-ttu-id="54b86-418">Настройка оповещений по электронной почте в Microsoft Teams для помещения проблем с оборудованием</span><span class="sxs-lookup"><span data-stu-id="54b86-418">Configure an email alert for Microsoft Teams Rooms hardware issues</span></span>

<span data-ttu-id="54b86-419">Настройте правило оповещения, проверяющее Microsoft Teams комнаты, в которых возникли проблемы с оборудованием за последний час.</span><span class="sxs-lookup"><span data-stu-id="54b86-419">Configure an alert rule that checks for Microsoft Teams Rooms devices that have encountered hardware issues within the last hour.</span></span>
1.  <span data-ttu-id="54b86-420">Войдите на [портал Microsoft Azure](https://portal.azure.com) и выберите рабочую область в службе аналитики журнала.</span><span class="sxs-lookup"><span data-stu-id="54b86-420">Sign in to the [Microsoft Azure portal](https://portal.azure.com) and go to Log Analytics and select your workspace.</span></span>

2. <span data-ttu-id="54b86-421">Перейдите в рабочую область службы анализа журналов и выберите пункт **оповещения** , а затем — **новое правило оповещения** .</span><span class="sxs-lookup"><span data-stu-id="54b86-421">Navigate to your Log Analytics workspace and select **Alerts** and then select **New alert rule**</span></span>

3. <span data-ttu-id="54b86-422">Нажмите кнопку **Добавить условие** , а затем — **Настраиваемый поиск журнала** .</span><span class="sxs-lookup"><span data-stu-id="54b86-422">Select **Add condition** and then **Custom log search**</span></span>

4.  <span data-ttu-id="54b86-423">Введите следующий запрос в текстовое поле поискового запроса.</span><span class="sxs-lookup"><span data-stu-id="54b86-423">Enter the following query to the Search query text box.</span></span><br>
    ```
    Event
    | where EventLog == "Skype Room System" and EventLevelName == "Error" and EventID == "3001" and TimeGenerated > ago(1h)
    | summarize arg_max(TimeGenerated, *) by Computer
    | project TimeGenerated, Computer, SRSAlias_CF, SRSAppVersion_CF, SRSOSVersion_CF, SRSOSLongVersion_CF, SRSIPv4Address_CF, SRSIPv6Address_CF, SRSOperationName_CF, SRSOperationResult_CF, SRSResourceState_CF, SRSConfMicrophoneStatus_CF, SRSConfSpeakerStatus_CF, SRSDefaultSpeakerStatus_CF, SRSCameraStatus_CF, SRSFORDStatus_CF, SRSMotionSensorStatus_CF, SRSHDMIIngestStatus_CF, SRSEventDescription_CF
    |sort by TimeGenerated desc
    ```

5.  <span data-ttu-id="54b86-424">Настройте параметры логики оповещений.</span><span class="sxs-lookup"><span data-stu-id="54b86-424">Configure the Alert logic settings:</span></span><br>
    <span data-ttu-id="54b86-425">На **основе:** Число результатов</span><span class="sxs-lookup"><span data-stu-id="54b86-425">**Based on:** Number of results</span></span><br>
    <span data-ttu-id="54b86-426">**Условие:** Больше</span><span class="sxs-lookup"><span data-stu-id="54b86-426">**Condition:** Greater then</span></span><br>
    <span data-ttu-id="54b86-427">**Трешолд:** 0</span><span class="sxs-lookup"><span data-stu-id="54b86-427">**Treshold:** 0</span></span><br>

6. <span data-ttu-id="54b86-428">Настройте параметры оценки и нажмите кнопку **Готово**.</span><span class="sxs-lookup"><span data-stu-id="54b86-428">Configure Evaluation settings and select **Done**:</span></span> <br>
    <span data-ttu-id="54b86-429">**Период (в минутах):** 60</span><span class="sxs-lookup"><span data-stu-id="54b86-429">**Period (in minutes):** 60</span></span><br>
    <span data-ttu-id="54b86-430">**Частота (в минутах):** 60</span><span class="sxs-lookup"><span data-stu-id="54b86-430">**Frequency (in minutes):** 60</span></span><br>

7. <span data-ttu-id="54b86-431">Настройка групп действий:</span><span class="sxs-lookup"><span data-stu-id="54b86-431">Configure action groups:</span></span>
    1.  <span data-ttu-id="54b86-432">Нажмите кнопку " **создать новый** ".</span><span class="sxs-lookup"><span data-stu-id="54b86-432">Select **Create New**</span></span>
    2.  <span data-ttu-id="54b86-433">Укажите подходящие имена для полей " *имя группы действий* " и " *Краткое имя* ".</span><span class="sxs-lookup"><span data-stu-id="54b86-433">Provide suitable names for the *Action group name* and *Short Name* fields.</span></span>
    3.  <span data-ttu-id="54b86-434">Укажите уникальное *имя действия* и выберите **Электронная почта, SMS/Push/Voice**и нажмите кнопку **изменить сведения**.</span><span class="sxs-lookup"><span data-stu-id="54b86-434">Specify a unique *Action Name* and select **Email/SMS/Push/Voice**, and then select **Edit details**.</span></span>
    4.  <span data-ttu-id="54b86-435">Установите флажок Электронная почта и укажите адрес электронной почты пользователя или группы, которые будут получать оповещения.</span><span class="sxs-lookup"><span data-stu-id="54b86-435">Select the Email checkbox and provide the email address of the person or group that will recieve the alerts.</span></span>
    5.  <span data-ttu-id="54b86-436">Кроме того, вы можете указать свой номер телефона, чтобы получать уведомления с помощью SMS, голосового звонка или и того, и другого.</span><span class="sxs-lookup"><span data-stu-id="54b86-436">You may also provide your phone number to get notified with SMS, a voice call or both.</span></span>
    6. <span data-ttu-id="54b86-437">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="54b86-437">Select **OK**.</span></span>

8. <span data-ttu-id="54b86-438">**Настройте действия** , чтобы перекрыть строку темы сообщений с оповещениями.</span><span class="sxs-lookup"><span data-stu-id="54b86-438">**Customize Actions** if you like to override the subject line of the alert emails.</span></span>

9. <span data-ttu-id="54b86-439">Укажите имя и описание правила.</span><span class="sxs-lookup"><span data-stu-id="54b86-439">Specify a rule name and description.</span></span><br>
    <span data-ttu-id="54b86-440">**Имя правила:** Оповещение о сбоях оборудования в Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="54b86-440">**Rule Name:** Microsoft Teams Rooms Hardware Failure Alert</span></span><br>
    <span data-ttu-id="54b86-441">**Описание:** Список устройств, для которых возникла неполадка с оборудованием в течение последнего часа</span><span class="sxs-lookup"><span data-stu-id="54b86-441">**Description:** List of devices that encountered a hardware issue within the last hour</span></span><br>

10. <span data-ttu-id="54b86-442">Выберите предполагаемый уровень важности и убедитесь, что правило включено.</span><span class="sxs-lookup"><span data-stu-id="54b86-442">Select the intended severity and make sure the rule is enabled.</span></span>

11. <span data-ttu-id="54b86-443">Выберите **создать правило оповещения**.</span><span class="sxs-lookup"><span data-stu-id="54b86-443">Select **Create alert rule**.</span></span>

### <a name="configure-an-email-alert-for-microsoft-teams-rooms-application-issues"></a><span data-ttu-id="54b86-444">Настройка оповещений по электронной почте для Microsoft Teams в помещениях о проблемах с приложениями</span><span class="sxs-lookup"><span data-stu-id="54b86-444">Configure an email alert for Microsoft Teams Rooms application issues</span></span>

<span data-ttu-id="54b86-445">Повторите эту процедуру, но используйте следующий запрос, чтобы вывести список устройств, в которых возникли проблемы с приложением за последний час.</span><span class="sxs-lookup"><span data-stu-id="54b86-445">Repeat the same procedure but use the following query to list devices that have encountered application issues within the last hour.</span></span>

    ```
    Event
    | where EventLog == "Skype Room System" and EventLevelName == "Error" and EventID == "2001" and TimeGenerated > ago(1h)
    | summarize arg_max(TimeGenerated, *) by Computer
    | project TimeGenerated, Computer, SRSAlias_CF, SRSAppVersion_CF, SRSOSVersion_CF, SRSOSLongVersion_CF, SRSIPv4Address_CF, SRSIPv6Address_CF, SRSOperationName_CF, SRSOperationResult_CF, SRSResourceState_CF, SRSEventDescription_CF
    | sort by TimeGenerated desc
    ```

<span data-ttu-id="54b86-446">Теперь вы завершили определение оповещений.</span><span class="sxs-lookup"><span data-stu-id="54b86-446">Now you’ve completed defining alerts.</span></span> <span data-ttu-id="54b86-447">Вы можете определить дополнительные оповещения, выполнив приведенные выше примеры.</span><span class="sxs-lookup"><span data-stu-id="54b86-447">You can define additional alerts by using the examples above.</span></span>

<span data-ttu-id="54b86-448">При создании оповещения вы получите сообщение электронной почты со списком устройств, в которых возникла ошибка в течение последнего часа.</span><span class="sxs-lookup"><span data-stu-id="54b86-448">When an alert is generated, you’ll get an email that lists the devices that encountered an issue within the last hour.</span></span>

<span data-ttu-id="54b86-449">![Пример сообщения с оповещением монитора Azure](../media/Deploy-Azure-Monitor-6.png "Пример сообщения с оповещением монитора Azure")</span><span class="sxs-lookup"><span data-stu-id="54b86-449">![Sample Azure Monitor alert email](../media/Deploy-Azure-Monitor-6.png "Sample Azure Monitor alert email")</span></span>

## <a name="configure-all-devices-for-azure-monitoring"></a><span data-ttu-id="54b86-450">Настройка всех устройств для мониторинга Azure</span><span class="sxs-lookup"><span data-stu-id="54b86-450">Configure all devices for Azure Monitoring</span></span>
<span data-ttu-id="54b86-451"><a name="configure_all_devices"></a> После настройки панелей мониторинга и оповещений вы можете настроить и настроить Microsoft Monitoring Agent на всех устройствах Microsoft Teams, чтобы завершить развертывание мониторинга.</span><span class="sxs-lookup"><span data-stu-id="54b86-451"><a name="configure_all_devices"> </a> After the dashboards and alerts are configured, you can set up and configure Microsoft Monitoring agent on all Microsoft Teams Rooms devices to complete your monitoring deployment.</span></span>

<span data-ttu-id="54b86-452">Несмотря на то, что вы можете установить и настроить агент наблюдения Майкрософт вручную на каждом устройстве, мы настоятельно рекомендуем использовать существующие инструменты и методы развертывания программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="54b86-452">Although you can install and configure the Microsoft Monitoring agent manually on each device, we highly recommend you leverage existing software deployment tools and methods.</span></span>

<span data-ttu-id="54b86-453">Если вы создаете устройства в Microsoft Teams в первый раз, вам может потребоваться включить настройку агента наблюдения (Майкрософт) и этапы настройки в процессе сборки.</span><span class="sxs-lookup"><span data-stu-id="54b86-453">If you’re building your Microsoft Teams Rooms devices for the first time, you might want to include the Microsoft Monitoring agent setup and configuration steps as part of your build process.</span></span> <span data-ttu-id="54b86-454">Дополнительные сведения можно найти в разделе [Установка агента с помощью командной строки](https://docs.microsoft.com/azure/azure-monitor/platform/agent-windows#install-the-agent-using-the-command-line).</span><span class="sxs-lookup"><span data-stu-id="54b86-454">For more information, see [Install the agent using the command line](https://docs.microsoft.com/azure/azure-monitor/platform/agent-windows#install-the-agent-using-the-command-line).</span></span>

### <a name="deploying-microsoft-monitoring-agent-by-using-a-group-policy-object-gpo"></a><span data-ttu-id="54b86-455">Развертывание агента наблюдения (Майкрософт) с помощью объекта групповой политики (GPO)</span><span class="sxs-lookup"><span data-stu-id="54b86-455">Deploying Microsoft Monitoring agent by using a Group Policy Object (GPO)</span></span>

<span data-ttu-id="54b86-456">Если вы уже развернули устройства Microsoft Teams для работы со службой наблюдения за Azure, вы можете использовать предоставленный сценарий для настройки и настройки агентов с помощью объектов групповой политики Active Directory.</span><span class="sxs-lookup"><span data-stu-id="54b86-456">If you already deployed your Microsoft Teams Rooms devices before you implement Azure Monitoring, you can use the provided script to set up and configure the agents by using Active Directory group policy objects.</span></span>

1.  <span data-ttu-id="54b86-457">Создание общего сетевого пути и предоставление доступа на чтение к группе **доменные компьютеры** .</span><span class="sxs-lookup"><span data-stu-id="54b86-457">Create a shared network path and grant read access to **Domain Computers** group.</span></span>

2.  <span data-ttu-id="54b86-458">Загрузите 64-разрядную версию Microsoft Monitoring Agent для Windows из<https://go.microsoft.com/fwlink/?LinkID=517476></span><span class="sxs-lookup"><span data-stu-id="54b86-458">Download the 64-bit version of the Microsoft Monitoring Agent for Windows from <https://go.microsoft.com/fwlink/?LinkID=517476></span></span>

3.  <span data-ttu-id="54b86-459">Извлеките содержимое установочного пакета в сетевую папке.</span><span class="sxs-lookup"><span data-stu-id="54b86-459">Extract the contents of the setup package into the network share.</span></span>
    1.  <span data-ttu-id="54b86-460">Открытие окна командной строки с последующим выполнением **MMASetup-AMD64. exe/c**</span><span class="sxs-lookup"><span data-stu-id="54b86-460">Open a Command Prompt window, and then execute **MMASetup-AMD64.exe /c**</span></span>
    2.  <span data-ttu-id="54b86-461">Укажите только что созданный общий доступ и извлеките содержимое.</span><span class="sxs-lookup"><span data-stu-id="54b86-461">Specify the share you just created, and extract the content.</span></span>

4.  <span data-ttu-id="54b86-462">Создайте новый объект групповой политики и назначьте его организационному подразделению, в котором находятся учетные записи компьютеров Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="54b86-462">Create a new Group Policy Object and assign it to the organizational unit where Microsoft Teams Rooms machine accounts are located.</span></span>

5.  <span data-ttu-id="54b86-463">Настройка политики выполнения PowerShell.</span><span class="sxs-lookup"><span data-stu-id="54b86-463">Configure PowerShell execution policy:</span></span>
    1.  <span data-ttu-id="54b86-464">Редактирование только \\ что созданного объекта групповой политики и переход к параметрам \\ политики конфигурации \\ компьютера. \\ шаблоны Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="54b86-464">Edit the newly created Group Policy Object and navigate to Computer Configuration \\ Policies \\ Administrative Templates \\ Windows Components \\ Windows PowerShell</span></span>
    2.  <span data-ttu-id="54b86-465">Включите **выполнение сценария включения** и настройте **политику выполнения** , чтобы **Разрешить локальные сценарии**.</span><span class="sxs-lookup"><span data-stu-id="54b86-465">Enable the **Turn on Script Execution** and set **Execution Policy** to **Allow Local Scripts**.</span></span>

6.  <span data-ttu-id="54b86-466">Настройте сценарий запуска.</span><span class="sxs-lookup"><span data-stu-id="54b86-466">Configure the startup script:</span></span>
    1.  <span data-ttu-id="54b86-467">Скопируйте приведенный ниже сценарий и сохраните его как Инсталл-ммажент. ps1.</span><span class="sxs-lookup"><span data-stu-id="54b86-467">Copy the following script and save it as Install-MMAgent.ps1.</span></span>
    2.  <span data-ttu-id="54b86-468">Измените параметры Воркспацеид, Воркспацекэй и Сетуппас, чтобы они соответствовали вашей конфигурации.</span><span class="sxs-lookup"><span data-stu-id="54b86-468">Modify WorkspaceId, WorkspaceKey, and SetupPath parameters to match your configuration.</span></span>
    3.  <span data-ttu-id="54b86-469">Измените один и тот же объект групповой политики и перейдите в \\ раздел \\ политики конфигурации \\ компьютера сценарии настройки Windows (запуск и завершение)</span><span class="sxs-lookup"><span data-stu-id="54b86-469">Edit the same Group Policy Object and navigate to Computer Configuration \\ Policies \\ Windows Settings \\ Scripts (Startup/Shutdown)</span></span>
    4.  <span data-ttu-id="54b86-470">Дважды щелкните, чтобы выбрать **Запуск**, и выберите пункт **сценарии PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="54b86-470">Double-click to select **Startup**, and then select **PowerShell Scripts**.</span></span>
    5.  <span data-ttu-id="54b86-471">Выберите пункт **Показать файлы**, а затем скопируйте файл **Инсталл-ммажент. ps1** в эту папку.</span><span class="sxs-lookup"><span data-stu-id="54b86-471">Select **Show Files**, and then copy the **Install-MMAgent.ps1** file to that folder.</span></span>
    6.  <span data-ttu-id="54b86-472">Нажмите кнопку **Добавить**, а затем — **Обзор**.</span><span class="sxs-lookup"><span data-stu-id="54b86-472">Select **Add**, and then **Browse**.</span></span>
    7.  <span data-ttu-id="54b86-473">Выберите только что скопированный сценарий PS1.</span><span class="sxs-lookup"><span data-stu-id="54b86-473">Select the ps1 script you just copied.</span></span>

7.  <span data-ttu-id="54b86-474">В Microsoft Teams для работы с устройствами следует установить и настроить агент наблюдения (Майкрософт) со второй перезагрузкой.</span><span class="sxs-lookup"><span data-stu-id="54b86-474">Microsoft Teams Rooms devices should install and configure the Microsoft Monitoring agent with the second reboot.</span></span>

```
# Install-MMAgent.ps1
<#
Date:        04/20/2018
Script:      Install-MMAgent.ps1
Version:     1.0
#>

# Set the parameters
$WorkspaceId = "<your workspace id>"
$WorkspaceKey = "<your workspace key>"
$SetupPath = "\\Server\Share"

$SetupParameters = "/qn NOAPM=1 ADD_OPINSIGHTS_WORKSPACE=1 OPINSIGHTS_WORKSPACE_AZURE_CLOUD_TYPE=0 OPINSIGHTS_WORKSPACE_ID=$WorkspaceId OPINSIGHTS_WORKSPACE_KEY=$WorkspaceKey AcceptEndUserLicenseAgreement=1"

# $SetupParameters = $SetupParameters + " OPINSIGHTS_PROXY_URL=<Proxy server URL> OPINSIGHTS_PROXY_USERNAME=<Proxy server username> OPINSIGHTS_PROXY_PASSWORD=<Proxy server password>"

# Start PowerShell logging
Start-Transcript -Path C:\Temp\MMA-Install.Log

# Check if the Microsoft Monitoring Agent is installed
$mma = New-Object -ComObject 'AgentConfigManager.MgmtSvcCfg'

# Check if the Microsoft Monitoring agent is installed
if (!$mma)
{
    #Install agent
    Start-Process -FilePath "$SetupPath\Setup.exe" -ArgumentList $SetupParameters -ErrorAction Stop -Wait
}

# Check if the agent has a valid configuration
$CheckMMA = $mma.GetCloudWorkspace($WorkspaceId).AgentId
if (!$CheckMMA)
{
    # Apply new configuration
    $mma.AddCloudWorkspace($WorkspaceId, $WorkspaceKey)
    $mma.ReloadConfiguration()
}

Stop-Transcript
```

> [!NOTE]
> <span data-ttu-id="54b86-475">Вы можете обратиться к статье, которая [управляет агентом аналитики журналов и его обслуживанием](https://docs.microsoft.com/azure/azure-monitor/platform/agent-manage) , если вам нужно перенастроить агент, переместить его в другую рабочую область или изменить параметры прокси-сервера после первоначальной установки.</span><span class="sxs-lookup"><span data-stu-id="54b86-475">You can refer to the article [Managing and maintaining the Log Analytics agent](https://docs.microsoft.com/azure/azure-monitor/platform/agent-manage) when you need to reconfigure an agent, move it to a different workspace, or modify proxy settings after the initial installation.</span></span>

## <a name="additional-solutions"></a><span data-ttu-id="54b86-476">Дополнительные решения</span><span class="sxs-lookup"><span data-stu-id="54b86-476">Additional Solutions</span></span>
<span data-ttu-id="54b86-477"><a name="Solutions"> </a></span><span class="sxs-lookup"><span data-stu-id="54b86-477"></span></span>

<span data-ttu-id="54b86-478">Монитор Azure предоставляет встроенные решения для управления с помощью [коллекции решений](https://docs.microsoft.com/azure/azure-monitor/insights/solutions) для дальнейшей помощи в наблюдении за вашей средой.</span><span class="sxs-lookup"><span data-stu-id="54b86-478">Azure Monitor provides built-in management solutions through its [solution gallery](https://docs.microsoft.com/azure/azure-monitor/insights/solutions) to further help you monitor your environment.</span></span> <span data-ttu-id="54b86-479">Настоятельно рекомендуем также добавить в рабочую область решения для [управления оповещениями](https://docs.microsoft.com/azure/azure-monitor/platform/alert-management-solution) и проверки [работоспособности агента аналитики Azure](https://docs.microsoft.com/azure/azure-monitor/insights/solution-agenthealth) .</span><span class="sxs-lookup"><span data-stu-id="54b86-479">We highly recommend that you add [Alert Management](https://docs.microsoft.com/azure/azure-monitor/platform/alert-management-solution) and [Azure Log Analytics Agent Health](https://docs.microsoft.com/azure/azure-monitor/insights/solution-agenthealth) solutions to your workspace as well.</span></span>

> [!NOTE]
> <span data-ttu-id="54b86-480">Решение для проверки работоспособности агента помогает идентифицировать устаревшие или неработающие агенты наблюдения за корпорацией Майкрософт в среде, а решение для управления оповещениями — сведения об оповещениях, которые были созданы в течение заданного периода.</span><span class="sxs-lookup"><span data-stu-id="54b86-480">The Agent Health solution can help you identify outdated or broken Microsoft Monitoring agents within your environment, and the Alert Management solution provides details about the alerts that have been raised within a given period.</span></span>

## <a name="see-also"></a><span data-ttu-id="54b86-481">См. также</span><span class="sxs-lookup"><span data-stu-id="54b86-481">See also</span></span>

[<span data-ttu-id="54b86-482">Планирование управления комнатами в Microsoft Teams с помощью монитора Azure</span><span class="sxs-lookup"><span data-stu-id="54b86-482">Plan Microsoft Teams Rooms management with Azure Monitor</span></span>](azure-monitor-plan.md)

[<span data-ttu-id="54b86-483">Управление устройствами в Microsoft Teams с помощью монитора Azure</span><span class="sxs-lookup"><span data-stu-id="54b86-483">Manage Microsoft Teams Rooms devices with Azure Monitor</span></span>](azure-monitor-manage.md)
