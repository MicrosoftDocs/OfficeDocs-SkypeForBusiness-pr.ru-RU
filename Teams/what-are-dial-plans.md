---
title: Что такое абонентские группы?
author: CarolynRowe
ms.author: crowe
manager: serdars
ms.reviewer: mikedav, roykuntz
ms.topic: article
ms.tgt.pltfrm: cloud
ms.service: msteams
search.appverid: MET150
ms.collection:
- M365-voice
- m365initiative-voice
- highpri
audience: Admin
appliesto:
- Skype for Business
- Microsoft Teams
ms.localizationpriority: medium
f1.keywords:
- CSH
ms.custom:
- ms.teamsadmincenter.voice.dialplans.overview
- Calling Plans
description: 'Узнайте, какие типы абонентской группы (абонентские группы ЗВОНКОВ по ТСОП) доступны в Teams и как выбрать их для своей организации.  '
ms.openlocfilehash: 77ee7801d43bd6a7cf9ae9a9e3fc74c302f8caa0
ms.sourcegitcommit: f0e2a5928e9b959daf45202b9f256f65c2087195
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/20/2022
ms.locfileid: "68614252"
---
# <a name="what-are-dial-plans"></a>Что такое абонентские группы?

Абонентский план — это именованный набор правил нормализации, которые преобразовывают номера телефонов отдельного пользователя в альтернативный формат (обычно E.164) для авторизации звонков и маршрутизации голосовой связи.

Абонентский план состоит из одного или нескольких правил нормализации, которые определяют, как телефонные номера, выраженные в различных форматах, преобразуются в альтернативный формат. Та же строка набора номера может интерпретироваться и преобразовываться по-разному в разных абонентской группе, поэтому в зависимости от того, какая абонентской группе назначена заданному пользователю, один и тот же номер набора можно перевести и перенаправить по-разному. Может быть не более 1000 абонентской группы клиентов.

См [. раздел "Создание абонентской группы](create-and-manage-dial-plans.md) и управление ими для создания абонентской группы клиента и управления ими".

## <a name="tenant-dial-plan-scope"></a>Область действия абонентской группы для клиента

Область действия абонентской группы определяет уровень иерархии, на котором возможно применение данной абонентской группы. Клиенты получают соответствующую абонентской группы с помощью параметров подготовки, которые автоматически предоставляются при входе пользователей в Teams. Администратор может управлять уровнями области абонентской группы и назначать их с помощью Центра администрирования Microsoft Teams или удаленной среды PowerShell.

В Teams существует два типа абонентской группы: на уровне службы и на уровне клиента (для вашей организации). Абонентский план на уровне службы определяется для каждой страны или региона, в которых доступна телефонная система. Каждому пользователю автоматически назначается абонентский план страны обслуживания, соответствующий расположению использования, назначенной пользователю. Вы не можете изменить абонентский план страны обслуживания, но можете создать абонентские группы на уровне клиента, которые дополняют абонентский план страны обслуживания. По мере подготовки клиенты получают "эффективную абонентский план", которая представляет собой сочетание абонентской группы страны обслуживания и абонентской группы клиента с соответствующими областями. Поэтому не обязательно определять все правила нормализации в абонентской группы клиента, так как они могут уже существовать в абонентской плане страны обслуживания.

Абонентские группы клиента можно разбить на две области: клиент или область пользователя. Если клиент определяет и назначает абонентской группы на уровне пользователя, этот пользователь будет подготовлен с действующей абонентской планом абонентской группы страны обслуживания пользователя и назначенной абонентской группы пользователя. Если клиент определяет абонентской группы на уровне клиента, но не назначает абонентской группы на уровне пользователя, то этот пользователь будет подготовлен с действующей абонентской планом для абонентской группы страны обслуживания пользователя и абонентской группы клиента.

Ниже приведена модель наследования абонентской группы в Teams.

![Как наследуются абонентские группы в Teams.](media/b2744f33-ebbd-4c23-bfba-1747312ab178.png)

Ниже перечислены возможные эффективные абонентские группы.

 **Страна обслуживания** Если абонентской группы с областью действия клиента не определено и подготовленной пользователем абонентской группы не назначена пользователь, пользователь получит эффективную абонентской группы, сопоставленную стране обслуживания, связанной с расположением его использования.

 **Глобальный клиент — страна обслуживания** Если абонентский план пользователя клиента определен, но не назначен пользователю, подготовленный пользователь получит эффективную абонентский план, состоящий из объединенной абонентской группы клиента и абонентской группы страны обслуживания, связанной с расположением его использования.

 **Пользователь клиента — страна обслуживания** Если абонентский план пользователя клиента определен и назначен пользователю, подготовленный пользователь получит эффективную абонентский план, состоящий из объединенной абонентской группы пользователя клиента и абонентской группы страны обслуживания, связанной с расположением его использования.

См [. раздел "Создание абонентской группы](create-and-manage-dial-plans.md) и управление ими для создания абонентской группы клиента".

> [!NOTE]
> В сценарии, в котором правила нормализации абонентской группы не применяются к на телефонном номеру, строка набора по-прежнему нормализуется до префикса "+CC", где CC — это код страны для расположения использования абонента. Это относится к тарифным планам, прямой маршрутизации и конференц-связи по ТСОП. Кроме того, если правило нормализации абонентской группы клиента приводит к числу, которое не начинается с "+", вызываемая служба попытается нормализовать число, полученное от клиента Teams, на основе абонентской группы клиента и, если не совпадает, в абонентской плане региона. Чтобы избежать двойной нормализации, рекомендуется, чтобы клиенты прямой маршрутизации нормализоализули числа, включив +, а затем удаляли +, используя правила перевода магистралей. 

## <a name="planning-for-tenant-dial-plans"></a>Планирование абонентских групп клиента

Для планирования настраиваемых абонентских групп выполните следующие шаги.

- **Шаг 1** Решите, требуется ли настраиваемая абонентская строка для улучшения взаимодействия с пользователем. Как правило, это необходимо для поддержки набора номера, отличного от E.164, например расширений или сокращенного национального набора.

- **Шаг 2** Определите, требуются ли глобальные абонентские группы клиента или клиентские абонентские группы или и то, и другое. Абонентские группы с областью действия пользователя необходимы, если у пользователей разные требования к локальному набору номера.

- **Step 3** Identify valid number patterns for each required dial plan. Only the number patterns that are not defined in the service level country dial plans are required.

- **Step 4** Develop an organization-wide scheme for naming dial plans. Adopting a standard naming scheme assures consistency across an organization and makes maintenance and updates easier.


## <a name="creating-your-new-dial-plan"></a>Создание абонентской группы

При создании абонентской группы следует указать необходимые сведения.

### <a name="name-and-simple-name"></a>Имя и простое имя

Для абонентской группы пользователей следует указать описательное имя, определяющее пользователей, которым будет назначена абонентской группы. Поле Простое имя для абонентской группы предварительно заполнено строкой, производной от имени абонентской группы. Поле "Простое имя" доступно для редактирования, что позволяет создать для абонентских групп информативное соглашение об именовании. Поле Простое имя должно быть заполненным и содержать неповторяющееся значение. Рекомендуется разработать соглашение об именовании для всей организации и последовательно применять его для всех сайтов и пользователей.

### <a name="description"></a>Описание

Рекомендуется указать общеупотребительное и узнаваемое название географического расположения или группы пользователей, к которому будет применена соответствующая абонентская группа.

### <a name="external-access-prefix"></a>Префикс для внешнего доступа
<a name="bkexternalprefix"> </a>

Если пользователям нужно набирать одну или несколько начальных цифр (например, цифру 9) для доступа к внешней линии, можно указать префикс для внешнего доступа длиной до четырех символов (допускаются символы #, * и 0-9).

> [!NOTE]
> В случае указания префикса создавать дополнительное правило нормализации для него не требуется.

См [. раздел "Создание абонентской группы](create-and-manage-dial-plans.md) и управление ими для создания абонентской группы клиента".

## <a name="normalization-rules"></a>Правила нормализации
<a name="bknormalizationrule"> </a>

Normalization rules define how phone numbers expressed in various formats are to be translated. The same number string may be interpreted and translated differently, depending on the locale from which it is dialed. Normalization rules may be necessary if users need to be able to dial abbreviated internal or external numbers.

Для абонентской группы необходимо назначить одно или несколько правил нормализации. Правила нормализации сопоставляется сверху вниз, поэтому важен порядок их отображения в абонентской плане клиента. Например, если в абонентской плане клиента имеется 10 правил нормализации, будет предпринята попытка использовать логику сопоставления набора номеров, начиная с первого правила нормализации, если совпадения нет, второго и т. д. Если сопоставление выполнено, используется это правило и никакие другие определенные правила не выполняются. В заданной абонентской плане клиента может быть не более 50 правил нормализации.

### <a name="determining-the-required-normalization-rules"></a>Определение необходимых правил нормализации

Так как любая абонентской группы клиента эффективно объединена с абонентской планом страны обслуживания конкретного пользователя, скорее всего, необходимо оценить правила нормализации абонентской группы страны обслуживания, чтобы определить, какие правила нормализации абонентской группы клиента необходимы. Для этого можно воспользоваться командлетом **Get-CsEffectiveTenantDialPlan**. Командлет использует удостоверение пользователя в качестве входного параметра и возвращает все правила нормализации, которые применяются к этому пользователю.

### <a name="creating-normalization-rules"></a>Создание правил нормализации
<a name="createrule"> </a>

Правила нормализации используют платформа .NET Framework регулярных выражений для указания числовых шаблонов совпадений, используемых сервером для преобразования строк набора в формат E.164. Для создания правил нормализации можно указать регулярное выражение для проверки соответствия, и при обнаружении соответствия будет выполнено преобразование. После окончания настройки можно ввести тестовый номер, чтобы проверить работу правил нормализации.

Дополнительные сведения об использовании платформа .NET Framework регулярных выражений см. [в платформа .NET Framework регулярных выражений](/dotnet/standard/base-types/regular-expressions).

См [. раздел "Создание абонентской группы](create-and-manage-dial-plans.md) и управление ими для создания правил нормализации для абонентской группы клиента и управления ими".

> [!NOTE]
> Правила нормализации с первым токеном как необязательные в настоящее время не поддерживаются на устройствах с 3pip (например, модель Polycom VVX 601). Если вы хотите применить правила нормализации с необязательностью на устройствах 3pip, следует создать два правила нормализации вместо одного. Например, правило ^0? (999)$ следует заменить следующими двумя правилами: (999)$ (перевод:$1) и ^0(999)$ (перевод:$1).


### <a name="sample-normalization-rules"></a>Примеры правил нормализации

The following table shows sample normalization rules that are written as .NET Framework regular expressions. The samples are examples only and are not meant to be a prescriptive reference for creating your own normalization rules.

<a name="regularexpression"> </a>
**Правила нормализации с платформа .NET Framework регулярных выражений**

| Имя правила<br/> | Описание<br/> | Шаблон номера<br/> | Преобразование<br/> | Пример<br/> |
|:-----|:-----|:-----|:-----|:-----|
|4digitExtension  <br/> |Преобразует расширения из четырех цифр.  <br/> |^(\\d{4})$  <br/> |+1425555$1  <br/> |0100 преобразуется в +14255550100  <br/> |
|5digitExtension  <br/> |Преобразует расширения из пяти цифр.  <br/> |^5(\\d{4})$  <br/> |+1425555$1  <br/> |50100 преобразуется в +14255550100  <br/> |
|7digitcallingRedmond  <br/> |Преобразует номера из семи цифр в местные номера Редмонда.  <br/> |^(\\d{7})$  <br/> |+1425$1  <br/> |5550100 преобразуется в +14255550100  <br/>|
|RedmondOperator  <br/> |Преобразует 0 в номер оператора Редмонда.  <br/> |^0$  <br/> |+14255550100  <br/> |0 преобразуется в +14255550100  <br/> |
|RedmondSitePrefix  <br/> |Преобразует номера с внутрисетевым префиксом (6) и кодом Редмонда (222).  <br/> |^6222(\\d{4})$  <br/> |+1425555$1  <br/> |62220100 преобразуется в +14255550100  <br/> |
|5digitRange  <br/> |Преобразует расширения из пяти цифр, которые начинаются с цифры из диапазона от трех до семи включительно.  <br/> |^([3-7]\\d{4})$  <br/> |+142555$1 <br/> |54567 преобразуется в +14255554567  <br/> |
|PrefixAdded  <br/> |Добавляет префикс страны перед номером из девяти цифр с ограничениями для первой и третьей цифр.  <br/> |^([2-9]\\d\\d[2-9]\\d{6})$  <br/> |1$1  <br/> |4255554567 преобразуется в 14255554567  <br/> |
|NoTranslation  <br/> |Соответствует пяти цифрам, но преобразование не выполняется.  <br/> |^(\\d{5})$  <br/> |$1  <br/> |34567 преобразуется в 34567  <br/> |

 **Абонентская группа Редмонда основана на приведенных выше правилах нормализации.**

 В следующей таблице показан пример абонентской группы для города Редмонда (штат Вашингтон, США) на основе правил нормализации из предыдущей таблицы.

| Абонентская группа Редмонда<br/> |
|:-----------------------|                                                                                                                      
| 5digitExtension <br/> |                                                                                                                                    
| 7digitcallingRedmond <br/> |
| RedmondSitePrefix <br/> |
| RedmondOperator <br/> |

> [!NOTE]
> Имена правил нормализации, показанные в предыдущей таблице, не включают пробелы, но это вопрос выбора. Например, первое правило в таблице могло называться 5 digit extension или 5-digit Extension (добавочный номер из 5 цифр).

## <a name="related-topics"></a>См. также

[Создание и использование абонентских групп](create-and-manage-dial-plans.md)

[Различные типы телефонных номеров, используемые для планов звонков](different-kinds-of-phone-numbers-used-for-calling-plans.md)

[Управление номерами телефонов организации](manage-phone-numbers-for-your-organization/manage-phone-numbers-for-your-organization.md)

[Условия и положения, распространяющиеся на экстренные вызовы](emergency-calling-terms-and-conditions.md)

[Метка заявления об отказе от экстренных вызовов](https://github.com/MicrosoftDocs/OfficeDocs-SkypeForBusiness/blob/live/Teams/downloads/emergency-calling/emergency-calling-label-(en-us)-(v.1.0).zip?raw=true)
