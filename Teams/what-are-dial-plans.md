---
title: Что такое абонентские группы?
author: CarolynRowe
ms.author: crowe
manager: serdars
ms.reviewer: mikedav, roykuntz
ms.topic: article
ms.tgt.pltfrm: cloud
ms.service: msteams
search.appverid: MET150
ms.collection:
- M365-voice
- m365initiative-voice
audience: Admin
appliesto:
- Skype for Business
- Microsoft Teams
localization_priority: Normal
f1.keywords:
- CSH
ms.custom:
- ms.teamsadmincenter.voice.dialplans.overview
- Calling Plans
description: 'Узнайте, какие типы телефонных планов (телефонных групп для звонков по ЗВОНКОВ по СТАНП) доступны в Teams и как выбрать их для вашей организации.  '
ms.openlocfilehash: 9e6b9930c5106ec143563e0f69dd61ccb30d550c
ms.sourcegitcommit: 9c1f3a72fb166b49a4b68bcdb9a2868bf86ca680
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/19/2020
ms.locfileid: "49718593"
---
# <a name="what-are-dial-plans"></a>Что такое абонентские группы?

[] Абонентская группа  это именованный набор правил нормализации, который преобразует номера телефонов отдельных пользователей в альтернативный формат (обычно E.164) для авторизации и маршрутизации звонков.

Телефонная группа состоит из одного или нескольких правил нормализации, которые определяют, как номера телефонов, выраженные в разных форматах, преобразуются в альтернативный формат. В разных наборах можно по-разному интерпретировать и переводить одинаковые строки набора, поэтому в зависимости от того, какая из них назначена пользователю, один и тот же номер может переводиться и перенаводиться по-разному. Может быть не более 1000 наборов клиентов.

См. [создание наборных телефонных планов и](create-and-manage-dial-plans.md) управление ими.

## <a name="tenant-dial-plan-scope"></a>Область действия абонентской группы для клиента

Область действия абонентской группы определяет уровень иерархии, на котором возможно применение данной абонентской группы. Клиенты получают соответствующую телефонную группу с помощью параметров регистрации, которые автоматически предоставляются при входе пользователей в Teams. Как администратор вы можете управлять уровнями действия набора и назначать их с помощью Центра администрирования Microsoft Teams или удаленной командной командной командой PowerShell.

В Teams существует два типа наборов: для области обслуживания и клиента (для вашей организации). Для каждой страны или региона, где доступна телефонная система, определена набор номеров телефонной системы на сайте службы. Каждому пользователю автоматически назначена телефонная система страны обслуживания, которая соответствует местоположению использования, назначенной пользователю. Вы не можете изменить план набора страны обслуживания, но можете создавать наборные планы на масштабе клиента, что увеличивает объем телефонной программы страны обслуживания. Когда клиенты будут готовы, они получают "эффективную телефонную план", которая является сочетанием плана набора страны обслуживания и соответствующей области действия клиентской телефонной программы. Поэтому не нужно определять все правила нормализации в наборах клиентов, так как они уже существуют в этой стране обслуживания.

Наборы набора клиентов можно дополнительно разбить на две области: область действия клиента или область пользователя. Если клиент определяет и назначает определяемую на пользовательском плане наборов номера, этому пользователю назначается эффективная наборная плана для страны обслуживания и назначенной пользовательской телефонной сети. Если клиент определяет определяемую на клиенте телефонную план, но не назначает пользовательские наборы, этому пользователю будет предусмотрена эффективная наборная план из страны обслуживания и клиентской.

Далее приводится модель наследования групп набора в Teams.

![Как наследуются наборы телефонных групп в Teams](media/b2744f33-ebbd-4c23-bfba-1747312ab178.png)

Ниже перечислены возможные эффективные абонентские группы.

 **Страна обслуживания** Если ни одна из клиентской телефонной плана не определена и для пользователя клиента не назначена предварительная план, пользователь получит эффективную наборную карту, связанную с местом использования.

 **Глобально клиент — Страна обслуживания** Если наборная группа пользователя клиента определена, но не назначена пользователю, предварительно задав ее, пользователь получит эффективную группу набора, которая включает в себя объединенные наборы номера клиента и группу набора для страны обслуживания, связанную с местом использования.

 **Tenant User - Service Country** Если для пользователя определена и назначена телефонная группа пользователя клиента, предварительно задав ее, пользователь получит эффективную группу набора, которая включает в себя объединенные группу набора пользователей клиента и группу набора для страны обслуживания, связанную с местом использования.

См. [создание наборных телефонных планов](create-and-manage-dial-plans.md) клиента и управление ими.

> [!NOTE]
> В сценарии, в котором к набратому номеру не применяются правила нормализации для телефонной сети, строка набора по-прежнему будет нормализована до прев. Это относится к планам звонков, прямой маршрутике и конференции с конференц-связью через ПС.

## <a name="planning-for-tenant-dial-plans"></a>Планирование абонентских групп клиента

Для планирования настраиваемых абонентских групп выполните следующие шаги.

- **Шаг 1** Определите, нужна ли настраиваемая телефонная плана для улучшения работы с набором. Обычно необходимо поддерживать набор номеров, не влияющих на E.164, например расширения или сокращенное национальный.

- **Шаг 2** Определите необходимость в наборных наборах для глобального или пользовательского клиента. Наборные планы на уровне пользователей необходимы, если у пользователей разные требования к набору местных номеров.

- **Шаг 3.** Определите допустимые шаблоны номеров для каждой из необходимых абонентских групп. Требуются только те шаблоны, которые не заданы в абонентских группах страны обслуживания.

- **Шаг 4.** Разработайте схему именования абонентских групп на уровне организации. Использование стандартной схемы именования обеспечивает согласованность работы, а также упрощает обслуживание и обновление системы.


## <a name="creating-your-new-tenant-dial-plan"></a>Создание абонентской группы клиента

При создании абонентской группы следует указать необходимые сведения.

### <a name="name-and-simple-name"></a>Имя и простое имя

Для пользовательских наборов следует указать описательное имя, которое определяет пользователей, которым будет назначена эта план. Поле Простое имя для абонентской группы предварительно заполнено строкой, производной от имени абонентской группы. Поле "Простое имя" доступно для редактирования, что позволяет создать для абонентских групп информативное соглашение об именовании. Поле Простое имя должно быть заполненным и содержать неповторяющееся значение. Рекомендуется разработать соглашение об именовании для всей организации и последовательно применять его для всех сайтов и пользователей.

### <a name="description"></a>Описание

Рекомендуется указать общеупотребительное и узнаваемое название географического расположения или группы пользователей, к которому будет применена соответствующая абонентская группа.

### <a name="external-access-prefix"></a>Префикс для внешнего доступа
<a name="bkexternalprefix"> </a>

Если пользователям нужно набирать одну или несколько начальных цифр (например, цифру 9) для доступа к внешней линии, можно указать префикс для внешнего доступа длиной до четырех символов (допускаются символы #, * и 0-9).

> [!NOTE]
> В случае указания префикса создавать дополнительное правило нормализации для него не требуется.

См. [создание наборных телефонных планов](create-and-manage-dial-plans.md) клиента и управление ими.

## <a name="normalization-rules"></a>Правила нормализации
<a name="bknormalizationrule"> </a>

Правила нормализации определяют, как преобразуются номера телефонов, указанные в разных форматах. Одна и та же строка номера может быть интерпретирована и преобразована по-разному, в зависимости от языкового стандарта, который применяется к набравшему ее пользователю. Правила нормализации могут потребоваться, если пользователям нужно набирать сокращенные внутренние или внешние номера.

Для этой телефонной программы должно быть назначено одно или несколько правил нормализации. Правила нормализации сообязаются сверху вниз, поэтому порядок их появления в клиентской телефонной плане имеет значение. Например, если в клиентской телефонной плане 10 правил нормализации, будет попробована логика их совпадения, начиная с первого правила нормализации, если совпадения нет, вторая и т. д. Если совпадение установлено, это правило используется, и не требуется никаких усилий на его соответствие другим задамым правилам. В данной клиентской телефонной плане может быть не более 50 правил нормализации.

### <a name="determining-the-required-normalization-rules"></a>Определение необходимых правил нормализации

Так как любая телефонная плана клиента будет эффективно объединены с телефонной планом страны обслуживания определенного пользователя, для определения необходимых правил нормализации телефонной сети клиента, скорее всего, потребуется проанализировать правила нормализации для этой страны обслуживания. Для этого можно воспользоваться командлетом **Get-CsEffectiveTenantDialPlan**. Командлет использует удостоверение пользователя в качестве входного параметра и возвращает все правила нормализации, которые применяются к этому пользователю.

### <a name="creating-normalization-rules"></a>Создание правил нормализации
<a name="createrule"> </a>

Правила нормализации используют регулярные выражения .NET Framework для указания шаблонов числов, которые используются сервером для перевода строк набора в формат E.164. Для создания правил нормализации можно указать регулярное выражение для проверки соответствия, и при обнаружении соответствия будет выполнено преобразование. После окончания настройки можно ввести тестовый номер, чтобы проверить работу правил нормализации.

Подробные сведения об использовании регулярных выражений .NET Framework см. в [регулярных выражениях .NET Framework.](https://go.microsoft.com/fwlink/p/?linkId=140927)

См. [функцию "Создание телефонных планов"](create-and-manage-dial-plans.md) и управление ими для создания правил нормализации для ваших клиентской телефонной планов и управления ими.

> [!NOTE]
> Правила нормализации с первым токеном (необязательным) в настоящее время не поддерживаются на устройствах с 3pip (например, модели Polycom VVX 601). Если вы хотите применить правила нормализации с необязательностью на устройствах с 3pip, следует создать два правила нормализации вместо одного. Например, правило ^0? (999)$ следует заменить двумя двумя правилами: (999)$ (Перевод:$1) и ^0(999)$ (Перевод:$1).


### <a name="sample-normalization-rules"></a>Примеры правил нормализации

В следующей таблице приведены примеры правил нормализации, написанных в виде регулярных выражений .NET Framework. Эти примеры приведены только для справки, поэтому не следует рассматривать их в качестве рекомендаций по созданию правил.

<a name="regularexpression"> </a> 
 **Правила нормализации с использованием регулярных выражений .NET Framework**

| Имя правила<br/> | Описание<br/> | Шаблон номера<br/> | Преобразование<br/> | Пример<br/> |
|:-----|:-----|:-----|:-----|:-----|
|4digitExtension  <br/> |Преобразует расширения из четырех цифр.  <br/> |^(\\d{4})$  <br/> |+1425555$1  <br/> |0100 преобразуется в +14255550100  <br/> |
|5digitExtension  <br/> |Преобразует расширения из пяти цифр.  <br/> |^5(\\d{4})$  <br/> |+1425555$1  <br/> |50100 преобразуется в +14255550100  <br/> |
|7digitcallingRedmond  <br/> |Преобразует номера из семи цифр в местные номера Редмонда.  <br/> |^(\\d{7})$  <br/> |+1425$1  <br/> |5550100 преобразуется в +14255550100  <br/>|
|RedmondOperator  <br/> |Преобразует 0 в номер оператора Редмонда.  <br/> |^0$  <br/> |+14255550100  <br/> |0 преобразуется в +14255550100  <br/> |
|RedmondSitePrefix  <br/> |Преобразует номера с внутрисетевым префиксом (6) и кодом Редмонда (222).  <br/> |^6222(\\d{4})$  <br/> |+1425555$1  <br/> |62220100 преобразуется в +14255550100  <br/> |
|5digitRange  <br/> |Преобразует расширения из пяти цифр, которые начинаются с цифры из диапазона от трех до семи включительно.  <br/> |^([3-7]\\d{4})$  <br/> |+142555$1 <br/> |54567 преобразуется в +14255554567  <br/> |
|PrefixAdded  <br/> |Добавляет префикс страны перед номером из девяти цифр с ограничениями для первой и третьей цифр.  <br/> |^([2-9]\\d\\d[2-9]\\d{6})$  <br/> |1$1  <br/> |4255554567 преобразуется в 14255554567  <br/> |
|NoTranslation  <br/> |Соответствует пяти цифрам, но преобразование не выполняется.  <br/> |^(\\d{5})$  <br/> |$1  <br/> |34567 преобразуется в 34567  <br/> |

 **Абонентская группа Редмонда основана на приведенных выше правилах нормализации.**

 В следующей таблице показан пример абонентской группы для города Редмонда (штат Вашингтон, США) на основе правил нормализации из предыдущей таблицы.

| Абонентская группа Редмонда<br/> |
|:-----------------------|                                                                                                                      
| 5digitExtension <br/> |                                                                                                                                    
| 7digitcallingRedmond <br/> |
| RedmondSitePrefix <br/> |
| RedmondOperator <br/> |

> [!NOTE]
> Имена правил нормализации, показанные в предыдущей таблице, не содержат пробелов, но это можно сделать по-разму. Например, первое правило в таблице могло называться 5 digit extension или 5-digit Extension (добавочный номер из 5 цифр).

## <a name="related-topics"></a>Статьи по теме

[Создание и использование абонентских групп](create-and-manage-dial-plans.md)

[Типы номеров телефонов, используемые в планах звонков](different-kinds-of-phone-numbers-used-for-calling-plans.md)

[Управление номерами телефонов организации](manage-phone-numbers-for-your-organization/manage-phone-numbers-for-your-organization.md)

[Условия и положения, распространяющиеся на экстренные вызовы](emergency-calling-terms-and-conditions.md)

[Метка заявление об отказе для экстренных вызовов](https://github.com/MicrosoftDocs/OfficeDocs-SkypeForBusiness/blob/live/Teams/downloads/emergency-calling/emergency-calling-label-(en-us)-(v.1.0).zip?raw=true)
