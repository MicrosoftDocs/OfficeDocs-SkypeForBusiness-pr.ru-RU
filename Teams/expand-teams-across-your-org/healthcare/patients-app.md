---
title: Обзор приложения для пациентов
author: jambirk
ms.author: jambirk
manager: serdars
audience: ITPro
ms.topic: article
ms.service: msteams
search.appverid: MET150
localization_priority: Normal
ms.collection: Teams_ITAdmin_PracticalGuidance
appliesto:
- Microsoft Teams
ms.reviewer: anach
description: Интеграция приложений Microsoft Teams пациентов ехр
ms.openlocfilehash: b76dd4d721d934b4597c5faf1a8f2fc739d5281d
ms.sourcegitcommit: 1786d4beccc8749e20709d2360d90e2bf7634925
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/20/2019
ms.locfileid: "35115995"
---
# <a name="integrating-electronic-healthcare-records-into-microsoft-teams"></a>Интеграция электронных историй болезни в Microsoft Teams

[!INCLUDE [preview-feature](../../includes/preview-feature.md)]

Чтобы принять участие в закрытом предварительном просмотре, просмотрите раздел [Регистрация в частном предварительной версии](#enroll-in-the-private-preview).

Эта статья предназначена для общего СПЕЦИАЛИСТа, заинтересованного в использовании API ФХИР в верхней части системы медицинских данных для подключения к Microsoft Teams. Это позволит соблюдать сценарии координирования, соответствующие потребностям организации здравоохранения.

Связанные статьи. документ: спецификации интерфейса ФХИР для приложения Microsoft Teams пациентов и следующие разделы содержат сведения о том, что необходимо для настройки сервера ФХИР и подключения к приложению пациентов в среде разработки или в клиенте. Вам также необходимо ознакомиться с документацией по выбранному серверу ФХИР, который должен быть одним из поддерживаемых вариантов:
- Датика (в рамках [](https://datica.com/compliant-managed-integration/) своего кминого предложения)
- Кловерлеаф информационного моста (через [мост фхир](https://pages.infor.com/hcl-infor-fhir-bridge-brochure.html))
- Редокс (с помощью [сервера R ^ фхир](https://www.redoxengine.com/fhir/))
- Дапасофт (до [королар на фхир](https://www.dapasoft.com/corolar-fhir-server-for-microsoft-teams/))

> [!NOTE]
> Этот процесс не включает шаги, которые используют центр администрирования Microsoft Teams или командлеты PowerShell для включения функций. Конфигурация полностью выполняется на стороне сервера или службы ФХИР и в клиенте приложения пациентов.

Ниже показано, как архитектура приложения пациентов.

![Схема архитектуры приложения пациентов](../../media/patients-app-architecture.png)

В следующих разделах описаны требования уровня доступа к данным "ФХИР" для приложения пациентов, которому должны соответствовать ФХИР сервер (или ехр включения ФХИР API) для интеграции с приложением пациентов, в том числе описанных ниже действий.

- Ожидаемые решения для проверки подлинности пользователя
- Функциональные и технические требования к интерфейсу интеграции
- Ожидание в отношении производительности и надежности
- Ожидания для ФХИРных ресурсов, которые должны поддерживаться в приложении пациентов
- Процесс интеграции и ожидаемая модель задействования
- Регистрация себя и клиента в частном предварительной версии приложения пациентов
- Как начать работу с ФХИР и некоторые распространенные проблемы, с которыми сталкиваются с приложением пациентов
- Будущие требования к следующей итерации приложения пациентов

> [!NOTE]
> В следующих разделах слово "партнер" или "партнер по взаимодействию" используется для ссылки на независимую организацию, которая обеспечивает интеграцию с ехр системами для приложения пациентов через ФХИР и реализует ФХИР сервер для соответствия указанным спецификациям.

## <a name="functional-and-technical-requirements"></a>Функциональные и технические требования  

### <a name="authentication"></a>Проверка подлинности  

Авторизация на уровне приложений без *поддержки авторизации на уровне пользователей* — это наиболее распространенный способ выполнения преобразования данных и предоставления доступа к данным ехр через фхир, даже если система ехр может реализовать авторизацию на уровне пользователя. . Служба взаимодействия (Partner) получает доступ к данным ехр с повышенными привилегиями, и когда они предоставляют те же данные, что и соответствующие ресурсы ФХИР, то контекст авторизации не передается потребителю службы взаимодействия (приложение пациентов), интеграция с взаимодействием Служба или платформа. Приложение пациентов не сможет применять авторизацию на уровне пользователей, но поддерживает проверку подлинности приложения между приложением пациентов и службой партнера по взаимодействию.

Модель проверки подлинности приложения для приложения описана ниже.

Проверка подлинности службы для проверки должна выполняться с помощью [потока учетных данных клиента](https://www.oauth.com/oauth2-servers/access-tokens/client-credentials/)OAuth 2,0. Служба-партнер должна предоставить следующее:

1. Служба Partner позволяет приложению пациентов создать учетную запись с партнером, которая позволяет приложению пациентов создавать и использовать клиент_ид и клиент_секрет, управляемые через портал регистрации авторизации на сервере аутентификации партнера.
2. Служба-партнер владеет системой проверки подлинности и авторизации, которая принимает и проверяет (проверяет подлинность) предоставленные учетные данные клиента и возвращает маркер доступа с указанием клиента в области действия, как описано ниже.
3. В целях обеспечения безопасности, а также в случае нарушения секретности приложение пациентов может повторно создать секретный код и сделать недействительным или удалить старый секрет (пример такого же можно найти на портале Azure — регистрация приложений AAD).
4. Для конечной точки метаданных, в которой размещена Инструкция по обеспечению соответствия, необходимо отменить проверку подлинности, поэтому она должна быть доступна без маркера проверки подлинности.
5. Служба Partner предоставляет конечной точке маркера для приложения пациентов запрос токена доступа с помощью потока учетных данных клиента. URL-адрес маркера, указанный на сервере авторизации, должен быть частью инструкции ФХИР (возможности), полученной из метаданных на сервере ФХИР, как показано в следующем примере:

* * *
    {"resourceType": "Капабилитистатемент";
        .
        .
        "оставшаяся: [{" Mode ":" сервер "," безопасность ": {" расширение ": [{" расширение ": [{" URL-адрес ":" лексема "," валуеуриhttps://login.contoso.com/145f4184-1b0b-41c7-ba24-b3c1291bfda1/oauth2/token":" ",", "валуеури": "https://login.contoso.com/145f4184-1b0b-41c7-ba24-b3c1291bfda1/oauth2/authorize", ":"http://fhir-registry.smarthealthit.org/StructureDefinition/oauth-uris"}", "URL-адрес" "" "}]," служба ": [{" программирование ": [{" System "http://hl7.org/fhir/ValueSet/restful-security-service:" ";" код ":" OAuth " } ] } ] }, .
                .
                .
            } ] }

* * *

Запрос маркера доступа состоит из следующих параметров:

* * *

    Публикация узла HTTP/1.1/токен: authorization-server.com

    Grant-Type = клиент_кредентиалс &клиент_ид = кскскскскскскскскскс &клиент_секрет = кскскскскскскскскскс

* * *

Служба Partner предоставляет приложение клиент_ид и клиент_секрет для пациентов, управляемое через портал регистрации проверки подлинности на стороне партнера. Служба Partner предоставляет конечной точке запрос на доступ к маркеру доступа с помощью потока учетных данных клиента. Успешный ответ должен включать параметры токен_типе, акцесс_токен и експирес_ин.

### <a name="routing-mapping-aad-tenant-to-the-provider-endpoint"></a>Routing: сопоставление клиента AAD с конечной точкой поставщика

Приложение пациентов подключается к службе-партнеру через одну конечную точку. Служба-партнер владеет и поддерживает механизм сопоставления каждого клиента Майкрософт (ИД клиента AAD) соответствующему поставщику здравоохранения (сервер ФХИР), с которым работает служба Partner.

Сопоставление клиента AAD с конечной точкой поставщика использует идентификатор клиента AAD (GUID). Приложение пациентов передает идентификатор клиента в области, запросив маркер доступа для каждого запроса. Служба Partner хранит сопоставление идентификатора клиента и конечной точки поставщика и перенаправляет запросы в конечную точку поставщика на основе идентификатора клиента. Для этого партнер поддерживает конфигурацию на своем окончании (вручную или через портал в рамках встроенной Организации поставщиков на платформу взаимодействия).

Рабочий процесс проверки подлинности и маршрутизации показан ниже.

![Схема рабочего процесса маршрутизации и проверки подлинности](../../media/Patient-app-6.png)

1. Запрос маркера доступа к приложению путем отправки:
 
        {   grant_type: client_credentials,
            client_id: xxxxxx, 
            client_secret: xxxxxx,
            scope: {Provider Identifier, Ex: tenant ID}
        }

2. Ответьте на маркер приложения:

        {  access_token: {JWT, with scope: tenant ID},
           expires_in: 156678,
           token_type: "Bearer",
        }

3. Запросите защищенные данные с помощью маркера доступа.
4. Сообщение о проверке подлинности: выберите соответствующий сервер ФХИР для маршрутизации из идентификатора клиента в области
5. Отправляет данные, защищенные приложением, от авторизованного сервера ФХИР после проверки подлинности с помощью маркера приложения.

## <a name="interfaces"></a>Приклад

Специальные вызовы и поля, используемые приложением пациентов, описаны в указанных ниже статьях. Выберите интерфейс, применимый к интерфейсам API ФХИР и ФХИР сервера.

- [Характеристики интерфейса DSTU2](dstu2-interface.md)
- [Характеристики интерфейса STU3](stu3-interface.md)

## <a name="performance-and-reliability"></a>Производительность и надежность

Несмотря на то, что приложение пациентов в закрытом предварительном просмотре, нет гарантии на производительность "на конец". Факторы, влияющие на производительность, включают относительную задержку всех переходов, участвующих в рабочем процессе, начиная с ехр в среде системы работоспособности и до партнера по взаимодействию, включая сервер ФХИР и для экосистемы Office 365, и Приложение пациентов.

![Иллюстрация производительности партнеров по взаимодействию](../../media/FHIR.png)

## <a name="get-started-with-fhir"></a>Начало работы с ФХИР  

Если вы новичок в ФХИР и вам нужно легко получить доступ к серверу ФХИР, который можно использовать для интерфейса интеграции Microsoft Teams ехр, корпорация Майкрософт предоставляет доступ к серверу ФХИР с открытым исходным кодом для всех разработчиков. Ознакомьтесь со статьей " [что такое сервер фхир для Azure](https://docs.microsoft.com/azure/healthcare-apis/overview-open-source-server) ", чтобы узнать больше о сервере Open Source фхир, доступном в Microsoft, и его развертывании для организаций.

Вы также можете использовать среду ХСПК Open песочницы ехр, чтобы создать ехр, который также поддерживает открытый сервер ФХИР и использовать его для воспроизведения с помощью приложения пациентов. Мы рекомендуем ознакомиться с документацией по [программной среде хспк](https://healthservices.atlassian.net/wiki/spaces/HSPC/pages/64585866/HSPC+Sandbox). Среда выполнения не только предоставляет простой, ориентированный на пользовательский интерфейс и удобный способ создания, добавления и редактирования пациентов, он также предоставляет несколько образцов для начала работы.  

## <a name="enroll-in-the-private-preview"></a>Регистрация в частном предварительной версии

Создав сервер ФХИР с открытым исходным кодом, вы можете легко подключиться к приложению пациентов в вашем клиенте, выполнив указанные ниже действия.

1. [Обратитесь к нам](mailto:Teamsforhealthcare@service.microsoft.com?subject=Microsoft%20Teams%20Patients%20App%20private%20preview) со следующими начальными данными:  
    - Ваше имя
    - Ваше расположение
    - Компания или организация, которые вы представляете
    - Зачем заинтересовать приложение пациентов для интеграции ехр

    Мы вернемся к вам как можно скорее с помощью других вопросов и поможем вам пройти процесс настройки для частного просмотра.

2. Убедитесь в том, что в клиенте, на котором вы собираетесь опробовать приложение пациентов, включена поддержка неопубликованных приложений. Сведения о том, как включить эту функцию из центра администрирования Teams для клиента клиента, можно найти в разделе [политики разрешений приложения](../../admin-settings.md) .

3. Неопубликованного манифест приложения пациентов, который вы будете получать от Майкрософт (после обработки электронной почты), в команду в клиенте, который будет использоваться для выполнения сценариев координирования и обработки и приема пациента. Подробные инструкции по загрузке приложения в [Microsoft Teams путем отправки пакета приложения](/microsoftteams/platform/concepts/apps/apps-upload)

4. Перейдите к каналу "Общие" в качестве владельца команды и откройте вкладку пациентов. На экране должна отобразиться программа первого запуска, в которой представлено два варианта, например режим ехр и режим вручную. Выберите **режим ехр** и скопируйте конечную точку сервера фхир (вы только что настроили ранее, а также все необходимые данные и ресурсы в соответствии с приведенными выше спецификациями) в поле "ссылка" и присвойте имя подключенному имени, которое будет представлять собой фхир сервер. Нажмите кнопку Подключить, и все должны быть готовы к переходу.

    ![Снимок экрана с параметрами сервера приложений пациентов](../../media/patients-server.png)

5. Начните использовать приложение, чтобы найти пациентов с сервера ФХИР/ехр и добавить их в список, и сообщите [нам](mailto:Teamsforhealthcare@service.microsoft.com?subject=Microsoft%20Teams%20Patients%20App%20feedback) , если что-то не поработает. Кроме того, чтобы установить полностью прошедший проверку подлинности серверного потока пациентов App-> ФХИР, пожалуйста, выйдите из диалогового окна в автономном режиме с помощью Microsoft Teams для сферы здравоохранения с помощью запроса, упомянутого ранее, чтобы уточнить требования, и мы будем Это можно сделать в соответствии с требованиями для проверки подлинности, описанными выше в документе интерфейс ФХИР.  


