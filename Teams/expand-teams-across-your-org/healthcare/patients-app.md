---
title: Обзор приложения для пациентов
author: dstrome
ms.author: dstrome
manager: serdars
audience: ITPro
ms.topic: article
ms.service: msteams
search.appverid: MET150
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection:
- M365-collaboration
- Teams_ITAdmin_Healthcare
appliesto:
- Microsoft Teams
ms.reviewer: anach
description: Узнайте о том, как интегрировать электронные записи в здравоохранение в приложение Microsoft Teams пациентов с помощью API-интерфейсов FHIR.
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: 29bb5b32cdd6e2f0d819adcc610639929921d078
ms.sourcegitcommit: 3b54a56ec1fe4366580621e19cdbb6a833a01161
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2020
ms.locfileid: "48361389"
---
# <a name="integrating-electronic-healthcare-records-into-microsoft-teams"></a>Интеграция электронных историй болезни в Microsoft Teams

> [!IMPORTANT]
> **Эффективная работа с 15 октября 2020 г. приложение пациентов будет устаревшим, и пользователи больше не смогут установить его из магазина приложений Teams. Мы рекомендуем вам приступить к работе с [приложением "списки](https://support.microsoft.com/office/get-started-with-lists-in-teams-c971e46b-b36c-491b-9c35-efeddd0297db) " в Teams уже сегодня.**
>
>Данные приложения пациентов хранятся в почтовом ящике группы Office 365, которая является резервной командой. Когда приложение пациентов удаляется, все связанные с ним данные будут храниться в этой группе, но к нему больше нельзя будет получить доступ с помощью пользовательского интерфейса. Текущие пользователи могут повторно создавать свои списки с помощью [приложения "списки](https://support.microsoft.com/office/get-started-with-lists-in-teams-c971e46b-b36c-491b-9c35-efeddd0297db)".
>
>[Приложение "списки](https://support.microsoft.com/office/get-started-with-lists-in-teams-c971e46b-b36c-491b-9c35-efeddd0297db) " предустановлено для всех пользователей Teams и доступно в виде вкладки в каждой команде и канале. С помощью списков благодаря специалистам по карьерным тарифам могут создаваться списки пациента с использованием встроенного шаблона пациентов, с нуля или путем импорта данных в Excel. Дополнительные сведения об управлении приложением Lists в Организации можно найти в разделе [Управление приложением "списки"](../../manage-lists-app.md).

[!INCLUDE [preview-feature](../../includes/preview-feature.md)]

Эта статья предназначена для общего СПЕЦИАЛИСТа, заинтересованного в использовании API FHIR в верхней части системы медицинских данных для подключения к Microsoft Teams. Это позволит соблюдать сценарии координирования, соответствующие потребностям организации здравоохранения.

Связанные статьи. документ: спецификации интерфейса FHIR для приложения Microsoft Teams пациентов и следующие разделы содержат сведения о том, что необходимо для настройки сервера FHIR и подключения к приложению пациентов в среде разработки или в клиенте. Вам также необходимо ознакомиться с документацией по выбранному серверу FHIR, который должен быть одним из поддерживаемых вариантов:
- Datica (в рамках своего [CMIного](https://datica.com/compliant-managed-integration/) предложения)
- Cloverleaf информационного моста (через [мост FHIR](https://pages.infor.com/hcl-infor-fhir-bridge-brochure.html))
- Redox (с помощью [сервера R ^ FHIR](https://www.redoxengine.com/fhir/))
- Dapasoft (до [Corolar на FHIR](https://www.dapasoft.com/corolar-fhir-server-for-microsoft-teams/))

> [!NOTE]
> Этот процесс не включает шаги, которые используют центр администрирования Microsoft Teams или командлеты PowerShell для включения функций. Конфигурация полностью выполняется на стороне сервера или службы FHIR и в клиенте приложения пациентов.

Ниже показано, как архитектура приложения пациентов.

![Схема архитектуры приложения пациентов](../../media/patients-app-architecture.png)

В следующих разделах описаны требования уровня доступа к данным "FHIR" для приложения пациентов, которому должны соответствовать FHIR сервер (или EHR включения FHIR API) для интеграции с приложением пациентов, в том числе описанных ниже действий.

- Ожидаемые решения для проверки подлинности пользователя
- Функциональные и технические требования к интерфейсу интеграции
- Ожидание в отношении производительности и надежности
- Ожидания для FHIRных ресурсов, которые должны поддерживаться в приложении пациентов
- Процесс интеграции и ожидаемая модель задействования
- Как начать работу с FHIR и некоторые распространенные проблемы, с которыми сталкиваются с приложением пациентов
- Будущие требования к следующей итерации приложения пациентов

> [!NOTE]
> В следующих разделах слово "партнер" или "партнер по взаимодействию" используется для ссылки на независимую организацию, которая обеспечивает интеграцию с EHR системами для приложения пациентов через FHIR и реализует FHIR сервер для соответствия указанным спецификациям.

## <a name="functional-and-technical-requirements"></a>Функциональные и технические требования  

### <a name="authentication"></a>Проверка подлинности  

Авторизация на уровне приложений без *поддержки авторизации на уровне пользователей* — это наиболее распространенный способ выполнения преобразования данных и предоставления доступа к данным EHR через FHIR, даже если система EHR может реализовать авторизацию на уровне пользователя. Служба взаимодействия (Partner) получает доступ к данным EHR с повышенными привилегиями, и когда они предоставляют те же данные, что и соответствующие ресурсы FHIR, то контекст авторизации не передается потребителю службы взаимодействия (приложение пациентов), интеграция со службой взаимодействия или платформой. Приложение пациентов не сможет применять авторизацию на уровне пользователей, но поддерживает проверку подлинности приложения между приложением пациентов и службой партнера по взаимодействию.

Модель проверки подлинности приложения для приложения описана ниже.

Проверка подлинности службы для проверки должна выполняться с помощью [потока учетных данных клиента](https://www.oauth.com/oauth2-servers/access-tokens/client-credentials/)OAuth 2,0. Служба-партнер должна предоставить следующее:

1. Служба Partner позволяет приложению пациентов создать учетную запись с партнером, которая позволяет приложению пациентов создавать и владеть client_id и client_secret, управляемым с помощью портала регистрации проверки подлинности на сервере аутентификации партнера.
2. Служба-партнер владеет системой проверки подлинности и авторизации, которая принимает и проверяет (проверяет подлинность) предоставленные учетные данные клиента и возвращает маркер доступа с указанием клиента в области действия, как описано ниже.
3. В целях обеспечения безопасности, а также в случае нарушения секретности приложение пациентов может повторно создать секретный код и сделать недействительным или удалить старый секрет (пример такого же можно найти на портале Azure — регистрация приложений AAD).
4. Для конечной точки метаданных, в которой размещена Инструкция по обеспечению соответствия, необходимо отменить проверку подлинности, поэтому она должна быть доступна без маркера проверки подлинности.
5. Служба Partner предоставляет конечной точке маркера для приложения пациентов запрос токена доступа с помощью потока учетных данных клиента. URL-адрес маркера, указанный на сервере авторизации, должен быть частью инструкции FHIR (возможности), полученной из метаданных на сервере FHIR, как показано в следующем примере:

* * *
    {"resourceType": "CapabilityStatement";
        .
        .
        "оставшаяся: [{" Mode ":" сервер "," безопасность ": {" расширение ": [{" расширение ": [{" URL ":" token "," valueUri ":" https://login.contoso.com/145f4184-1b0b-41c7-ba24-b3c1291bfda1/oauth2/token "}, {" URL-адрес ":" Авторизация "," valueUri ":" "}]," https://login.contoso.com/145f4184-1b0b-41c7-ba24-b3c1291bfda1/oauth2/authorize URL-адрес ": http://fhir-registry.smarthealthit.org/StructureDefinition/oauth-uris [{" System ":" https://hl7.org/fhir/ValueSet/restful-security-service "," код ":" OAuth "}]}]},.
                .
                .
            } ] }

* * *

Запрос маркера доступа состоит из следующих параметров:

* * *

    Публикация узла HTTP/1.1/Token: authorization-server.com

    Grant-Type = client_credentials &client_id = XXXXXXXXXX &client_secret = XXXXXXXXXX

* * *

Служба Partner предоставляет client_id и client_secret для приложения пациентов, управляемого через портал регистрации проверки подлинности на стороне партнера. Служба Partner предоставляет конечной точке запрос на доступ к маркеру доступа с помощью потока учетных данных клиента. Успешный ответ должен включать параметры token_type, access_token и expires_in.

### <a name="routing-mapping-aad-tenant-to-the-provider-endpoint"></a>Routing: сопоставление клиента AAD с конечной точкой поставщика

Приложение пациентов подключается к службе-партнеру через одну конечную точку. Служба-партнер владеет и поддерживает механизм сопоставления каждого клиента Майкрософт (ИД клиента AAD) соответствующему поставщику здравоохранения (сервер FHIR), с которым работает служба Partner.

Сопоставление клиента AAD с конечной точкой поставщика использует идентификатор клиента AAD (GUID). Приложение пациентов передает идентификатор клиента в области, запросив маркер доступа для каждого запроса. Служба Partner хранит сопоставление идентификатора клиента и конечной точки поставщика и перенаправляет запросы в конечную точку поставщика на основе идентификатора клиента. Для этого партнер поддерживает конфигурацию на своем окончании (вручную или через портал в рамках встроенной Организации поставщиков на платформу взаимодействия).

Рабочий процесс проверки подлинности и маршрутизации показан ниже.

![Схема рабочего процесса маршрутизации и проверки подлинности](../../media/Patient-app-6.png)

1. Запрос маркера доступа к приложению путем отправки:
 
        {   grant_type: client_credentials,
            client_id: xxxxxx, 
            client_secret: xxxxxx,
            scope: {Provider Identifier, Ex: tenant ID}
        }

2. Ответьте на маркер приложения:

        {  access_token: {JWT, with scope: tenant ID},
           expires_in: 156678,
           token_type: "Bearer",
        }

3. Запросите защищенные данные с помощью маркера доступа.
4. Сообщение о проверке подлинности: выберите соответствующий сервер FHIR для маршрутизации из идентификатора клиента в области
5. Отправляет данные, защищенные приложением, от авторизованного сервера FHIR после проверки подлинности с помощью маркера приложения.

## <a name="interfaces"></a>Приклад

Специальные вызовы и поля, используемые приложением пациентов, описаны в указанных ниже статьях. Выберите интерфейс, применимый к интерфейсам API FHIR и FHIR сервера.

- [Характеристики интерфейса DSTU2](dstu2-interface.md)
- [Характеристики интерфейса STU3](stu3-interface.md)

## <a name="performance-and-reliability"></a>Производительность и надежность

Несмотря на то, что приложение пациентов в закрытом предварительном просмотре, нет гарантии на производительность "на конец". Факторы, влияющие на производительность, включают относительную задержку всех переходов, участвующих в рабочем процессе, начиная с EHR в среде системы работоспособности и до партнера по взаимодействию, включая сервер FHIR и в приложение Office 365 для экосистемы и пациентов.

![Иллюстрация производительности партнеров по взаимодействию](../../media/FHIR.png)

## <a name="get-started-with-fhir"></a>Начало работы с FHIR  

Если вы новичок в FHIR и вам нужно легко получить доступ к серверу FHIR, который можно использовать для интерфейса интеграции Microsoft Teams EHR, корпорация Майкрософт предоставляет доступ к серверу FHIR с открытым исходным кодом для всех разработчиков. Ознакомьтесь со статьей " [что такое сервер FHIR для Azure](https://docs.microsoft.com/azure/healthcare-apis/overview-open-source-server) ", чтобы узнать больше о сервере Open Source FHIR, доступном в Microsoft, и его развертывании для организаций.

Вы также можете использовать среду HSPC Open песочницы EHR, чтобы создать EHR, который также поддерживает открытый сервер FHIR и использовать его для воспроизведения с помощью приложения пациентов. Мы рекомендуем ознакомиться с [документацией по программной среде HSPC](https://healthservices.atlassian.net/wiki/spaces/HSPC/pages/64585866/HSPC+Sandbox). Среда выполнения не только предоставляет простой, ориентированный на пользовательский интерфейс и удобный способ создания, добавления и редактирования пациентов, он также предоставляет несколько образцов для начала работы. 