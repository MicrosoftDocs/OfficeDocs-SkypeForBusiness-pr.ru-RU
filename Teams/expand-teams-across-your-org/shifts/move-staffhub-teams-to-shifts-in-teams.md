---
title: Перемещение команд StaffHub в приложение "Смены" в Microsoft Teams
author: LanaChin
ms.author: v-lanac
ms.reviewer: lisawu
manager: serdars
ms.topic: article
ms.service: msteams
search.appverid: MET150
description: Узнайте, как перемещать команды Microsoft StaffHub и данные расписания в приложение "Смены" в Microsoft Teams.
localization_priority: Normal
MS.collection: Strat_MT_TeamsAdmin
appliesto:
- Microsoft Teams
ms.openlocfilehash: e2e8b0ac4f1c4eb0cce2cae97481fc428f588ec5
ms.sourcegitcommit: 8f9bf1acdcdc2104fa8c343c030d64838e2c31eb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/07/2019
ms.locfileid: "34780811"
---
# <a name="move-your-microsoft-staffhub-teams-to-shifts-in-microsoft-teams"></a>Перемещение команд Microsoft StaffHub в приложение "Смены" в Microsoft Teams

> [!IMPORTANT]
> С 1 октября 2019 г. прекращается поддержка приложения Microsoft StaffHub. Мы встраиваем возможности StaffHub в Microsoft Teams. В настоящее время в состав Teams входит приложение "Смены" для управления расписанием, и со временем будут развернуты дополнительные возможности. Приложение StaffHub перестанет работать для всех пользователей 1 октября 2019 г. При любой попытке открыть StaffHub будет отображаться сообщение, ведущее на скачивание Teams. Дополнительные сведения см. в статье [Прекращение поддержки Microsoft StaffHub](microsoft-staffhub-to-be-retired.md).

Приложение "Смены" в Teams предоставляет простой способ управления расписаниями, а также постоянный поток изменений и отмен смен, происходящих на повседневной основе. Участники команд могут обращаться к своему расписанию и сведениям о сменах непосредственно в приложении и на других устройствах, чтобы устанавливать свои параметры, управлять расписаниями и запрашивать отгулы.

В этой статье описано, как переместить команды StaffHub организации и данные расписания в приложение "Смены" в Teams. Рассматриваются следующие вопросы:

- [Что нужно знать о переходе в Teams](#what-you-need-to-know-about-the-move-to-teams)
- [Подготовка](#prepare)
- [Пилотная реализация](#conduct-a-pilot) 
- [Переход от пилотной реализации к перемещению всех команд StaffHub](#go-beyond-your-pilot-and-move-all-staffhub-teams)
- [Отслеживание использования приложения Teams](#monitor-teams-usage)
- [Устранение неполадок](#troubleshooting)

Независимо от того, являетесь ли вы небольшой компанией с одной или двумя командами StaffHub или крупным предприятием с сотнями команд StaffHub, здесь вы найдете инструкции для администраторов, необходимые для успешного перехода в Teams.

Для выполнения действий, описанных в этой статье, вы должны быть глобальным администратором. Если вы еще не сделали этого, просмотрите [вопросы и ответы о прекращении поддержки StaffHub](microsoft-staffhub-to-be-retired.md), чтобы получить ответы на возникающие вопросы.

## <a name="what-you-need-to-know-about-the-move-to-teams"></a>Что нужно знать о переходе в Teams

### <a name="when-to-move-to-teams"></a>Когда переходить в Teams

С 1 октября 2019 г. прекращается поддержка приложения StaffHub. Мы рекомендуем приступить к использованию Teams уже сегодня и начать перемещение команд и пользователей организации из StaffHub. Так как наиболее часто используется функция управления расписанием, в дальнейшем рекомендуется использовать приложение "Смены" в Teams.

### <a name="what-is-moved-to-teams"></a>Что перемещается в Teams

В Teams переносятся сведения о пользователях, информация о расписании, а так же данные чатов и файлов. Это включает участие в командах, расписание команд, чаты и файлы за последние 90 дней.

Каждой команде StaffHub требуется соответствующая группа Office 365. Если с командой StaffHub не связана группа Office 365, она автоматически создается для поддержки перехода. Учитывая разницу в именовании команд и групп в Teams и StaffHub, в Teams может отображаться другое имя команды.

При переносе команд из StaffHub в Teams пользователи больше не смогут получать доступ к своим расписаниям в StaffHub и будут перенаправляться в приложение "Смены" в Teams. Мы рекомендуем сообщить об этом изменении в организации, чтобы свести к минимуму перерывы в работе и помочь пользователям с адаптацией и изучением Teams. Если вы используете Azure AD Premium, вы можете [запустить отчет](run-report-to-show-staffhub-usage.md), чтобы получить список пользователей StaffHub в организации, которых нужно оповестить об этом изменении.  

После перемещения команды StaffHub в Teams вы не сможете выполнить откат.

### <a name="user-experience-when-you-move-a-team"></a>Взаимодействие с пользователем при перемещении команды

При переносе команды из StaffHub в приложение "Смены" в Teams время простоя пользователей минимально (меньше секунды или совсем отсутствует). Пользователи могут продолжать использовать StaffHub, пока не завершится перемещение в Teams. По завершении перемещения участники команды увидят сообщение, уведомляющее о необходимости использования приложения "Смены" в Teams для доступа к расписанию команды. Ниже представлен пример сообщения, отображаемого для пользователей в StaffHub после перемещения команды StaffHub в Teams.

![Пример сообщения, отображаемого для пользователей.](../../media/move-staffhub-teams-to-shifts-in-teams-message-to-users.png "Пример сообщения, отображаемого для пользователей в StaffHub после перемещения команды StaffHub в Teams")

## <a name="prepare"></a>Подготовка

Ниже описано, как подготовиться к переходу в Teams.

### <a name="check-that-prerequisites-are-met"></a>Проверка соответствия предварительным требованиям

Перед перемещением команды StaffHub в Teams убедитесь, что:

- Вошедший пользователь является глобальным администратором.
- Приложение Teams включено для всех пользователей в клиенте.
- Создание групп Office 365 включено в клиенте.
- Идентификатор команды StaffHub является действительным.
- Команда StaffHub содержит участников. 
- Все участники команды StaffHub связаны с учетной записью Azure AD. 

Если эти предварительные требования не соблюдаются, запрос на перемещение завершится сбоем. 

### <a name="assign-teams-licenses"></a>Назначение лицензий Teams

У каждого пользователя должна быть действующая лицензия Microsoft 365 или Office 365 из [поддерживаемого](microsoft-staffhub-to-be-retired.md#which-plans-is-shifts-available-in) плана, а также назначенная лицензия Teams. Назначение пользователям лицензии Teams предоставляет им доступ к приложению Teams.

Управление лицензиями Teams осуществляется в Центре администрирования Microsoft 365. Дополнительные сведения см. в статье [Управление доступом пользователей к Teams](../../user-access.md).

> [!NOTE]
> Если в вашей организации используется Skype для бизнеса, но вы не готовы перенести всех пользователей в Teams, вы можете включить приложение Teams для сотрудников без компьютера, которые после этого смогут запускать Teams вместе со Skype для бизнеса. В этом режиме сосуществования под названием *Острова* каждое клиентское приложение работает как отдельное решение. Дополнительные сведения см. в разделе [Сосуществование и взаимодействие Teams и Skype для бизнеса](../../teams-and-skypeforbusiness-coexistence-and-interoperability.md).

### <a name="install-the-staffhub-powershell-module"></a>Установка модуля StaffHub PowerShell

Если вы еще не сделали это, [установите модуль StaffHub PowerShell](install-the-staffhub-powershell-module.md). 

### <a name="provision-accounts-for-staffhub-users-who-dont-have-an-identity-in-azure-ad"></a>Подготовка учетных записей для пользователей StaffHub, не имеющих удостоверений в Azure AD

У каждого руководителя и участника команды должно быть удостоверение в Azure Active Directory (Azure AD). Если у пользователя еще нет удостоверения в Azure AD, подготовьте для него учетную запись. Ниже описано, как это сделать. 

#### <a name="get-a-list-of-all-users-on-staffhub-teams-that-have-team-members-that-arent-provisioned-with-an-azure-ad-account"></a>Получение списка всех пользователей из команд StaffHub с участниками, для которых не подготовлены учетные записи Azure AD

Выполните следующую команду:
```
$StaffHubTeams = Get-StaffHubTeamsForTenant -ManagedBy "Staffhub"
foreach($team in $StaffHubTeams[0]) {Get-StaffHubMember -TeamId $team.Id | where {$_.Email -eq $null -or $_.State -eq "Invited"}}
```

#### <a name="provision-the-account"></a>Подготовка учетной записи

Выполните одно из указанных ниже действий.

- Преобразуйте и свяжите учетную запись с подготовленной учетной записью.

  Владельцы и руководители команд StaffHub могут преобразовать фиктивную или неактивную учетную запись и связать ее с подготовленной учетной записью в StaffHub, изменив адрес электронной почты пользователя на действительное имя участника-пользователя на странице параметров команды StaffHub.

- Удалите неподготовленную учетную запись и повторите добавление учетной записи, используя имя участника-пользователя.
    1. Запустите командлет [Remove-StaffHubUser](https://docs.microsoft.com/powershell/module/staffhub/Remove-StaffHubUser?view=staffhub-ps), чтобы удалить неподготовленную учетную запись из команды StaffHub.
    2. Запустите командлет [Add-StaffHubMember](https://docs.microsoft.com/powershell/module/staffhub/add-staffhubmember?view=staffhub-ps), чтобы снова добавить учетную запись в команду StaffHub, используя имя участника-пользователя. 

### <a name="assign-the-firstlineworker-app-setup-policy-to-users"></a>Назначение пользователям политики настройки приложений FirstlineWorker

Teams содержит встроенную политику настройки приложений FirstlineWorker, с помощью которой можно настроить Teams для выделения наиболее важных приложений для сотрудников без компьютера в вашей организации. Когда вы назначаете эту политику пользователям, приложения, указанные в политике, закрепляются на панели приложений в Teams для быстрого и удобного доступа. Другие приложения, добавленные в Teams, можно найти на панели приложений, щелкнув пункт **... Другие приложения** в классическом и веб-клиенте Teams или проведя пальцем в мобильном клиенте Teams. По умолчанию политика настройки приложений FirstlineWorker включает приложения "Действия", "Смены", "Чат" и "Звонки".

Инструкции по назначению пользователям политики настройки приложений FirstlineWorker см. в разделе [Использование политики настройки приложений FirstlineWorker для закрепления приложения "Смены" в Teams](manage-the-shifts-app-for-your-organization-in-teams.md#use-the-firstlineworker-app-setup-policy-to-pin-shifts-to-teams). После назначения политики может пройти до 24 часов перед ее вступлением в силу.

Рекомендуется выполнять это действие минимум за неделю до перемещения команд и пользователей StaffHub в Teams. После перемещения пользователей в Teams убедитесь, что они могут просматривать и использовать приложение "Смены".

Вы также можете создавать собственные политики настройки приложений и изменять параметры в глобальной политике настройки приложений. Дополнительные сведения см. в статье [Управление политиками настройки приложений в Teams](../../teams-app-setup-policies.md).

### <a name="onboard-users-to-teams"></a>Адаптация пользователей к Teams

В рамках стратегии адаптации обеспечьте учебные материалы и рекомендации для пользователей с целью знакомства с Teams. Предоставьте пользователям следующие ресурсы, чтобы они смогли узнать, где можно скачать клиент Teams и учебные материалы или воспользоваться поддержкой:

- [Веб-клиент Teams](https://teams.microsoft.com)
- [Ссылки для скачивания настольной и мобильной версий клиента](https://teams.microsoft.com/downloads)
- [Обучающие видео для Teams](https://support.office.com/article/microsoft-teams-video-training-4f108e54-240b-4351-8084-b1089f0d21d7)
- [Справочная документация для Teams](https://support.office.com/teams)

Рекомендации по развертыванию Teams и управлению внедрением Teams см. в статьях [Способ развертывания Teams](../../How-to-roll-out-teams.md) и [Внедрение Teams](../../adopt-microsoft-teams-landing-page.md).

## <a name="conduct-a-pilot"></a>Пилотная реализация

Рекомендуется сначала переместить две или три команды StaffHub для выбранной группы ранних пользователей. Пилотная реализация позволяет уточнить план перехода и обеспечить готовность к перемещению всех команд StaffHub вашей организации в Teams. С ее помощью также определяются лидеры, помогающие выполнять внедрение в вашей организации. Если вы относитесь к малому бизнесу, не требующему поэтапной реализации, действия, описанные в этом разделе, могут удовлетворить все ваши потребности для перехода со StaffHub на Teams.

### <a name="identify-pilot-teams"></a>Определение пилотных команд

Определите две или три пилотные команды. Все участники команд должны согласиться на использование приложения "Смены" в Teams для управления своими расписаниями и взаимодействия между собой.

### <a name="identify-team-champions"></a>Выбор лидеров команд

Определите лидеров пилотных команд, которые будут популяризировать приложение "Смены". Лидерам команд нравится, когда они делятся своими знаниями и предоставляют поддержку и руководство для участников команд. Лидеры команд могут быть владельцами или руководителями команд.

Лидеры команд должны обеспечить к назначенному времени готовность участников команд к [получению клиентов Teams](../../get-clients.md), входу в Teams, проверке расписаний в приложении "Смена" и к началу беседы с другими пользователями. Пользователи, уже знакомые со StaffHub, смогут быстро начать работу в приложении "Смены". Кроме того, вы можете направить их за дополнительной помощью в [справку по приложению "Смены"](https://support.office.com/article/apps-and-services-cc1fba57-9900-4634-8306-2360a40c665b).

### <a name="move-a-staffhub-team"></a>Перемещение команды StaffHub

Чтобы перемещать команды StaffHub по одной, выполните указанные ниже действия. Этот способ рекомендуется для пилотных команд. Когда вы будете готовы переместить все команды StaffHub вашей организации, обратитесь к разделу [Перемещение команд StaffHub](#move-your-staffhub-teams) за инструкциями по одновременному переносу нескольких команд.

Чтобы переместить команду StaffHub, выполните следующее.

```
Move-StaffHubTeam -TeamId <String>
```
Пример:

```
Move-StaffHubTeam -TeamId "TEAM_4bbc03af-c764-497f-a8a5-1c0708475e5f"
```

Ниже приведен пример отклика, получаемого при отправке запроса на перемещение команды StaffHub в Teams.

```
    jobId                                      teamId                                      teamAlreadyInMicrosofteams  
    ---------------------------------------    ----------------------------------------    ---------------------------          
    JOB_81b1f191-3e19-45ce-ab32-3ef51f100000   TEAM_4bbc03af-c764-497f-a8a5-1c0708475e5f   false
```

Чтобы проверить состояние запроса на перемещение, выполните следующую команду.

```
Get-TeamMigrationJobStatus <String>
```
Пример:

```
Get-TeamMigrationJobStatus -JobId "JOB_81b1f191-3e19-45ce-ab32-3ef51f100000"
```

Ниже приведен пример отклика, получаемого в ходе перемещения.

```
    jobId                                     status       teamId                                     isO365GroupCreated  Error
    ----------------------------------------  ----------   ----------------------------------------   ------------------  -----    
    JOB_81b1f191-3e19-45ce-ab32-3ef51f100000  inProgress   TEAM_4bbc03af-c764-497f-a8a5-1c0708475e5f  true                none
```

### <a name="move-files-from-a-staffhub-team-to-teams"></a>Перемещение файлов из команды StaffHub в Teams

Это действие применяется только в том случае, если команда StaffHub, перемещенная в Teams, содержит файлы, которые также нужно перенести в Teams. Вы можете перенести файлы непосредственно в SharePoint Online или с помощью PowerShell. 

#### <a name="in-sharepoint-online"></a>В SharePoint Online

См. статью [Как переместить файлы в SharePoint Online](https://support.office.com/article/how-to-move-files-in-sharepoint-online-8c86f6c3-9612-4031-95b2-3d9d5c6e5a30).

#### <a name="using-powershell"></a>Использование PowerShell

Скачайте и установите [командную консоль SharePoint Online](https://www.microsoft.com/download/details.aspx?id=35588), если вы еще не сделали это. Она содержит командлеты, требующиеся для перемещения файлов.  

Подключитесь к сайту группы SharePoint Online с помощью командлета [Connect-PnPOnline](https://docs.microsoft.com/powershell/module/sharepoint-pnp/connect-pnponline?view=sharepoint-ps).

```
Connect-PnPOnline -Url https://<sharepoint URL>/sites/<Group Name>  
```

Для каждого файла, который нужно переместить из StaffHub в Teams, используйте командлет [Move-PnPFile](https://docs.microsoft.com/powershell/module/sharepoint-pnp/move-pnpfile).

```
Move-PnPFile -ServerRelativeUrl "/sites/<Group Name>/Shared Documents/<File Name>" -TargetUrl "/sites/<Group Name>/Shared Documents/General/<File Name>" 
```

Чтобы переместить несколько файлов, выполните цикл по файлам и запустите вторую команду в цикле. Если сеанс остается активным, вам не требуется повторять первую команду.

## <a name="go-beyond-your-pilot-and-move-all-staffhub-teams"></a>Переход от пилотной реализации к перемещению всех команд StaffHub

### <a name="raise-awareness"></a>Информирование

Когда вы будете готовы к переходу от пилотных команд к перемещению команд StaffHub вашей организации в Teams, важно сначала сообщить об изменении в своей организации. Расскажите о приложении "Смены" и переходе в Teams, чтобы проинформировать, заинтересовать и поддержать внедрение.

### <a name="move-your-staffhub-teams"></a>Перемещение команд StaffHub

Чтобы массово переместить команды StaffHub, выполните указанные ниже действия. Вы можете переместить все команды StaffHub своей организации или определенные команды StaffHub. Если вы хотите перемещать команды StaffHub по одной, см. раздел [Перемещение команды StaffHub](#move-a-staffhub-team).

#### <a name="move-all-staffhub-teams"></a>Перемещение всех команд StaffHub

Чтобы получить список всех команд StaffHub в организации, выполните следующее.

```
$StaffHubTeams = Get-StaffHubTeamsForTenant -ManagedBy "Staffhub"
```

Затем выполните следующее, чтобы переместить все команды.

```
foreach ($team in $StaffHubTeams[0]) {Move-StaffHubTeam -TeamId $team.Id}
```

Ниже приведен пример отклика.

Для всех команд, уже перемещенных или существующих в Teams, параметр jobId будет иметь значение null, так как не требуется отправлять задание на перемещение команды.

```
    jobId                                      teamId                                      teamAlreadyInMicrosofteams  
    ----------------------------------------   -----------------------------------------   --------------------------         
    null                                       TEAM_4bbc03af-c764-497f-a8a5-1c0708475e5f   true
    JOB_81b1f191-3e19-45ce-ab32-3ef51f100000   TEAM_81b1f191-3e19-45ce-ab32-3ef51f100000   false
```

#### <a name="move-specific-staffhub-teams"></a>Перемещение определенных команд StaffHub

Чтобы получить список всех идентификаторов команд StaffHub в организации, выполните следующее.

```
Get-StaffHubTeamsForTenant -ManagedBy "Staffhub"
```

В результатах, возвращенных командлетом `Get-StaffHubteamsForTenant`, запущенным ранее, выберите идентификаторы команд, которые нужно переместить, и добавьте их в файл данных с разделителями-запятыми (CSV).

Ниже приведен пример формата CSV-файла.

|Id  |
|---------|
|TEAM_4bbc03af-c764-497f-a8a5-1c0708475e5f<br>TEAM_81b1f191-3e19-45ce-ab32-3ef51f100000<br>TEAM_b42d0fa2-0fc9-408b-85ff-c14a26700000<br>TEAM_b42d0fa2-0fc9-408b-85ff-c14a26700000|

После создания CSV-файла выполните следующее, чтобы переместить команды, указанные в CSV-файле.

```
$StaffHubTeams = Import-Csv .\teams.csv
foreach ($team in $StaffHubTeams[0]) {Move-StaffHubTeam -TeamId $team.Id}
```
### <a name="confirm-that-your-staffhub-teams-have-moved-to-teams"></a>Подтверждение перемещения команд StaffHub в Teams

Чтобы получить список всех команд организации в приложении "Смена", выполните следующее. 

```
Get-StaffHubTeamsForTenant -ManagedBy "Teams"
```

### <a name="move-files-from-your-staffhub-teams-to-teams"></a>Перемещение файлов из команд StaffHub в Teams

Если перемещенные команды StaffHub содержат файлы, которые также нужно переместить в Teams, см. раздел [Перемещение файлов из команды StaffHub в Teams](#move-files-from-a-staffhub-team-to-teams).

## <a name="monitor-teams-usage"></a>Отслеживание использования приложения Teams

Отчеты об использовании помогут вам лучше понять характер использования и получить ценную информацию с целью определения приоритетных областей для обучения и взаимодействия в организации. "Смены" — это приложение в Teams, поэтому вы можете просматривать сведения об использовании с помощью отчетов Teams. Дополнительные сведения см. в статьях о [создании отчетов Teams в Центре администрирования Microsoft Teams](../../teams-analytics-and-reports/teams-reporting-reference.md) и об [отчетах активности Teams в Центре администрирования Microsoft 365](../../teams-activity-reports.md).

## <a name="troubleshooting"></a>Устранение неполадок 

**При попытке переместить файлы из StaffHub в Teams возникает сообщение об ошибке "В разрешении отказано".**

Это может произойти, если вы пытаетесь переместить файлы в закрытую группу Office 365, участником которой вы не являетесь. В этом случае используйте командлет [AddStaffHubMember](https://docs.microsoft.com/powershell/module/staffhub/add-staffhubmember), чтобы добавить себя в команду StaffHub, а затем переместите файлы. После перемещения файлов используйте командлет [Remove-StaffHubMember](https://docs.microsoft.com/powershell/module/staffhub/remove-staffhubmember), чтобы удалить себя из команды. 

**При попытке переместить файлы из StaffHub в Teams возникает ошибка, сообщающая об отсутствии папки General.**

Выполните следующую команду, чтобы добавить папку General в SharePoint, и повторите попытку:

  ```
  Add-PnPFolder -Name General -Folder 'Shared Documents'
  ```  

## <a name="related-topics"></a>Связанные статьи
- [Как выполнить развертывание Microsoft Teams](../../How-to-roll-out-teams.md)
- [Прекращение поддержки Microsoft StaffHub](microsoft-staffhub-to-be-retired.md)
- [Управление приложением "Смены" для вашей организации в Microsoft Teams](manage-the-shifts-app-for-your-organization-in-teams.md)
- [Справочник по StaffHub PowerShell](https://docs.microsoft.com/powershell/module/staffhub/?view=staffhub-ps)
