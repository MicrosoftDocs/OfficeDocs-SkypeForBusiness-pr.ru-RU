### YamlMime:Tutorial
title: Создание в Microsoft Teams охватывающей всю компанию команды с помощью PowerShell
metadata:
  title: Создание в Microsoft Teams охватывающей всю компанию команды с помощью PowerShell
  description: Руководство для ИТ-администраторов по созданию с помощью PowerShell команды, охватывающей всю компанию
  audience: IT Pro
  level: Intermediate
  displayType: one-column
  ms.author: lehewe
  manager: serdars
  ms.date: 02/07/2018
  ms.service: msteams
  ms.topic: tutorial
  appliesto: Microsoft Teams
  localization_priority: Normal
  search.appverid: MET150
  ms.collection: Teams_ITAdmin_PracticalGuidance
  ms.openlocfilehash: e55ff5788778fa1e253410c691d8b6992c0a1d61
  ms.sourcegitcommit: 9acf2f80cbd55ba2ff6aab034757cc053287485f
  ms.translationtype: MT
  ms.contentlocale: ru-RU
  ms.lasthandoff: 09/25/2018
  ms.locfileid: "25017177"
items:
- durationInMinutes: 3
  content: "\nВ этой обучающей статье приведен сценарий PowerShell, который создает в Teams открытую команду, охватывающую всю компанию. Сценарий использует для этого PowerShell-модуль MicrosoftTeams, который сейчас находится в бета-версии. В нем также используется PowerShell-модуль AzureAD для получения списка пользователей вашего клиента. \n\nРуководство станет отличной отправной точкой, если вы хотите попробовать несколько простых команд PowerShell и ближе познакомиться с этим мощным корпоративным инструментом. PowerShell — ключевой компонент для управления другими аспектами групп Azure AD, включая контроль создания групп, т. е. управление пользователями, которые могут создавать команды в Teams. \n\n### <a href=\"https://docs.microsoft.com/MicrosoftTeams/scripts/powershell-script-sample-create-company-wide-team\" target=\"_blank\">:arrow_down: Получить сценарий PowerShell</a>\n\n> [!IMPORTANT]\n> Этот сценарий PowerShell добавляет в команду только первых 2500 участников. 2500 участников — текущее ограничение на размер команды. \n\n\nЭта учебная статья предназначена для ИТ-администраторов или пользователей Teams, которые хотят автоматизировать создание команд. После прочтения этой статьи вы сможете следующее.  \n- Установить необходимые модули в PowerShell.\n- Использовать сценарий. \n\nМы не затронем следующие аспекты.\n1. Подробные сведения о PowerShell. Мы укажем только те сведения о PowerShell, которые необходимы для запуска сценария PowerShell. Дополнительные сведения см. в статье <a href=\"https://docs.microsoft.com/powershell/scripting/getting-started/getting-started-with-windows-powershell?view=powershell-5.1\" target=\"_blank\">Начало работы с Windows PowerShell</a>.\n2. Функциональность модуля <a href=\"https://docs.microsoft.com/powershell/azure/active-directory/overview?view=azureadps-2.0\" target=\"_blank\">AzureAD</a>. Этот сценарий PowerShell использует модуль AzureAD для одной команды, предназначенной для получения пользователей клиента. \n3. Командлеты в модуле <a href=\"https://github.com/MicrosoftDocs/office-docs-powershell/tree/master/teams/teams-ps/teams\" target=\"_blank\">MicrosoftTeams</a>. \n4. Пошаговое описание сценария PowerShell. \n\n\nЧтобы задать вопрос или оставить отзыв об этой учебной статье, сделайте следующее.\n  - Оставьте сообщение в разделе комментариев в нижней части страницы [Дальнейшие действия](company-wide-team-creation-powershell.yml#step-7) этого руководства.\n  - Чтобы отправить отзыв о продукте, например, запросить новую функцию, зайдите на сайт <a href=\"https://aka.ms/TeamsUserVoice\" target=\"_blank\">UserVoice</a>.\n"
- title: Минимальные требования
  durationInMinutes: 2
  content: "\n### <a name=\"user-requirements\"></a>Требования к пользователю\n\nВам потребуются права администратора на компьютере, чтобы вы могли запускать приложения от имени администратора. \n\n### <a name=\"system-requirements\"></a>Требования к системе\nДля работы модулей, используемых в этом сценарии, необходима одна из следующих операционных систем.\n\n- Windows 10\n- Windows 8.1 Профессиональная\n- Windows 8.1 Корпоративная\n- Windows 7 с пакетом обновления 1 (SP1)\n- Windows Server 2016\n- Windows Server 2012 R2\n- Windows Server 2008 R2 с пакетом обновления 1 (SP1)\n\nДля работы модулей также необходима платформа .NET Framework 4.5 или более поздней версии. <a href=\"https://msdn.microsoft.com/library/5a4x27ek.aspx\" target=\"_blank\">Установка .NET Framework для разработчиков</a>.\n"
- title: Начало работы
  durationInMinutes: 10
  content: "\n\nЧтобы приступить к работе, вам потребуется следующее.\n1. Пробная версия <a href=\"https://products.office.com/business/office-365-enterprise-e3-business-software\" target=\"_blank\">Office 365 корпоративный E3</a>. Рекомендуем изучить и опробовать сценарий на тестовом клиенте, прежде чем использовать его с рабочим клиентом. Добавьте тестовых пользователей в своего клиента (не менее 5), чтобы опробовать сценарий. \n\n2. Запустите PowerShell с правами администратора. Вот как это сделать в Windows 1.\n \n  а. Нажмите кнопку **Пуск**.\n \n  б. Введите **Windows PowerShell**.\n \n  в. Щелкните правой кнопкой мыши и выберите **Запуск от имени администратора**.\n\n3. <a href=\"https://docs.microsoft.com/azure/active-directory/active-directory-accessmanagement-groups-settings-v2-cmdlets#install-the-azure-ad-powershell-module\" target=\"_blank\">Установите PowerShell-модуль AzureAD</a>. \n  \n  > [!NOTE]\n  > При выполнении этих действий вам может быть предложено обновить поставщик NuGet с помощью модуля PowerShellGet. При появлении запроса \"Вы хотите, чтобы модуль PowerShellGet установил и импортировал поставщик NuGet прямо сейчас?\" выберите **Да**. Вы также можете получить запрос о недоверенном репозитории: \"Вы действительно хотите установить модули из «PSGallery»?\" Также выберите **Да**. \n\n4. Установите PowerShell-модуль MicrosoftTeams. Если вы выполнили все условия для установки модуля AzureAD, установка модуля MicrosoftTeams пройдет быстро (набор условий для этих модулей одинаков). Для установки модуля MicrosoftTeams выполните следующую команду. \n\n          Install-Module MicrosoftTeams\n\n  > [!NOTE]\n  > Вы можете снова получить сообщение о недоверенном репозитории. \n\n5. <a href=\"https://docs.microsoft.com/MicrosoftTeams/scripts/PowerShell-script-sample-create-company-wide-team.md\" target=\"_blank\">Получить сценарий PowerShell</a>\n"
- title: Описание параметров
  durationInMinutes: 2
  content: "\nВсе параметры являются необязательными, но если не указан ни один из параметров, сценарий не запустится. Вам нужно будет использовать набор параметров для создания и обновления команды, охватывающей всю компанию. В следующих разделах мы приведем примеры, которые помогут вам запустить сценарий в соответствии с вашими потребностями. \n\n|Параметр| Описание |\n| ---  | ---  |\n|Owners | Владельцы команды. Укажите не менее двух владельцев (одним из них можете быть вы, но для работы сценария необходимо указать не менее двух). Рекомендуем добавить больше владельцев, особенно для команды на уровне клиента. |\n|TeamName | Имя команды. Укажите этот параметр, если хотите создать новую команду. Если он не указан, необходимо указать GroupId существующей команды. |\n|TeamDescription | Это описание создаваемой команды. Если у команды уже есть описание, оно не будет заменено. |\n|Каналы | Список каналов, которые вы хотите создать. Необходимо указать не менее двух каналов (если вы используете этот параметр). При запуске сценарий запросит описание каждого канала. |\n|GroupId | Задайте этот параметр, если вы хотите сделать существующую команду охватывающей всю компанию, добавив дополнительных участников. Если задать этот параметр, новая команда не создается. |\n|Members | Если вы не хотите добавлять всех пользователей, то можете ввести список участников. В списке должно быть как минимум два участника. |\n"
- title: Запуск сценария
  durationInMinutes: 5
  content: "\nУказанный сценарий является неподписанным. Дополнительные сведения см. в разделе <a href=\"https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_execution_policies?view=powershell-5.1&viewFallbackFrom=powershell-Microsoft.PowerShell.Core\" target=\"_blank\">About Execution Policies</a> (О политиках выполнения). Перед изменением политики выполнения получите текущую политику, выполнив следующую команду.\n\n        Get-ExecutionPolicy\n\nОбратите внимание на уровень политики. После выполнения сценария для создания охватывающей всю компанию команды вам нужно будет вернуть политику на этот уровень. Чтобы изменить политику на RemoteSigned, выполните следующую команду.\n\n        Set-ExecutionPolicy -ExecutionPolicy RemoteSigned\n\nВот что позволяет сделать этот сценарий. \n1. Создать новую команду со всеми участниками в вашем клиенте (не более 2500 участников).\n\n          .\\CreateCompanyWideTeam.ps1 -Owners \"CBeane@Contoso.onmicrosoft.com\", \"PHampton@Contoso.onmicrosoft.com\" -TeamName \"Contoso Team\" -TeamDescription \"Tenant wide team to get everyone into one place. Use this team to share announcements, hold townhalls, or just encourage a more open work environment for everyone\" -Channels \"Announcements\", \"Townhalls\"\n\n2. Добавить всех участников в вашем клиенте в существующую команду (не более 2500 участников).\n    \n          .\\CreateCompanyWideTeam.ps1 -GroupID \"45f7b85e-149b-4ae4-bf43-9cedf9415e34\"\n\n3. Добавить определенный набор участников в новую или существующую команду.\n    \n          .\\CreateCompanyWideTeam.ps1 -Owners \"CBeane@Contoso.onmicrosoft.com\", \"PHampton@Contoso.onmicrosoft.com\" -TeamName \"Project Scorpio\" -TeamDescription \"Wanted to reserve a cool project name, now we need a project\" -Channels \"Code Reviews\", \"Engineering Alerts\" -Members \"BMcMillan@Contoso.onmicrosoft.com\", \"DTodd@Contoso.onmicrosoft.com\", \"DMills@Contoso.onmicrosoft.com\"\n"
- title: Пример команды, охватывающей всю компанию
  durationInMinutes: 6
  content: "\nТаблица ниже показывает, как можно настроить команду для торговой организации. Она включает предлагаемые каналы, вкладки, подключения и боты. Рекомендуем, по крайней мере для начала, создать несколько каналов. Если это первая команда, в которой будет много участников, это поможет им понять, какие типы каналов создать. Если вы заполните эти начальные каналы данными, новым пользователям будет проще познакомиться с продуктом и понять принципы его работы. Пока что вы не можете добавлять данные с помощью PowerShell, поэтому это нужно будет сделать вручную. \n\n> [!Tip]\n> Скачайте наш <a href=\"https://www.microsoft.com/download/confirmation.aspx?id=56505\" target=\"_blank\">Комплект по началу работы с Microsoft Teams</a>. Это руководство включает \"Первые 10 вещей, которые нужно сделать в Teams\". В нем вы найдете рекомендации по эффективному использованию Teams в различных подразделениях вашей организации, в том числе отделах маркетинга, продаж, финансов, управления персоналом, ИТ, разработки и управления проектами.\n\n#### <a name=\"trophy-best-practices\"></a>:trophy: Рекомендации\n- Не создавайте все пришедшие вам в голову каналы сразу; создайте несколько, просто чтобы начать работу. Создавайте новые каналы по мере появления новых тем.\n- Не переименовывайте каналы, так как это приведет к несоответствию со структурой папок SharePoint. \n\n \n  > [!NOTE]\n  > Вы не сможете заново создавать удаленные каналы с теми же именами, но для них по-прежнему будут доступны файлы SharePoint.\n\n\nВ таблице ниже приведен пример команды с предложенными вкладками, соединителями и ботами. Это неполный список; он призван только дать представление о возможных каналах в вашей компании. \n|Канал|Вкладки и ресурсы|\n|-------|----------------|\n|Общие|<ul><li>Руководство по внедрению</li><li>Сведения о ролях</li><li>Обучающие видео</li></ul>|\n|Планы работы с клиентами|<ul><li>OneNote для стратегически важных клиентов</li><li>Папки для планов работы с клиентами</li></ul>|\n|Прогнозирование|<ul><li>Панели мониторинга Power BI</li><li>Бизнес-приложения</li><li>Обзор календаря и задач</li></ul>|\n|Требуется помощь|<ul><li>Обсуждения помощи</li><li>Форма рассмотрения сделки</li></ul>|\n|Региональный маркетинг|<ul><li>Маркетинговый календарь</li><li>Помощь клиентам</li></ul>|\n|Изменения и отзывы по продуктам|<ul><li>Расценки</li><li>Брошюры по продуктам</li><li>Ссылки на справочные материалы</li></ul>|\nКомандная работа в Contoso|<ul><li>Набор инструментов для Teams (*находится в разработке — зайдите позже*)</li><li>Руководства (например, руководство по началу работы в вашей организации)</li></ul>|\n|Общение в офисе|<ul><li>Темы для сплочения коллектива</li><li>Коллективные мероприятия</li></ul>|\n\nПосмотрите наше видео \"Технические советы: руководство по настройке команд, каналов и вкладок\" (4 минуты), чтобы получить рекомендации по настройке команд, каналов и вкладок для максимально эффективной работы.\n> [!VIDEO https://www.youtube.com/embed/hjJWtoaRJeE]\n"
- title: Вкратце о сценарии
  durationInMinutes: 2
  content: "\nЭтот сценарий состоит из 5 частей (перечислены сверху вниз).\n1. **Документация и описание переменных**\n2. **Функция Create-Team**: создает команду, если это необходимо. Если GroupID не указан, в этой части будет создана команда с заданными TeamName и TeamDescription.\n3. **Функция Add-Channels**: если вы указали каналы, то эта функция запрашивает описание канала и создает канал. \n4. **Функция Add-Members**: выполняет все управление участниками. Эта часть сценария подключается к модулю AzureAD, получает список пользователей и добавляет их в команду, если вы не указали список пользователей. Она обрабатывает логику добавления владельцев и участников и не добавляет тех участников, которые уже включены в команду. \n5. **Основная программа**: это порядок, в котором выполняются функции. \n"
- title: Призыв к действию
  durationInMinutes: 5
  content: "\n### <a name=\"next-steps\"></a>Дальнейшие действия\n\n1. Запланируйте создание команды, охватывающей всю компанию, если у вас еще нет команды, которая может сыграть эту роль. Определите название, описание, необходимых владельцев и подходящие начальные каналы. \n\n2. Опробуйте сценарий со своими параметрами в тестовом клиенте. Добавьте пробный контент и убедитесь, что все нормально. \n\n3. Запустите сценарий, чтобы создать команду в своем клиенте. Вы также можете вручную создать команду с помощью пользовательского интерфейса Teams, заполнить все данные (каналы, боты, приложения, соединители), а затем запустить сценарий, только чтобы добавить владельцев и участников. Чтобы увидеть список всех созданных команд и их идентификаторов GroupID выполните команду.\n\n        Connect-MicrosoftTeams\n        Get-Team\n\n    Затем используйте этот GroupID и запустите сценарий, указав дополнительных владельцев.\n\n        .\\CreateCompanyWideTeam.ps1 -GroupID \"45f7b85e-149b-4ae4-bf43-9cedf9415e34\" -Owners \"CBeane@Contoso.onmicrosoft.com\", \"PHampton@Contoso.onmicrosoft.com\"\n\n    Теперь когда в эту команду будут приходить новые участники, они уже будут иметь представление, что еще они могут закреплять, подключать и обсуждать. \n\n5.  Отправьте нам отзыв\n    - В разделе **Комментарии** в нижней части этой страницы вы можете задать вопрос или оставить свой отзыв\n    - Вы можете предоставить отзыв о продукте Microsoft Teams или запросить добавление новых функций на сайте <a href=\"https://aka.ms/TeamsUserVoice\" target=\"_blank\">UserVoice, посвященном Teams</a>\n    \n"
