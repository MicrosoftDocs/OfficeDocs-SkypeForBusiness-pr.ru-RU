---
title: Устранение неполадок при установке и обновлении Microsoft Teams в Windows
author: lanachin
ms.author: v-lanac
manager: serdars
ms.reviewer: lenatarhun
ms.topic: article
ms.service: msteams
audience: Admin
ms.collection:
- M365-collaboration
f1.keywords:
- NOCSH
appliesto:
- Microsoft Teams
localization_priority: Normal
search.appverid: MET150
description: Узнайте, как устранять проблемы с установкой и обновлением клиентского приложения Teams для настольных компьютеров в Windows.
ms.openlocfilehash: 7b8d4984a8ee40f9a013155ad28b682e000260ba
ms.sourcegitcommit: 90939ad992e65f840e4c2e7a6d18d821621319b4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/09/2020
ms.locfileid: "45086145"
---
# <a name="troubleshoot-microsoft-teams-installation-and-update-issues-on-windows"></a><span data-ttu-id="3d6a2-103">Устранение неполадок при установке и обновлении Microsoft Teams в Windows</span><span class="sxs-lookup"><span data-stu-id="3d6a2-103">Troubleshoot Microsoft Teams installation and update issues on Windows</span></span>

<span data-ttu-id="3d6a2-104">В этой статье приводятся рекомендации по диагностике и устранению неполадок при установке и обновлении клиентского приложения Teams, работающего в Windows.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-104">This article provides guidance for how to diagnose and troubleshoot installation and update issues for the Teams desktop client app running on Windows.</span></span>

## <a name="check-whether-teams-is-updated-successfully"></a><span data-ttu-id="3d6a2-105">Проверьте, обновлен ли Teams успешно</span><span class="sxs-lookup"><span data-stu-id="3d6a2-105">Check whether Teams is updated successfully</span></span>

<span data-ttu-id="3d6a2-106">Выполните следующие действия, чтобы проверить, успешно ли установлено обновление Teams.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-106">Follow these steps to check whether a Teams update is successfully installed.</span></span>

1. <span data-ttu-id="3d6a2-107">В Teams выберите свою фотографию профиля, а затем щелкните **сведения** > **версия**.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-107">In Teams, select your profile picture, and then click **About** > **Version**.</span></span>
2. <span data-ttu-id="3d6a2-108">В том же меню нажмите **Проверить наличие обновлений**.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-108">On the same menu, click **Check for updates**.</span></span>
3. <span data-ttu-id="3d6a2-109">Подождите, пока баннер в верхней части приложения не укажет на необходимость «обновления» Teams.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-109">Wait for the banner at the top of the app to indicate that a “refresh” of Teams is needed.</span></span> <span data-ttu-id="3d6a2-110">Ссылка должна появиться примерно через минуту, поскольку этот процесс загружает новую версию Teams.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-110">The link should be shown about a minute later as this process downloads the new version of Teams.</span></span> <span data-ttu-id="3d6a2-111">Баннер также дает вам знать, если вы уже используете последнюю версию, в этом случае обновление не требуется.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-111">The banner also lets you know if you’re already running the latest version in which case, no update is necessary.</span></span>
4. <span data-ttu-id="3d6a2-112">Нажмите на ссылку обновления в баннере.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-112">Click the refresh link in the banner.</span></span>
5. <span data-ttu-id="3d6a2-113">Дождитесь перезапуска Teams, а затем повторите шаг 1, чтобы проверить, обновлено ли приложение.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-113">Wait until Teams restarts, and then repeat step 1 to see whether the app is updated.</span></span>

<span data-ttu-id="3d6a2-114">Если вы видите сообщение об ошибке или номер версии такой же, как на шаге 4, процесс обновления завершился неудачно.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-114">If you see a failure message or if the version number is the same as in step 4, the update process failed.</span></span>

## <a name="troubleshoot-installation-and-update-issues"></a><span data-ttu-id="3d6a2-115">Устранение неполадок при установке и обновлении</span><span class="sxs-lookup"><span data-stu-id="3d6a2-115">Troubleshoot installation and update issues</span></span>

### <a name="troubleshoot-installation-issues"></a><span data-ttu-id="3d6a2-116">Устранение проблем с установкой</span><span class="sxs-lookup"><span data-stu-id="3d6a2-116">Troubleshoot installation issues</span></span>

<span data-ttu-id="3d6a2-117">Когда Teams установлен, установщик Teams регистрирует последовательность событий в %LocalAppData%\SquirrelTemp\SquirrelSetup.log.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-117">When Teams is installed, the Teams installer logs the sequence of events to %LocalAppData%\SquirrelTemp\SquirrelSetup.log.</span></span> <span data-ttu-id="3d6a2-118">Первое, что нужно искать - это сообщение об ошибке или стек вызовов в конце журнала.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-118">The first thing to look for is an error message or a call stack near the end of the log.</span></span> <span data-ttu-id="3d6a2-119">Обратите внимание, что стеки вызовов в начале журнала могут не означать, что существует проблема установки.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-119">Note that call stacks at the beginning of the log may not mean that an installation issue exists.</span></span> <span data-ttu-id="3d6a2-120">Может быть проще сравнить ваш журнал с журналом успешной установки (даже на другой машине), чтобы увидеть, что ожидается.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-120">It can be easier to compare your log against the log from a successful installation (even on another machine) to see what's expected.</span></span>

<span data-ttu-id="3d6a2-121">Если SquirrelSetup.log не указывает причину или вам нужна дополнительная информация для устранения проблемы, см. раздел [Сбор и анализ журналов приложений и системы](#collect-and-analyze-application-and-system-logs).</span><span class="sxs-lookup"><span data-stu-id="3d6a2-121">If SquirrelSetup.log doesn't indicate the cause or if you need more information to troubleshoot the issue, see [Collect and analyze application and system logs](#collect-and-analyze-application-and-system-logs).</span></span>

### <a name="troubleshoot-update-issues"></a><span data-ttu-id="3d6a2-122">Устранение неполадок при обновлении</span><span class="sxs-lookup"><span data-stu-id="3d6a2-122">Troubleshoot update issues</span></span>

<span data-ttu-id="3d6a2-123">Когда Teams успешно установлен, расположение журнала изменяется с %LocalAppData%\SquirrelTemp на %AppData%\Microsoft\Teams.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-123">When Teams is successfully installed, the log location switches from %LocalAppData%\SquirrelTemp to %AppData%\Microsoft\Teams.</span></span> <span data-ttu-id="3d6a2-124">В этом месте есть два файла журнала, представляющих интерес, SquirrelSetup.log и logs.txt.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-124">At this location, there are two log files of interest, SquirrelSetup.log and logs.txt.</span></span>

- <span data-ttu-id="3d6a2-125">Файл SquirrelSetup.log в этом месте записывается с помощью Update.exe, который является исполняемым файлом, обслуживающим приложение Teams.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-125">The SquirrelSetup.log file at this location is written by Update.exe, which is an executable that services the Teams app.</span></span>
- <span data-ttu-id="3d6a2-126">Файл Logs.txt используется приложением Teams (в частности, Teams.exe) для записи важных событий приложения.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-126">The Logs.txt file is used by the Teams app (specifically Teams.exe) to record significant application events.</span></span> <span data-ttu-id="3d6a2-127">Скорее всего, он будет содержать информацию об ошибках.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-127">It will likely contain failure information.</span></span>

<span data-ttu-id="3d6a2-128">Эти файлы журнала содержат информацию, позволяющую установить личность (PII), поэтому они не отправляются в Microsoft.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-128">These log files contain personally identifiable information (PII) and so they're not sent to Microsoft.</span></span>

<span data-ttu-id="3d6a2-129">Teams может автоматически запускать процесс обновления (в зависимости от политики), или пользователи могут вручную проверять наличие обновлений, перейдя к своей картинке профиля> **Проверить наличие обновлений**.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-129">Teams can automatically start the update process (depending on the policy) or users can manually check for updates by going to their profile picture > **Check for updates**.</span></span> <span data-ttu-id="3d6a2-130">Оба метода используют следующую последовательность событий.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-130">Both methods use the following sequence of events.</span></span>

1. <span data-ttu-id="3d6a2-131">**Проверьте наличие обновлений**.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-131">**Check for updates**.</span></span> <span data-ttu-id="3d6a2-132">Teams делает веб-запрос и включают текущую версию приложения и информацию о кольце развертывания.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-132">Teams makes a web request and includes the current app version and deployment ring information.</span></span> <span data-ttu-id="3d6a2-133">Цель этого шага - получить ссылку для скачивания.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-133">The goal of this step is to get the download link.</span></span> <span data-ttu-id="3d6a2-134">Ошибка на этом этапе регистрируется в Logs.txt.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-134">A failure at this step is logged in Logs.txt.</span></span>
2. <span data-ttu-id="3d6a2-135">**Скачивание обновления**.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-135">**Download update**.</span></span> <span data-ttu-id="3d6a2-136">Teams загружает обновление, используя ссылку для скачивания, полученную на шаге 1.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-136">Teams downloads the update by using the download link obtained from step 1.</span></span> <span data-ttu-id="3d6a2-137">Когда загрузка завершится, Teams вызывает Update.exe, чтобы выполнить загрузку.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-137">When the download is complete, Teams calls Update.exe to stage the download.</span></span> <span data-ttu-id="3d6a2-138">Ошибка загрузки также регистрируется в Logs.txt.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-138">A download failure is also logged in Logs.txt.</span></span>
3. <span data-ttu-id="3d6a2-139">**Поставьте обновление.**.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-139">**Stage the update**.</span></span> <span data-ttu-id="3d6a2-140">Загруженный контент проверяется и распаковывается в промежуточную папку %LocalAppData%\Microsoft\Teams\stage), которая выполняется Update.exe.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-140">The downloaded content is verified and unpacked into an intermediate folder, %LocalAppData%\Microsoft\Teams\stage), which is done by Update.exe.</span></span> <span data-ttu-id="3d6a2-141">Сбои на этом этапе регистрируются в SquirrelTemp.log.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-141">Failures at this step are logged in SquirrelTemp.log.</span></span>
4. <span data-ttu-id="3d6a2-142">**Установите обновление**.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-142">**Install the update**.</span></span> <span data-ttu-id="3d6a2-143">Есть несколько способов запуска Teams.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-143">There are multiple ways to start Teams.</span></span> <span data-ttu-id="3d6a2-144">Система автоматически запускает Teams, когда пользователь входит в систему, или вы можете запускать команды с помощью ярлыка.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-144">The system automatically starts Teams when a user logs in or you can start Teams through a shortcut.</span></span> <span data-ttu-id="3d6a2-145">На этом этапе Update.exe проверяет наличие промежуточной папки, снова проверяет содержимое и выполняет операции с файлами, чтобы отключить приложение.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-145">In this step, Update.exe checks for the presence of the staging folder, verifies the content again, and performs file operations to un-stage the app.</span></span> <span data-ttu-id="3d6a2-146">Для старой папки приложения в %LocalAppData%\Microsoft\Teams\current создается резервная копия в %LocalAppData%\Microsoft\Teams\previous, а папка рабочей области переименовывается в «текущая».</span><span class="sxs-lookup"><span data-stu-id="3d6a2-146">The old application folder in %LocalAppData%\Microsoft\Teams\current is backed up to %LocalAppData%\Microsoft\Teams\previous and the stage folder is renamed to "current".</span></span> <span data-ttu-id="3d6a2-147">Сбои на этом этапе регистрируются в SquirrelTemp.log.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-147">Failures at this step are logged in SquirrelTemp.log.</span></span>

<span data-ttu-id="3d6a2-148">Если SquirrelTemp.log или Logs.txt не содержат достаточной информации для определения основной причины и вам требуется дополнительная информация для устранения проблемы, перейдите к разделу [Сбор и анализ журналов приложений и системы](#collect-and-analyze-application-and-system-logs).</span><span class="sxs-lookup"><span data-stu-id="3d6a2-148">If SquirrelTemp.log or Logs.txt don't contain sufficient information to determine the underlying cause and you need more information to troubleshoot the issue, go to [Collect and analyze application and system logs](#collect-and-analyze-application-and-system-logs).</span></span>

## <a name="collect-and-analyze-application-and-system-logs"></a><span data-ttu-id="3d6a2-149">Собирать и анализировать журналы приложений и системы</span><span class="sxs-lookup"><span data-stu-id="3d6a2-149">Collect and analyze application and system logs</span></span>

<span data-ttu-id="3d6a2-150">В этом разделе описывается, как собирать и анализировать журналы приложений и системы, чтобы получить более полную информацию для устранения проблемы.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-150">This section describes how to collect and analyze application and system logs to get more comprehensive information to troubleshoot the issue.</span></span> <span data-ttu-id="3d6a2-151">Для выполнения этих шагов вы будете использовать инструменты Sysinternals.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-151">You'll use Sysinternals tools to complete these steps.</span></span> <span data-ttu-id="3d6a2-152">Чтобы узнать больше, см. [Windows Sysinternals](https://docs.microsoft.com/sysinternals/).</span><span class="sxs-lookup"><span data-stu-id="3d6a2-152">To learn more, see [Windows Sysinternals](https://docs.microsoft.com/sysinternals/).</span></span>

### <a name="collect-logs"></a><span data-ttu-id="3d6a2-153">Соберите журналы.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-153">Collect logs</span></span>

1. <span data-ttu-id="3d6a2-154">Загрузите [инструменты Sysinternals](https://download.sysinternals.com/files/SysinternalsSuite.zip).</span><span class="sxs-lookup"><span data-stu-id="3d6a2-154">Download the [Sysinternals tools](https://download.sysinternals.com/files/SysinternalsSuite.zip).</span></span>
2. <span data-ttu-id="3d6a2-155">Распакуйте zip-файл в папку %TEMP% на локальном диске.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-155">Extract the zip file to the %TEMP% folder on your local drive.</span></span>
3. <span data-ttu-id="3d6a2-156">Откройте командную строку с повышенными правами и выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="3d6a2-156">Open an elevated command prompt, and then do the following:</span></span>

    1. <span data-ttu-id="3d6a2-157">Выполните следующее, чтобы перейти в папку TEMP:</span><span class="sxs-lookup"><span data-stu-id="3d6a2-157">Run the following to go to your TEMP folder:</span></span>

        ```console
        cd /d %TEMP%
        ```
    2. <span data-ttu-id="3d6a2-158">Скопируйте настройки и журналы приложений.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-158">Copy the setup and application logs.</span></span> <span data-ttu-id="3d6a2-159">Обратите внимание, что в зависимости от точки сбоя некоторые из этих журналов могут отсутствовать.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-159">Note that depending on the point of failure, some of these logs may not be present.</span></span>

        ```console
        copy %LocalAppData%\SquirrelTemp\SquirrelSetup.log SquirrelSetup.log
        copy %AppData%\Microsoft\Teams\logs.txt logs.txt
        copy %LocalAppData%\Microsoft\Teams\SquirrelSetup.log SquirrelSetup_Teams.log
        ```
    3. <span data-ttu-id="3d6a2-160">Запустите следующее, чтобы захватить открытые ручки.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-160">Run the following to capture the open handles.</span></span>

        ```console
        handle > handles.txt
        ```

    4. <span data-ttu-id="3d6a2-161">Запустите следующее, чтобы захватить открытые библиотеки DLL.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-161">Run the following to capture the opened DLLs.</span></span>

        ```console
        listdlls -v Teams > dlls.txt
        ```
    5. <span data-ttu-id="3d6a2-162">Запустите следующее, чтобы перехватить работающие драйверы.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-162">Run the following to capture the drivers that are running.</span></span>

        ```console
        driverquery /v > driverquery.txt
        ```

    6. <span data-ttu-id="3d6a2-163">Выполните следующее, чтобы получить списки контроля доступа (ACL) папки Teams.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-163">Run the following to capture the access control lists (ACLs) of the Teams folder.</span></span>

        ```console 
        icacls %LOCALAPPDATA%\Microsoft\Teams /save icacls.txt /T
        ```

### <a name="analyze-logs-for-advanced-users"></a><span data-ttu-id="3d6a2-164">Анализировать логи (для опытных пользователей)</span><span class="sxs-lookup"><span data-stu-id="3d6a2-164">Analyze logs (for advanced users)</span></span>

<span data-ttu-id="3d6a2-165">Неудачное обновление может привести к непредсказуемому поведению приложения.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-165">A failed update can result in unpredictable app behavior.</span></span> <span data-ttu-id="3d6a2-166">Например, пользователи могут быть не в состоянии выйти из Teams, иметь устаревшую версию Teams или не могут запустить Teams.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-166">For example, users may be unable to exit Teams, have a stale version of Teams, or can't start Teams.</span></span> <span data-ttu-id="3d6a2-167">Если у вас возникла проблема во время обновления, первое место, чтобы найти причину, это SquirrelTemp.log.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-167">If you experience an issue during an update, the first place to look to find the cause is SquirrelTemp.log.</span></span> <span data-ttu-id="3d6a2-168">Ниже перечислены различные типы сбоев обновления, перечисленные от наиболее распространенных до наименее распространенных, и способы их анализа и устранения неполадок с использованием журналов.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-168">Here are the different types of update failures, listed from most common to least common, and how to analyze and troubleshoot them using logs.</span></span>

#### <a name="unable-to-exit-teams"></a><span data-ttu-id="3d6a2-169">Невозможно выйти из Teams</span><span class="sxs-lookup"><span data-stu-id="3d6a2-169">Unable to exit Teams</span></span>

<span data-ttu-id="3d6a2-170">Поскольку Teams определяет, что им необходимо обновить себя до более новой версии, они загружают и запускают новое приложение, а затем ждут возможности перезагрузить себя в следующий раз, когда машина простаивает.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-170">As Teams determines that it needs to update itself to a newer version, it downloads and stages the new app, and then waits for an opportunity to restart itself the next time the machine is idle.</span></span> <span data-ttu-id="3d6a2-171">Распространенной проблемой в этом процессе является случай, когда другой процесс или драйвер файловой системы блокирует процесс Teams.exe, что препятствует выходу Teams.exe.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-171">A common issue during this process is when another process or a file system driver locks up the Teams.exe process, which prevents Teams.exe from exiting.</span></span> <span data-ttu-id="3d6a2-172">В результате приложение Teams не может быть заменено недавно загруженным и подготовленным приложением.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-172">As a result, the Teams app can't be replaced by the newly-downloaded and staged app.</span></span>

<span data-ttu-id="3d6a2-173">Советы по устранению неполадок</span><span class="sxs-lookup"><span data-stu-id="3d6a2-173">Troubleshooting tips:</span></span>

- <span data-ttu-id="3d6a2-174">Чтобы подтвердить, что это проблема, с которой вы столкнулись, закройте Teams (щелкните правой кнопкой мыши Teams на панели задач и выберите **Выйти**).</span><span class="sxs-lookup"><span data-stu-id="3d6a2-174">To confirm that is the issue that you're experiencing, quit Teams (right-click Teams on the task bar, and then click **Quit**).</span></span> <span data-ttu-id="3d6a2-175">Затем откройте диспетчер задач в Windows, чтобы увидеть, работает ли экземпляр Teams.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-175">Then, open Task Manager in Windows to see whether an instance of Teams is still running.</span></span>  
- <span data-ttu-id="3d6a2-176">Если вы не на компьютере, на котором возникла эта проблема, проверьте файл SquirrelTemp.log, собранный с компьютера, на котором возникла эта проблема, и найдите запись «Программа: невозможно завершить процесс в журнале».</span><span class="sxs-lookup"><span data-stu-id="3d6a2-176">If you’re not on the computer that's having this issue, inspect the SquirrelTemp.log collected from the computer that's experiencing this issue and look for a "Program: Unable to terminate the process in the log" entry.</span></span>
- <span data-ttu-id="3d6a2-177">Чтобы определить, что препятствует выходу Teams.exe, просмотрите журналы Dlls.txt и Handles.txt.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-177">To determine what's preventing Teams.exe from exiting, look at the Dlls.txt and Handles.txt logs.</span></span> <span data-ttu-id="3d6a2-178">Они рассказывают вам о процессах, которые препятствовали выходу Teams.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-178">These tell you the processes that prevented Teams from exiting.</span></span>
- <span data-ttu-id="3d6a2-179">Другим виновником, который может помешать выходу Teams, является драйвер фильтра файловой системы режима ядра.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-179">Another culprit that can prevent Teams from exiting is the kernel-mode file system filter driver.</span></span> <span data-ttu-id="3d6a2-180">Используйте инструмент SysInternals, [ProcDump](https://docs.microsoft.com/sysinternals/downloads/procdump), чтобы собрать дамп процесса в режиме ядра, запустив ```procdump -mk <pid>```, где <pid> - это идентификатор процесса, полученный из диспетчера задач.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-180">Use the SysInternals tool, [ProcDump](https://docs.microsoft.com/sysinternals/downloads/procdump), to collect the kernel-mode process dump by running ```procdump -mk <pid>```, where <pid> is the process ID obtained from Task Manager.</span></span> <span data-ttu-id="3d6a2-181">Вы также можете проверить файл журнала Driverquery.txt, чтобы увидеть активные драйверы фильтров, которые могут мешать командам.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-181">You can also inspect the Driverquery.txt log file to see the active filter drivers that may interfere with Teams.</span></span>
- <span data-ttu-id="3d6a2-182">Чтобы выйти из этого состояния, перезагрузите компьютер.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-182">To recover from this state, restart the computer.</span></span>

#### <a name="file-permissions"></a><span data-ttu-id="3d6a2-183">Разрешения для файлов</span><span class="sxs-lookup"><span data-stu-id="3d6a2-183">File permissions</span></span>

<span data-ttu-id="3d6a2-184">Teams создает несколько подпапок и файлов в профиле пользователя на протяжении всего процесса установки и обновления.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-184">Teams creates a number of subfolders and files in the user's profile throughout the installation and update process.</span></span> <span data-ttu-id="3d6a2-185">Поскольку приложение и средство обновления работают как пользователь без повышенных прав, разрешения на чтение и запись должны быть предоставлены в следующих папках:</span><span class="sxs-lookup"><span data-stu-id="3d6a2-185">Because the app and the updater runs as a non-elevated user, read and write permissions must be granted on the following folders:</span></span>

|<span data-ttu-id="3d6a2-186">Folder</span><span class="sxs-lookup"><span data-stu-id="3d6a2-186">Folder</span></span>  |<span data-ttu-id="3d6a2-187">Используется</span><span class="sxs-lookup"><span data-stu-id="3d6a2-187">Used by</span></span>  |
|---------|---------|
|<span data-ttu-id="3d6a2-188">%LocalAppData%\SquirrelTemp</span><span class="sxs-lookup"><span data-stu-id="3d6a2-188">%LocalAppData%\SquirrelTemp</span></span>     | <span data-ttu-id="3d6a2-189">Установщик Teams (например, Teams_Windows_x64.exe) на этапе установки</span><span class="sxs-lookup"><span data-stu-id="3d6a2-189">Teams installer (for example, Teams_Windows_x64.exe) during installation phase</span></span>        |
|<span data-ttu-id="3d6a2-190">%LocalAppData%\Microsoft\Teams</span><span class="sxs-lookup"><span data-stu-id="3d6a2-190">%LocalAppData%\Microsoft\Teams</span></span>  | <span data-ttu-id="3d6a2-191">Приложение для обновления Teams (Update.exe) для извлечения и установки пакета приложения во время процесса обновления</span><span class="sxs-lookup"><span data-stu-id="3d6a2-191">Teams updater (Update.exe) to extract and stage the app package during update process</span></span>        |
|<span data-ttu-id="3d6a2-192">%AppData%\Microsoft\Teams</span><span class="sxs-lookup"><span data-stu-id="3d6a2-192">%AppData%\Microsoft\Teams</span></span>   |  <span data-ttu-id="3d6a2-193">Приложение Teams (Teams.exe) для сохранения настроек, состояний приложения и (предварительно подготовленного) загруженного пакета обновления</span><span class="sxs-lookup"><span data-stu-id="3d6a2-193">Teams app (Teams.exe) to save settings, app states, and the (pre-staged) downloaded update package</span></span>       |

<span data-ttu-id="3d6a2-194">Если Teams отказало в доступе из-за невозможности записи в файл, это может помешать другому программному приложению или запись дескриптора безопасности может ограничить доступ для записи в папку.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-194">If Teams is denied access because it can't write to a file, another software application may be interfering or a security descriptor entry may be limiting write access to a folder.</span></span>

<span data-ttu-id="3d6a2-195">Советы по устранению неполадок</span><span class="sxs-lookup"><span data-stu-id="3d6a2-195">Troubleshooting tips:</span></span>

- <span data-ttu-id="3d6a2-196">Ищите доказательства «отказано в доступе» в SquirrelTemp.log или Logs.txt.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-196">Look for "access denied" evidence in SquirrelTemp.log or Logs.txt.</span></span> <span data-ttu-id="3d6a2-197">Проверьте эти файлы, чтобы увидеть, была ли попытка записи в файл, который не удался.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-197">Check these files to see whether there was an attempt to write to a file that failed.</span></span>
- <span data-ttu-id="3d6a2-198">Откройте Icacls.txt и найдите эффективную запись управления доступом (ACE), которая блокирует операции записи пользователем, который не является администратором. Как правило, это в одной из записей DACL.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-198">Open Icacls.txt and look for the effective access control entry (ACE) that blocks write operations by a user who is not an admin. Typically, this is in one of the DACL entries.</span></span> <span data-ttu-id="3d6a2-199">Для получения дополнительной информации см. [Документацию icacls](https://docs.microsoft.com/windows-server/administration/windows-commands/icacls).</span><span class="sxs-lookup"><span data-stu-id="3d6a2-199">For more information, see the [icacls documentation](https://docs.microsoft.com/windows-server/administration/windows-commands/icacls).</span></span>

#### <a name="file-corrupted"></a><span data-ttu-id="3d6a2-200">Файл поврежден</span><span class="sxs-lookup"><span data-stu-id="3d6a2-200">File corrupted</span></span>

<span data-ttu-id="3d6a2-201">В некоторых случаях программное обеспечение для шифрования может изменять файлы в папке %LocalAppData%\Microsoft\Teams, что может препятствовать запуску Teams.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-201">In some cases, encryption software can change files in the %LocalAppData%\Microsoft\Teams folder, which can prevent Teams from starting.</span></span> <span data-ttu-id="3d6a2-202">Это может произойти в любое время, даже если приложение не обновляется.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-202">This can happen at any time, even when the app isn't being updated.</span></span> <span data-ttu-id="3d6a2-203">К сожалению, когда файл поврежден, единственный способ восстановиться из этого состояния - удалить и переустановить Teams.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-203">Unfortunately, when a file is corrupted, the only way to recover from this state is to uninstall and re-install Teams.</span></span>

> [!NOTE]
> <span data-ttu-id="3d6a2-204">Если вы не можете определить основную причину проблемы с помощью любого из этих шагов, вы можете попробовать сеанс [Монитор процесса](https://docs.microsoft.com/sysinternals/downloads/procmon).</span><span class="sxs-lookup"><span data-stu-id="3d6a2-204">If you can't determine the underlying cause of the issue by using any of these steps, you may want to try a [Process Monitor](https://docs.microsoft.com/sysinternals/downloads/procmon) session.</span></span> <span data-ttu-id="3d6a2-205">Process Monitor - это инструмент Sysinternals, который записывает доступ к реестру и файловой системе.</span><span class="sxs-lookup"><span data-stu-id="3d6a2-205">Process Monitor is a Sysinternals tool that records access to the registry and file system.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3d6a2-206">Статьи по теме</span><span class="sxs-lookup"><span data-stu-id="3d6a2-206">Related topics</span></span>

- [<span data-ttu-id="3d6a2-207">Получите клиенты для Teams</span><span class="sxs-lookup"><span data-stu-id="3d6a2-207">Get clients for Teams</span></span>](get-clients.md)
- [<span data-ttu-id="3d6a2-208">Обновления клиента Teams</span><span class="sxs-lookup"><span data-stu-id="3d6a2-208">Teams client updates</span></span>](teams-client-update.md)
- [<span data-ttu-id="3d6a2-209">Устранение неполадок Teams</span><span class="sxs-lookup"><span data-stu-id="3d6a2-209">Teams Troubleshooting</span></span>](https://docs.microsoft.com/MicrosoftTeams/troubleshoot/teams)