---
title: Проведение исследования содержимого при обнаружении электронных данных
author: v-tophillips
ms.author: v-tophillips
manager: laurawi
ms.topic: article
ms.service: msteams
audience: admin
ms.collection:
- M365-collaboration
- SPO_Content
ms.reviewer: anwara
search.appverid: MET150
f1.keywords:
- NOCSH
description: Узнайте, что делать, если необходимо выполнить обнаружение электронных данных, например, когда необходимо отправить все хранимые в электронном виде сведения для юридического разбирательства.
appliesto:
- Microsoft Teams
ms.custom: seo-marvel-mar2020
ms.openlocfilehash: 4b5a0ca0cb52c4b444769b7bfc25b17cab80a02b
ms.sourcegitcommit: 472e46b6eb907f41920516616683a61f0fc6f741
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/30/2022
ms.locfileid: "66563947"
---
# <a name="conduct-an-ediscovery-investigation-of-content-in-microsoft-teams"></a>Обнаружение электронных данных в Microsoft Teams

Крупные предприятия часто подвержены высокой штрафной процедуре, которая требует отправки всех электронных хранимых сведений (ESI). Содержимое Microsoft Teams можно искать и использовать во время расследований обнаружения электронных данных.

## <a name="overview"></a>Обзор

Все чаты Microsoft Teams 1:1 или групповые чаты журналируются в почтовых ящиках соответствующих пользователей. Все стандартные сообщения каналов журналируются в почтовом ящике группы, представляющего команду. Файлы, отправленные в стандартных каналах, рассматриваются в функциях обнаружения электронных данных для SharePoint Online и OneDrive для бизнеса.

Обнаружение электронных данных сообщений и файлов в частных каналах работает иначе, чем в стандартных каналах.[](private-channels.md) Дополнительные сведения см. в [статье об обнаружении электронных данных частных каналов](#ediscovery-of-private-and-shared-channels).

Не все содержимое Teams доступно для обнаружения электронных данных. В следующей таблице показаны типы контента, которые можно искать с помощью средств обнаружения электронных данных Майкрософт:

|Тип содержимого|eDiscoverable|Notes|
|---|---|---|
|Аудиозаписи|Да||
|Содержимое карточки|Да|[Дополнительные сведения см. в разделе "](#search-for-card-content)Поиск содержимого карточки".|
|Ссылки чата|Да||
|Сообщения чата|Да|К ним относится содержимое стандартных каналов Teams, чаты 1:1, групповые чаты 1:N и чаты с участниками гостевого пользователя.|
|Фрагменты кода|Нет||
|Измененные сообщения|Да|Если пользователь находится на удержании, предыдущие версии измененных сообщений также сохраняются.|
|Эмодзи, GIF и наклейки|Да||
|Уведомления веб-канала|Нет||
|Встроенные изображения|Да||
|Компоненты цикла|Да|Содержимое компонента цикла сохраняется в .fluid-файле, который хранится в OneDrive для бизнеса учетной записи пользователя, отправившего компонент цикла. Это означает, что при поиске содержимого в компонентах цикла необходимо включить OneDrive в качестве источника данных.|
|Мгновенные беседы собраний|Да||
|Метаданные собрания<sup>1</sup>|Да||
|Имя канала|Да||
|Котировки|Да|Содержимое в кавычках поддерживает поиск. Однако результаты поиска не указывают на то, что содержимое было заключено в кавычки.|
|Реакции (например, "нравится", "уют" и другие реакции)|Да||
|Тема|Да||
|Таблицы|Да||

<sup>1 Метаданные</sup> собрания (и звонка) включают в себя следующие:

- Время начала и окончания собрания, а также длительность
- Присоединение к собранию и выход из них для каждого участника
- Соединения и вызовы VOIP
- Анонимные соединения
- Федеративные соединения пользователей
- Присоединение гостевых пользователей

Ниже приведен пример беседы в чате между участниками во время собрания.

![Беседа между участниками в Teams.](media/MeetingIMConversations.png)

[!div class="mx-imgBorder"]

Ниже приведен пример копии соответствия той же беседы чата, просматриваемой в средстве обнаружения электронных данных.

![Беседа между участниками в результатах поиска eDiscovery.](media/MeetingImConversation2.png)

Ниже приведен пример метаданных собрания.

  > [!div class="mx-imgBorder"]
  > ![Метаданные собрания из копии соответствия.](media/conversationOption3.png)

Дополнительные сведения о проведении исследования обнаружения электронных данных см. в статье ["Начало работы с обнаружением электронных данных (стандартная версия)"](/microsoft-365/compliance/get-started-core-ediscovery).

Данные Microsoft Teams будут отображаться в виде мгновенных сообщений или бесед в выходных данных экспорта обнаружения электронных данных Excel. Вы можете открыть файл `.pst` в Outlook, чтобы просмотреть эти сообщения после их экспорта.

При просмотре PST-файла для команды все беседы находятся в папке "Чат группы" в разделе "Журнал бесед". Заголовок сообщения содержит имя команды и имя канала. Например, на рисунке ниже показано сообщение От Боба, который отправляет сообщение стандартному каналу Project 7 команды "Производственные спецификации".

![Снимок экрана с папкой "Чат группы" в почтовом ящике пользователя в Outlook.](media/Conduct_an_eDiscovery_investigation_of_content_in_Microsoft_Teams_image1.png)

Частные чаты в почтовом ящике пользователя хранятся в папке Team Chat в разделе "Журнал бесед".

## <a name="ediscovery-of-private-and-shared-channels"></a>Обнаружение электронных данных частных и общих каналов

Копии сообщений о соответствии в частных и общих каналах отправляются в разные почтовые ящики в зависимости от типа канала. Это означает, что необходимо выполнять поиск в разных расположениях почтовых ящиков в зависимости от типа канала, участником которого является пользователь.

- **Частные каналы**. Копии соответствия отправляются в почтовый ящик всех участников закрытого канала. Это означает, что при поиске содержимого в сообщениях частного канала необходимо выполнить поиск в почтовом ящике пользователя.

- **Общие каналы**. Копии соответствия отправляются в системный почтовый ящик, связанный с родительской командой. Так как Teams не поддерживает поиск по обнаружению электронных данных для одного системного почтового ящика для общего канала, необходимо выполнить поиск в почтовом ящике родительской команды (выбрав имя почтового ящика группы) при поиске содержимого сообщения в общих каналах.

Каждый частный и общий канал имеет собственный сайт SharePoint, который отделен от родительского сайта группы. Это означает, что файлы в частных и общих каналах хранятся на собственном сайте и управляются независимо от родительской команды. Это означает, что при поиске содержимого в файлах и вложениях сообщений канала необходимо определить и выполнить поиск на определенном сайте, связанном с каналом.

В следующих разделах описано, как определить частный или общий канал, который будет включен в поиск по обнаружению электронных данных.

### <a name="identifying-the-members-of-a-private-channel"></a>Идентификация членов закрытого канала

Используйте процедуру, описанную в этом разделе, чтобы определить участников закрытого канала, чтобы использовать средства обнаружения электронных данных для поиска содержимого в сообщениях частного канала в почтовом ящике участника.

Перед выполнением этих действий убедитесь, что установлена последняя версия [модуля Teams PowerShell](teams-powershell-overview.md) .

1. Выполните следующую команду, чтобы получить идентификатор группы, которая содержит общие каналы для поиска.

   ```powershell
   Get-Team -DisplayName <display name of the the parent team>
   ```

   > [!TIP]
   > Выполните **командлет Get-Team** без параметров, чтобы отобразить список всех Команд в организации. Список содержит идентификатор группы и DisplayName для каждой команды.

2. Выполните следующую команду, чтобы получить список частных каналов в родительской команде. Используйте идентификатор группы, полученный на шаге 1.

   ```PowerShell
    Get-TeamChannel -GroupId <parent team GroupId> -MembershipType Private
   ```

3. Выполните следующую команду, чтобы получить список владельцев и участников частного канала для определенного закрытого канала.

   ```PowerShell
    Get-TeamChannelUser -GroupId <parent team GroupId> -DisplayName "Partner Shared Channel"
   ```

4. Включите почтовые ящики владельцев и участников закрытого канала в поисковый запрос обнаружения электронных данных в службе обнаружения электронных данных (цен. категория "Стандартный") или при определении и сборе содержимого хранителя в [eDiscovery (Premium).](/microsoft-365/compliance/add-custodians-to-case)[](/microsoft-365/compliance/search-for-content-in-core-ediscovery)

### <a name="identifying-the-sharepoint-site-for-private-and-shared-channels"></a>Определение сайта SharePoint для частных и общих каналов

Как объяснялось ранее, файлы, общие в частных и общих каналах (и файлы, вложенные в сообщения канала), хранятся в семействе веб-сайтов, связанном с каналом. Используйте процедуру, описанную в этом разделе, чтобы определить URL-адрес сайта, связанного с определенным частным или общим каналом. Затем можно использовать средства обнаружения электронных данных для поиска контента на сайте.

Перед выполнением этих действий [установите консоль управления SharePoint Online и подключитесь к SharePoint Online](/powershell/sharepoint/sharepoint-online/connect-sharepoint-online).

1. При необходимости выполните следующую команду, чтобы получить список всех семейств веб-сайтов SharePoint, связанных с общими каналами в родительской команде.

   ```PowerShell
    Get-SPOSite
   ```

   > [!TIP]
   > Соглашение об именовании URL-адреса для сайта, связанного с частными и общими каналами, равно `[SharePoint domain]/sites/[Name of parent team]-[Name of private or shared channel]`. Например, URL-адрес общего канала с именем "Совместная работа с партнерами", который находится в родительской команде "Команда инженеров" в организации Contoso, — это `https://contoso.sharepoint.com/sites/EngineeringTeam-PartnerCollaboration`.

2. Выполните следующие команды PowerShell, чтобы отобразить URL-адрес для всех сайтов SharePoint, связанных с частными и общими каналами в вашей организации. Выходные данные скрипта также включают идентификатор группы родительской команды, который необходимо выполнить на шаге 3.

    ```PowerShell
    $sites = Get-SPOSite -Template "TEAMCHANNEL#1"
    foreach ($site in $sites) {$x= Get-SPOSite -Identity $site.url -Detail; $x.relatedgroupID; $x.url}
    ```

   > [!NOTE]
   > Сайты SharePoint для частных каналов, созданных до 28 июня 2021 `"TEAMCHANNEL#0"` г., используют значение идентификатора настраиваемого шаблона. Чтобы отобразить частные каналы, созданные после этой даты, `"TEAMCHANNEL#1"` используйте значение при выполнении двух предыдущих скриптов. Общие каналы используют только значение `"TEAMCHANNEL#1"`.

3. Для каждой родительской команды выполните следующие команды PowerShell, чтобы определить частные и общие сайты каналов, `$groupID` где находится идентификатор группы родительской команды.

    ```PowerShell
    $sites = Get-SPOSite -Template "TEAMCHANNEL#1"
    $groupID = "<group ID of parent team)"
    foreach ($site in $sites) {$x= Get-SpoSite -Identity $site.url -Detail; if ($x.RelatedGroupId -eq $groupID) {$x.RelatedGroupId;$x.url}}
    ```

4. Включите сайт, связанный с частным или общим каналом, как часть поискового запроса обнаружения электронных данных в [eDiscovery (](/microsoft-365/compliance/search-for-content-in-core-ediscovery)стандартный) или при определении и сборе содержимого хранителя в [eDiscovery (Premium).](/microsoft-365/compliance/add-custodians-to-case)

## <a name="search-for-content-for-guest-users"></a>Поиск содержимого для гостевых пользователей

Средства обнаружения электронных данных можно использовать для поиска содержимого Teams, связанного с гостевыми пользователями в вашей организации. Содержимое чата Teams, связанное с гостевым пользователем, сохраняется в облачном хранилище, и его можно искать с помощью обнаружения электронных данных. Это включает поиск содержимого в беседах в чатах 1:1 и 1:N, в которых гостевой пользователь является участником с другими пользователями в организации. Вы также можете искать сообщения частного канала, в которых гостевой пользователь является участником, и искать содержимое в беседах гостевого *:гостевого* чата, где единственными участниками являются гостевые пользователи.

Чтобы найти содержимое для гостевых пользователей, выполните следующее.

1. Подключитесь к Azure AD PowerShell. Инструкции см. в разделе "Подключение с помощью Azure Active Directory PowerShell" статьи "Подключение к [Microsoft 365 с помощью PowerShell"](/microsoft-365/enterprise/connect-to-microsoft-365-powershell#connect-with-the-azure-active-directory-powershell-for-graph-module). Обязательно выполните шаги 1 и 2 в предыдущей статье.

2. После успешного подключения Azure AD PowerShell выполните следующую команду, чтобы отобразить имя участника-пользователя (UPN) для всех гостевых пользователей в организации. При создании поиска на шаге 4 необходимо использовать имя участника-пользователя гостевого пользователя.

   ```powershell
   Get-AzureADUser -Filter "userType eq 'Guest'" -All $true | FL UserPrincipalName
   ```

   > [!TIP]
   > Вместо отображения списка имен участников-пользователей на экране компьютера можно перенаправить выходные данные команды в текстовый файл. Это можно сделать, применив `> filename.txt` предыдущую команду. Текстовый файл с именами участников-пользователей будет сохранен в текущей папке.

3. В другом окне Windows PowerShell подключитесь к Центру & безопасности PowerShell. Инструкции см. в [разделе "Подключение к центру & безопасности PowerShell"](/powershell/exchange/connect-to-scc-powershell). Вы можете подключаться с помощью многофакторной проверки подлинности или без нее.

4. Создайте поиск контента, который ищет все содержимое (например, сообщения чата и сообщения электронной почты), в котором указанный гостевой пользователь был участником, выполнив следующую команду.

   ```powershell
   New-ComplianceSearch <search name> -ExchangeLocation <guest user UPN>  -AllowNotFoundExchangeLocationsEnabled $true -IncludeUserAppContent $true
   ```

   Например, для поиска содержимого, связанного с гостевым пользователем Sara Sara, выполните следующую команду.

   ```powershell
   New-ComplianceSearch "Sara Davis Guest User" -ExchangeLocation "sara.davis_hotmail.com#EXT#@contoso.onmicrosoft.com" -AllowNotFoundExchangeLocationsEnabled $true -IncludeUserAppContent $true
   ```

    Дополнительные сведения об использовании PowerShell для создания поиска контента см. в [разделе New-ComplianceSearch](/powershell/module/exchange/new-compliancesearch).

5. Выполните следующую команду, чтобы начать поиск контента, созданный на шаге 4:

   ```powershell
   Start-ComplianceSearch <search name>
   ```

6. Перейдите и [https://compliance.microsoft.com](https://compliance.microsoft.com) нажмите кнопку **"Показать все поиск** > **контента"**.

7. В списке поисковых запросов выберите поиск, созданный на шаге 4, чтобы отобразить всплывающую страницу.

8. На всплывающей странице можно выполнить следующие действия:

   - **Щелкните "Просмотреть результаты**", чтобы просмотреть результаты поиска и просмотреть содержимое.

   - Рядом с **полем запроса** нажмите **кнопку "** Изменить", чтобы изменить, а затем повторно запустите поиск. Например, можно добавить поисковый запрос, чтобы сузить результаты.

   - Нажмите **кнопку "Экспортировать результаты** ", чтобы экспортировать и скачать результаты поиска.

## <a name="search-for-card-content"></a>Поиск содержимого карточки

Содержимое карточки, созданное приложениями в каналах Teams, чатах 1:1 и чатах 1xN, хранится в почтовых ящиках и может выполняться поиск. *Карточка* — это контейнер пользовательского интерфейса для коротких фрагментов содержимого. Карточки могут иметь несколько свойств и вложений, а также могут включать кнопки, которые могут активировать действия карточек. Дополнительные сведения см. в разделе ["Карточки"](/microsoftteams/platform/task-modules-and-cards/what-are-cards)

Как и другие материалы Teams, где хранится содержимое карточки, зависит от того, где использовалась карточка. Содержимое карточек, используемых в канале Teams, хранится в почтовом ящике группы Teams. Содержимое карточки для чатов 1:1 и 1xN хранится в почтовых ящиках участников чата.

Для поиска содержимого карточки можно использовать условия `kind:microsoftteams` или `itemclass:IPM.SkypeTeams.Message` условия поиска. При просмотре результатов поиска содержимое карточки, созданное ботами в канале Teams, имеет свойство электронной почты **"**`<appname>@teams.microsoft.com`Отправитель/Автор", `appname` где находится имя приложения, создающее содержимое карточки. Если содержимое карточки было создано пользователем, значение **sender/Author** определяет пользователя.

При просмотре содержимого карточки в результатах поиска контента содержимое отображается как вложение в сообщение. Имя вложения — `appname.html`имя `appname` приложения, создающее содержимое карточки. На следующих снимках экрана показано, как содержимое карточки (для приложения с именем Asana) отображается в Teams и в результатах поиска.

### <a name="card-content-in-teams"></a>Содержимое карточки в Teams

![Содержимое карточки в сообщении канала Teams.](media/CardContentTeams.png)

### <a name="card-content-in-search-results"></a>Содержимое карточки в результатах поиска

![То же содержимое карточки в результатах поиска контента.](media/CardContentEdiscoverySearchResults.png)

> [!NOTE]
> Чтобы отобразить изображения из содержимого карточки в результатах поиска в данный момент (например, флажки на предыдущем снимке экрана), необходимо выполнить вход в Teams ( <https://teams.microsoft.com>по адресу) на другой вкладке в том же сеансе браузера, который используется для просмотра результатов поиска. В противном случае отображаются заполнители изображений.

## <a name="ediscovery-in-federated-and-non-federated-environments"></a>Обнаружение электронных данных в федеративных и не федеративных средах

Администраторы могут использовать обнаружение электронных данных для поиска содержимого в сообщениях чатов на собрании Teams в федеративных (называемых внешним доступом *) и* не федеративных (называемых гостевым *доступом*) средах на основе следующих ограничений:

- **Федеративный**: на собрании Teams с пользователями из вашей организации и пользователями из внешней организации (у которых есть внешний доступ в организации) администраторы обеих организаций могут искать содержимое в сообщениях чата из собрания.

- **Не** федеративные. На собрании Teams с пользователями из вашей организации и гостевыми пользователями только администраторы организации, которые размещают собрание Teams, могут искать содержимое в сообщениях чата из собрания.

## <a name="related-topics"></a>Статьи по теме

- [Решения для обнаружения электронных данных Microsoft 365](/microsoft-365/compliance/ediscovery)
- [Начало работы с обнаружением электронных данных (цен. категория "Стандартный")](/microsoft-365/compliance/get-started-core-ediscovery)
- [Рабочий процесс Teams в eDiscovery (Премиум)](/microsoft-365/compliance/teams-workflow-in-advanced-ediscovery)
- [Обзор PowerShell в Teams](teams-powershell-overview.md)
