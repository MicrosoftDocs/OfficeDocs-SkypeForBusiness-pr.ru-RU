---
title: Установка Moodle интеграции с группами Майкрософт
author: MicrosoftHeidi
ms.author: heidip
manager: serdars
ms.date: 05/01/2019
ms.topic: article
ms.service: msteams
ms.reviewer: ''
search.appverid: MET150
description: Узнайте, как установить и настроить приложение интеграции Moodle для групп Майкрософт.
keywords: Подключаемый модуль интеграции приложений Moodle групп
localization_priority: Normal
MS.collection: Teams_ITAdmin_Help
appliesto: Microsoft Teams
ms.openlocfilehash: 92259a9ef01232aaeca67089b5d654fe302f1224
ms.sourcegitcommit: 9a99be1365df439f9443f31240aa5311782458df
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/14/2019
ms.locfileid: "34055369"
---
# <a name="install-moodle-integration-with-microsoft-teams"></a><span data-ttu-id="b7897-104">Установка Moodle интеграции с группами Майкрософт</span><span class="sxs-lookup"><span data-stu-id="b7897-104">Install Moodle integration with Microsoft Teams</span></span>

> [!VIDEO https://www.youtube.com/embed/OHlPt22nKoE]

<span data-ttu-id="b7897-105">[Moodle](https://moodle.org/), наиболее популярные и открытия источника обучения управления системы (управления Обучением) в мире теперь интегрированы с группами Майкрософт!</span><span class="sxs-lookup"><span data-stu-id="b7897-105">[Moodle](https://moodle.org/), the most popular and open source Learning Management System (LMS) in the world, is now integrated with Microsoft Teams!</span></span> <span data-ttu-id="b7897-106">Интеграция помогает преподавателей и преподавателей совместно работать вокруг Moodle курсы, задать вопросы по поводу их оценки и назначений и своевременно с помощью уведомлений — все в пределах группы!</span><span class="sxs-lookup"><span data-stu-id="b7897-106">This integration helps educators and teachers collaborate around Moodle courses, ask questions about their grades and assignments, and stay updated with notifications -- all within Teams!</span></span>

<span data-ttu-id="b7897-107">Чтобы помочь ИТ-администраторам легко настроить интеграции, мы обновили наших открытым кодом подключаемого модуля Office 365 Moodle с помощью следующих возможностей:</span><span class="sxs-lookup"><span data-stu-id="b7897-107">To help IT admins easily set up this integration, we have updated our open source Office 365 Moodle plugin with the following capabilities:</span></span>

- <span data-ttu-id="b7897-108">Автоматическая регистрация сервера Moodle с Azure AD</span><span class="sxs-lookup"><span data-stu-id="b7897-108">Auto-registration of your Moodle server with Azure AD</span></span>
- <span data-ttu-id="b7897-109">Одним щелчком мыши развертывания из вашей программы-робота помощник по Moodle в Azure</span><span class="sxs-lookup"><span data-stu-id="b7897-109">One-click deployment of your Moodle Assistant bot to Azure</span></span>
- <span data-ttu-id="b7897-110">Автоматическое наполнение групп и автоматическая синхронизация регистрации группы для всех или выбор Moodle курсы</span><span class="sxs-lookup"><span data-stu-id="b7897-110">Auto-provisioning of teams and auto-synchronization of team enrollments for all or select Moodle courses</span></span>
- <span data-ttu-id="b7897-111">Автоматической установки на вкладке Moodle и робот помощник по Moodle в каждой синхронизированного группы (ожидается в ближайшее время)</span><span class="sxs-lookup"><span data-stu-id="b7897-111">Auto-installation of the Moodle tab and the Moodle Assistant bot into each synchronized team (coming soon)</span></span>
- <span data-ttu-id="b7897-112">Публикация одним щелчком мыши Moodle приложения в частной группы приложения хранилище (ожидается в ближайшее время)</span><span class="sxs-lookup"><span data-stu-id="b7897-112">One-click publishing of the Moodle app into your private Teams App Store (coming soon)</span></span>

## <a name="prerequisites"></a><span data-ttu-id="b7897-113">Необходимые компоненты</span><span class="sxs-lookup"><span data-stu-id="b7897-113">Prerequisites</span></span>

<span data-ttu-id="b7897-114">Установка и настройка этого приложения вам:</span><span class="sxs-lookup"><span data-stu-id="b7897-114">To install and configure this application you'll need:</span></span>

- <span data-ttu-id="b7897-115">Учетные данные администратора Moodle</span><span class="sxs-lookup"><span data-stu-id="b7897-115">Moodle administrator credentials</span></span>
- <span data-ttu-id="b7897-116">Учетные данные администратора Azure AD</span><span class="sxs-lookup"><span data-stu-id="b7897-116">Azure AD administrator credentials</span></span>
- <span data-ttu-id="b7897-117">Подписка на Azure, можно создать новые ресурсы в</span><span class="sxs-lookup"><span data-stu-id="b7897-117">An Azure subscription that you can create new resources in</span></span>

## <a name="step-1-install-the-office-365-moodle-plugin"></a><span data-ttu-id="b7897-118">Шаг 1: Установите подключаемый модуль Office 365 Moodle</span><span class="sxs-lookup"><span data-stu-id="b7897-118">Step 1: Install the Office 365 Moodle plugin</span></span>

> [!VIDEO https://www.youtube.com/embed/SETEC5nzMgk]

<span data-ttu-id="b7897-119">Интеграция Moodle в группах Microsoft выключен с открытым кодом [подключаемого модуля Office 365 Moodle](https://github.com/Microsoft/o365-moodle).</span><span class="sxs-lookup"><span data-stu-id="b7897-119">The Moodle integration in Microsoft Teams is powered by the open source [Office 365 Moodle plugin](https://github.com/Microsoft/o365-moodle).</span></span> <span data-ttu-id="b7897-120">Чтобы установить подключаемый модуль на сервере Moodle:</span><span class="sxs-lookup"><span data-stu-id="b7897-120">To install the plugin on your Moodle server:</span></span>

1. <span data-ttu-id="b7897-121">Загрузить, [установить подключаемый модуль Office 365](https://moodle.org/plugins/pluginversions.php?plugin=local_o365) и сохраните его на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="b7897-121">Download the [Office 365 plugin set](https://moodle.org/plugins/pluginversions.php?plugin=local_o365) and save it on your local computer.</span></span> <span data-ttu-id="b7897-122">Вам потребуется использовать версии 3.5 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="b7897-122">You'll need to use version 3.5 or newer.</span></span>
2. <span data-ttu-id="b7897-123">Вход на сервер Moodle с правами администратора и выберите **Администрирование веб-сайтов** в левой области навигации.</span><span class="sxs-lookup"><span data-stu-id="b7897-123">Sign in to your Moodle server as an administrator, and select **Site administration** from the left navigation pane.</span></span>
3. <span data-ttu-id="b7897-124">Перейдите на вкладку **подключаемые модули** и нажмите кнопку **установить подключаемые модули**.</span><span class="sxs-lookup"><span data-stu-id="b7897-124">Select the **Plugins** tab, and then click **Install plugins**.</span></span>
4. <span data-ttu-id="b7897-125">В разделе **установить подключаемый модуль из ZIP-файл,** нажмите кнопку **выбрать файл** .</span><span class="sxs-lookup"><span data-stu-id="b7897-125">Under the **Install plugin from ZIP file** section click the **Choose a file** button.</span></span>
5. <span data-ttu-id="b7897-126">Выберите параметры **Отправка файла** из левой панели переходов, найдите файл, который был загружен выше и нажмите кнопку **Отправить этот файл**.</span><span class="sxs-lookup"><span data-stu-id="b7897-126">Select the **Upload a file** options from the left navigation pane, browse to the file you downloaded above, and click **Upload this file**.</span></span>
6. <span data-ttu-id="b7897-127">Выберите параметр **Администрирование веб-сайтов** из левой панели переходов еще раз, чтобы вернуться на панель мониторинга администрирования.</span><span class="sxs-lookup"><span data-stu-id="b7897-127">Select the **Site administration** option from the left navigation pane again to return to your admin dashboard.</span></span> <span data-ttu-id="b7897-128">Прокрутите список вниз до **локального подключаемые модули** и перейдите по ссылке **Функция интеграции с Microsoft Office 365** .</span><span class="sxs-lookup"><span data-stu-id="b7897-128">Scroll down to the **Local plugins** and click the **Microsoft Office 365 Integration** link.</span></span> <span data-ttu-id="b7897-129">Оставьте открытым на вкладке отдельные браузера на этой странице конфигурации: вы собираетесь использовать его в оставшейся части этого процесса.</span><span class="sxs-lookup"><span data-stu-id="b7897-129">Keep this configuration page open in a separate browser tab: you'll be using it throughout the rest of this process.</span></span>

<span data-ttu-id="b7897-130">Можно найти дополнительные сведения по установке подключаемые модули Moodle в [документации по Moodle](https://docs.moodle.org/34/en/Installing_plugins).</span><span class="sxs-lookup"><span data-stu-id="b7897-130">You can find more information on how to install Moodle plugins in the [Moodle documentation](https://docs.moodle.org/34/en/Installing_plugins).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b7897-131">Закрывайте страницу Office 365 Moodle подключаемого модуля конфигурации на вкладке отдельные браузера: вы будете после возврата в этот набор страниц во время этого процесса.</span><span class="sxs-lookup"><span data-stu-id="b7897-131">Keep your Office 365 Moodle plugin configuration page open in a separate browser tab: you'll be returning to this set of pages throughout this process.</span></span>

<span data-ttu-id="b7897-132">У вас нет сайта Moodle уже?</span><span class="sxs-lookup"><span data-stu-id="b7897-132">Don't have a Moodle site already?</span></span> <span data-ttu-id="b7897-133">Можно извлечь наших Moodle на Azure [repo](https://github.com/azure/moodle) можно быстро развернуть экземпляр Moodle в Azure и настройте его в соответствии с потребностями.</span><span class="sxs-lookup"><span data-stu-id="b7897-133">You might want to check out our Moodle on Azure [repo](https://github.com/azure/moodle) where you can quickly deploy a Moodle instance on Azure and customize it to your needs.</span></span>

## <a name="step-2-configure-the-connection-between-the-office-365-plugin-and-azure-active-directory"></a><span data-ttu-id="b7897-134">Шаг 2: Настройка подключения между подключаемого модуля Office 365 и Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="b7897-134">Step 2: Configure the connection between the Office 365 plugin and Azure Active Directory</span></span>

> [!VIDEO https://www.youtube.com/embed/FpGEezaJ3SA]

<span data-ttu-id="b7897-135">Далее необходимо зарегистрировать Moodle как приложение в Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="b7897-135">Next you'll need to register Moodle as an application in your Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="b7897-136">Мы подготовили скрипта PowerShell, которые помогут вам выполнить этот процесс.</span><span class="sxs-lookup"><span data-stu-id="b7897-136">We've provided a PowerShell script to help you complete this process.</span></span> <span data-ttu-id="b7897-137">Сценарий PowerShell подготавливает новые Azure AD приложения для клиента Office 365, который будет использоваться с Office 365 Moodle подключаемый модуль.</span><span class="sxs-lookup"><span data-stu-id="b7897-137">The PowerShell script provisions a new Azure AD application for your Office 365 tenant, which will be used by the Office 365 Moodle plugin.</span></span> <span data-ttu-id="b7897-138">Скрипт будет подготовки приложения для клиента O365, настройте необходимые URL-адреса ответа и разрешения для приложения, подготовленные и возврата AppID и ключа.</span><span class="sxs-lookup"><span data-stu-id="b7897-138">The script will provision the app for your O365 tenant, set up all the required Reply URLs and permissions for the provisioned app, and return the AppID and Key.</span></span> <span data-ttu-id="b7897-139">Созданный код AppID и ключ на странице программы установки подключаемого модуля O365 Moodle можно использовать для настройки сервера Moodle с Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b7897-139">You can use the generated AppID and Key in your O365 Moodle plugin setup page to configure your Moodle server with Azure AD.</span></span> <span data-ttu-id="b7897-140">Если вы хотите просмотреть подробное ручные операции, которые автоматизация сценарий PowerShell, их можно найти в полную [документацию для подключаемого модуля](https://docs.moodle.org/34/en/Office365#Register_your_Moodle_instance_as_an_Application).</span><span class="sxs-lookup"><span data-stu-id="b7897-140">If you want to see the detailed manual steps that the PowerShell script is automating, you can find them in the full [documentation for the plugin](https://docs.moodle.org/34/en/Office365#Register_your_Moodle_instance_as_an_Application).</span></span>

1. <span data-ttu-id="b7897-141">На странице "Интеграция Microsoft Office 365 подключаемый модуль" перейдите на вкладку **программы установки** .</span><span class="sxs-lookup"><span data-stu-id="b7897-141">On the Microsoft Office 365 Integration plugin page, select the **Setup** tab.</span></span>
2. <span data-ttu-id="b7897-142">Нажмите кнопку **Загрузить сценарий PowerShell** и сохранения скрипта на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="b7897-142">Click the **Download PowerShell Script** button, and save the script on your local computer.</span></span>
3. <span data-ttu-id="b7897-143">Вам потребуется подготовить сценарий PowerShell из ZIP-файла.</span><span class="sxs-lookup"><span data-stu-id="b7897-143">You'll need to prepare the PowerShell script from the ZIP file.</span></span> <span data-ttu-id="b7897-144">Для этого выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="b7897-144">To do this:</span></span>
    1. <span data-ttu-id="b7897-145">Загрузите и извлеките файл Moodle AzureAD Powershell.zip.</span><span class="sxs-lookup"><span data-stu-id="b7897-145">Download and extract the Moodle-AzureAD-Powershell.zip file.</span></span>
    2. <span data-ttu-id="b7897-146">Откройте папку, извлеченные.</span><span class="sxs-lookup"><span data-stu-id="b7897-146">Open the extracted folder.</span></span>
    3. <span data-ttu-id="b7897-147">Щелкните правой кнопкой мыши файл Moodle AzureAD Script.ps1 и выберите пункт **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="b7897-147">Right-click the Moodle-AzureAD-Script.ps1 file, and select **Properties**.</span></span>
    4. <span data-ttu-id="b7897-148">На вкладке **Общие** в окне Свойства установите флажок **Разрешить** рядом с пунктом атрибут **безопасности** в нижней.</span><span class="sxs-lookup"><span data-stu-id="b7897-148">On the **General** tab of the Properties window, check the **Unblock** box next to the **Security** attribute at the bottom.</span></span>
    5. <span data-ttu-id="b7897-149">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7897-149">Click **OK**.</span></span>
    6. <span data-ttu-id="b7897-150">Скопируйте путь к каталогу извлеченные папки.</span><span class="sxs-lookup"><span data-stu-id="b7897-150">Copy the directory path of the extracted folder.</span></span>
4. <span data-ttu-id="b7897-151">Далее будет выполняться PowerShell с правами администратора:</span><span class="sxs-lookup"><span data-stu-id="b7897-151">Next you'll run PowerShell as an administrator:</span></span>
    1. <span data-ttu-id="b7897-152">Нажмите кнопку Пуск.</span><span class="sxs-lookup"><span data-stu-id="b7897-152">Click Start.</span></span>
    2. <span data-ttu-id="b7897-153">Тип **PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="b7897-153">Type **PowerShell**.</span></span>
    3. <span data-ttu-id="b7897-154">Щелкните правой кнопкой мыши **Windows PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="b7897-154">Right-click **Windows PowerShell**.</span></span>
    4. <span data-ttu-id="b7897-155">Нажмите кнопку **Запуск от имени администратора**.</span><span class="sxs-lookup"><span data-stu-id="b7897-155">Click **Run as Administrator**.</span></span>
5. <span data-ttu-id="b7897-156">Перейдите к каталогу нераспакованных с помощью следующей команды `cd ...\...\Moodle-AzureAD-Powershell` где `...\...` — это путь к каталогу.</span><span class="sxs-lookup"><span data-stu-id="b7897-156">Navigate to the unzipped directory by typing `cd ...\...\Moodle-AzureAD-Powershell` where `...\...` is the path to the directory.</span></span>
6. <span data-ttu-id="b7897-157">Выполнение скрипта PowerShell:</span><span class="sxs-lookup"><span data-stu-id="b7897-157">Execute the PowerShell script:</span></span>
    1. <span data-ttu-id="b7897-158">Введите `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`.</span><span class="sxs-lookup"><span data-stu-id="b7897-158">Enter `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`.</span></span>
    2. <span data-ttu-id="b7897-159">Введите `.\Moodle-AzureAD-Script.ps1`.</span><span class="sxs-lookup"><span data-stu-id="b7897-159">Enter `.\Moodle-AzureAD-Script.ps1`.</span></span>
    3. <span data-ttu-id="b7897-160">Войдите свою учетную запись администратора O365 во всплывающем окне.</span><span class="sxs-lookup"><span data-stu-id="b7897-160">Sign in to your O365 administrator account in the pop-up window.</span></span>
    4. <span data-ttu-id="b7897-161">Введите имя приложения Azure AD (например, **подключаемый модуль Moodle/Moodle**).</span><span class="sxs-lookup"><span data-stu-id="b7897-161">Enter the name of the Azure AD application (for example, **Moodle/Moodle plugin**).</span></span>
    5. <span data-ttu-id="b7897-162">Введите URL-адрес сервера Moodle.</span><span class="sxs-lookup"><span data-stu-id="b7897-162">Enter the URL of your Moodle server.</span></span>
    6. <span data-ttu-id="b7897-163">Скопируйте **Код приложения** и **Ключ приложения** , созданного с помощью сценария и сохраните их.</span><span class="sxs-lookup"><span data-stu-id="b7897-163">Copy the **Application ID** and **Application Key** generated by the script, and save them.</span></span>
7. <span data-ttu-id="b7897-164">Далее необходимо добавить код и ключ подключаемого модуля Office 365 Moodle.</span><span class="sxs-lookup"><span data-stu-id="b7897-164">Next you'll need to add the ID and key to the Office 365 Moodle plugin.</span></span> <span data-ttu-id="b7897-165">Вернуться на страницу администрирования подключаемого модуля (**Администрирование веб-сайтов** > **подключаемые модули** > **Функция интеграции с Microsoft Office 365**).</span><span class="sxs-lookup"><span data-stu-id="b7897-165">Return to the plugin administration page (**Site administration** > **Plugins** > **Microsoft Office 365 Integration**).</span></span>
8. <span data-ttu-id="b7897-166">На вкладке **Установка** добавьте **Код приложения** и **Ключ приложения** были скопированы ранее и нажмите кнопку **Сохранить изменения**.</span><span class="sxs-lookup"><span data-stu-id="b7897-166">On the **Setup** tab, add the **Application ID** and **Application Key** you copied previously, and then click **Save changes**.</span></span>
9. <span data-ttu-id="b7897-167">Один раз Страница обновится, вы должны увидеть вызывается **метод подключения выберите**новый раздел.</span><span class="sxs-lookup"><span data-stu-id="b7897-167">Once the page refreshes, you should see a new section called **Choose connection method**.</span></span> <span data-ttu-id="b7897-168">Щелкните флажок **по умолчанию**и нажмите кнопку **Сохранить изменения**.</span><span class="sxs-lookup"><span data-stu-id="b7897-168">Click the check box labeled **Default**, and then click **Save changes**.</span></span>
10. <span data-ttu-id="b7897-169">Один раз Страница обновится, вы увидите новый раздел с именем **Admin соглашаетесь & дополнительной информации**.</span><span class="sxs-lookup"><span data-stu-id="b7897-169">Once the page refreshes, you'll see a new section called **Admin consent & additional information**.</span></span>
    1. <span data-ttu-id="b7897-170">Щелкните ссылку **Предоставить разрешения администратора** , введите учетные данные глобального администратора 365 Office3 и нажмите кнопку **принять** , чтобы предоставить разрешения.</span><span class="sxs-lookup"><span data-stu-id="b7897-170">Click the **Provide Admin Consent** link, enter your Office3 365 Global Administrator credentials, and then click **Accept** to grant the permissions.</span></span>
    2. <span data-ttu-id="b7897-171">Рядом с полем **Azure AD клиента** нажмите кнопку **Найти** .</span><span class="sxs-lookup"><span data-stu-id="b7897-171">Next to the **Azure AD Tenant** field, click the **Detect** button.</span></span>
    3. <span data-ttu-id="b7897-172">Рядом с полем **OneDrive для бизнеса URL-адреса**нажмите кнопку **Найти** .</span><span class="sxs-lookup"><span data-stu-id="b7897-172">Next to **OneDrive for Business URL**, click the **Detect** button.</span></span>
    4. <span data-ttu-id="b7897-173">После заполнения полей, нажмите кнопку **Сохранить изменения** .</span><span class="sxs-lookup"><span data-stu-id="b7897-173">Once the fields populate, click the **Save changes** button.</span></span>
11. <span data-ttu-id="b7897-174">Нажмите кнопку **Обновить** , чтобы проверить установку и нажмите кнопку **Сохранить изменения**.</span><span class="sxs-lookup"><span data-stu-id="b7897-174">Click the **Update** button to verify the installation, and then click **Save changes**.</span></span>
12. <span data-ttu-id="b7897-175">Далее необходимо синхронизировать пользователей между Moodle сервера и Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b7897-175">Next you'll need to synchronize users between your Moodle server and Azure AD.</span></span> <span data-ttu-id="b7897-176">В зависимости от среды можно выбрать различные варианты на данном этапе.</span><span class="sxs-lookup"><span data-stu-id="b7897-176">Depending on your environment, you may select different options during this stage.</span></span> <span data-ttu-id="b7897-177">Обратите внимание, что конфигурация здесь будет работать с каждой cron Moodle, запустите (обычно раз в день) для хранения всех компонентов синхронизации. Начало работы:</span><span class="sxs-lookup"><span data-stu-id="b7897-177">Note that the configuration you set here will run with each Moodle cron run (typically once a day) to keep everything in sync. To get started:</span></span>
    1. <span data-ttu-id="b7897-178">Перейдите на **вкладку Параметры синхронизации**.</span><span class="sxs-lookup"><span data-stu-id="b7897-178">Switch to the **Sync Settings tab**.</span></span>
    2. <span data-ttu-id="b7897-179">В разделе **Синхронизация пользователей с Azure AD** установите флажки, применяемых к используемой среде.</span><span class="sxs-lookup"><span data-stu-id="b7897-179">In the **Sync users with Azure AD** section, select the check boxes that apply to your environment.</span></span> <span data-ttu-id="b7897-180">Обычно следует выбрать по крайней мере:</span><span class="sxs-lookup"><span data-stu-id="b7897-180">Typically you would select at least:</span></span>
        - <span data-ttu-id="b7897-181">**Создание учетных записей в Moodle для пользователей в Azure AD**</span><span class="sxs-lookup"><span data-stu-id="b7897-181">**Create accounts in Moodle for users in Azure AD**</span></span>
        - <span data-ttu-id="b7897-182">**Обновить все учетные записи в Moodle для пользователей в Azure AD**</span><span class="sxs-lookup"><span data-stu-id="b7897-182">**Update all accounts in Moodle for users in Azure AD**</span></span>
    3. <span data-ttu-id="b7897-183">В разделе **Ограничения создания пользователя** можно настроить фильтр для ограничения пользователей Azure AD, которым будет синхронизирована с Moodle.</span><span class="sxs-lookup"><span data-stu-id="b7897-183">In the **User Creation Restriction** section, you can set up a filter to limit the Azure AD users that will be synced to Moodle.</span></span>
    4. <span data-ttu-id="b7897-184">В разделе **Сопоставление полей пользователя** позволит настроить Azure AD для сопоставления полей Moodle профилей пользователей.</span><span class="sxs-lookup"><span data-stu-id="b7897-184">The **User Field Mapping** section will allow you to customize the Azure AD to Moodle User Profile field mapping.</span></span>
    5. <span data-ttu-id="b7897-185">В разделе **Синхронизация групп** можно автоматически создавать группы (то есть, группами) для некоторых или всех существующих Moodle курсов.</span><span class="sxs-lookup"><span data-stu-id="b7897-185">In the **Teams Sync** section you can choose to automatically create groups (that is, teams) for some or all of your existing Moodle courses.</span></span>
13. <span data-ttu-id="b7897-186">Для проверки заданий cron (и их запуска вручную, если вы хотите для первого потока), щелкните ссылку **"расписание задачи управления"** в разделе **Синхронизация пользователей с Azure AD** .</span><span class="sxs-lookup"><span data-stu-id="b7897-186">To validate the cron jobs (and run them manually if you wish to for the first run), click the **Scheduled tasks management page** link in the **Sync users with Azure AD** section.</span></span> <span data-ttu-id="b7897-187">Можно будет перейти на страницу **Назначенные задания** .</span><span class="sxs-lookup"><span data-stu-id="b7897-187">This will take you to the **Scheduled Tasks** page.</span></span>
    1. <span data-ttu-id="b7897-188">Прокрутите список вниз и найдите задание **синхронизации пользователей с Azure AD** и нажмите кнопку **выполнить**.</span><span class="sxs-lookup"><span data-stu-id="b7897-188">Scroll down and find the job **Sync users with Azure AD** job, and click **Run now**.</span></span>
    2. <span data-ttu-id="b7897-189">Если вы создаете группы на основании существующих курсы, можно также запустить задание **Создание групп пользователей в Office 365** .</span><span class="sxs-lookup"><span data-stu-id="b7897-189">If you chose to create groups based on existing courses, you can also run the **Create user groups in Office 365** job.</span></span>
14. <span data-ttu-id="b7897-190">Вернуться на страницу администрирования подключаемого модуля (**Администрирование веб-сайтов** > **подключаемые модули** > **Функция интеграции с Microsoft Office 365**) и перейдите на страницу **Параметры группы** .</span><span class="sxs-lookup"><span data-stu-id="b7897-190">Return to the plugin administration page (**Site administration** > **Plugins** > **Microsoft Office 365 Integration**) and select the **Teams Settings** page.</span></span> <span data-ttu-id="b7897-191">Вам потребуется настроить некоторые параметры безопасности, чтобы включить интеграцию приложения группы.</span><span class="sxs-lookup"><span data-stu-id="b7897-191">You'll need to configure some security settings to enable the Teams app integration.</span></span>
    1. <span data-ttu-id="b7897-192">Чтобы включить OpenID подключения, щелкните ссылку **Управление проверки подлинности** и щелкните значок в строке **Подключения OpenId** , если он недоступен.</span><span class="sxs-lookup"><span data-stu-id="b7897-192">To enable OpenID Connect, click the **Manage Authentication** link, and click the eye icon on the **OpenId Connect** line if it is dimmed.</span></span>
    2. <span data-ttu-id="b7897-193">Чтобы включить внедрение frame, щелкните ссылку **Безопасности HTTP** и установите флажок рядом с пунктом **Разрешить внедрение кадров**.</span><span class="sxs-lookup"><span data-stu-id="b7897-193">To enable frame embedding, click the **HTTP Security** link, and then select the check box next to **Allow frame embedding**.</span></span>
    3. <span data-ttu-id="b7897-194">Включение веб-служб (которые будет включить функции Moodle API).</span><span class="sxs-lookup"><span data-stu-id="b7897-194">Enable web services (which will enable the Moodle API features).</span></span> <span data-ttu-id="b7897-195">Щелкните ссылку **Дополнительные параметры** и затем убедитесь, что установлен флажок рядом с полем **Включить веб-служб** .</span><span class="sxs-lookup"><span data-stu-id="b7897-195">Click the **Advanced Features** link, and then make sure the check box next to **Enable web services** is selected.</span></span>
    4. <span data-ttu-id="b7897-196">Включение внешних служб для Office 365.</span><span class="sxs-lookup"><span data-stu-id="b7897-196">Enable the external services for Office 365.</span></span> <span data-ttu-id="b7897-197">Щелкните ссылку **внешних служб** , а затем:</span><span class="sxs-lookup"><span data-stu-id="b7897-197">Click the **External services** link, and then:</span></span>
        1. <span data-ttu-id="b7897-198">В строке **Moodle Office 365 веб-службы** нажмите кнопку **Изменить** .</span><span class="sxs-lookup"><span data-stu-id="b7897-198">Click **Edit** on the **Moodle Office 365 Webservices** row.</span></span>
        2. <span data-ttu-id="b7897-199">Установите флажок рядом с пунктом **включено**и нажмите кнопку **Сохранить изменения**</span><span class="sxs-lookup"><span data-stu-id="b7897-199">Select the check box next to **Enabled**, and then click **Save Changes**</span></span>
    5. <span data-ttu-id="b7897-200">И, наконец необходимо изменить разрешения пользователя, прошедшего проверку чтобы разрешить пользователям создавать маркеры службы web.</span><span class="sxs-lookup"><span data-stu-id="b7897-200">Finally, you need to edit your authenticated user permissions to allow users to create web service tokens.</span></span> <span data-ttu-id="b7897-201">Щелкните ссылку **Изменение роли проверкой подлинности пользователей** .</span><span class="sxs-lookup"><span data-stu-id="b7897-201">Click the **Editing role Authenticated user** link.</span></span> <span data-ttu-id="b7897-202">Прокрутите список вниз и найдите возможность **создания веб-маркера службы** и установите флажок **Разрешить** .</span><span class="sxs-lookup"><span data-stu-id="b7897-202">Scroll down and find the **Create a web service token** capability, and select the **Allow** check box.</span></span>

## <a name="step-3-deploy-the-moodle-assistant-bot-to-azure"></a><span data-ttu-id="b7897-203">Шаг 3: Развертывание программы-робота помощник по Moodle в Azure</span><span class="sxs-lookup"><span data-stu-id="b7897-203">Step 3: Deploy the Moodle Assistant Bot to Azure</span></span>

> [!VIDEO https://www.youtube.com/embed/gbkJxf8FlfY]

<span data-ttu-id="b7897-204">Бесплатная робот помощника по Moodle для групп Майкрософт помогает преподавателей и учащихся ответы на вопросы о своих курсы, назначения, оценки и другими данными в Moodle.</span><span class="sxs-lookup"><span data-stu-id="b7897-204">The free Moodle Assistant Bot for Microsoft Teams helps teachers and students answer questions about their courses, assignments, grades, and other information in Moodle.</span></span> <span data-ttu-id="b7897-205">Робот также отправляет Moodle уведомления для преподавателей и учащихся вправо в пределах группы.</span><span class="sxs-lookup"><span data-stu-id="b7897-205">The bot also sends Moodle notifications to students and teachers right within Teams.</span></span> <span data-ttu-id="b7897-206">Эта программа-робот является проекта с открытым кодом, задаваемые с помощью Microsoft и доступен [в репозиториев](https://github.com/microsoft/Moodle-Teams-Bot).</span><span class="sxs-lookup"><span data-stu-id="b7897-206">This bot is an open source project maintained by Microsoft and is [available on GitHub](https://github.com/microsoft/Moodle-Teams-Bot).</span></span>

> [!NOTE]
<span data-ttu-id="b7897-207">.</span><span class="sxs-lookup"><span data-stu-id="b7897-207"></span></span> <span data-ttu-id="b7897-208">В этом разделе будет развертывания ресурсов в Azure подписки и все ресурсы будут настроены с помощью свободного уровня.</span><span class="sxs-lookup"><span data-stu-id="b7897-208">In this section you will deploy resources to your Azure subscription, and all resources will be configured using the free tier.</span></span> <span data-ttu-id="b7897-209">В зависимости от использования вашей программа-робот необходимо масштабировать этих ресурсов.</span><span class="sxs-lookup"><span data-stu-id="b7897-209">Depending on the usage of your bot, you may need to scale these resources.</span></span> <span data-ttu-id="b7897-210">Если вы хотите использовать вкладку Moodle без робот, перейдите к [шагу 4](#step-4-deploy-your-microsoft-teams-app).</span><span class="sxs-lookup"><span data-stu-id="b7897-210">If you want to just use the Moodle tab without the bot, skip to [step 4](#step-4-deploy-your-microsoft-teams-app).</span></span>

### <a name="moodle-bot-information-flow"></a><span data-ttu-id="b7897-211">Поток информации Moodle программы-робота</span><span class="sxs-lookup"><span data-stu-id="b7897-211">Moodle bot information flow</span></span>

<span data-ttu-id="b7897-212">Чтобы установить робот, необходимо зарегистрировать его на [Платформу Microsoft](https://identity.microsoft.com/Landing).</span><span class="sxs-lookup"><span data-stu-id="b7897-212">To install the bot, you'll need to register it on the [Microsoft Identity Platform](https://identity.microsoft.com/Landing).</span></span> <span data-ttu-id="b7897-213">Это позволяет вашей программа-робот для проверки подлинности с помощью Microsoft конечных точек.</span><span class="sxs-lookup"><span data-stu-id="b7897-213">This allows your bot to authenticate with your Microsoft endpoints.</span></span> <span data-ttu-id="b7897-214">Чтобы зарегистрировать вашей программа-робот:</span><span class="sxs-lookup"><span data-stu-id="b7897-214">To register your bot:</span></span>

1. <span data-ttu-id="b7897-215">Вернуться на страницу администрирования подключаемого модуля (**Администрирование веб-сайтов** > **подключаемые модули** > **Функция интеграции с Microsoft Office 365**) и перейдите на вкладку **Параметры группы** .</span><span class="sxs-lookup"><span data-stu-id="b7897-215">Return to the plugin administration page (**Site administration** > **Plugins** > **Microsoft Office 365 Integration**) and select the **Teams Settings** tab.</span></span>
2. <span data-ttu-id="b7897-216">Нажмите кнопку ссылка **Портала регистрации приложения Майкрософт** и войдите с вашего идентификатора Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="b7897-216">Click the **Microsoft Application Registration Portal** link and sign in with your Microsoft ID.</span></span>
3. <span data-ttu-id="b7897-217">Введите имя для приложения (например, MoodleBot) и нажмите кнопку **Создать** .</span><span class="sxs-lookup"><span data-stu-id="b7897-217">Enter a name for you app (for example, MoodleBot) and click the **Create** button.</span></span>
4. <span data-ttu-id="b7897-218">Скопируйте **Код приложения** и вставьте его в поле **Код приложения программы-робота** на страницу **Параметры группы** .</span><span class="sxs-lookup"><span data-stu-id="b7897-218">Copy the **Application ID** and paste it into the **Bot Application ID** field on the **Team Settings** page.</span></span>
5. <span data-ttu-id="b7897-219">Нажмите кнопку **Создать новый пароль** .</span><span class="sxs-lookup"><span data-stu-id="b7897-219">Click the **Generate New Password** button.</span></span> <span data-ttu-id="b7897-220">Скопируйте созданный пароль и вставьте его в поле **Пароль приложения программы-робота** на страницу **Параметры группы** .</span><span class="sxs-lookup"><span data-stu-id="b7897-220">Copy the generated password and paste it into the **Bot Application Password** field on the **Team Settings** page.</span></span>
6. <span data-ttu-id="b7897-221">Прокрутите список в нижней части формы и нажмите кнопку **Сохранить изменения**.</span><span class="sxs-lookup"><span data-stu-id="b7897-221">Scroll to the bottom of the form and click **Save Changes**.</span></span>

<span data-ttu-id="b7897-222">Теперь, когда созданный код приложения и пароль — времени для развертывания вашего программа-робот Azure.</span><span class="sxs-lookup"><span data-stu-id="b7897-222">Now that you've generated your application ID and password, it's time to deploy your bot to Azure.</span></span> <span data-ttu-id="b7897-223">Нажмите кнопку **Развернуть в Azure** и заполнить форму с необходимой информации (программы-робота ID и пароль не на странице **Параметров группы** , а Azure сведения — на странице " **Настройка** ").</span><span class="sxs-lookup"><span data-stu-id="b7897-223">Click the **Deploy to Azure** button and complete the form with the necessary information (the bot ID and password are on the **Team Settings** page, and the Azure information is on the **Setup** page).</span></span> <span data-ttu-id="b7897-224">После заполнения формы, установите флажок согласны с условиями, и нажмите кнопку **покупки** (все ресурсы Azure развертываются на бесплатную уровень).</span><span class="sxs-lookup"><span data-stu-id="b7897-224">Once you have the form filled out, click the check box to agree to the terms and conditions, and then click the **Purchase** button (all Azure resources are deployed to the free tier).</span></span>

<span data-ttu-id="b7897-225">После завершения ресурсы развертывание Azure, вам потребуется настроить подключаемого модуля Office 365 Moodle с помощью конечной точки обмена мгновенными сообщениями.</span><span class="sxs-lookup"><span data-stu-id="b7897-225">After the resources are finished deploying to Azure, you'll need to configure the Office 365 Moodle plugin with its messaging endpoint.</span></span> <span data-ttu-id="b7897-226">Во-первых вам потребуется получить конечную точку из вашей программы-робота в Azure.</span><span class="sxs-lookup"><span data-stu-id="b7897-226">First, you'll need to get the endpoint from your bot in Azure.</span></span> <span data-ttu-id="b7897-227">Для этого выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="b7897-227">To do this:</span></span>

1. <span data-ttu-id="b7897-228">Если вы не вошли в уже, войдите в [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="b7897-228">If you aren't signed in already, sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="b7897-229">В левой области выберите **группы ресурсов**.</span><span class="sxs-lookup"><span data-stu-id="b7897-229">In the left pane, select **Resource groups**.</span></span>
3. <span data-ttu-id="b7897-230">В списке выберите группы ресурсов вы только что использовать (или) при развертывании вашей программа-робот.</span><span class="sxs-lookup"><span data-stu-id="b7897-230">From the list, select the resource group you just used (or created) while deploying your bot.</span></span>
4. <span data-ttu-id="b7897-231">Выберите в списке ресурсов в группе ресурсов **WebApp программа-робот** .</span><span class="sxs-lookup"><span data-stu-id="b7897-231">Select the **WebApp Bot** resource from the list of resources in the group.</span></span>
5. <span data-ttu-id="b7897-232">Скопируйте **Конечной точки системы обмена сообщениями** в разделе **Обзор** .</span><span class="sxs-lookup"><span data-stu-id="b7897-232">Copy the **Messaging Endpoint** from the **Overview** section.</span></span>
6. <span data-ttu-id="b7897-233">В Moodle откройте страницу **Параметры группы** к Office 365 Moodle подключаемого модуля.</span><span class="sxs-lookup"><span data-stu-id="b7897-233">In Moodle, open the **Team Settings** page of your Office 365 Moodle plugin.</span></span>
7. <span data-ttu-id="b7897-234">В поле **Конечная точка программы-робота** вставьте URL-адрес, скопированный и измените word *сообщений* на *webhook*.</span><span class="sxs-lookup"><span data-stu-id="b7897-234">In the **Bot Endpoint** field, paste the URL you just copied, and change the word *messages* to *webhook*.</span></span> <span data-ttu-id="b7897-235">URL-адрес должен выглядеть следующим образом: `https://botname.azurewebsites.net/api/webhook`.</span><span class="sxs-lookup"><span data-stu-id="b7897-235">The URL should now look like this: `https://botname.azurewebsites.net/api/webhook`.</span></span>
8. <span data-ttu-id="b7897-236">Нажмите кнопку **Сохранить изменения**.</span><span class="sxs-lookup"><span data-stu-id="b7897-236">Click **Save Changes**.</span></span>
9. <span data-ttu-id="b7897-237">После изменения будут сохранены, вернитесь на вкладку **Параметры группы** , нажмите кнопку **загрузить файл манифеста** и сохранить пакет манифеста на вашем компьютере (оно будет использоваться на следующем этапе).</span><span class="sxs-lookup"><span data-stu-id="b7897-237">Once your changes are saved, go back to the **Team Settings** tab, click the **Download manifest file** button, and save the manifest package on your computer (you'll use it in the next step).</span></span>

## <a name="step-4-deploy-your-microsoft-teams-app"></a><span data-ttu-id="b7897-238">Шаг 4: Развертывание приложения группами Майкрософт</span><span class="sxs-lookup"><span data-stu-id="b7897-238">Step 4: Deploy your Microsoft Teams app</span></span>

> [!VIDEO https://www.youtube.com/embed/2rMb7gtM_ZM]

<span data-ttu-id="b7897-239">Теперь, когда развернут робота в Azure и настраивается в целях обращаться к серверу Moodle, настало время для развертывания вашего приложения группами Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="b7897-239">Now that you have deployed your bot in Azure and configured it to talk to your Moodle server, it's time to deploy your Microsoft Teams app.</span></span> <span data-ttu-id="b7897-240">Для этого будет загрузить файл манифеста, который был загружен на странице **Параметры группы** Office 365 Moodle подключаемого модуля на предыдущем шаге.</span><span class="sxs-lookup"><span data-stu-id="b7897-240">To do this you'll load the manifest file you downloaded from the Office 365 Moodle plugin **Team Settings** page in the previous step.</span></span>

<span data-ttu-id="b7897-241">Перед установкой приложения вам потребуется убедитесь в том, что включено sideloading приложений и внешних приложений.</span><span class="sxs-lookup"><span data-stu-id="b7897-241">Before you can install the app, you'll need to make sure that external apps and sideloading of apps is enabled.</span></span> <span data-ttu-id="b7897-242">Для этого выполните [следующие действия](https://docs.microsoft.com/en-us/MicrosoftTeams/admin-settings).</span><span class="sxs-lookup"><span data-stu-id="b7897-242">To do this, follow [these steps](https://docs.microsoft.com/en-us/MicrosoftTeams/admin-settings).</span></span> <span data-ttu-id="b7897-243">После обеспечения включения внешних приложений, выполните следующие шаги для развертывания вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="b7897-243">Once you've ensured that external apps are enabled, follow the steps below to deploy your app.</span></span>

1. <span data-ttu-id="b7897-244">Откройте группами Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="b7897-244">Open Microsoft Teams.</span></span>
2. <span data-ttu-id="b7897-245">Щелкните значок **хранилища** в нижней левой части панели навигации.</span><span class="sxs-lookup"><span data-stu-id="b7897-245">Click the **Store** icon on the lower-left of the navigation bar.</span></span>
3. <span data-ttu-id="b7897-246">Щелкните ссылку **загрузить пользовательское приложение** из списка параметров.</span><span class="sxs-lookup"><span data-stu-id="b7897-246">Click the **Upload a custom app** link from the list of options.</span></span> 
   > [!NOTE]
   > <span data-ttu-id="b7897-247">Если вы зарегистрированы качестве глобального администратора, вам придется возможность Отправка приложения в хранилище приложений вашей организации; в противном случае — только можно загрузить приложение для команды являются частью (*sideloading*).</span><span class="sxs-lookup"><span data-stu-id="b7897-247">If you're signed in as a global administrator, you'll have the option of uploading the app to your organization's app store; otherwise you'll only be able to load the app for the teams you're a part of (*sideloading*).</span></span>
4. <span data-ttu-id="b7897-248">Выберите ранее загруженный пакет manifest.zip и нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7897-248">Select the manifest.zip package you downloaded previously, and click **Save**.</span></span> <span data-ttu-id="b7897-249">Если еще не загружен манифеста пакета, это можно сделать на вкладке **Параметры групп** страницы конфигурации подключаемого модуля в Moodle.</span><span class="sxs-lookup"><span data-stu-id="b7897-249">If you haven't yet downloaded the manifest package, you can do so from the **Team Settings** tab of the plugin configuration page in Moodle.</span></span>

<span data-ttu-id="b7897-250">Теперь, когда у вас есть установленное приложение, можно добавить вкладку любой, у вас есть доступ к каналу.</span><span class="sxs-lookup"><span data-stu-id="b7897-250">Now that you have the app installed, you can add the tab to any channel that you have access to.</span></span> <span data-ttu-id="b7897-251">Для этого перейдите к каналу, нажмите кнопку **+** символов и выберите приложение из списка.</span><span class="sxs-lookup"><span data-stu-id="b7897-251">To do this, navigate to the channel, click the **+** symbol, and select your app from the list.</span></span> <span data-ttu-id="b7897-252">Следуйте подсказкам, чтобы завершить добавление вашей Moodle курс вкладки на канал.</span><span class="sxs-lookup"><span data-stu-id="b7897-252">Follow the prompts to finish adding your Moodle course tab to a channel.</span></span>

<span data-ttu-id="b7897-253">Ну вот!</span><span class="sxs-lookup"><span data-stu-id="b7897-253">That's it!</span></span> <span data-ttu-id="b7897-254">Группы, теперь можно начать работу с курсов Moodle непосредственно из групп Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="b7897-254">You and your team, can now start working with your Moodle courses directly from Microsoft Teams.</span></span>

<span data-ttu-id="b7897-255">Чтобы предоставить все запросы на компонент "мне нравится" или оставить отзыв, перейдите на [страницу голосовой связи пользователя](https://microsoftteams.uservoice.com/forums/916759-moodle).</span><span class="sxs-lookup"><span data-stu-id="b7897-255">To share any feature requests with us or provide feedback, please visit our [User Voice page](https://microsoftteams.uservoice.com/forums/916759-moodle).</span></span>