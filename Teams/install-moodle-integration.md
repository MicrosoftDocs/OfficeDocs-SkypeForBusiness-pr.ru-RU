---
title: Установка Moodle интеграции с группами Майкрософт
author: MicrosoftHeidi
ms.author: heidip
manager: serdars
ms.date: 05/01/2019
ms.topic: article
ms.service: msteams
ms.reviewer: ''
search.appverid: MET150
description: Узнайте, как установить и настроить приложение интеграции Moodle для групп Майкрософт.
keywords: Подключаемый модуль интеграции приложений Moodle групп
localization_priority: Normal
MS.collection: Teams_ITAdmin_Help
appliesto: Microsoft Teams
ms.openlocfilehash: 92259a9ef01232aaeca67089b5d654fe302f1224
ms.sourcegitcommit: 9a99be1365df439f9443f31240aa5311782458df
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/14/2019
ms.locfileid: "34055369"
---
# <a name="install-moodle-integration-with-microsoft-teams"></a>Установка Moodle интеграции с группами Майкрософт

> [!VIDEO https://www.youtube.com/embed/OHlPt22nKoE]

[Moodle](https://moodle.org/), наиболее популярные и открытия источника обучения управления системы (управления Обучением) в мире теперь интегрированы с группами Майкрософт! Интеграция помогает преподавателей и преподавателей совместно работать вокруг Moodle курсы, задать вопросы по поводу их оценки и назначений и своевременно с помощью уведомлений — все в пределах группы!

Чтобы помочь ИТ-администраторам легко настроить интеграции, мы обновили наших открытым кодом подключаемого модуля Office 365 Moodle с помощью следующих возможностей:

- Автоматическая регистрация сервера Moodle с Azure AD
- Одним щелчком мыши развертывания из вашей программы-робота помощник по Moodle в Azure
- Автоматическое наполнение групп и автоматическая синхронизация регистрации группы для всех или выбор Moodle курсы
- Автоматической установки на вкладке Moodle и робот помощник по Moodle в каждой синхронизированного группы (ожидается в ближайшее время)
- Публикация одним щелчком мыши Moodle приложения в частной группы приложения хранилище (ожидается в ближайшее время)

## <a name="prerequisites"></a>Необходимые компоненты

Установка и настройка этого приложения вам:

- Учетные данные администратора Moodle
- Учетные данные администратора Azure AD
- Подписка на Azure, можно создать новые ресурсы в

## <a name="step-1-install-the-office-365-moodle-plugin"></a>Шаг 1: Установите подключаемый модуль Office 365 Moodle

> [!VIDEO https://www.youtube.com/embed/SETEC5nzMgk]

Интеграция Moodle в группах Microsoft выключен с открытым кодом [подключаемого модуля Office 365 Moodle](https://github.com/Microsoft/o365-moodle). Чтобы установить подключаемый модуль на сервере Moodle:

1. Загрузить, [установить подключаемый модуль Office 365](https://moodle.org/plugins/pluginversions.php?plugin=local_o365) и сохраните его на локальном компьютере. Вам потребуется использовать версии 3.5 или более поздней версии.
2. Вход на сервер Moodle с правами администратора и выберите **Администрирование веб-сайтов** в левой области навигации.
3. Перейдите на вкладку **подключаемые модули** и нажмите кнопку **установить подключаемые модули**.
4. В разделе **установить подключаемый модуль из ZIP-файл,** нажмите кнопку **выбрать файл** .
5. Выберите параметры **Отправка файла** из левой панели переходов, найдите файл, который был загружен выше и нажмите кнопку **Отправить этот файл**.
6. Выберите параметр **Администрирование веб-сайтов** из левой панели переходов еще раз, чтобы вернуться на панель мониторинга администрирования. Прокрутите список вниз до **локального подключаемые модули** и перейдите по ссылке **Функция интеграции с Microsoft Office 365** . Оставьте открытым на вкладке отдельные браузера на этой странице конфигурации: вы собираетесь использовать его в оставшейся части этого процесса.

Можно найти дополнительные сведения по установке подключаемые модули Moodle в [документации по Moodle](https://docs.moodle.org/34/en/Installing_plugins).

> [!IMPORTANT]
> Закрывайте страницу Office 365 Moodle подключаемого модуля конфигурации на вкладке отдельные браузера: вы будете после возврата в этот набор страниц во время этого процесса.

У вас нет сайта Moodle уже? Можно извлечь наших Moodle на Azure [repo](https://github.com/azure/moodle) можно быстро развернуть экземпляр Moodle в Azure и настройте его в соответствии с потребностями.

## <a name="step-2-configure-the-connection-between-the-office-365-plugin-and-azure-active-directory"></a>Шаг 2: Настройка подключения между подключаемого модуля Office 365 и Azure Active Directory

> [!VIDEO https://www.youtube.com/embed/FpGEezaJ3SA]

Далее необходимо зарегистрировать Moodle как приложение в Azure Active Directory (Azure AD). Мы подготовили скрипта PowerShell, которые помогут вам выполнить этот процесс. Сценарий PowerShell подготавливает новые Azure AD приложения для клиента Office 365, который будет использоваться с Office 365 Moodle подключаемый модуль. Скрипт будет подготовки приложения для клиента O365, настройте необходимые URL-адреса ответа и разрешения для приложения, подготовленные и возврата AppID и ключа. Созданный код AppID и ключ на странице программы установки подключаемого модуля O365 Moodle можно использовать для настройки сервера Moodle с Azure AD. Если вы хотите просмотреть подробное ручные операции, которые автоматизация сценарий PowerShell, их можно найти в полную [документацию для подключаемого модуля](https://docs.moodle.org/34/en/Office365#Register_your_Moodle_instance_as_an_Application).

1. На странице "Интеграция Microsoft Office 365 подключаемый модуль" перейдите на вкладку **программы установки** .
2. Нажмите кнопку **Загрузить сценарий PowerShell** и сохранения скрипта на локальном компьютере.
3. Вам потребуется подготовить сценарий PowerShell из ZIP-файла. Для этого выполните следующие действия:
    1. Загрузите и извлеките файл Moodle AzureAD Powershell.zip.
    2. Откройте папку, извлеченные.
    3. Щелкните правой кнопкой мыши файл Moodle AzureAD Script.ps1 и выберите пункт **Свойства**.
    4. На вкладке **Общие** в окне Свойства установите флажок **Разрешить** рядом с пунктом атрибут **безопасности** в нижней.
    5. Нажмите кнопку **ОК**.
    6. Скопируйте путь к каталогу извлеченные папки.
4. Далее будет выполняться PowerShell с правами администратора:
    1. Нажмите кнопку Пуск.
    2. Тип **PowerShell**.
    3. Щелкните правой кнопкой мыши **Windows PowerShell**.
    4. Нажмите кнопку **Запуск от имени администратора**.
5. Перейдите к каталогу нераспакованных с помощью следующей команды `cd ...\...\Moodle-AzureAD-Powershell` где `...\...` — это путь к каталогу.
6. Выполнение скрипта PowerShell:
    1. Введите `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`.
    2. Введите `.\Moodle-AzureAD-Script.ps1`.
    3. Войдите свою учетную запись администратора O365 во всплывающем окне.
    4. Введите имя приложения Azure AD (например, **подключаемый модуль Moodle/Moodle**).
    5. Введите URL-адрес сервера Moodle.
    6. Скопируйте **Код приложения** и **Ключ приложения** , созданного с помощью сценария и сохраните их.
7. Далее необходимо добавить код и ключ подключаемого модуля Office 365 Moodle. Вернуться на страницу администрирования подключаемого модуля (**Администрирование веб-сайтов** > **подключаемые модули** > **Функция интеграции с Microsoft Office 365**).
8. На вкладке **Установка** добавьте **Код приложения** и **Ключ приложения** были скопированы ранее и нажмите кнопку **Сохранить изменения**.
9. Один раз Страница обновится, вы должны увидеть вызывается **метод подключения выберите**новый раздел. Щелкните флажок **по умолчанию**и нажмите кнопку **Сохранить изменения**.
10. Один раз Страница обновится, вы увидите новый раздел с именем **Admin соглашаетесь & дополнительной информации**.
    1. Щелкните ссылку **Предоставить разрешения администратора** , введите учетные данные глобального администратора 365 Office3 и нажмите кнопку **принять** , чтобы предоставить разрешения.
    2. Рядом с полем **Azure AD клиента** нажмите кнопку **Найти** .
    3. Рядом с полем **OneDrive для бизнеса URL-адреса**нажмите кнопку **Найти** .
    4. После заполнения полей, нажмите кнопку **Сохранить изменения** .
11. Нажмите кнопку **Обновить** , чтобы проверить установку и нажмите кнопку **Сохранить изменения**.
12. Далее необходимо синхронизировать пользователей между Moodle сервера и Azure AD. В зависимости от среды можно выбрать различные варианты на данном этапе. Обратите внимание, что конфигурация здесь будет работать с каждой cron Moodle, запустите (обычно раз в день) для хранения всех компонентов синхронизации. Начало работы:
    1. Перейдите на **вкладку Параметры синхронизации**.
    2. В разделе **Синхронизация пользователей с Azure AD** установите флажки, применяемых к используемой среде. Обычно следует выбрать по крайней мере:
        - **Создание учетных записей в Moodle для пользователей в Azure AD**
        - **Обновить все учетные записи в Moodle для пользователей в Azure AD**
    3. В разделе **Ограничения создания пользователя** можно настроить фильтр для ограничения пользователей Azure AD, которым будет синхронизирована с Moodle.
    4. В разделе **Сопоставление полей пользователя** позволит настроить Azure AD для сопоставления полей Moodle профилей пользователей.
    5. В разделе **Синхронизация групп** можно автоматически создавать группы (то есть, группами) для некоторых или всех существующих Moodle курсов.
13. Для проверки заданий cron (и их запуска вручную, если вы хотите для первого потока), щелкните ссылку **"расписание задачи управления"** в разделе **Синхронизация пользователей с Azure AD** . Можно будет перейти на страницу **Назначенные задания** .
    1. Прокрутите список вниз и найдите задание **синхронизации пользователей с Azure AD** и нажмите кнопку **выполнить**.
    2. Если вы создаете группы на основании существующих курсы, можно также запустить задание **Создание групп пользователей в Office 365** .
14. Вернуться на страницу администрирования подключаемого модуля (**Администрирование веб-сайтов** > **подключаемые модули** > **Функция интеграции с Microsoft Office 365**) и перейдите на страницу **Параметры группы** . Вам потребуется настроить некоторые параметры безопасности, чтобы включить интеграцию приложения группы.
    1. Чтобы включить OpenID подключения, щелкните ссылку **Управление проверки подлинности** и щелкните значок в строке **Подключения OpenId** , если он недоступен.
    2. Чтобы включить внедрение frame, щелкните ссылку **Безопасности HTTP** и установите флажок рядом с пунктом **Разрешить внедрение кадров**.
    3. Включение веб-служб (которые будет включить функции Moodle API). Щелкните ссылку **Дополнительные параметры** и затем убедитесь, что установлен флажок рядом с полем **Включить веб-служб** .
    4. Включение внешних служб для Office 365. Щелкните ссылку **внешних служб** , а затем:
        1. В строке **Moodle Office 365 веб-службы** нажмите кнопку **Изменить** .
        2. Установите флажок рядом с пунктом **включено**и нажмите кнопку **Сохранить изменения**
    5. И, наконец необходимо изменить разрешения пользователя, прошедшего проверку чтобы разрешить пользователям создавать маркеры службы web. Щелкните ссылку **Изменение роли проверкой подлинности пользователей** . Прокрутите список вниз и найдите возможность **создания веб-маркера службы** и установите флажок **Разрешить** .

## <a name="step-3-deploy-the-moodle-assistant-bot-to-azure"></a>Шаг 3: Развертывание программы-робота помощник по Moodle в Azure

> [!VIDEO https://www.youtube.com/embed/gbkJxf8FlfY]

Бесплатная робот помощника по Moodle для групп Майкрософт помогает преподавателей и учащихся ответы на вопросы о своих курсы, назначения, оценки и другими данными в Moodle. Робот также отправляет Moodle уведомления для преподавателей и учащихся вправо в пределах группы. Эта программа-робот является проекта с открытым кодом, задаваемые с помощью Microsoft и доступен [в репозиториев](https://github.com/microsoft/Moodle-Teams-Bot).

> [!NOTE]
. В этом разделе будет развертывания ресурсов в Azure подписки и все ресурсы будут настроены с помощью свободного уровня. В зависимости от использования вашей программа-робот необходимо масштабировать этих ресурсов. Если вы хотите использовать вкладку Moodle без робот, перейдите к [шагу 4](#step-4-deploy-your-microsoft-teams-app).

### <a name="moodle-bot-information-flow"></a>Поток информации Moodle программы-робота

Чтобы установить робот, необходимо зарегистрировать его на [Платформу Microsoft](https://identity.microsoft.com/Landing). Это позволяет вашей программа-робот для проверки подлинности с помощью Microsoft конечных точек. Чтобы зарегистрировать вашей программа-робот:

1. Вернуться на страницу администрирования подключаемого модуля (**Администрирование веб-сайтов** > **подключаемые модули** > **Функция интеграции с Microsoft Office 365**) и перейдите на вкладку **Параметры группы** .
2. Нажмите кнопку ссылка **Портала регистрации приложения Майкрософт** и войдите с вашего идентификатора Майкрософт.
3. Введите имя для приложения (например, MoodleBot) и нажмите кнопку **Создать** .
4. Скопируйте **Код приложения** и вставьте его в поле **Код приложения программы-робота** на страницу **Параметры группы** .
5. Нажмите кнопку **Создать новый пароль** . Скопируйте созданный пароль и вставьте его в поле **Пароль приложения программы-робота** на страницу **Параметры группы** .
6. Прокрутите список в нижней части формы и нажмите кнопку **Сохранить изменения**.

Теперь, когда созданный код приложения и пароль — времени для развертывания вашего программа-робот Azure. Нажмите кнопку **Развернуть в Azure** и заполнить форму с необходимой информации (программы-робота ID и пароль не на странице **Параметров группы** , а Azure сведения — на странице " **Настройка** "). После заполнения формы, установите флажок согласны с условиями, и нажмите кнопку **покупки** (все ресурсы Azure развертываются на бесплатную уровень).

После завершения ресурсы развертывание Azure, вам потребуется настроить подключаемого модуля Office 365 Moodle с помощью конечной точки обмена мгновенными сообщениями. Во-первых вам потребуется получить конечную точку из вашей программы-робота в Azure. Для этого выполните следующие действия:

1. Если вы не вошли в уже, войдите в [портал Azure](https://portal.azure.com).
2. В левой области выберите **группы ресурсов**.
3. В списке выберите группы ресурсов вы только что использовать (или) при развертывании вашей программа-робот.
4. Выберите в списке ресурсов в группе ресурсов **WebApp программа-робот** .
5. Скопируйте **Конечной точки системы обмена сообщениями** в разделе **Обзор** .
6. В Moodle откройте страницу **Параметры группы** к Office 365 Moodle подключаемого модуля.
7. В поле **Конечная точка программы-робота** вставьте URL-адрес, скопированный и измените word *сообщений* на *webhook*. URL-адрес должен выглядеть следующим образом: `https://botname.azurewebsites.net/api/webhook`.
8. Нажмите кнопку **Сохранить изменения**.
9. После изменения будут сохранены, вернитесь на вкладку **Параметры группы** , нажмите кнопку **загрузить файл манифеста** и сохранить пакет манифеста на вашем компьютере (оно будет использоваться на следующем этапе).

## <a name="step-4-deploy-your-microsoft-teams-app"></a>Шаг 4: Развертывание приложения группами Майкрософт

> [!VIDEO https://www.youtube.com/embed/2rMb7gtM_ZM]

Теперь, когда развернут робота в Azure и настраивается в целях обращаться к серверу Moodle, настало время для развертывания вашего приложения группами Майкрософт. Для этого будет загрузить файл манифеста, который был загружен на странице **Параметры группы** Office 365 Moodle подключаемого модуля на предыдущем шаге.

Перед установкой приложения вам потребуется убедитесь в том, что включено sideloading приложений и внешних приложений. Для этого выполните [следующие действия](https://docs.microsoft.com/en-us/MicrosoftTeams/admin-settings). После обеспечения включения внешних приложений, выполните следующие шаги для развертывания вашего приложения.

1. Откройте группами Майкрософт.
2. Щелкните значок **хранилища** в нижней левой части панели навигации.
3. Щелкните ссылку **загрузить пользовательское приложение** из списка параметров. 
   > [!NOTE]
   > Если вы зарегистрированы качестве глобального администратора, вам придется возможность Отправка приложения в хранилище приложений вашей организации; в противном случае — только можно загрузить приложение для команды являются частью (*sideloading*).
4. Выберите ранее загруженный пакет manifest.zip и нажмите кнопку **Сохранить**. Если еще не загружен манифеста пакета, это можно сделать на вкладке **Параметры групп** страницы конфигурации подключаемого модуля в Moodle.

Теперь, когда у вас есть установленное приложение, можно добавить вкладку любой, у вас есть доступ к каналу. Для этого перейдите к каналу, нажмите кнопку **+** символов и выберите приложение из списка. Следуйте подсказкам, чтобы завершить добавление вашей Moodle курс вкладки на канал.

Ну вот! Группы, теперь можно начать работу с курсов Moodle непосредственно из групп Майкрософт.

Чтобы предоставить все запросы на компонент "мне нравится" или оставить отзыв, перейдите на [страницу голосовой связи пользователя](https://microsoftteams.uservoice.com/forums/916759-moodle).