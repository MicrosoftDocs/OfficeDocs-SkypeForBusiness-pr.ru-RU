---
title: Отправка и утверждение пользовательских приложений с помощью API отправки приложений Teams
author: guptaashish
ms.author: guptaashish
manager: prkosh
ms.topic: article
ms.tgt.pltfrm: cloud
ms.service: msteams
audience: Admin
ms.collection:
- M365-collaboration
appliesto:
- Microsoft Teams
f1.keywords:
- NOCSH
ms.localizationpriority: medium
search.appverid: MET150
description: Узнайте, как утвердить пользовательские приложения, отправляемые с помощью API отправки приложений Teams в Microsoft Teams.
ms.openlocfilehash: 2fb0ab6778a0704b0cb60faef0d0fd739351ee10
ms.sourcegitcommit: 70185cd963c5a9d539e65e302d4230018209ecae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/22/2022
ms.locfileid: "66958074"
---
# <a name="publish-a-custom-app-submitted-using-the-teams-app-submission-api"></a>Публикация пользовательского приложения, отправленного с помощью API отправки приложений Teams

В этой статье приводятся все рекомендации по использованию приложения Teams от разработки к развертыванию до обнаружения. Вы получите общие сведения о сетевых интерфейсах, которые Teams предоставляет на протяжении всего жизненного цикла приложения, чтобы упростить разработку, развертывание пользовательских приложений и управление ими в магазине приложений вашей организации.

Мы рассмотрим каждый этап жизненного цикла, включая то, как разработчики могут использовать API отправки приложений Teams для отправки пользовательских приложений непосредственно в Центр администрирования Microsoft Teams для проверки и утверждения, как настроить политики для управления приложениями для пользователей в организации и как пользователи обнаруживают их в Teams.

:::image type="content" source="media/custom-app-lifecycle.png" alt-text="Обзор приложения от разработки до развертывания.":::

Это руководство посвящено аспектам приложения Teams и предназначено для администраторов и ИТ-специалистов. Сведения о разработке приложений Teams см. в документации [разработчика Teams](/microsoftteams/platform).

> [!NOTE]
> При публикации пользовательского приложения Teams оно доступно пользователям в магазине приложений вашей организации. Существует два способа публикации пользовательского приложения, и способ его использования зависит от способа его получения. В этой статье основное внимание уделяется утверждению и публикации пользовательского приложения, которое разработчик отправляет через API отправки приложений Teams. Другой метод, отправляя пользовательское приложение, используется, когда разработчик отправляет вам пакет приложения в .zip формате. Дополнительные сведения об этом методе см. в статье ["Публикация пользовательского приложения путем отправки пакета приложения"](/microsoftteams/upload-custom-apps). Мини-приложение "Утверждение приложения" недоступно в клиентах GCC.

> [!IMPORTANT]
> Этот метод в настоящее время недоступен для сред GCC. В GCC используйте *отправку пользовательского метода* приложения.

## <a name="develop"></a>Разработка

### <a name="create-the-app"></a>Создание приложения

Платформа разработчиков Microsoft Teams упрощает интеграцию собственных приложений и служб для повышения производительности, ускорения принятия решений и создания совместной работы с существующим содержимым и рабочими процессами. Приложения, созданные на платформе Teams, — это мосты между клиентом Teams и вашими службами и рабочими процессами, которые непосредственно вовсю перенаправляемы в контекст вашей платформы совместной работы. Дополнительные сведения см. в документации [для разработчиков Teams](/microsoftteams/platform).

### <a name="submit-the-app"></a>Отправка приложения

Когда приложение будет готово к использованию в рабочей среде, разработчик может отправить приложение с помощью API отправки приложений Teams, который можно вызвать из [API Graph](/graph/api/teamsapp-publish?view=graph-rest-beta&tabs=http#example-2-upload-a-new-application-for-review-to-an-organizations-app-catalog&preserve-view=true), интегрированной среды разработки (IDE), например Visual Studio Code, или платформы, такой как Power Apps и Power Virtual Agents. Это делает приложение доступным на странице "Управление [](/microsoftteams/manage-apps) приложениями" в Центре администрирования Teams, где его можно просмотреть и утвердить.

API отправки приложений Teams, созданный на основе [Microsoft Graph](/graph/api/teamsapp-publish?tabs=http&view=graph-rest-beta#example-2-upload-a-new-application-for-review-to-an-organizations-app-catalog&preserve-view=true), позволяет вашей организации разрабатывать приложения на выбранной платформе и автоматизировать процесс отправки на утверждение для пользовательских приложений в Teams.

Ниже приведен пример того, как выглядит этот шаг отправки приложения в Visual Studio Code.

:::image type="content" source="media/custom-app-lifecycle-submit-app.png" alt-text="отправка приложения в Visual Studio Code.":::

Имейте в виду, что это еще не приводит к публикации приложения в магазине приложений вашей организации. На этом шаге приложение отправляется в Центр администрирования Teams, где его можно утвердить для публикации в магазине приложений вашей организации.

Дополнительные сведения об использовании API Graph для отправки приложений см. [здесь](/graph/api/teamsapp-publish?tabs=http&view=graph-rest-beta#example-2-upload-a-new-application-for-review-to-an-organizations-app-catalog&preserve-view=true).

## <a name="notify"></a>Уведомить

Вы можете включить уведомления, чтобы знать, когда разработчики отправляют новое приложение для проверки и утверждения. Вы также будете получать уведомления, когда разработчики отправляют обновления приложений. Чтобы включить уведомления об отправке приложений в Центре администрирования Teams, перейдите к разделу "Уведомления **&** > **[](https://admin.teams.microsoft.com/notifications/rules)** >  оповещения об отправке приложений **правил" и** активируйте правило, изменив состояние на "**Активно"**. По умолчанию этот параметр отключен. Чтобы включить этот параметр, необходимо быть глобальным администратором или администратором Teams.

После включения этого параметра вы получите уведомления в группе Администратор и уведомлений  в новом канале с именем **"Отправки приложений"**. Кроме того, можно выбрать существующую команду и канал для получения уведомлений, доставленных указанной команде и каналу. Для этого выполните следующие действия:

1. В **правиле отправки приложений** установите флажок **"Оповещения канала** " в разделе " **Действия"**.
1. Нажмите **кнопку "Выбрать канал** ".
1. Найдите команду для добавления.
1. Найдите канал для добавления.
1. Нажмите **кнопку "Применить"**.

   :::image type="content" source="media/channel-alert.png" alt-text="Флажок уведомления об оповещении настраиваемого канала." lightbox="media/channel-alert.png":::

> [!NOTE]
> Установите **флажок "** Оповещение канала по умолчанию"**,** чтобы получать уведомления Администратор оповещениям и уведомлениям в **канале "Отправки** приложений".

:::image type="content" source="media/default-channel-alert.png" alt-text="Флажок уведомления об оповещении канала по умолчанию." lightbox="media/default-channel-alert.png":::

Вы также можете настроить уведомления для внешнего веб-перехватчика, указав URL-адрес общедоступного веб-перехватчика  после установки флажка веб-перехватчика. Полезные данные уведомления JSON будут отправлены на URL-адрес веб-перехватчика.

:::image type="content" source="media/app-submission-notification.png" alt-text="Уведомление об отправке приложения." lightbox="media/app-submission-notification.png":::

После настройки правила отправки приложений можно просмотреть карточки уведомлений в указанном канале, чтобы просмотреть сведения о приложении, и выбрать "Просмотреть сведения", чтобы открыть приложения в Центре администрирования Teams.

## <a name="validate"></a>Проверить

Страница ["Управление приложениями](/microsoftteams/manage-apps)" в Центре администрирования Teams (в левой области навигации перейдите в раздел "Приложения [**Teams** > ](https://admin.teams.microsoft.com/manage-apps)" "Управление приложениями") позволяет просмотреть все приложения Teams для вашей организации. **Мини-приложение** "Ожидание утверждения" в верхней части страницы позволяет узнать, когда настраиваемое приложение отправляется на утверждение.

В таблице вновь отправленное приложение автоматически отображает состояние публикации **"** Отправлено" и "**Состояние** **заблокировано"**. Чтобы быстро найти приложение **,** можно отсортировать столбец состояния публикации по убыванию.

:::image type="content" source="media/custom-app-lifecycle-validate-app.png" alt-text="Состояние публикации." lightbox="media/custom-app-lifecycle-validate-app.png":::

Щелкните имя приложения, чтобы перейти на страницу сведений о приложении. На **вкладке "** О программе" можно просмотреть сведения о приложении, включая описание, состояние, отправитель и идентификатор приложения.

:::image type="content" source="media/custom-app-lifecycle-app-details.png" alt-text="Страница сведений о приложении для отправленного приложения." lightbox="media/custom-app-lifecycle-app-details.png":::

Дополнительные сведения об использовании API Graph для проверки состояния **публикации** см. [здесь](/graph/api/appcatalogs-list-teamsapps?tabs=http&view=graph-rest-beta#example-3-find-application-based-on-the-teams-app-manifest-id&preserve-view=true).

## <a name="publish"></a>Публикации

Когда вы будете готовы сделать приложение доступным для пользователей, опубликуйте его.

1. Войдите в Центр администрирования Teams и перейдите к **приложениям Teams Для управления** > **[приложениями](https://admin.teams.microsoft.com/policies/manage-apps)**.
1. Выберите имя приложения, чтобы перейти на страницу сведений о приложении, а  затем в поле состояния публикации выберите "**Опубликовать"**.

    :::image type="content" source="media/submitted-app-pending-action.png" alt-text="Кнопка публикации на странице подробных данных приложения.":::

После публикации приложения состояние публикации  изменится на "Опубликовано **",** а **состояние изменится на** "**Разрешено"**.

## <a name="set-up-and-manage"></a>Настройка и управление

### <a name="control-access-to-the-app"></a>Управление доступом к приложению

По умолчанию все пользователи в организации могут получить доступ к приложению в магазине приложений вашей организации. Чтобы ограничить и контролировать, кто имеет разрешение на использование приложения, можно создать и назначить политику разрешений приложения. Дополнительные сведения см. в статье [Управление политиками и параметрами пользовательских приложений в Teams](teams-app-permission-policies.md).

### <a name="pin-and-install-the-app-for-users-to-discover"></a>Закрепление и установка приложения для обнаружения пользователями

По умолчанию пользователи могут найти приложение, которое им нужно перейти в магазин приложений вашей организации и найти его. Чтобы упростить пользователям доступ к приложению, можно закрепить приложение на панели приложений в Teams. Для этого создайте политику установки приложения и назначьте ее пользователям. Дополнительные сведения см. в статье [Управление политиками и параметрами пользовательских приложений в Teams](teams-app-setup-policies.md).

### <a name="search-the-audit-log-for-teams-app-events"></a>Поиск событий приложения Teams в журнале аудита

Вы можете выполнить поиск в журнале аудита, чтобы просмотреть действия приложений Teams в организации. Дополнительные сведения о поиске в журнале аудита и просмотре списка действий Teams, регистрируемых в журнале аудита, см. в статье "Поиск событий в Teams" в журнале [аудита](audit-log-events.md).

Прежде чем выполнять поиск в журнале аудита, необходимо сначала включить функцию аудита в [Центре безопасности и соответствия требованиям](https://sip.protection.office.com/). Дополнительные сведения см. в статье [Включение и отключение поиска в журнале аудита](/microsoft-365/compliance/turn-audit-log-search-on-or-off?view=o365-worldwide&preserve-view=true). Обратите внимание, что данные аудита доступны только с момента его включения.

## <a name="discover-and-adopt"></a>Обнаружение и внедрение

Пользователи, у которых есть разрешения на доступ к приложению, могут найти его в магазине приложений вашей организации. Перейдите **к *разделу "Имя организации"*** на странице "Приложения", чтобы найти пользовательские приложения вашей организации.

:::image type="content" source="media/custom-app-lifecycle-discovery.png" alt-text="Страница &quot;Приложения&quot; с опубликованным приложением." lightbox="media/custom-app-lifecycle-discovery.png":::

Если вы создали и назначите политику установки приложения, приложение будет закреплено на панели приложений в Teams, чтобы упростить доступ для пользователей, которым назначена политика.

## <a name="update"></a>Обновление

Чтобы обновить приложение, разработчикам следует продолжать выполнять действия, описанные в разделе ["Разработка](#develop) ".

Когда разработчик отправляет обновление в опубликованное пользовательское приложение, вы получите уведомление в мини-приложении "Ожидание  утверждения" на странице "Управление [приложениями](/microsoftteams/manage-apps)". В таблице для состояния **публикации** приложения будет установлено значение **"Обновление отправлено"**. Вы также получите уведомление в группе Администратор и уведомлений в канале отправки приложения, если вы  включили уведомления об отправке приложения. Карточка уведомления будет содержать ссылку для прямого подключения к приложению в Центре администрирования Teams. Дополнительные сведения о включении уведомлений об отправке приложения см. в разделе ["Уведомление"](#notify).

:::image type="content" source="media/custom-app-lifecycle-update-submitted.png" alt-text="Страница &quot;Управление приложениями&quot; с ожидающими запросами и состоянием приложения." lightbox="media/custom-app-lifecycle-update-submitted.png":::

Чтобы просмотреть и опубликовать обновление приложения, выполните следующее.

1. В левой области навигации Центра администрирования Teams перейдите в **раздел "Приложения Teams" "** > **Управление приложениями"**.
1. Щелкните имя приложения, чтобы перейти на страницу сведений о приложении, а затем выберите "Обновить **доступно** ", чтобы просмотреть сведения об обновлении.

   :::image type="content" source="media/custom-app-lifecycle-update-app.png" alt-text="Страница сведений о приложении." lightbox="media/custom-app-lifecycle-update-app.png":::

1. Когда все будет готово, нажмите **кнопку "Опубликовать** ", чтобы опубликовать обновление. Это заменяет существующее приложение, обновляет номер версии и изменяет состояние публикации на **"Опубликовано"**. Все политики разрешений приложений и политики установки приложений остаются обязательными для обновленного приложения.

    Если вы отклоняете обновление, более раннюю версию приложения остается опубликованной.

Помните следующее:

* После утверждения приложения любой пользователь может отправить в него обновление. Это означает, что другие разработчики, включая разработчиков, которые изначально отправили приложение, могут отправить обновление в приложение.
* Когда разработчик отправляет приложение и запрос находится в состоянии ожидания, только тот же разработчик может отправить обновление в приложение. Другие разработчики могут отправить обновление только после утверждения приложения.

Дополнительные сведения об использовании API Graph для обновления приложений см. [здесь](/graph/api/teamsapp-update?view=graph-rest-1.0&tabs=http&preserve-view=true).

## <a name="related-articles"></a>Статьи по теме

* [Публикация пользовательского приложения путем отправки пакета приложения](upload-custom-apps.md)
* [Управление приложениями в Центре администрирования Microsoft Teams](manage-apps.md)
* [Управление пользовательскими политиками и параметрами приложений в Teams](teams-custom-app-policies-and-settings.md)
* [Управление политиками разрешений для приложений в Teams](teams-app-permission-policies.md)
* [Управление политиками настройки приложений в Teams](teams-app-setup-policies.md)
* [Мониторинг и оповещения Teams](alerts/teams-admin-alerts.md)
* [Microsoft API Graph для приложений Teams](alerts/teams-admin-alerts.md)
