---
title: Разрешения и рекомендации для приложений Microsoft Teams
author: guptaashish
ms.author: guptaashish
manager: prkosh
ms.date: 06/27/2019
ms.topic: conceptual
audience: admin
ms.service: msteams
ms.collection:
- M365-voice
- M365-collaboration
search.appverid: MET150
ms.reviewer: rowille
description: Администратор узнать, какие данные и разрешения Microsoft Teams приложения запрашивают у своей организации.
f1.keywords:
- NOCSH
ms.localizationpriority: medium
appliesto:
- Microsoft Teams
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: a9ce3fccd8974bd7f8cba04d01bf16738772ea11
ms.sourcegitcommit: e38dc23e3968f55625e90c8883884045f80d22ee
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/16/2022
ms.locfileid: "66124184"
---
# <a name="microsoft-teams-apps-permissions-and-considerations"></a>Разрешения и рекомендации для приложений Microsoft Teams

Microsoft Teams приложения позволяют агрегировать одну или несколько возможностей в приложения, которые можно устанавливать, обновлять и удалить. К возможностям приложений относятся:

* Ботов
* Расширения для обмена сообщениями
* Вкладки
* Соединители

Как администратор вы управляете только приложениями. Однако в этой статье рассматриваются разрешения и рекомендации на уровне возможностей, так как возможности приложения влияют на необходимые разрешения и профили рисков приложения. Для использования приложения перечислены пользователями и управляются ИТ-специалистами с точки зрения политики.

Разрешения, перечисленные ниже в прописных буквах, `RECEIVE_MESSAGE` `REPLYTO_MESSAGE` например, предназначены только для иллюстрации и объяснения. Эти строки или разрешения не отображаются ни в Microsoft Teams документации [](/microsoftteams/platform/overview) разработчика, ни в разрешениях [для Microsoft Graph](/graph/permissions-reference).

## <a name="global-app-permissions-and-considerations"></a>Глобальные разрешения и рекомендации для приложений

### <a name="required-permissions"></a>Необходимые разрешения

Нет

### <a name="optional-permissions"></a>Необязательные разрешения

Нет

### <a name="considerations"></a>Замечания

* Приложение должно раскрывать, какие данные оно использует и для чего используются в условиях использования и связей политики конфиденциальности.

* [Согласие для конкретного ресурса](resource-specific-consent.md) предоставляет набор разрешений, которые приложения могут запрашивать, который отображается на экране установки приложения. Дополнительные сведения о разрешениях на согласие для конкретных ресурсов см. Graph [справочнике по разрешениям](/graph/permissions-reference#teams-resource-specific-consent-permissions).

* Приложениям также могут потребоваться разрешения, отличные от разрешений на согласие для конкретных ресурсов. После установки приложения приложение может запросить Graph разрешения через запрос согласия. Дополнительные сведения см. [в Azure AD процессах предоставления согласия для приложений](/azure/active-directory/develop/application-consent-experience). Вы можете настроить разрешения API и согласие в портал Azure. Дополнительные сведения см[. в Azure Active Directory предоставления согласия](/azure/active-directory/develop/consent-framework).

## <a name="bots-and-messaging-extensions"></a>Боты и расширения для обмена сообщениями

### <a name="required-permissions"></a>Необходимые разрешения

* RECEIVE_MESSAGE, REPLYTO_MESSAGE: бот может получать сообщения от пользователей и отвечать на них. <sup>1</sup>

* POST_MESSAGE_USER. После того как пользователь отправил сообщение боту, бот может отправлять прямые сообщения пользователя (также называемые упреждающим сообщением в  любое время).

* GET_CHANNEL_LIST: боты, добавленные в команды, могут получить список имен и идентификаторов каналов в команде.

### <a name="optional-permissions"></a>Необязательные разрешения

* IDENTITY: при использовании в канале боты приложения могут получить доступ к основным сведениям об удостоверениях участников команды (имя, фамилия, имя участника-пользователя [UPN], адрес электронной почты). При использовании в личном или групповом чате бот может получить доступ к тем же сведениям для этих пользователей.

* POST_MESSAGE_TEAM: позволяет ботам приложения в любое время отправлять участникам команды прямые (упреждающие) сообщения, даже если пользователь никогда не взаимодействовал с ботом.

* Следующие разрешения не являются явными, но подразумеваются RECEIVE_MESSAGE и REPLYTO_MESSAGE и области, в которых можно использовать боты, объявленные в манифесте:

  * RECEIVE_MESSAGE_PERSONAL, REPLYTO_MESSAGE_PERSONAL
  * RECEIVE_MESSAGE_GROUPCHAT, REPLYTO_MESSAGE_GROUPCHAT
  * RECEIVE_MESSAGE_TEAM, REPLYTO_MESSAGE_TEAM

* Следующие разрешения не являются явными, но подразумеваются RECEIVE_MESSAGE и REPLYTO_MESSAGE и области, в которых можно использовать боты, объявленные в манифесте:

  * RECEIVE_MESSAGE_PERSONAL, REPLYTO_MESSAGE_PERSONAL
  * RECEIVE_MESSAGE_GROUPCHAT, REPLYTO_MESSAGE_GROUPCHAT
  * RECEIVE_MESSAGE_TEAM, REPLYTO_MESSAGE_TEAM

* SEND_FILES, RECEIVE_FILES:<sup>2</sup> определяет, может ли бот отправлять и получать файлы в личном чате (пока не поддерживается для группового чата или каналов).

### <a name="considerations"></a>Замечания

* Боты имеют доступ только к командам, в которые они были добавлены, или к пользователям, которые их установили.

* Боты получают только сообщения, в которых они явно упоминаются пользователями. Эти данные покидают корпоративную сеть.

* Боты могут отвечать только на беседы, в которых они упоминаются.

* Когда пользователь взаимодействует с ботом, если бот хранит идентификатор пользователя, он может отправлять прямые сообщения пользователя в любое время.

* Теоретически сообщения бота могут содержать ссылки на фишинговые или вредоносные сайты. Однако боты могут быть заблокированы пользователем, администратором клиента или глобально корпорацией Майкрософт. [Проверка и проверка приложений](overview-of-app-validation.md) гарантируют, что все ложные приложения недоступны в Teams магазине.

* Бот может получать (и может хранить) основные сведения об удостоверениях для участников команды, к которым было добавлено приложение, или для отдельных пользователей в личных или групповых чатах. Чтобы получить дополнительные сведения об этих пользователях, бот должен потребовать от них войти в Azure Active Directory (Azure AD).

* Боты могут получать (и сохранять) список каналов в команде; эти данные покидают корпоративную сеть.

* По умолчанию боты не могут действовать от имени пользователя, но боты могут попросить пользователей войти в систему. Как только пользователь войдет в систему, у бота будет маркер доступа, с помощью которого он сможет выполнять дополнительные действия. Именно то, что это такое, зависит от бота и места входа пользователя: https://apps.dev.microsoft.com/ бот — это Azure AD, зарегистрированное в приложении, которое может иметь собственный набор разрешений.

* При отправке файла боту он покидает корпоративную сеть. Для отправки и получения файлов требуется утверждение пользователя для каждого файла.

* По умолчанию боты не могут действовать от имени пользователя, но боты могут попросить пользователей войти в систему. Как только пользователь войдет в систему, у бота будет маркер доступа, с помощью которого он сможет выполнять дополнительные действия. Именно то, что эти дополнительные элементы зависят от бота и где пользователь выполняет вход: бот — это приложение Azure AD, зарегистрированное на портале регистрации приложений и которое может иметь собственный набор разрешений.[](https://apps.dev.microsoft.com/?referrer=https:%2f%2fdocs.microsoft.com%2f#/appList)

* Боты уведомляются каждый раз, когда пользователи добавляются в команду или удаляются из нее.

* Боты не видят IP-адреса пользователей или другие сведения об источнике. Вся информация поступает от корпорации Майкрософт. (Есть одно исключение: если бот реализует собственный интерфейс входа, пользовательский интерфейс входа будет видеть IP-адреса пользователей и сведения о ссылке.)

* С другой стороны, расширения обмена сообщениями отображают IP-адреса пользователей и сведения о ссылке.

* Рекомендации по приложениям (и наш процесс проверки AppSource) требуют на усмотрение публиковать личные сообщения чата пользователям (с POST_MESSAGE_TEAM разрешения) в допустимых целях. В случае нарушения пользователи могут заблокировать бот, администраторы клиента могут заблокировать приложение, а корпорация Майкрософт может блокировать ботов централизованно при необходимости.

<sup>1</sup> . Некоторые боты отправляют только сообщения (POST_MESSAGE_USER). Они называются ботами только для уведомлений, но термин не указывает на то, что боту разрешено или запрещено делать. Это означает, что бот не хочет предоставлять беседу. Teams использует это поле для отключения функций пользовательского интерфейса, которые обычно будут включены; бот не ограничивается тем, что он может сделать, по сравнению с ботами, которые предоставляют взаимодействие.

<sup>2</sup> . Управляется логическим свойством supportsFiles `manifest.json` в объекте бота в файле приложения.

> [!NOTE]
> Если у бота есть собственный вход, при первом входе пользователя в систему есть еще один (другой) интерфейс согласия.
>
>В настоящее время разрешения Azure AD, связанные с любыми возможностями в приложении Teams (бот, вкладка, соединитель или расширение обмена сообщениями), полностью отделены от разрешений Teams, перечисленных здесь.

## <a name="tabs"></a>Вкладки

Вкладка — это веб-сайт, работающий внутри Teams.

### <a name="required-permissions"></a>Необходимые разрешения

SEND_AND_RECEIVE_WEB_DATA

### <a name="optional-permissions"></a>Необязательные разрешения

Нет (в настоящее время)

### <a name="considerations"></a>Замечания

* Профиль риска для вкладки практически идентичен тому же веб-сайту, который работает на вкладке браузера.

* Вкладка также получает контекст, в котором она выполняется, включая имя входа и имя участника-пользователя текущего пользователя, идентификатор объекта Azure AD для текущего пользователя, идентификатор группы Microsoft 365, в которой она находится (если это команда), идентификатор клиента и текущий языковой стандарт пользователя. Однако, чтобы сопоставить эти идентификаторы с данными пользователя, на вкладке потребуется выполнить вход пользователя в Azure AD.

## <a name="connectors"></a>Соединители

Соединитель отправляет сообщения в канал при возникновении событий во внешней системе.

### <a name="required-permissions"></a>Необходимые разрешения

POST_MESSAGE_CHANNEL

### <a name="optional-permissions"></a>Необязательные разрешения

REPLYTO_CONNECTOR_MESSAGE. Некоторые соединители поддерживают интерактивные сообщения, которые позволяют пользователям публиковать целевые ответы на сообщение соединителя, например путем добавления ответа на проблему GitHub или добавления даты в карточку Trello.

### <a name="considerations"></a>Замечания

* Система, которая публикует сообщения соединителя, не знает, кому он публикует или кто получает сообщения: сведения о получателе не раскрыты. (Корпорация Майкрософт является фактическим получателем, а не клиентом; Корпорация Майкрософт выполняет фактическую публикацию в канале.)

* При отправке сообщений соединителя в канал данные не покидают корпоративную сеть.

* Соединители, поддерживающие интерактивные сообщения (REPLYTO_CONNECTOR_MESSAGE разрешения), также не видят IP-адрес и сведения о ссылке; Эти сведения отправляются в корпорацию Майкрософт, а затем направляются в конечные точки HTTP, которые ранее были зарегистрированы в корпорации Майкрософт на портале соединителей.

* Каждый раз, когда соединитель настраивается для канала, создается уникальный URL-адрес для этого экземпляра соединителя. Если этот экземпляр соединителя удален, URL-адрес больше не может использоваться.

* Сообщения соединителя не могут содержать вложения файлов.

* URL-адрес экземпляра соединителя должен рассматриваться как секретный или конфиденциальный: любой пользователь, у которого есть этот URL-адрес, может опубликовать его, например адрес электронной почты. Таким образом, существует определенный риск нежелательной почты или ссылок на фишинговые или вредоносные сайты. Если это произойдет, владельцы команд могут удалить экземпляр соединителя.

* Если служба, отправляющая сообщения соединителя, будет скомпрометирована и начнет отправлять ссылки на спам, фишинг и вредоносные программы, администратор клиента может предотвратить создание новых экземпляров соединителя и корпорация Майкрософт может заблокировать их централизованно.

> [!NOTE]
> В настоящее время невозможно узнать, какие соединители поддерживают интерактивные сообщения (REPLYTO_CONNECTOR_MESSAGE разрешения).

## <a name="outgoing-webhooks"></a>Исходящие веб-перехватчики

_Исходящие веб-перехватчики_ создаются владельцами или членами команды. Они не являются возможностями Teams; эти сведения включаются для полноты.

### <a name="required-permissions"></a>Необходимые разрешения

RECEIVE_MESSAGE, REPLYTO_MESSAGE. Может получать сообщения от пользователей и отвечать на них.

### <a name="optional-permissions"></a>Необязательные разрешения

Нет

### <a name="considerations"></a>Замечания

* Исходящие веб-перехватчики похожи на ботов, но имеют меньше привилегий. Они должны быть явно упомянуты, как и боты.

* При регистрации исходящего веб-перехватчика создается секрет, который позволяет исходящим веб-перехватчикам проверять, является ли отправитель Microsoft Teams в отличие от злоумышленника- злоумышленника. Этот секрет должен оставаться секретом; Любой пользователь, у которого есть доступ к нему, может олицетворять Microsoft Teams. Если секрет скомпрометирован, исходящий веб-перехватчик можно удалить и повторно создать, и будет создан новый секрет.

* Хотя можно создать исходящий веб-перехватчик, который не проверяет секрет, мы рекомендуем использовать его.

* Кроме получения сообщений и ответа на них, исходящие веб-перехватчики не могут выполнять много действий: они не могут заранее отправлять сообщения, не могут отправлять и получать файлы, они не могут выполнять другие действия, кроме получения сообщений и ответа на них.
