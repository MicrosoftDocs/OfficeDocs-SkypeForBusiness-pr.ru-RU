---
title: Разрешения и рекомендации для приложений Microsoft Teams
author: rmw2890
ms.author: rowille
manager: serdars
ms.date: 06/27/2019
ms.topic: conceptual
audience: admin
ms.service: msteams
ms.collection:
- M365-voice
- M365-collaboration
search.appverid: MET150
ms.reviewer: rowille
description: Администратор может узнать, какие данные и разрешения запрашиваются приложениями Microsoft Teams у их организации.
f1.keywords:
- NOCSH
localization_priority: Normal
appliesto:
- Microsoft Teams
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: 295bee65120e3c349efe1aa5fbc1e7b42c8da87a
ms.sourcegitcommit: 1db39fde090809d9abc6d7346dda55814d88993a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/23/2020
ms.locfileid: "48739387"
---
# <a name="microsoft-teams-apps-permissions-and-considerations"></a>Разрешения и рекомендации для приложений Microsoft Teams

Приложения Microsoft Teams позволяют агрегировать одну или несколько возможностей в _пакет приложения_, который можно установить, обновить и удалить. К этим возможностям относятся:

- боты;
- расширения для обмена сообщениями;
- Вкладки
- Соединители

Получение согласия пользователей на приложения и управление этими приложениями ИТ-отделом осуществляется в рамках политики. Однако в большинстве части разрешения и профиль рисков приложения определяются разрешениями и профилями рисков, которые содержит приложение. Таким образом, основное внимание в этой статье уделяется разрешениям и рекомендациями для уровня возможностей.

Разрешения, указанные ниже прописными буквами, например RECEIVE_MESSAGE и REPLYTO_MESSAGE, не указаны в [документации для разработчиков Microsoft Teams](https://aka.ms/teamsdevdocs) или [разрешениях для Microsoft Graph](https://developer.microsoft.com/graph/docs/concepts/permissions_reference). Это просто описательные условные обозначения, используемые в рамках данной статьи.


| Название   | Описание    |
|-----------|------------|
| ![Значок, изображающий точку принятия решения](media/audio_conferencing_image7.png) <br/>Точка принятия решений|<ul><li>Используйте таблицы ниже в качестве руководства, чтобы понять, какие разрешения запрашивают приложения.</li></ul> |
| ![Значок, изображающий следующее действие](media/audio_conferencing_image9.png)<br/>Следующее действие|<ul><li>Изумите приложение или службу, чтобы решить, хотите ли вы разрешить доступ к ним в организации. Например, боты отправляют и получают сообщения от пользователей и (за исключением корпоративных) настраиваемые боты находятся за пределами границы соответствия требованиям. Таким образом, все приложения, которые включают бота, требуются эти разрешения и имеет как минимум этот профиль риска. </li></ul>|

## <a name="global-app-permissions-and-considerations"></a>Глобальные разрешения и соображения по приложениям

### <a name="required-permissions"></a>Необходимые разрешения

Нет

### <a name="optional-permissions"></a>Необязательные разрешения

Нет

### <a name="considerations"></a>Рекомендации

- Приложение должно сообщать, какие данные он использует и для чего они используются в условиях использования и связей политики конфиденциальности.

- [Разрешение для конкретного](resource-specific-consent.md) ресурса предоставляет набор разрешений, которые могут запрашиваться приложениями, который отображается на экране установки приложения. Дополнительные данные о разрешениях для конкретного ресурса см. в справке по разрешениям [Graph.](https://docs.microsoft.com/graph/permissions-reference#teams-resource-specific-consent-permissions)

- Кроме того, приложениям могут потребоваться разрешения, кроме разрешений на доступ к ресурсам. После установки приложения приложение может запрашивать разрешения Graph через запрос на согласие. Дополнительные узнать см. в этом видеоролике о разрешениях приложений [Azure AD.](https://docs.microsoft.com/azure/active-directory/develop/application-consent-experience) Вы можете настроить разрешения API и получить согласие на портале Azure. Дополнительные узнать см. в структуре согласия [Azure Active Directory.](https://docs.microsoft.com/azure/active-directory/develop/consent-framework)

## <a name="bots-and-messaging-extensions"></a>Боты и расширения для обмена сообщениями

### <a name="required-permissions"></a>Необходимые разрешения

- RECEIVE_MESSAGE, REPLYTO_MESSAGE. Бот может получать сообщения от пользователей и отвечать на них. <sup>1</sup>

- POST_MESSAGE_USER. После того как пользователь отправил сообщение боту, он может в любое  время отправлять ему прямые сообщения (также называемые упреждающие сообщения).

- GET_CHANNEL_LIST. Боты, добавленные в команды, могут получить список имен и ИД каналов в команде.

### <a name="optional-permissions"></a>Необязательные разрешения

- IDENTITY. Когда приложение используется в канале, боты приложения могут получать доступ к основным сведениям об удостоверениях участников группы (имя, фамилия, имя-имя пользователя [UPN], адрес электронной почты); при его использования в личном или групповом чате бот может получить доступ к той же информации для этих пользователей.

- POST_MESSAGE_TEAM. Позволяет ботам приложения в любое время отправлять прямые (упреждающие) сообщения членам группы, даже если пользователь никогда не общался с ботом.

- Следующие разрешения не являются явными, но подразумеваются под RECEIVE_MESSAGE и REPLYTO_MESSAGE, а также области, в которых можно использовать боты, объявленные в манифесте:
 
    - RECEIVE_MESSAGE_PERSONAL, REPLYTO_MESSAGE_PERSONAL
    - RECEIVE_MESSAGE_GROUPCHAT, REPLYTO_MESSAGE_GROUPCHAT
    - RECEIVE_MESSAGE_TEAM, REPLYTO_MESSAGE_TEAM

- SEND_FILES, RECEIVE_FILES. <sup>2.</sup> Управляет тем, может ли бот отправлять и получать файлы в личном чате (пока не поддерживается для групповых чатов или каналов).

### <a name="considerations"></a>Рекомендации

- Боты имеют доступ только к командам, в которые они были добавлены, или к пользователям, которые их установили.

- Боты получают только сообщения, в которых они явно упоминаются пользователями. Эти данные покинет корпоративную сеть.

- Боты могут отвечать только на беседы, в которых они упомянуты.

- После того как пользователь побеседует с ботом, он сможет отправлять прямые сообщения в любое время.

- Обычно сообщения ботов могут содержать ссылки на фишинговые или вредоносные сайты, но они могут быть заблокированы пользователем, администратором клиента или глобально корпорацией Майкрософт.

- Бот может получать (и может хранить) очень основные сведения об удостоверениях участников группы, в которые добавлено приложение, а также отдельных пользователей в личных или групповых чатах. Чтобы получить дополнительные сведения об этих пользователях, бот должен потребовать от них войти в Azure Active Directory (Azure AD).

- Боты могут извлекать (и хранить) список каналов в группе; эти данные покинет корпоративную сеть.

- При отправлении файла боту он покидает корпоративную сеть. Для отправки и получения файлов требуется утверждение пользователями для каждого файла. 

- По умолчанию боты не могут действовать от имени пользователя, но могут попросить их войти в учетную записи. Как только пользователь будет в сети, у бота появится маркер доступа, с помощью которого он может делать дополнительные действия. То, что еще нужно, зависит от бота и места, в котором он работает: бот — это зарегистрированное приложение Azure AD, в котором он может иметь собственный https://apps.dev.microsoft.com/ набор разрешений.

- Боты информируют о добавлении пользователей в команду или их удалении из нее.

- Боты не видят IP-адреса пользователей или другие сведения о ссылке. Все сведения поступает от корпорации Майкрософт. (Есть одно исключение: если бот реализует собственный интерфейс для выполнения входов, в пользовательском интерфейсе для выполнения входов будут отсылаться IP-адреса пользователей и сведения о ссылке.)

- Расширения для сообщений, с другой стороны, видят IP-адреса пользователей и сведения о ссылке.

- Рекомендации по приложению (и процесс проверки в AppSource) требуют дискреционного действия при публикации личных сообщений чата пользователям (с POST_MESSAGE_TEAM разрешения) в допустимых целях. В случае нарушения пользователи могут заблокировать бота, администраторы клиента могут заблокировать приложение, а Корпорация Майкрософт может заблокировать боты централизованно, если это необходимо.

<sup>1</sup> Некоторые боты отправляют только сообщения (POST_MESSAGE_USER). Они называются ботами только для уведомлений, но в термине не говорится о разрешенных или не разрешенных действиях ботов. Это означает, что он не хочет показать беседу. Teams использует это поле для отключения функций пользовательского интерфейса, которые обычно включены; в отличие от ботов, которые делают беседу, возможность бота не ограничена тем, что им разрешено делать.

<sup>2.</sup> Определяется свойством boolean supportsFiles объекта-бота manifest.jsв файле приложения.

> [!NOTE]
> Если у бота есть собственный вход, второй (другой) интерфейс согласия при первом входе пользователя.
>
>В настоящее время разрешения Azure AD, связанные с любыми возможностями приложения Teams (бота, вкладки, соединитела или расширения для обмена сообщениями), полностью отделены от указанных здесь разрешений Teams.

## <a name="tabs"></a>Вкладки

Вкладка — это веб-сайт, работающий в Teams.

### <a name="required-permissions"></a>Необходимые разрешения

SEND_AND_RECEIVE_WEB_DATA

### <a name="optional-permissions"></a>Необязательные разрешения

Нет (сейчас)

### <a name="considerations"></a>Рекомендации

- Профиль риска для вкладки практически идентичен тому же веб-сайту, который работает на вкладке браузера. 

- Вкладка также возвращает контекст, в котором она работает, включая имя для регистрации и имя пользователя текущего пользователя, ИД объекта Azure AD для текущего пользователя, ИД группы Microsoft 365, в которой она находится (если это группа), ИД клиента и текущий язык пользователя. Но чтобы эти ID-карты соедились с данными пользователя, на вкладке нужно будет сделать так, чтобы он войди в Azure AD.

## <a name="connectors"></a>Соединители

Соединител публикует сообщения в канале при событиях внешней системы.

### <a name="required-permissions"></a>Необходимые разрешения

POST_MESSAGE_CHANNEL

### <a name="optional-permissions"></a>Необязательные разрешения

REPLYTO_CONNECTOR_MESSAGE. Некоторые соединитетели поддерживают сообщения с действиями, позволяющие пользователям отправлять целевые ответы на них, например, добавляя ответы на проблемы GitHub или добавляя дату на карточку Trello.

### <a name="considerations"></a>Рекомендации

- Система, которая публикует сообщения соединителя, не знает, для кого она публикуется или кто получает сообщения: никакие сведения о получателе не будут раскрыты. (Корпорация Майкрософт — фактический получатель, а не клиент; Корпорация Майкрософт делает фактическую запись для канала.)

- При публикации сообщений соединитела в канале никакие данные не покинет корпоративную сеть.

- Соединители, которые поддерживают сообщения с действиями (REPLYTO_CONNECTOR_MESSAGE разрешения), также не могут видеть IP-адрес и сведения о ссылке. эти сведения отправляются в корпорацию Майкрософт, а затем направляются в конечные точки HTTP, которые ранее были зарегистрированы в Корпорации Майкрософт на портале Connectors.

- При каждой настройке соединителя для канала создается уникальный URL-адрес для этого экземпляра. Если этот экземпляр соединителя будет удален, URL-адрес больше не будет использоваться.

- Сообщения соединителения не могут содержать вложенные файлы.

- URL-адрес экземпляра соединителя следует рассматривать как секретный или конфиденциальный: любой, у кого есть этот URL-адрес, может опубликовать его, например адрес электронной почты. Поэтому существует риск спама или ссылок на фишинговые и вредоносные сайты. Если это произойдет, владельцы команд смогут удалить экземпляр соединитела.

- Если служба, которая отправляет сообщения соединителя, была скомпрометирована и начнет отправлять ссылки на спам, фишинг или вредоносные программы, администратор клиента может запретить создавать новые экземпляры соединителя и корпорация Майкрософт может заблокировать их централизованно.

> [!NOTE]
> В настоящее время невозможно узнать, какие соединители поддерживают сообщения с действиями (разрешение REPLYTO_CONNECTOR_MESSAGE почты).

## <a name="outgoing-webhooks"></a>Исходяющие веб-ooks

*Исходяющие веб-сайты* создаются на лету владельцами или членами команды. Они не являются возможностями приложений Teams; эти сведения включаются в сведения о полноте.

### <a name="required-permissions"></a>Необходимые разрешения

RECEIVE_MESSAGE, REPLYTO_MESSAGE. Может получать сообщения от пользователей и отвечать на них.

### <a name="optional-permissions"></a>Необязательные разрешения

Нет

### <a name="considerations"></a>Рекомендации

- Исходяющие веб-сайты похожи на боты, но имеют меньше прав. Их следует упоминать явным образом, как боты.

- При регистрации исходяющего веб-приложения создается секрет, который позволяет исходяющему веб-сайту проверять, является ли отправитель Microsoft Teams, а не вредоносным злоумышленником. Эта секретная должна оставаться секретной; Любой, у кого есть доступ к этой службе, может получить себя за Microsoft Teams. Если секрет скомпрометирован, исходяходящий веб-сайт можно удалить и повторно создать, и будет создан новый секрет.

- Хотя можно создать исходяходящий веб-сайт, который не проверяет секрет, мы рекомендуем вам это сделать.

- Кроме получения сообщений и ответов на них, исходящие веб-службы не могут заранее отправлять сообщения, не могут отправлять и получать файлы, они не могут ничего делать, кроме получения сообщений и ответа на них.
