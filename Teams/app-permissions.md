---
title: Разрешения и рекомендации для приложений Microsoft Teams
author: Lester-Hewett
ms.author: lehewe
manager: serdars
ms.date: 08/20/2018
ms.topic: article
ms.service: msteams
search.appverid: MET150
ms.reviewer: lehewe
description: Сведения о том, какие данные и разрешения нужны приложениям от вашей организации.
localization_priority: Normal
appliesto:
- Microsoft Teams
ms.openlocfilehash: eb8a6b6785e3cc4bcbf65bceeb51bf650b63a830
ms.sourcegitcommit: 940cb253923e3537cb7fb4d7ce875ed9bfbb72db
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/07/2018
ms.locfileid: "23883068"
---
# <a name="microsoft-teams-apps-permissions-and-considerations"></a>Разрешения и рекомендации для приложений Microsoft Teams

Приложения Microsoft Teams позволяют агрегировать одну или несколько возможностей в _пакет приложения_, который можно установить, обновить и удалить. К этим возможностям относятся:

-   боты;
-   расширения для обмена сообщениями;
-   Вкладки
-   Соединители

Получение согласия пользователей на приложения и управление этими приложениями ИТ-отделом осуществляется в рамках политики. Однако профиль риска и разрешения для приложения, как правило, определяются разрешениями и профилями риска содержащихся в нем возможностей. Таким образом, основное внимание в этой статье уделяется разрешениям и рекомендациями для уровня возможностей.

Разрешения, указанные ниже прописными буквами, например RECEIVE_MESSAGE и REPLYTO_MESSAGE, не указаны в [документации для разработчиков Microsoft Teams](https://aka.ms/teamsdevdocs) или [разрешениях для Microsoft Graph](https://developer.microsoft.com/graph/docs/concepts/permissions_reference). Это просто описательные условные обозначения, используемые в рамках данной статьи.


|    |     |
|-----------|------------|
| ![](media/audio_conferencing_image7.png) <br/>Точка принятия решений|<ul><li>Используйте приведенные ниже таблицы, чтобы понять, какие разрешения нужны рассматриваемым вами приложениям.</li></ul> |
| ![](media/audio_conferencing_image9.png)<br/>Дальнейшее действие|<ul><li>Изучите приложение или службу, чтобы решить, хотите ли вы разрешить к ним доступ в своей организации. Например, боты отправляют и принимают сообщения пользователей, и, за исключением корпоративных бизнес-ботов, располагаются за пределами границы соответствия. Таим образом, любое приложение с ботом как минимум нуждается в этих разрешениях и имеет этот профиль риска. </li></ul>|

## <a name="global-app-permissions-and-considerations"></a>Глобальные разрешения и рекомендации для приложений

<table>
  <tr>
    <th width="25%">Обязательные разрешения</th>
    <th width="25%">Дополнительные разрешения</th>
    <th width="50%">Рекомендации</th>
  </tr>
  <tr>
    <td valign="top">Нет</td>
    <td valign="top">Нет</td>
    <td valign="top">Приложение должно раскрывать, какие данные оно использует и для чего, в ссылках на свои условия использования и политику конфиденциальности.</td>
  </tr>
</table>

## <a name="bots-and-messaging-extensions"></a>Боты и расширения для обмена сообщениями

<table>
 <thead>
  <tr>
    <th width="0.5%"></th>
    <th width="24.5%">Обязательные разрешения</th>
    <th width="25%">Дополнительные разрешения</th>
    <th width="50%">Рекомендации</th>
  </tr>
</thead>
<tbody>
   <tr>
    <td valign="top" colspan="2"><ul><li>   RECEIVE_MESSAGE, REPLYTO_MESSAGE. Бот может получать сообщения от пользователей и отвечать на них <sup>1</sup>.</li><li>POST_MESSAGE_USER. После того как пользователь отправляет сообщение боту, последний может отправлять пользователю сообщения напрямую (которые также называются _упреждающими_) в любое время.</li><li>GET_CHANNEL_LIST. Боты, добавленные в команды, могут получить список имен и идентификаторов каналов в команде.</li></ul></td>
    <td valign="top"><ul><li>IDENTITY. При использовании в канале боты приложения могут получить доступ к базовым сведениям об удостоверениях для членов команды (имя, фамилия, имя субъекта-пользователя, адрес электронной почты); при использовании в личном или групповом чате бот может получить доступ к тем же сведениям для этих пользователей.</li><li> POST_MESSAGE_TEAM. Позволяет ботам приложения отправлять прямые (упреждающие) сообщения любому члену команды в любое время, даже если до этого пользователь никогда не общался с ботом.</li><li>Ниже приведены не явные разрешения, а подразумеваемые RECEIVE_MESSAGE и REPLYTO_MESSAGE и областями, в которых эти боты могут использоваться, как объявлено в манифесте: <ul><li>RECEIVE_MESSAGE_PERSONAL, REPLYTO_MESSAGE_PERSONAL</li><li>RECEIVE_MESSAGE_GROUPCHAT, REPLYTO_MESSAGE_GROUPCHAT <sup>2</sup> </li><li>RECEIVE_MESSAGE_TEAM, REPLYTO_MESSAGE_TEAM</li></ul><li>SEND_FILES, RECEIVE_FILES <sup>3</sup>. Управляет тем, может ли бот отправлять и принимать файлы в личном чате (пока не поддерживается для группового чата или каналов).</li></ul></td>
    <td valign="top"><ul><li>Боты имеют доступ только к командам, в которые они были добавлены, или к пользователям, которые их установили.</li><li>Боты получают только те сообщения, в которых пользователи упоминают их явным образом. Эти данные покидают корпоративную сеть.</li><li>    Боты могут отвечать на беседы, в которых были упомянуты.</li><li>Если после того, как пользователь побеседовал с ботом, последний сохраняет идентификатор этого пользователя, он может отправлять ему прямые сообщения в любое время. </li><li>Сообщения ботов теоретически могут содержать ссылки на поддельные или вредоносные сайты, однако боты могут быть заблокированы пользователем, администратором клиента или на глобальном уровне корпорацией Майкрософт. </li><li>Бот может получать (и сохранять) самую базовую идентификационную информацию о членах команды, куда было добавлено приложение, или об отдельных пользователях в личных или групповых чатах. Чтобы получить дополнительные сведения об этих пользователях, боту нужно попросить их войти в Azure Active Directory (Azure AD). </li><li>Боты могут получать (и сохранять) список каналов в команде; эти данные покидают корпоративную сеть. </li><li>При отправке боту файл покидает корпоративную сеть. При отправке и получении файлов пользователю нужно давать свое разрешение для каждого файла. </li><li>По умолчанию боты не могут действовать от имени пользователя, однако они могут попросить пользователя войти в систему, после чего бот получает маркер доступа, с которым может выполнять дополнительные действия. Какие именно — зависит от самого бота и того, куда вошел пользователь: бот представляет собой приложение Azure AD, зарегистрированное в <a href="https://apps.dev.microsoft.com/">https://apps.dev.microsoft.com/</a>, и может иметь свой собственный набор разрешений.</li><li>Боты получают информацию о пользователях, добавляемых в команду и удаляемых из нее.</li><li>Боты не видят IP-адреса пользователей или другие сведения об источнике. Все информация поступает от Майкрософт. (Существует одно исключение: если бот реализует свою собственную процедуру входа, интерфейс входа будет видеть IP-адреса пользователей и сведения об источнике.)</li><li>С другой стороны, расширения для обмена сообщениями видят IP-адреса пользователей и сведения об источнике.</li><li>Рекомендации для приложений (и наша процедура анализа AppSource) предусматривают осмотрительность при публикации сообщений личного чата для пользователей (посредством разрешения POST_MESSAGE_TEAM) по допустимым основаниям. При нарушении пользователи могут заблокировать бот, администраторы клиента могут заблокировать приложение, а корпорация Майкрософт может при необходимости блокировать боты централизованно.</li></ul></td>
</tr>
</tbody>
<tfoot>
<tr><td align="right"><sup>1</sup></td><td colspan="3">Некоторые боты только отправляют сообщения (POST_MESSAGE_USER). Они называются уведомительными, однако этот термин не раскрывает, что именно разрешено и запрещено делать боту, он показывает, что бот не вступает в беседу. Teams использует это поле для отключения функциональности пользовательского интерфейса, которая в общем случае включена. Этот бот не ограничен в своих действиях по сравнению с ботами, которые вступают в беседы.</td></tr>
<tr><td align="right"><sup>2</sup></td><td colspan="3">Сейчас находится на этапе предварительной версии Developer Preview.</td></tr>
<tr><td align="right"><sup>3</sup></td><td colspan="3">Сейчас находится на этапе предварительной версии Developer Preview. Управляется логическим свойством <code>supportsFiles</code> в объекте бота в файле manifest.json для приложения.</td>
</tr>
</tfoot>
</table>

> [!Note]
> <ul><li>Если бот имеет собственный механизм входа, при первом входе пользователя используется иная процедура получения согласия.</li><li>Сейчас разрешения Azure AD, связанные с любыми возможностями внутри приложения Teams (бот, вкладка, соединитель или расширение для обмена сообщениями), полностью отделены от указанных здесь разрешений Teams.</li></ul>


## <a name="tabs"></a>Вкладки

Вкладка — это веб-сайт, запущенный внутри Teams.

<table>
  <tr>
    <th width="25%">Обязательные разрешения</th>
    <th width="25%">Дополнительные разрешения</th>
    <th width="50%">Рекомендации</th>
  </tr>
  <tr>
    <td valign="top">SEND_AND_RECEIVE_WEB_DATA</td>
    <td valign="top">Нет (сейчас).</td>
    <td valign="top"><ul><li>Профиль риска для вкладки почти идентичен тому же веб-сайту, запущенному на вкладке браузера. </li><li>Вкладка также получает контекст, в котором она выполняется, включая имя входа и имя субъекта-пользователя для текущего пользователя, идентификатор объекта Azure AD для текущего пользователя, идентификатор группы Office 365 (команды), в которой она находится, идентификатор клиента, а также текущий язык пользователя. Однако для сопоставления этих идентификаторов с информацией о пользователе вкладке нужно заставить пользователя войти в Azure AD.</li></ul></td>
  </tr>
  </table>

## <a name="connectors"></a>Соединители

Соединитель публикует сообщения в канале, когда возникают события во внешней системе.

  <table>
  <tr>
    <th width="25%">Обязательные разрешения</th>
    <th width="25%">Дополнительные разрешения</th>
    <th width="50%">Рекомендации</th>
  </tr>
  <tr>
    <td valign="top">POST_MESSAGE_CHANNEL</td>
    <td valign="top">REPLYTO_CONNECTOR_MESSAGE. Определенные соединители поддерживают _сообщения с действиями_, которые позволяют пользователям публиковать адресные ответы на сообщения соединителя, например, добавляя ответ на вопрос GitHub или добавляя дату в карточку Trello.</td>
    <td valign="top"><ul><li>Система, публикующая сообщения соединителя, не знает, для кого это делается и кто получает сообщения: никакая информация о получателе не раскрывается. (Фактическим получателем является корпорация Майкрософт, а не клиент; фактическую публикацию в канале также осуществляет Майкрософт.)</li><li>При публикации сообщений соединителя в канале никакие данные не покидают корпоративную сеть.</li><li>Соединители, поддерживающие сообщения с действиями (разрешение REPLYTO_CONNECTOR_MESSAGE), также не видят IP-адрес и сведения об источнике. Эта информация отправляет в Майкрософт и затем направляется на конечные точки HTTP, зарегистрированные ранее в Майкрософт на портале соединителей.</li><li>Каждый раз, когда для канала настраивается соединитель, для этого экземпляра соединителя создается уникальный URL-адрес. После удаления этого экземпляра соединителя данный URL-адрес использовать невозможно.</li><li>Сообщения соединителя не могут содержать вложенные файлы.</li><li>URL-адрес экземпляра соединителя следует хранить в тайне, так как, располагая этим URL-адресом, любой человек может отправлять по нему информацию, как по адресу электронной почты. Это создает риск получения нежелательной почты или ссылок на поддельные или вредоносные сайты. Если это произошло, владельцы команды могут удалить этот экземпляр соединителя.</li><li>Если служба, отправляющая сообщения соединителя, была скомпрометирована и начала отправлять нежелательную почту или ссылки на поддельные или вредоносные сайты, администратор клиента может запретить создание экземпляров соединителя, а Майкрософт может централизованно заблокировать их.</li></ul></td>
  </tr>
</table>

> [!Note]
> Сейчас невозможно узнать, какие соединители поддерживают сообщения с действиями (разрешение REPLYTO_CONNECTOR_MESSAGE).


## <a name="outgoing-webhooks"></a>Исходящие веб-перехватчики

_Исходящие веб-перехватчики_ оперативно создаются владельцами или членами команды, если для клиента разрешена загрузка неопубликованного приложения. Они не являются компонентами приложений Teams, эта информация включена для полноты.

<table>
  <tr>
    <th width="25%">Обязательные разрешения</th>
    <th width="25%">Дополнительные разрешения</th>
    <th width="50%">Рекомендации</th>
  </tr>
    <tr>
    <td valign="top">RECEIVE_MESSAGE, REPLYTO_MESSAGE. Может получать сообщения от пользователей и отвечать на них.</td>
    <td valign="top">Нет</td>
    <td valign="top"><ul><li>Исходящие веб-перехватчики похожи на боты, однако имеют меньше привилегий. Как и боты, они требуют явное упоминание.</li><li>При регистрации исходящего веб-перехватчика создается _секрет_, позволяющий исходящему веб-перехватчику убедиться, что отправителем является Microsoft Teams, а не злоумышленник. Этот секрет следует держать в тайне, так как все имеющие к нему доступ могут олицетворять Microsoft Teams. Если секрет скомпрометирован, исходящий веб-перехватчик можно удалить и создать заново, чтобы получить новый секрет.</li><li>Хотя можно создать исходящий веб-перехватчик, не проверяющий секрет, мы не рекомендуем это делать.</li><li>Кроме получения сообщений и ответа на них, возможности исходящих веб-перехватчиков ограничены: они не могут отправлять упреждающие сообщения, отправлять или принимать файлы, а также делать все то, что могут боты, за исключением получения сообщений и ответа на них.</li></ul></td>
  </tr>
</table>