---
title: Разрешения и рекомендации для приложений Microsoft Teams
author: rmw2890
ms.author: rowille
manager: serdars
ms.date: 06/27/2019
ms.topic: conceptual
audience: admin
ms.service: msteams
ms.collection:
- M365-voice
- M365-collaboration
search.appverid: MET150
ms.reviewer: rowille
description: Администратор может узнать, какие данные и разрешения приложения Microsoft Teams запрашиваются из своей организации.
f1.keywords:
- NOCSH
localization_priority: Normal
appliesto:
- Microsoft Teams
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: f19cbbba6df7c43c69af35893466344e8df1d17d
ms.sourcegitcommit: 296aeac481f901eb9d52b4f12a8c037afc49fa77
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2020
ms.locfileid: "44256484"
---
# <a name="microsoft-teams-apps-permissions-and-considerations"></a>Разрешения и рекомендации для приложений Microsoft Teams

Приложения Microsoft Teams позволяют агрегировать одну или несколько возможностей в _пакет приложения_, который можно установить, обновить и удалить. К этим возможностям относятся:

- боты;
- расширения для обмена сообщениями;
- Вкладки
- Соединители

Получение согласия пользователей на приложения и управление этими приложениями ИТ-отделом осуществляется в рамках политики. Тем не менее, в большинстве случаев разрешения и профиль риска для приложения определяются профилями разрешений и риска для возможностей, содержащихся в приложении. Таким образом, основное внимание в этой статье уделяется разрешениям и рекомендациями для уровня возможностей.

Разрешения, указанные ниже прописными буквами, например RECEIVE_MESSAGE и REPLYTO_MESSAGE, не указаны в [документации для разработчиков Microsoft Teams](https://aka.ms/teamsdevdocs) или [разрешениях для Microsoft Graph](https://developer.microsoft.com/graph/docs/concepts/permissions_reference). Это просто описательные условные обозначения, используемые в рамках данной статьи.


|    |     |
|-----------|------------|
| ![Значок, изображающий точку принятия решения](media/audio_conferencing_image7.png) <br/>Точка принятия решений|<ul><li>Воспользуйтесь приведенными ниже таблицами, чтобы узнать, какие разрешения запрашиваются для приложений, которые вы изучаете.</li></ul> |
| ![Значок, изображающий следующее действие](media/audio_conferencing_image9.png)<br/>Следующее действие|<ul><li>Изучите свое приложение или службу, чтобы решить, нужно ли разрешить доступ к ней в Организации. Например, ботов отправлять и получать сообщения от пользователей и (за исключением настраиваемой корпоративной ботов) они находятся за пределами границы соответствия требованиям. Таким образом, любое приложение, включающее Bot, должно иметь такие разрешения и имеет этот профиль риска как минимум. </li></ul>|

## <a name="global-app-permissions-and-considerations"></a>Глобальные разрешения и рекомендации для приложений

### <a name="required-permissions"></a>Необходимые разрешения

Нет

### <a name="optional-permissions"></a>Дополнительные разрешения

Нет

### <a name="considerations"></a>Особенности

- Приложение должно раскрывать используемые данные и данные, для которых они используются, в соответствии с условиями использования и ссылками на правила конфиденциальности.

- [Согласие](resource-specific-consent.md) на доступ к ресурсам предоставляет набор разрешений, которые могут запрашивать приложения, которые отображаются на экране установки приложения. Дополнительные сведения о разрешениях на разрешение для конкретных ресурсов можно найти в статье [разрешения на доступ к графике](https://docs.microsoft.com/graph/permissions-reference).

- Приложениям также могут потребоваться разрешения, отличные от разрешений согласия для определенного ресурса. После установки приложения приложение может запросить разрешения графа с помощью запроса согласия. Дополнительные сведения можно найти в разделе [Общие сведения о специальных возможностях приложения Azure AD](https://docs.microsoft.com/azure/active-directory/develop/application-consent-experience). Вы можете настроить разрешения и согласие на доступ к API на портале Azure. Дополнительные сведения можно найти в разделе [инфраструктура согласия Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/consent-framework).

## <a name="bots-and-messaging-extensions"></a>Расширения ботов и обмена сообщениями

### <a name="required-permissions"></a>Необходимые разрешения

- RECEIVE_MESSAGE REPLYTO_MESSAGE. Bot может получать сообщения от пользователей и отвечать на них. <sup>1</sup>

- POST_MESSAGE_USER. После того как пользователь отправил сообщение на Bot, Bot может отправлять пользователям прямые сообщения (также называемые *активными сообщениями* в любое время).

- GET_CHANNEL_LIST. Ботов, добавленные в Teams, могут получить список имен и идентификаторов каналов в команде.

### <a name="optional-permissions"></a>Дополнительные разрешения

- Идентифицирующи. Когда она используется в канале, ботов приложения может получать доступ к основным сведениям о членах группы (имя, фамилию, имя участника-пользователя [UPN], адрес электронной почты); когда он используется в личном или группом чате, Bot может получить доступ к одной и той же информации для этих пользователей.

- POST_MESSAGE_TEAM. Позволяет ботов приложения отправлять прямые (упреждающее) сообщения любому участнику группы в любое время, даже если пользователь никогда не говорил на Bot.

- Следующие разрешения не являются явными, но подразумеваемые RECEIVE_MESSAGE и REPLYTO_MESSAGE и областями, в которых можно использовать ботов, объявленные в манифесте:
 
    - RECEIVE_MESSAGE_PERSONAL REPLYTO_MESSAGE_PERSONAL
    - RECEIVE_MESSAGE_GROUPCHAT REPLYTO_MESSAGE_GROUPCHAT
    - RECEIVE_MESSAGE_TEAM REPLYTO_MESSAGE_TEAM

- SEND_FILES RECEIVE_FILES. <sup>2</sup> . определяет, может ли Bot отправлять и получать файлы в личном чате (но не поддерживается для группового чата или каналов).

### <a name="considerations"></a>Особенности

- Ботов имеет доступ только к тем группам, в которых они были добавлены, или на пользователей, которые установили их.

- Ботов получать только те сообщения, в которых они явно упоминаются пользователями. Эти данные оставляют корпоративную сеть.

- Ботов может отвечать только на беседы, в которых они упоминаются.

- После того как пользователь применяет объект Bot, если он хранит идентификатор пользователя, он может в любое время отправить ему прямые сообщения.

- Теоретически возможно, что сообщения от начала содержат ссылки на фишинговые и вредоносные сайты, но ботов может быть заблокирована пользователем, администратором клиента или глобально корпорацией Майкрософт.

- Bot может извлекать (и может хранить) очень простые данные идентификации для участников группы, к которым было добавлено приложение, или для отдельных пользователей в личных или групповых чатах. Чтобы получить дополнительные сведения об этих пользователях, для роботов необходимо войти в Azure Active Directory (Azure AD).

- Ботов может извлекать (и может сохранять) список каналов в команде; Эти данные оставляют корпоративную сеть.

- При отправке файла на Bot файл выходит из корпоративной сети. Для отправки и получения файлов требуется утверждение пользователей для каждого файла. 

- По умолчанию ботов не имеет возможности действовать от имени пользователя, но ботов может попросить пользователей выполнить вход. После того как пользователь войдет в систему, у Bot будет маркер доступа, с помощью которого можно делать дополнительные действия. Что эти дополнительные возможности зависят от роботов и от того, где пользователь входит в систему: Bot — это приложение Azure AD, которое зарегистрировано https://apps.dev.microsoft.com/ и может иметь собственный набор разрешений.

- Ботов уведомляются каждый раз, когда пользователи добавляются в группу или удаляются из нее.

- В ботов не отображаются IP-адреса пользователей и другие сведения об источнике. Все данные поступают от корпорации Майкрософт. (Существует одно исключение: Если в Bot реализован собственный вход, Пользовательский интерфейс входа будет просматривать IP-адреса пользователей и сведения о его источнике.)

- Расширения для обмена сообщениями, с другой стороны, видят IP-адреса пользователей и сведения о источнике ссылки.

- Руководство по приложениям (и наш процесс проверки AppSource) требует от пользователей публиковать личные сообщения в чате (с помощью разрешения POST_MESSAGE_TEAM) для выполнения допустимых задач. В случае нарушения, пользователи могут блокировать Bot, Администраторы клиентов могут блокировать приложение, и при необходимости Майкрософт может блокировать ботов централизованно.

<sup>1</sup> в некоторых ботов только отправка сообщений (POST_MESSAGE_USER). Они называются "только для уведомлений" ботов, но этот термин не указывает на то, что может сделать Bot, или не может делать это, это означает, что робот не хочет показать беседу. Teams использует это поле для отключения функций в пользовательском интерфейсе, которые обычно включены. Программа "bot" не ограничена тем, что может быть просвоено по сравнению с ботов, предоставляющей возможности общения.

<sup>2</sup> , управляемый логическим свойством supportsFiles в объекте Bot в файле manifest. JSON для приложения.

> [!NOTE]
> Если у робота есть собственный вход, существует вторая — другая — режим согласия при первом входе пользователя.
>
>В настоящее время разрешения Azure AD, связанные с какими-либо возможностями в приложении Teams (Bot, вкладка, соединитель или расширение для обмена сообщениями), полностью отделены от разрешений Teams, перечисленных здесь.

## <a name="tabs"></a>Вкладки

Вкладка — это веб-сайт, работающий внутри Teams.

### <a name="required-permissions"></a>Необходимые разрешения

SEND_AND_RECEIVE_WEB_DATA

### <a name="optional-permissions"></a>Дополнительные разрешения

Нет (сейчас)

### <a name="considerations"></a>Особенности

- Профиль риска для вкладки почти идентичен тому же веб-сайту, на котором работает вкладка браузера. 

- Вкладка также получает контекст, в котором она выполняется, включая имя для входа и UPN текущего пользователя, идентификатор объекта Azure AD для текущего пользователя, идентификатор группы Office 365, в которой она находится (если это группа), идентификатор клиента и текущий языковой стандарт пользователя. Тем не менее, чтобы сопоставить эти идентификаторы со сведениями о пользователе, вкладка должна настроить вход пользователя в Azure AD.

## <a name="connectors"></a>Плат

Соединитель отправляет сообщения в канал, когда возникают события во внешней системе.

### <a name="required-permissions"></a>Необходимые разрешения

POST_MESSAGE_CHANNEL

### <a name="optional-permissions"></a>Дополнительные разрешения

REPLYTO_CONNECTOR_MESSAGE. Некоторые соединители поддерживают транзактные сообщения, которые позволяют пользователям отправлять целевые ответы на соединительные сообщения, например, добавив ответ на вопрос GitHub или добавив дату в карточку Trello.

### <a name="considerations"></a>Особенности

- Система, на которой размещаются посылаемые сообщения, не знает, кто отправляет сообщение или кто получает сообщения: никакие сведения о получателе не будут закрыты. (Microsoft — это реальный получатель, а не клиент; Корпорация Майкрософт производит фактическое сообщение в канале.)

- Данные не отправляются в корпоративную сеть при размещении в канале сообщений в виде соединителя.

- Соединители, поддерживающие транзактные сообщения (REPLYTO_CONNECTOR_MESSAGE разрешение), также не видят сведения об IP-адресе и источнике ссылки. Эти данные отправляются в корпорацию Майкрософт, а затем пересылаются в конечные точки HTTP, которые ранее были зарегистрированы в Microsoft на портале соединителей.

- Каждый раз, когда для канала настроена соединительная линия, создается уникальный URL-адрес для этого экземпляра соединителя. Если этот экземпляр соединителя удален, этот URL-адрес больше нельзя использовать.

- В сообщениях подключателя не может быть вложенных файлов.

- URL-адрес экземпляра соединителя должен рассматриваться как секретный или конфиденциальный: любой пользователь, у которого есть этот URL-адрес, может публиковать его, например адрес электронной почты. Таким образом, существует риск нежелательной почты или ссылок на фишинговые и вредоносные сайты. Если это произошло, владельцы групп могут удалить экземпляр соединителя.

- Если служба, передающая сообщения соединителя, была скомпрометирована и начата отправка нежелательной почты/фишинга/вредоносных программ, администратор клиента может предотвратить создание новых экземпляров соединителя, и корпорация Майкрософт сможет централизованно заблокировать их.

> [!NOTE]
> В настоящее время невозможно узнать, какие соединители поддерживают транзактные сообщения (REPLYTO_CONNECTOR_MESSAGE разрешение).

## <a name="outgoing-webhooks"></a>Исходящие веб-перехватчики

*Исходящие веб-перехватчики* создаются на лету владельцами группы или участниками группы. Они не являются возможностями приложений Teams; Эта информация включена для полноты.

### <a name="required-permissions"></a>Необходимые разрешения

RECEIVE_MESSAGE REPLYTO_MESSAGE. Может получать сообщения от пользователей и отвечать на них.

### <a name="optional-permissions"></a>Дополнительные разрешения

Нет

### <a name="considerations"></a>Особенности

- Исходящие веб-перехватчики похожи на ботов, но имеют меньшие полномочия. Они должны быть явно упомянуты, как ботов.

- При регистрации исходящего веб-перехватчика генерируется секретный код, который позволяет исходящему веб-перехватчику проверить, что отправитель является Microsoft Teams, а не злоумышленником. Этот секрет должен оставаться секретным; любой пользователь, у которого есть доступ к нему, может олицетворять Microsoft Teams. Если секретный код скомпрометирован, исходящий веб-перехватчик можно удалить и создать заново, и будет создан новый секрет.

- Несмотря на то, что вы можете создать исходящий веб-перехватчик, который не должен проверять секретный код, рекомендуется использовать его.

- Исходящие веб-перехватчики, кроме приема сообщений и ответов на них, не могут быть неактивными, они не могут отправлять и получать файлы, но не могут выполнять какие-либо действия в ботов, кроме приема сообщений и ответов на них.
