---
title: Разрешения и рекомендации для приложений Microsoft Teams
author: guptaashish
ms.author: guptaashish
manager: prkosh
ms.date: 06/27/2019
ms.topic: conceptual
audience: admin
ms.service: msteams
ms.collection:
- M365-voice
- M365-collaboration
search.appverid: MET150
ms.reviewer: rowille
description: Администраторы могут узнать, какие данные и разрешения приложения Microsoft Teams запрашивают у их организации.
f1.keywords:
- NOCSH
ms.localizationpriority: high
appliesto:
- Microsoft Teams
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: 2cb641bb8756802820cf6ec6a311e3328c3887ca
ms.sourcegitcommit: a64574da14969a33a77c7d979ffde452b5b3a531
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/02/2022
ms.locfileid: "67175673"
---
# <a name="microsoft-teams-apps-permissions-and-considerations"></a>Разрешения и рекомендации для приложений Microsoft Teams

Приложения Microsoft Teams — это способ объединения одной или нескольких возможностей в приложения, которые можно установить, обновить или удалить. К возможностям приложений относятся:

* Боты
* расширения для обмена сообщениями;
* Вкладки
* Соединители

Как администратор вы управляете только приложениями. Однако в этой статье основное внимание уделяется разрешениям и соображениям на уровне возможностей, поскольку от возможностей приложения зависят требуемые разрешения и профили риска приложения. Использование приложений согласовывается с пользователями и управляется ИТ-специалистами в отношении политик.

Разрешения, перечисленные ниже прописными буквами, например, `RECEIVE_MESSAGE` и `REPLYTO_MESSAGE`, предназначены только для иллюстрации и пояснения. Эти строки или разрешения отсутствуют в [документации для разработчиков Microsoft Teams](/microsoftteams/platform/overview) или в [разрешениях для Microsoft Graph](/graph/permissions-reference).

## <a name="global-app-permissions-and-considerations"></a>Глобальные разрешения и рекомендации для приложений

### <a name="required-permissions"></a>Требуемые разрешения

Нет

### <a name="optional-permissions"></a>Необязательные разрешения

Нет

### <a name="considerations"></a>Замечания

* Приложение должно раскрывать в своих условиях использования и ссылках на политику конфиденциальности, какие данные и для чего оно использует.

* [Согласие для конкретного ресурса](resource-specific-consent.md) предоставляет набор разрешений, которые могут запрашивать приложения, что отображается на экране установки приложения. Дополнительные сведения о разрешениях согласия для конкретных ресурсов см. в [Справочник по разрешениям Graph](/graph/permissions-reference#teams-resource-specific-consent-permissions).

* Приложениям также могут потребоваться разрешения, отличные от разрешений на согласие для конкретных ресурсов. После установки приложение может запросить разрешения Graph через запрос согласия. Подробнее см. в статье [Общие сведения о взаимодействиях предоставления согласия приложений Azure AD.](/azure/active-directory/develop/application-consent-experience). Вы можете настроить разрешения API и согласие на портале Azure. Дополнительные сведения см. в статье [Инфраструктура согласия Azure Active Directory.](/azure/active-directory/develop/consent-framework).

## <a name="bots-and-messaging-extensions"></a>Боты и расширения для обмена сообщениями

### <a name="required-permissions"></a>Требуемые разрешения

* RECEIVE_MESSAGE, REPLYTO_MESSAGE: бот может получать сообщения от пользователей и отвечать на них.<sup>1</sup>

* POST_MESSAGE_USER. После отправки сообщения боту пользователем бот может отправлять ему прямые сообщения (также называемые *упреждающими сообщениями* в любое время.

* GET_CHANNEL_LIST. Боты, добавленные в группы, могут получать список имен и идентификаторов каналов в группе.

### <a name="optional-permissions"></a>Необязательные разрешения

* IDENTITY:при использовании в канале боты приложения могут получать доступ к базовым сведениям об удостоверениях участников группы (имени, фамилии, имени субъекта-пользователя [UPN], адресу электронной почты). При использовании в личном или групповом чате, бот может получить доступ к таким же сведениям для этих пользователей.

* POST_MESSAGE_TEAM: позволяет ботам приложения отправлять прямые (упреждающие) сообщения участнику группы в любое время, даже если этот пользователь никогда не взаимодействовал с ботом.

* Следующие разрешения не являются явными, но подразумеваются операторами RECEIVE_MESSAGE и REPLYTO_MESSAGE и областями потенциального использования ботов, объявленными в манифесте:

  * RECEIVE_MESSAGE_PERSONAL, REPLYTO_MESSAGE_PERSONAL
  * RECEIVE_MESSAGE_GROUPCHAT, REPLYTO_MESSAGE_GROUPCHAT
  * RECEIVE_MESSAGE_TEAM, REPLYTO_MESSAGE_TEAM

* Следующие разрешения не являются явными, но подразумеваются операторами RECEIVE_MESSAGE и REPLYTO_MESSAGE и областями потенциального использования ботов, объявленными в манифесте:

  * RECEIVE_MESSAGE_PERSONAL, REPLYTO_MESSAGE_PERSONAL
  * RECEIVE_MESSAGE_GROUPCHAT, REPLYTO_MESSAGE_GROUPCHAT
  * RECEIVE_MESSAGE_TEAM, REPLYTO_MESSAGE_TEAM

* SEND_FILES, RECEIVE_FILES: <sup>2</sup> Определяет, может ли бот отправлять и получать файлы в личном чате (эта возможность пока не поддерживается для группового чата или каналов).

### <a name="considerations"></a>Замечания

* Боты имеют доступ только к группам, в которые они добавлены, или к пользователям, которые их установили.

* Боты получают только те сообщения, в которых они явно упоминаются пользователями. Эти данные покидают корпоративную сеть.

* Боты могут отвечать только на беседы, в которых они упомянуты.

* Когда пользователь общается с ботом, который хранит его идентификатор, бот может отправлять прямые сообщения пользователю в любое время.

* Теоретически сообщения ботов могут содержать ссылки на фишинговые или вредоносные сайты. Однако боты могут быть заблокированы пользователем, администратором клиента или глобально корпорацией Майкрософт. [Проверка и утверждение приложений](overview-of-app-validation.md) гарантируют, что любые поддельные приложения недоступны в магазине Teams.

* Бот может получать (и может хранить) основную идентификационные сведения для участников группы, к которым было добавлено приложение, или для отдельных пользователей в личных или групповых чатах. Чтобы получить дополнительные сведения об этих пользователях, бот должен потребовать от них войти в Azure Active Directory (Azure AD).

* Боты могут получать (и могут сохранять) список каналов в группе. Эти данные покидают корпоративную сеть.

* По умолчанию боты не могут действовать от имени пользователей, но могут попросить их войти в систему. При входе пользователя систему, бот получит маркер доступа, с помощью которого он сможет выполнять дополнительные действия. Каковы эти другие действия, зависит от бота и от того, где пользователь входит в систему: бот — это приложение Azure AD, зарегистрированное на https://apps.dev.microsoft.com/, и у него может быть собственный набор разрешений.

* Когда файл отправляется боту, он покидает корпоративную сеть. Для отправки и получения файлов требуется утверждение пользователем каждого файла.

* По умолчанию боты не могут действовать от имени пользователей, но могут попросить их войти в систему. При входе пользователя систему, бот получит маркер доступа, с помощью которого он сможет выполнять дополнительные действия. Каковы эти другие действия, зависит от бота и от того, где пользователь входит в систему: бот — это приложение Azure AD, зарегистрированное на [Портале регистрации приложений](https://apps.dev.microsoft.com/?referrer=https:%2f%2fdocs.microsoft.com%2f#/appList) и у него может быть собственный набор разрешений.

* Боты информируются каждый раз при добавлении или удалении пользователя из группы.

* Боты не видят IP-адреса пользователей или другие сведения об источнике ссылки. Все сведения поступают от корпорации Майкрософт. (Есть одно исключение: если бот реализует собственный вход в систему, пользовательский интерфейс входа будет видеть IP-адреса пользователей и сведения об источнике ссылки.)

* С другой стороны, расширения для обмена сообщениями видят IP-адреса пользователей и сведения об источнике ссылки.

* Рекомендации по приложениям (и наш процесс проверки AppSource) требуют от пользователей осмотрительности при публикации личных сообщений чата (через разрешение POST_MESSAGE_TEAM) в допустимых целях. В случае нарушений пользователи могут заблокировать бот, администраторы клиентов могут заблокировать приложение, а Microsoft при необходимости может централизованно заблокировать ботов.

<sup>1</sup> Некоторые боты отправляют только сообщения (POST_MESSAGE_USER). Они называются ботами "только для уведомлений", но этот термин не относится к тому, что боту разрешено или не разрешено делать, это означает, что бот не хочет раскрывать диалоговое взаимодействие. Teams использует это поле для отключения функций пользовательского интерфейса, которые обычно включены. Бот не ограничен в том, что ему разрешено делать по сравнению с ботами, раскрывающими диалоговое взаимодействие.

<sup>2</sup> Управляется логическим свойством supportsFiles объекта бота в файле `manifest.json` для приложения.

> [!NOTE]
> Если у бота есть собственный вход в систему, при первом входе пользователя возникает второй—другой—интерфейс согласия.
>
>Сейчас разрешения Azure AD, связанные с любыми возможностями внутри приложения Teams (с ботом, вкладкой, соединителем или расширением для обмена сообщениями), полностью отделены от перечисленных здесь разрешений Teams.

## <a name="tabs"></a>Вкладки

Вкладка — это веб-сайт, работающий внутри Teams.

### <a name="required-permissions"></a>Требуемые разрешения

SEND_AND_RECEIVE_WEB_DATA

### <a name="optional-permissions"></a>Необязательные разрешения

Нет (сейчас)

### <a name="considerations"></a>Замечания

* Профиль риска для вкладки почти идентичен тому для веб-сайта, работающего во вкладке браузера.

* Вкладка также получает контекст, в котором она работает, включая имя для входа и имя субъекта-пользователя текущего пользователя, идентификатор объекта Azure AD для текущего пользователя, идентификатор группы Microsoft 365, в которой она находится (если это рабочая группа), идентификатор клиента и текущий языковой стандарт пользователя. Однако, чтобы сопоставить эти идентификаторы со сведениями о пользователе, вкладка должна попросить пользователя войти в Azure AD.

## <a name="connectors"></a>Соединители

Соединитель публикует сообщения в канале при возникновении событий во внешней системе.

### <a name="required-permissions"></a>Требуемые разрешения

POST_MESSAGE_CHANNEL

### <a name="optional-permissions"></a>Необязательные разрешения

REPLYTO_CONNECTOR_MESSAGE. Определенные соединители поддерживают интерактивные сообщения, позволяющие пользователям публиковать целевые ответы на сообщение соединителя, например, добавляя ответ на проблему GitHub или добавляя дату в карточку Trello.

### <a name="considerations"></a>Замечания

* Система, отправляющая сообщения соединителя, не знает, кому она их отправляет или кто получает сообщения: сведения о получателе не раскрываются. (Корпорация Майкрософт является фактическим получателем, а не клиентом. Корпорация Майкрософт делает фактическую публикацию в канале.)

* Данные не покидают корпоративную сеть, при отправке сообщений соединителя в канал.

* Соединители, поддерживающие интерактивные сообщения (разрешение REPLYTO_CONNECTOR_MESSAGE), также не видят сведения об IP-адресе и исходной ссылке. Эти сведения отправляются в Microsoft, а затем перенаправляется на конечные точки HTTP, ранее зарегистрированные в Microsoft на портале соединителей.

* При каждой настройке соединителя для канала создается уникальный URL-адрес для этого экземпляра соединителя. После удаления этого экземпляра соединителя URL-адрес больше нельзя будет использовать.

* Сообщения соединителя не могут содержать вложенные файлы.

* URL-адрес экземпляра соединителя следует рассматривать как секретный или конфиденциальный: любой, у кого есть этот URL-адрес, может публиковать сообщения на нем, как и адрес электронной почты. Таким образом, существует определенный риск спама или ссылок на фишинговые или вредоносные сайты. В этом случае владельцы групп могут удалить экземпляр соединителя.

* Если служба, отправляющая сообщения соединителя, будет скомпрометирована и начнет отправлять ссылки на спам, фишинг или вредоносное ПО, администратор клиента может запретить создание новых экземпляров соединителя, а Microsoft может централизованно заблокировать их.

> [!NOTE]
> Сейчас невозможно узнать, какие соединители поддерживают интерактивные сообщения (разрешение REPLYTO_CONNECTOR_MESSAGE).

## <a name="outgoing-webhooks"></a>Исходящие веб-перехватчики

_Исходящие веб-перехватчики_ создаются владельцами или участниками группы. Они не являются возможностями приложений Teams, эти сведения включены для полноты.

### <a name="required-permissions"></a>Требуемые разрешения

RECEIVE_MESSAGE, REPLYTO_MESSAGE. Может получать сообщения от пользователей и отвечать на них.

### <a name="optional-permissions"></a>Необязательные разрешения

Нет

### <a name="considerations"></a>Замечания

* Исходящие веб-перехватчики похожи на ботов, но имеют меньше привилегий. Они должны быть явно упомянуты, как и боты.

* При регистрации исходящего веб-перехватчика создается секрет, позволяющий исходящему веб-перехватчику проверить, что отправителем является Microsoft Teams, а не злоумышленник. Этот секрет должен оставаться секретом; любой, у кого есть к нему доступ, может выдавать себя за Microsoft Teams. Если секрет скомпрометирован, исходящий веб-перехватчик можно удалить и создать заново, при этом будет сгенерирован новый секрет.

* Несмотря на то, что можно создать исходящий веб-перехватчик, не проверяющий секрет, мы рекомендуем не использовать его.

* Кроме получения сообщений и ответа на них, исходящие веб-перехватчики мало что могут сделать: они не могут упреждающе отправлять сообщения, они не могут отправлять или получать файлы, они не могут делать ничего, что могут делать боты, кроме получения и отправки сообщений.
