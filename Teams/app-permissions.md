---
title: Разрешения и рекомендации для приложений Microsoft Teams
author: rmw2890
ms.author: rowille
manager: serdars
ms.date: 06/27/2019
ms.topic: conceptual
audience: admin
ms.service: msteams
ms.collection:
- M365-voice
- M365-collaboration
search.appverid: MET150
ms.reviewer: rowille
description: Администратор может узнать, какие данные и разрешения Microsoft Teams запрашиваются у их организации.
f1.keywords:
- NOCSH
localization_priority: Normal
appliesto:
- Microsoft Teams
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: ae050080814afe12ce2ba791c6b68058d5e4bc58
ms.sourcegitcommit: 01087be29daa3abce7d3b03a55ba5ef8db4ca161
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "51120861"
---
# <a name="microsoft-teams-apps-permissions-and-considerations"></a>Разрешения и рекомендации для приложений Microsoft Teams

Microsoft Teams приложения — это способ агрегировать одну  или несколько возможностей в пакет приложений, который можно устанавливать, обновлять и устанавливать. К ним относятся следующие возможности:

- Ботов
- Расширения для обмена сообщениями
- Вкладки
- Соединители

Пользователи могут получить разрешение на доступ к приложениям и управлять им с точки зрения политики. Однако в большинстве своей части разрешения и профиль рисков приложения определяются разрешениями и профилями рисков, которые содержит приложение. Поэтому в этой статье рассматриваются разрешения и аспекты на уровне возможностей.

Разрешения, перечисленные ниже в буквах, например RECEIVE_MESSAGE и REPLYTO_MESSAGE, не отображаются [](/microsoftteams/platform/overview) в документации разработчика Microsoft Teams или разрешениях для [Microsoft Graph.](/graph/permissions-reference) Они просто описательны для целей данной статьи.


| Название   | Описание    |
|-----------|------------|
| ![Значок, изображающий точку принятия решения](media/audio_conferencing_image7.png) <br/>Точка принятия решений|<ul><li>Используйте таблицы ниже, чтобы понять, какие разрешения запрашивают приложения, которые вы изучаете.</li></ul> |
| ![Значок, изображающий следующее действие](media/audio_conferencing_image9.png)<br/>Следующее действие|<ul><li>Изумите приложение или службу, чтобы решить, хотите ли вы разрешить доступ к ним в организации. Например, боты отправляют и получают сообщения от пользователей и (кроме корпоративных) находятся за пределами границы соответствия требованиям. Поэтому для любого приложения, которое включает бота, требуются эти разрешения и как минимум этот профиль риска. </li></ul>|

См. [также Запрос разрешений для устройства для вкладки Microsoft Teams .](/microsoftteams/platform/concepts/device-capabilities/native-device-permissions)

## <a name="global-app-permissions-and-considerations"></a>Разрешения и аспекты глобального приложения

### <a name="required-permissions"></a>Необходимые разрешения

Нет

### <a name="optional-permissions"></a>Необязательные разрешения

Нет

### <a name="considerations"></a>Рекомендации

- Приложение должно сообщать, какие данные и для чего они используются в условиях использования и связей политики конфиденциальности.

- [Разрешение для конкретного](resource-specific-consent.md) ресурса предоставляет набор разрешений, которые могут запрашивать приложения, который отображается на экране установки приложения. Дополнительные данные о разрешениях для конкретного ресурса см. в Graph [разрешений.](/graph/permissions-reference#teams-resource-specific-consent-permissions)

- Приложениям также могут потребоваться разрешения, кроме разрешений на согласие для конкретного ресурса. После установки приложения приложение может запросить разрешение Graph с помощью запроса на согласие. Дополнительные узнать см. в [этой теме.](/azure/active-directory/develop/application-consent-experience) Вы можете настроить разрешения API и согласие на портале Azure. Дополнительные информации см. [в Azure Active Directory согласия](/azure/active-directory/develop/consent-framework).

## <a name="bots-and-messaging-extensions"></a>Боты и расширения для обмена сообщениями

### <a name="required-permissions"></a>Необходимые разрешения

- RECEIVE_MESSAGE, REPLYTO_MESSAGE. Бот может получать сообщения от пользователей и отвечать на них. <sup>1</sup>

- POST_MESSAGE_USER. После того как пользователь отправил сообщение боту, он может отправлять ему  прямые сообщения (также называемые проактивными сообщениями в любое время).

- GET_CHANNEL_LIST. Боты, добавленные в команды, могут получить список имен и ИД каналов в команде.

### <a name="optional-permissions"></a>Необязательные разрешения

- Идентичности. Когда приложение используется в канале, боты приложения могут получать доступ к основным сведениям об удостоверениях участников группы (имя, фамилия, имя пользователя [UPN], адрес электронной почты); когда он используется в личном или групповом чате, бот может получить доступ к одной и той же информации для этих пользователей.

- POST_MESSAGE_TEAM. Позволяет ботам приложения в любое время отправлять прямые (упреждающие) сообщения членам команды, даже если пользователь никогда не общался с ботом.

- Следующие разрешения не являются явными, но подразумеваются RECEIVE_MESSAGE и REPLYTO_MESSAGE, а также области, в которых можно использовать боты, объявленные в манифесте:
 
    - RECEIVE_MESSAGE_PERSONAL, REPLYTO_MESSAGE_PERSONAL
    - RECEIVE_MESSAGE_GROUPCHAT, REPLYTO_MESSAGE_GROUPCHAT
    - RECEIVE_MESSAGE_TEAM, REPLYTO_MESSAGE_TEAM

- SEND_FILES, RECEIVE_FILES. <sup>2.</sup> Управляет тем, может ли бот отправлять и получать файлы в личном чате (пока не поддерживается для группового чата или каналов).

### <a name="considerations"></a>Рекомендации

- Боты имеют доступ только к командам, в которые они были добавлены, или к пользователям, которые их установили.

- Боты получают только сообщения, в которых они явно упоминаются пользователями. Эти данные покинули корпоративную сеть.

- Боты могут отвечать только на беседы, в которых они упоминаются.

- После того как пользователь побеседует с ботом, он сможет отправлять ему прямые сообщения в любое время.

- Сообщения-боты могут содержать ссылки на фишинговые и вредоносные сайты, но они могут быть заблокированы пользователем, администратором клиента или глобально корпорацией Майкрософт.

- Бот может получить (и может хранить) основные сведения об удостоверениях участников группы, в которые добавлено приложение, или отдельных пользователей в личных или групповых чатах. Чтобы получить дополнительные сведения об этих пользователях, бот должен потребовать от них войти в Azure Active Directory (Azure AD).

- Боты могут извлекать (и хранить) список каналов в команде; эти данные покидает корпоративную сеть.

- При отправлении файла боту он покидает корпоративную сеть. Для отправки и получения файлов требуется утверждение пользователя для каждого файла. 

- По умолчанию боты не могут действовать от имени пользователя, но боты могут попросить их войти; Как только пользователь войнет в него, у бота появится маркер доступа, с помощью которого он может делать дополнительные действия. То, что именно зависит от бота и того, где пользователь вошел: бот — это приложение Azure AD, зарегистрированное в и которое может иметь собственный https://apps.dev.microsoft.com/ набор разрешений.

- Боты информируются о том, что пользователи добавляются в команду или удаляются из нее.

- Боты не видят IP-адреса пользователей или другие сведения о ссылке. Вся информация поступает от корпорации Майкрософт. (Есть одно исключение: если бот реализует собственный интерфейс для выполнения входов, в пользовательском интерфейсе для входов будут видеться IP-адреса пользователей и сведения о ссылке.)

- Расширения для сообщений, с другой стороны, видят IP-адреса пользователей и сведения о ссылке.

- Рекомендации по приложению (и процесс проверки appSource) требуют дискреционного выбора при публикации личных сообщений в чате пользователям (с POST_MESSAGE_TEAM разрешения) в допустимых целях. В случае нарушения пользователи могут заблокировать бота, администраторы клиента могут заблокировать приложение, а Корпорация Майкрософт при необходимости может заблокировать боты централизованно.

<sup>1</sup> Некоторые боты отправляют только сообщения (POST_MESSAGE_USER). Они называются ботами только для уведомлений, но термин не относится к разрешенным или не разрешенным ботам. Это означает, что бот не хочет показать беседу. Teams использует это поле для отключения функций пользовательского интерфейса, которые обычно были включены; бот не ограничен тем, что разрешено делать, по сравнению с ботами, которые делают сеанс беседы.

<sup>2</sup> Регулируется свойством supportsFiles Boolean объекта-бота в manifest.jsв файле приложения.

> [!NOTE]
> Если у бота есть собственный вход, при первом входе пользователя вы сможете получить второй (другой) интерфейс согласия.
>
>В настоящее время разрешения Azure AD, связанные с любыми возможностями в приложении Teams (бот, вкладка, соединитерная точка или расширение для обмена сообщениями), полностью не связаны с указанными здесь разрешениями Teams сообщений.

## <a name="tabs"></a>Вкладки

Вкладка — это веб-сайт, который находится Teams.

### <a name="required-permissions"></a>Необходимые разрешения

SEND_AND_RECEIVE_WEB_DATA

### <a name="optional-permissions"></a>Необязательные разрешения

Нет (в настоящее время)

### <a name="considerations"></a>Рекомендации

- Профиль риска для вкладки практически идентичен тому же веб-сайту, который работает на вкладке браузера. 

- Вкладка также получает контекст, в котором она запущена, включая имя для регистрации и имя пользователя текущего пользователя, ИД объекта Azure AD для текущего пользователя, ИД группы Microsoft 365, в которой она находится (если это группа), ИД клиента и текущий язык пользователя. Однако чтобы соедиерить эти ID-данные с информацией пользователя, на вкладке нужно будет войти в Azure AD.

## <a name="connectors"></a>Соединители

Соединител публикует сообщения в канале при событиях во внешней системе.

### <a name="required-permissions"></a>Необходимые разрешения

POST_MESSAGE_CHANNEL

### <a name="optional-permissions"></a>Необязательные разрешения

REPLYTO_CONNECTOR_MESSAGE. Некоторые соединитетели поддерживают сообщения с действиями, которые позволяют пользователям отправлять целевые ответы на сообщение соединитела, например путем добавления ответа на проблему GitHub или добавления даты на карточку Trello.

### <a name="considerations"></a>Рекомендации

- Система, которая публикует сообщения соединителя, не знает, кому они будут отправляться и кто их получает: никакие сведения о получателе не раскрыты. (Корпорация Майкрософт является фактическим получателем, а не клиентом; Корпорация Майкрософт делает фактическую запись на канале.)

- При публикации сообщений соединитела в канале из корпоративной сети никакие данные не выдвоются из корпоративной сети.

- Соединители, которые поддерживают сообщения с действиями (REPLYTO_CONNECTOR_MESSAGE разрешение), также не видят IP-адрес и сведения о ссылке. эти сведения отправляются в корпорацию Майкрософт, а затем направляются в конечные точки HTTP, которые ранее зарегистрированы в корпорации Майкрософт на портале Соединители.

- Каждый раз, когда соединителя настроена для канала, для этого экземпляра создается уникальный URL-адрес. Если этот экземпляр соединителя будет удален, URL-адрес больше не будет использоваться.

- Сообщения соединителения не могут содержать вложенные файлы.

- URL-адрес экземпляра соединителя следует рассматривать как секретный или конфиденциальный: любой, у кого есть этот URL-адрес, может опубликовать его, например адрес электронной почты. Таким образом, существует риск спама или ссылок на фишинговые и вредоносные сайты. В этом случае владельцы команд могут удалить экземпляр соединитетеля.

- Если служба, которая отправляет сообщения соединителя, скомпрометирована и начнет отправлять ссылки на спам, фишинг и вредоносные программы, администратор клиента может запретить создавать новые экземпляры соединителя и корпорация Майкрософт может заблокировать их централизованно.

> [!NOTE]
> В настоящее время невозможно узнать, какие соединители поддерживают сообщения с действиями (REPLYTO_CONNECTOR_MESSAGE разрешения).

## <a name="outgoing-webhooks"></a>Исходяющие веб-ookы

*Исходяющие веб-ookы* создаются владельцами команд или членами команды в момент их вылета. Они не являются возможностями Teams приложений; эти сведения содержатся для сведения о полноте.

### <a name="required-permissions"></a>Необходимые разрешения

RECEIVE_MESSAGE, REPLYTO_MESSAGE. Может получать сообщения от пользователей и отвечать на них.

### <a name="optional-permissions"></a>Необязательные разрешения

Нет

### <a name="considerations"></a>Рекомендации

- Исходяющие веб-ook похожи на боты, но имеют меньше прав. Они должны быть явно упомянуты, как боты.

- При регистрации исходяющего веб-приложения создается секрет, который позволяет исходяющему веб-хook проверить, является ли отправитель Microsoft Teams злоумышленником. Эта секретная должна оставаться секретной; Любой, у кого есть доступ к нему, может на себя Microsoft Teams. Если секрет скомпрометирован, исходяющий веб-сайт можно удалить и повторно создать, и будет создан новый секрет.

- Несмотря на то, что можно создать исходяющий веб-сайт, который не проверяет секрет, мы рекомендуем не использовать его.

- Кроме получения сообщений и ответа на них, исходящие веб-приложения могут не только отправлять сообщения, но и отвечать на них: они не могут заранее отправлять сообщения, отправлять и получать файлы, они не могут ничего делать, кроме получения сообщений и ответа на них.