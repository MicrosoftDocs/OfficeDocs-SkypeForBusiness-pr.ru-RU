---
title: Teams для инфраструктуры виртуальных рабочих столов
author: LanaChin
ms.author: v-lanac
manager: serdars
ms.date: 04/10/2019
ms.topic: article
ms.service: msteams
ms.reviewer: rafarhi
audience: admin
description: Сведения о том, как запускать Microsoft Teams в среде виртуализованной инфраструктуры для настольных компьютеров (VDI).
localization_priority: Normal
search.appverid: MET150
ms.collection:
- Teams_ITAdmin_PracticalGuidance
- M365-collaboration
appliesto:
- Microsoft Teams
ms.openlocfilehash: 1d0680e81799152bfc6eb9a976634384eb70954c
ms.sourcegitcommit: e1c8a62577229daf42f1a7bcfba268a9001bb791
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2019
ms.locfileid: "36243824"
---
# <a name="teams-for-virtualized-desktop-infrastructure"></a>Teams для инфраструктуры виртуальных рабочих столов

В этой статье описаны требования и ограничения для использования Microsoft Teams в виртуализованной среде.

## <a name="what-is-vdi"></a>Что такое VDI?

Инфраструктура виртуальных рабочих столов (VDI) — это технология виртуализации, в которой на центральном сервере в центре обработки данных размещены приложения для настольных систем и приложений. Это обеспечивает полное персонализированное взаимодействие с пользователями с полностью защищенным и совместимым централизованным источником. 
 
В настоящее время команды в виртуализованной среде доступны благодаря поддержке функций совместной работы и чата с выделенной постоянной виртуальной машиной (ВМ). Для обеспечения оптимального взаимодействия с пользователем следуйте рекомендациям, приведенным в этой статье. 

## <a name="teams-requirements"></a>Требования к Teams

### <a name="set-policies-to-turn-off-calling-and-meeting-functionality-in-teams"></a>Настройка политик для отключения функций звонков и собраний в Teams

Звонки и собрания в Teams не оптимизированы для работы в среде VDI (скоро). Мы рекомендуем настроить политики на уровне пользователей для отключения функций звонков и собраний в Teams.

Вы по-прежнему можете запускать команды полностью в VDI с помощью классического приложения Teams или веб-приложения. Тем не менее, мы рекомендуем настроить политики, чтобы не порушить безопасность взаимодействия с пользователем.  

Для распространения изменений политики может потребоваться некоторое время (несколько часов). Если вы сразу же не видите изменения для указанной учетной записи, повторите попытку через несколько часов.

> [!NOTE]
> Если в средах виртуальных рабочих столов оптимизируются вызовы и собрания групп, вы можете отменить эти политики и разрешить пользователям использовать группы в обычном режиме. 

#### <a name="calling"></a>Звонки

Используйте командлеты **кстеамскаллингполици** , чтобы указать, разрешено ли пользователям использовать параметры звонков и звонков в частных и групповых чатах. Ниже приведен список параметров политики и рекомендуемых значений.

|Название политики  |Описание |Рекомендуемое значение  |
|---------|---------|---------|
|алловкаллинг    |Управляет возможностями вызова взаимодействия. Если включить этот параметр, пользователи Skype для бизнеса смогут звонить на один из нескольких пользователей Teams и наоборот.         |Установите значение false, чтобы не допустить звонка для пользователей Skype для бизнеса, предназначенных для Teams.          |
|алловприватекаллинг     | Определяет, будет ли вызывающее приложение доступно на панели приложения в левой части клиента Teams, и должны ли пользователи видеть параметры вызова и видеозвонка в частном чате.         |Установите значение false, чтобы удалить вызывающее приложение из панели приложения в левой части Teams и удалить параметры вызова и видеозвонка в частном чате.          |

#### <a name="create-and-assign-a-calling-policy"></a>Создание и назначение политики вызова

1. Запустите сеанс Windows PowerShell с правами администратора.
2. Подключитесь к разъему Skype Online.

        # Set Office 365 User Name and Password
        $username = “admin email address”
        password = ConvertTo-SecureString "password" -AsPlainText -Force
        $LiveCred = new-object -typename System.Management.Automation.PSCredential -argumentlist $username, $password
        # Connect to Skype Online
        Import-Module SkypeOnlineConnector
        $sfboSession = New-CsOnlineSession -Credential $LiveCred
        Import-PSSession $sfboSession```

3. Просмотр списка параметров политики звонков.

       Get-CsTeamsCallingPolicy
 
4. Найдите параметр встроенной политики, в котором отключены все политики звонков. Оно выглядит следующим образом.
   
        Identity                        : Tag:DisallowCalling
        AllowCalling                    : False
        AllowPrivateCalling             : False
        AllowVoicemail                  : False
        AllowCallGroups                 : False
        AllowDelegation                 : False
        AllowUserControl                : False
        AllowCallForwardingToUser       : False
        AllowCallForwardingToPhone      : False
        PreventTollBypass               : False

5. Примените встроенный параметр Дисалловкаллинг ко всем пользователям, которые будут использовать команды в виртуализованной среде.

        Grant-CsTeamsCallingPolicy -PolicyName DisallowCalling -Identity “user email id”

Дополнительные сведения о политиках вызова команд: [Set-кстеамскаллингполици](https://docs.microsoft.com/powershell/module/skype/set-csteamscallingpolicy).

#### <a name="meetings"></a>Собрания

С помощью командлетов **кстеамсмитингполици** можно управлять типами собраний, которые могут быть созданы пользователями, а также функциями собраний, доступными для анонимных и внешних пользователей. Ниже приведен список параметров политики и рекомендуемых значений.

|Имя политики |Описание|Рекомендуемое значение                   |
|-------------------|-----------------|-----------------------|
|алловприватемитингсчедулинг  | Определяет, может ли пользователь планировать закрытые собрания.| Установите значение false, чтобы запретить пользователю планировать закрытые собрания.  |
|алловчаннелмитингсчедулинг  | Определяет, разрешено ли пользователю планировать собрания каналов. | Установите значение false, чтобы запретить пользователю планировать собрания каналов.                       |
|алловмитнов |Определяет, может ли пользователь создавать или запускать специальные собрания.              |  Задайте для него значение false, чтобы запретить пользователю выполнять одноранговые собрания.                     |
|скриншарингмоде | Определяет режим, в котором пользователь может демонстрировать экран в звонках или собраниях. | Значение "отключено", чтобы запретить пользователю предоставлять общий доступ к экранам                          |
|AllowIPVideo |Определяет, включено ли видео в собраниях или звонках пользователя.                  |    Установите значение false, чтобы запретить пользователю предоставлять общий доступ к видео                                         |
| AllowAnonymousUsersToDialOut | Определяет, разрешено ли анонимным пользователям звонить на номера PSTN. | Установите значение false, чтобы запретить исходящие вызовы анонимных пользователей                                  |
| аллованонимаусусерстостартмитинг | Определяет, могут ли анонимные пользователи начать собрание.     |  Установите значение false, чтобы запретить пользователям начинать собрание                                            |
| алловаутлукаддин |Определяет, может ли пользователь планировать собрания Teams в классическом клиенте Outlook.| Установите значение false, чтобы запретить пользователю планировать собрания Teams в классическом клиенте Outlook.|
| алловпартиЦипантгиверекуестконтрол|Определяет, могут ли участники запрашивать или предоставлять управление демонстрацией экрана.| Установите значение false, чтобы запретить пользователю предоставлять или запрашивать управление на собрании.    |
| алловекстерналпартиЦипантгиверекуестконтрол | Определяет, могут ли внешние участники запрашивать или предоставлять управление демонстрацией экрана.| Установите значение false, чтобы запретить внешнему пользователю предоставлять управление на собрании.|
|алловповерпоинтшаринг|Определяет, разрешено ли совместное использование PowerPoint в собраниях пользователя. |Установите значение false, чтобы запретить пользователям предоставлять общий доступ к файлам PowerPoint на собрании.  |
|алловвхитебоард | Определяет, разрешена ли доска в собраниях пользователя. |   Установите значение false, чтобы запретить доску на собрании |
| алловтранскриптион |Определяет, разрешены ли в собраниях пользователя и (или), и в режиме реального времени заголовки и записи для собраний.|    Установите значение false, чтобы запретить использование транскрипции и субтитров на собрании.  |  
| AllowSharedNotes | Определяет, разрешено ли пользователям делать общие заметки. | Установите значение false, чтобы запретить пользователям делать общие заметки. |
|медиабитратекб |Определяет скорость потока мультимедиа для обмена аудио-и видеофайлами и приложениями в собраниях.  | Рекомендуемое значение — 5000 (5 МБ). Вы можете изменить его в соответствии с потребностями Организации.| 

#### <a name="create-and-assign-a-meeting-policy"></a>Создание и назначение политики собраний

1. Запустите сеанс Windows PowerShell с правами администратора.
2. Подключитесь к разъему Skype Online.

        # Set Office 365 User Name and Password
        $username = “admin email address”
        password = ConvertTo-SecureString "password" -AsPlainText -Force
        $LiveCred = new-object -typename System.Management.Automation.PSCredential -argumentlist $username, $password
        # Connect to Skype Online
        Import-Module SkypeOnlineConnector
        $sfboSession = New-CsOnlineSession -Credential $LiveCred
        Import-PSSession $sfboSession```

3. Просмотр списка параметров политики собраний.

       Get-CsTeamsMeetingPolicy
 
4. Найдите параметр встроенной политики, в котором отключены все политики собраний. Оно выглядит следующим образом.
   
        Identity                                    : Tag:AllOff
        Description                                 :
        AllowChannelMeetingScheduling               : False
        AllowMeetNow                                : False
        AllowIPVideo                                : False
        AllowAnonymousUsersToDialOut                : False
        AllowAnonymousUsersToStartMeeting           : False
        AllowPrivateMeetingScheduling               : False
        AutoAdmittedUsers                           : False
        AllowCloudRecording                         : False
        AllowOutlookAddIn                           : False
        AllowPowerPointSharing                      : False
        AllowParticipantGiveRequestControl          : False
        AllowExternalParticipantGiveRequestControl  : False
        AllowSharedNotes                            : False
        AllowWhiteboard                             : False
        AllowTranscription                          : False
        MediaBitRateKb                              : False
        ScreenSharingMode                           : False

5. Примените встроенный параметр Аллофф ко всем пользователям, которые будут использовать команды в виртуализованной среде. 

        Grant-CsTeamsMeetingPolicy -PolicyName AllOff -Identity “user email id”

 Дополнительные сведения о политиках собраний Teams можно найти в разделе [Set-кстеамсмитингполици](https://docs.microsoft.com/powershell/module/skype/set-csteamsmeetingpolicy).

### <a name="virtualization-provider-requirements"></a>Требования поставщика виртуализации

Приложение Teams было проверено ведущими поставщиками решений для виртуализации. В случае с несколькими поставщиками рынка ознакомьтесь с поставщиком решений для виртуализации, чтобы убедиться в соблюдении минимальных требований.

### <a name="virtual-machine-requirements"></a>Требования к виртуальной машине

В виртуализованной среде для разнообразных задач и потребностей пользователей ниже приведена минимальная рекомендуемая конфигурация виртуальной машины.

|Параметр  |Измерений  |
|---------|---------|
|вкпу    |  2 ядра       |
|ДОСТУПНОЙ     |  4 ГБ      |
|Склад     | 8 ГБ       |

### <a name="virtual-machine-operating-system-requirements"></a>Требования к операционной системе виртуальной машины

Ниже перечислены поддерживаемые операционные системы для виртуальных машин.

- Windows 10 и более поздние версии
- Windows Server 2012 R2 и более поздние версии

## <a name="install-teams-on-vdi"></a>Установка Teams в VDI

Вот процесс и инструменты для развертывания классического приложения Teams. 

1. Скачайте пакет MSI Teams с помощью одной из приведенных ниже ссылок в зависимости от среды. Рекомендуем использовать 64-разрядную версию для виртуальной машины VDI с 64-разрядной операционной системой.

    - [32-разрядная версия](https://teams.microsoft.com/downloads/desktopurl?env=production&plat=windows&download=true&managedInstaller=true)
    - [64-разрядная версия](https://teams.microsoft.com/downloads/desktopurl?env=production&plat=windows&download=true&managedInstaller=true&arch=x64)

2. Выполните следующую команду, чтобы установить MSI на виртуальную машину VDI (или завершить ее обновление).

        msiexec /i <path_to_msi> /l*v <install_logfile_name> ALLUSER=1

    Эти команды устанавливаются в файлы программы. На этом этапе Настройка первоначальных изображений завершена.
 
    Следующий интерактивный сеанс входа запускает Teams и запрашивает учетные данные. Обратите внимание, что при установке Teams в VDI невозможно отключить автоматическое запуск Teams с помощью свойства АЛЛУСЕР. 

3. Выполните следующую команду, чтобы удалить MSI из виртуальной машины VDI (или подготовиться к его обновлению).

        msiexec /passive /x <path_to_msi> /l*v <uninstall_logfile_name>

    Это действие удаляет группы из файлов программы.

## <a name="known-issues-and-limitations"></a>Известные проблемы и ограничения

Ниже описаны известные проблемы и ограничения для Teams в VDI.

- **Развертывание типа узла общего сеанса**: развертывание общих типов узлов сеансов (например, Общая несохраняемая Конфигурация виртуальной машины) не находится в области.
- **Звонки и собрания**:

    - Сценарии звонков и собраний не оптимизированы для VDI. Эти сценарии будут работать плохо. Мы рекомендуем использовать политики на уровне пользователей, как описано в разделе [Настройка политик для отключения функций звонков и собраний в](#set-policies-to-turn-off-calling-and-meeting-functionality-in-teams) раздел Teams.  
    - Применение описанных в этой статье политик влияет на возможность звонков и собраний, в зависимости от других политик, может повлиять на других пользователей организации. Если пользователи в вашей организации используют клиенты, не использующие VDI, вы можете выбрать вариант не применять эти политики.  

- **Присоединение к звонкам и собраниям, созданным другими пользователями**: Несмотря на то, что политики ограничивают пользователей для создания собраний, они могут присоединяться к собраниям, если они будут звонить другим пользователям из собрания. В этих собраниях пользователь может поделиться видео, использовать доску и другие возможности, зависят от того, были ли отключены эти функции с помощью Теамсмитингполици.  
- **Кэшированное содержимое**: Если виртуальная среда, в которой работает Teams, не является постоянной (и данные очищаются по окончании каждого пользовательского сеанса), пользователи могут заметить снижение производительности из-за обновления содержимого независимо от того, есть ли у пользователя тот же самый доступ. содержимое в предыдущем сеансе.
- **Обновления клиента**: teams в VDI автоматически не обновляется при установке MSI для компьютера. Вы должны обновить образ виртуальной машины установкой нового MSI-файла, как описано в разделе [Установка Teams в VDI](#install-teams-on-vdi) . Вы должны удалить текущую версию, чтобы обновить ее до новой версии.
- **Взаимодействие с пользователем**: взаимодействие с пользователями Teams в среде VDI может отличаться от среды, отличной от VDI. Это может быть вызвано параметрами политики и/или поддержкой функций в среде.

Известные проблемы, которые не относятся к VDI, приведены в разделе [Известные проблемы в Microsoft Teams](Known-issues.md).

## <a name="related-topics"></a>Статьи по теме

- [Установка Microsoft Teams с помощью MSI](msi-deployment.md)
