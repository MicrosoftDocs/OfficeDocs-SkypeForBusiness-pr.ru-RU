---
title: Назначение политик большим наборам пользователей в учебном заведении
author: lanachin
ms.author: v-lanac
manager: serdars
ms.reviewer: karsmith, angch, cebulnes
ms.topic: article
ms.tgt.pltfrm: cloud
ms.service: msteams
audience: Admin
ms.collection:
- M365-collaboration
- remotework
appliesto:
- Microsoft Teams
localization_priority: Normal
search.appverid: MET150
description: Научитесь назначать политики большим наборам пользователей в обучающем учреждении на основе членства в группе или непосредственно с помощью назначения пакетов для удаленной школы (теле-учебного заведения).
f1keywords: ''
ms.openlocfilehash: 0b4fd804b51fef9537d30230aed400bb0cb7e0aa
ms.sourcegitcommit: dc3e8ae454c42981f037f4de2e48005428b6078e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/31/2020
ms.locfileid: "46534134"
---
# <a name="assign-policies-to-large-sets-of-users-in-your-school"></a>Назначение политик большим наборам пользователей в учебном заведении

> [!NOTE]
> Более подробные сведения о назначении политик в Microsoft Teams можно найти [в статье назначение политик для пользователей в Teams](assign-policies.md).

## <a name="overview"></a>Обзор

Нужно ли предоставлять учащимся и преподавателям доступ к различным функциям в Microsoft Teams? Вы можете быстро идентифицировать пользователей в своей организации по типу лицензии и назначить им соответствующую политику. В этом учебнике показано, как назначить политику собраний большим наборам пользователей в вашем учебном заведении. Вы можете назначать политики с помощью центра администрирования Microsoft Teams и PowerShell, и мы покажем вам оба способа.

Вы можете назначить политику собраний группе безопасности, в которую пользователи входят или непосредственно для пользователей при изменении масштаба с помощью задания пакетной политики. После прочтения этой статьи вы сможете следующее.

- **Назначение политики собрания группе безопасности (рекомендуется) с помощью [назначения политик для групп](#assign-a-policy-to-a-group) **. Этот метод позволяет назначить политику, основанную на членстве в группах. Вы можете назначить политику группе безопасности или списку рассылки. Когда участники добавляются в группу или удаляются из нее, их унаследованные назначения политик обновляются соответствующим образом. Мы рекомендуем использовать этот метод, так как он сокращает время управления политиками для новых пользователей или изменения ролей пользователей. Этот метод наилучшим образом подходит для групп до 50 000 пользователей, но также для работы с более крупными группами.

- **Используйте [назначение пакетной политики](assign-policies.md#assign-a-policy-to-a-batch-of-users) для назначения политики собраний непосредственно пользователям**. Вы можете назначить политику до 5 000 пользователей одновременно. Если у вас более 5 000 пользователей, вы можете отправить несколько пакетов. При использовании этого метода для новых пользователей потребуется повторное выполнение задания, чтобы назначить политику новым пользователям.

Помните, что в Teams пользователи автоматически получают глобальную политику (по умолчанию на уровне Организации) для типа политики Teams, если вы не создали и не назначаете пользовательскую политику. Поскольку заполнение учащихся часто является большим набором пользователей, и они часто получают наиболее строгие параметры, мы рекомендуем сделать следующее:

- Создание настраиваемой политики, которая позволяет выполнять базовые функции, такие как личное чат и планирование собраний, а также назначать политику сотрудникам и преподавателям.
- Назначение настраиваемой политики вашим сотрудникам и преподавателям.
- Измените и примените глобальную политику (по умолчанию на уровне Организации), чтобы ограничить возможности для учащихся.

Имейте в виду, что глобальная политика будет применяться ко всем пользователям в вашем учебном заведении, пока не будет создана пользовательская политика, и вы сможете назначить ее вашим сотрудникам и преподавателям.

В этом учебнике учащиеся получат глобальную политику собраний, и мы назначением настраиваемой политики собраний с именем EducatorMeetingPolicy для сотрудников и преподавателей. Предполагается, что вы изменили глобальную политику для настройки параметров собрания для учащихся и [создали специальную политику](policy-packages-edu.md) , которая определяет процесс собрания для персонала и преподавателей.

![Снимок экрана: страница "политики собрания" в центре администрирования Teams](media/batch-group-policy-assignment-edu-meeting-policies.png)

## <a name="assign-a-policy-to-a-group"></a>Назначение политики группе

Выполните указанные ниже действия, чтобы создать группу безопасности для сотрудников и преподавателей, а затем назначить специальную политику собраний с именем EducatorMeetingPolicy в эту группу безопасности.

### <a name="before-you-get-started"></a>С чего начать

> [!IMPORTANT]
> При назначении политики группе Назначение политики распространяется на пользователей группы в соответствии с правилами приоритета. Например, если пользователю напрямую назначается политика (отдельно или по назначению), эта политика имеет приоритет над политикой, унаследованной от группы. Кроме того, это означает, что если пользователю назначена политика собрания, которой вы непосредственно назначили, вам придется удалить эту политику для этого пользователя, прежде чем она сможет наследовать политику собраний из группы безопасности.

Прежде чем приступить к работе, важно понимать [правила приоритета](assign-policies.md#precedence-rules) и [ранжирование назначения групп](assign-policies.md#group-assignment-ranking). **Убедитесь, что вы прочитали и понимаете принципы, необходимые для [назначения политик группам](assign-policies.md#what-you-need-to-know-about-policy-assignment-to-groups)**.

Вам потребуется выполнить все эти действия для сотрудников и преподавателей, чтобы наследовать политику собраний из группы безопасности.

1. [Создание групп безопасности](#create-security-groups).
2. [Назначение политики группе безопасности](#assign-a-policy-to-a-security-group).
3. [Удаление политики, назначенной пользователям напрямую](#remove-a-policy-that-was-directly-assigned-to-users).

### <a name="create-security-groups"></a>Создание групп безопасности

Сначала создайте группу безопасности для своих сотрудников и преподавателей.

С помощью [School Data Sync](https://docs.microsoft.com/SchoolDataSync/) (SDS) вы можете легко создавать в учебном заведении [преподавателей и студентов групп безопасности](https://docs.microsoft.com/SchoolDataSync/edu-security-groups) . Рекомендуется использовать SDS для создания групп безопасности, необходимых для управления политиками для учебного заведения.

Если вы не можете развернуть SDS в среде, используйте [этот сценарий PowerShell](scripts/powershell-script-security-groups-edu.md) для создания двух групп безопасности: для всех сотрудников и преподавателей, которым назначена лицензия факультета, а другая — для всех студентов, у которых есть лицензия на учащийся. Для обеспечения актуальности и актуальности групп вам потребуется выполнить этот сценарий регулярно.

### <a name="assign-a-policy-to-a-security-group"></a>Назначение политики группе безопасности

#### <a name="using-the-microsoft-teams-admin-center"></a>С помощью Центра администрирования Microsoft Teams

> [!NOTE]
> В настоящее время назначение политики для групп, использующих центр администрирования Microsoft Teams, доступно только для политики звонков в Teams, политики для приема звонков в Teams, политики Teams, политики собрания Teams и политики обмена сообщениями в группе Teams. Для других типов политик используйте PowerShell.

1. В левой области навигации центра администрирования Microsoft Teams **перейдите в раздел**  >  **политики собраний по собраниям**.
2. Перейдите на вкладку **назначение групповой политики** .
3. Нажмите кнопку **Добавить группу**, а затем в области **Назначение политики для группировки** выполните указанные ниже действия.

    ![Снимок экрана: область "Редактирование параметров" с политикой собраний](media/batch-group-policy-assignment-edu-group.png)
    1. В диалоговом окне **Выбор группы** найдите и добавьте группу безопасности, которая включает в себя ваших сотрудников и преподавателей.
    2. В поле **выберите ранг** введите **1**.
    3. В диалоговом окне **Выбор политики** выберите **EducatorMeetingPolicy**.
    4. Нажмите кнопку **Применить**.

Чтобы удалить назначение групповой политики, на вкладке **назначение групповой политики** на странице Политика выберите назначение группы и нажмите кнопку **Удалить**.

Чтобы изменить ранжирование назначения группы, необходимо сначала удалить назначение групповой политики. Затем выполните описанные выше действия, чтобы назначить политику группе.

#### <a name="using-powershell"></a>Использование PowerShell

> [!NOTE]
> В настоящее время назначение политики для групп, использующих PowerShell, недоступно для всех типов политики Teams. Ознакомьтесь со списком " [New-CsGroupPolicyAssignment](https://docs.microsoft.com/powershell/module/teams/new-csgrouppolicyassignment) " для списка поддерживаемых типов политики.

##### <a name="install-and-connect-to-the-microsoft-teams-powershell-module"></a>Установка и подключение к модулю Microsoft Teams PowerShell

Выполните указанные ниже действия, чтобы установить [модуль PowerShell Teams](https://www.powershellgallery.com/packages/MicrosoftTeams) (если он еще не установлен). Убедитесь, что вы установили версию 1.0.5 или более поздней версии.

```powershell
Install-Module -Name MicrosoftTeams
```

Выполните указанные ниже действия, чтобы подключиться к Teams и начать сеанс.

```powershell
Connect-MicrosoftTeams
```

Когда вам будет предложено, войдите в систему с помощью учетных данных администратора.

##### <a name="assign-a-policy-to-a-group"></a>Назначение политики группе

Выполните указанные ниже действия, чтобы назначить политику собраний с именем EducatorMeetingPolicy группе безопасности, которая включает в себя ваших сотрудников и преподавателей, и установите для ранжирования назначение значение 1. Вы можете указать группу безопасности, используя идентификатор объекта, адрес SIP или адрес электронной почты. В этом примере мы используем адрес электронной почты (staff-faculty@contoso.com).

```powershell
New-CsGroupPolicyAssignment -GroupId staff-faculty@contoso.com -PolicyType TeamsMeetingPolicy -PolicyName "EducatorMeetingPolicy" -Rank 1
```

### <a name="remove-a-policy-that-was-directly-assigned-to-users"></a>Удаление политики, назначенной пользователям напрямую

Следует помнить, что если пользователю явно назначена политика (отдельно или по назначению), она имеет приоритет. Это означает, что если пользователю назначена политика собраний, которой вы непосредственно назначили, вам придется удалить эту политику на собрании от пользователя, прежде чем она сможет наследовать политику собраний из группы безопасности.

Чтобы узнать больше, ознакомьтесь [со статьей что нужно знать о назначении политики группам](assign-policies.md#what-you-need-to-know-about-policy-assignment-to-groups).

Выполните указанные ниже действия, чтобы удалить политику собраний, которая была непосредственно назначена вашим сотрудникам и преподавателям.

#### <a name="install-and-connect-to-the-microsoft-teams-powershell-module"></a>Установка и подключение к модулю Microsoft Teams PowerShell

Выполните указанные ниже действия, чтобы установить [модуль PowerShell Teams](https://www.powershellgallery.com/packages/MicrosoftTeams) (если он еще не установлен). Убедитесь, что вы установили версию 1.0.5 или более поздней версии.

```powershell
Install-Module -Name MicrosoftTeams
```

Выполните указанные ниже действия, чтобы подключиться к Teams и начать сеанс.

```powershell
Connect-MicrosoftTeams
```
Когда вам будет предложено, войдите в систему с помощью учетных данных администратора, используемых для подключения к Azure AD.

#### <a name="unassign-a-policy-that-was-directly-assigned-to-users"></a>Отмена назначения политики, непосредственно назначенной пользователям

Выполните описанные ниже действия, чтобы удалить политику собраний для пользователей, которым назначена эта политика напрямую. Вы можете указать пользователей по адресу электронной почты или ИДЕНТИФИКАТОРу объекта.

В этом примере политика собраний удаляется от пользователей, заданных их адресом электронной почты.

```powershell
$users_ids = @("reda@contoso.com", "nikica@contoso.com", "jamie@contoso.com")
New-CsBatchPolicyAssignmentOperation -PolicyType TeamsMeetingPolicy -PolicyName $null -Identity $users_ids -OperationName "Unassign meeting policy"
```

В этом примере политика собраний удаляется из списка пользователей в текстовом файле с именем user_ids.txt. 

```powershell
$user_ids = Get-Content .\users_ids.txt
New-CsBatchPolicyAssignmentOperation -PolicyType TeamsMeetingPolicy -PolicyName $null -Identity $users_ids -OperationName "Unassign meeting policy"
```

##### <a name="get-policy-assignments-for-a-group"></a>Получение назначений политики для группы

Выполните указанные ниже действия, чтобы просмотреть все политики, назначенные определенной группе безопасности. Обратите внимание, что группы всегда записываются в соответствии с их идентификатором группы, даже если для назначения политики был использован адрес SIP или адрес электронной почты.

```powershell
Get-CsGroupPolicyAssignment -GroupId staff-faculty@contoso.com

```

##### <a name="get-the-policies-assigned-to-a-user"></a>Получение политик, назначенных пользователю

Выполните указанные ниже действия, чтобы просмотреть все политики, назначенные определенному пользователю. В следующем примере показано, как получить политики, назначенные reda@contoso.com.

```powershell
Get-CsUserPolicyAssignment -Identity reda@contoso.com
```

## <a name="assign-a-policy-to-a-batch-of-users"></a>Назначение политики пакету пользователей

Выполните эти действия, чтобы назначить настраиваемую политику собраний с именем EducatorMeetingPolicy непосредственно сотрудникам и преподавателям в массовом режиме.

### <a name="using-powershell"></a>Использование PowerShell

#### <a name="connect-to-the-azure-ad-powershell-for-graph-module-and-the-teams-powershell-module"></a>Соединение с модулем Azure AD PowerShell для Graph и модулем Teams PowerShell

Перед выполнением действий, описанных в этой статье, необходимо установить и подключить модуль Azure AD PowerShell для Graph (для идентификации пользователей по назначенным им лицензиям) и модуль Microsoft Teams PowerShell (для назначения политик этим пользователям).

##### <a name="install-and-connect-to-the-azure-ad-powershell-for-graph-module"></a>Установка и подключение к модулю Azure AD PowerShell для Graph

Откройте командную команду Windows PowerShell с повышенными привилегиями (запустите Windows PowerShell от имени администратора), а затем выполните указанные ниже действия, чтобы установить модуль Azure Active Directory PowerShell для Graph.

```powershell
Install-Module -Name AzureAD
```

Выполните указанные ниже действия, чтобы подключиться к Azure AD.

```powershell
Connect-AzureAD
```

Когда вам будет предложено, войдите в систему с помощью учетных данных администратора.

Дополнительные сведения можно найти в разделе [подключение с помощью модуля Azure Active Directory PowerShell для Graph](https://docs.microsoft.com/office365/enterprise/powershell/connect-to-office-365-powershell#connect-with-the-azure-active-directory-powershell-for-graph-module).

##### <a name="install-and-connect-to-the-microsoft-teams-powershell-module"></a>Установка и подключение к модулю Microsoft Teams PowerShell

Выполните указанные ниже действия, чтобы установить [модуль PowerShell Teams](https://www.powershellgallery.com/packages/MicrosoftTeams) (если он еще не установлен). Убедитесь, что вы установили версию 1.0.5 или более поздней версии.

```powershell
Install-Module -Name MicrosoftTeams
```

Выполните указанные ниже действия, чтобы подключиться к Teams и начать сеанс.

```powershell
Connect-MicrosoftTeams
```
Когда вам будет предложено, войдите в систему с помощью учетных данных администратора, используемых для подключения к Azure AD.

#### <a name="identify-your-users"></a>Определение пользователей

Сначала выполните указанные ниже действия, чтобы идентифицировать сотрудников и преподавателей по типу лицензии. В этой статье рассказывается о том, какие SKU используются в вашей организации. Затем вы можете идентифицировать сотрудников и преподавателей, которым назначены номера SKU факультета.

```powershell
Get-AzureAdSubscribedSku | Select-Object -Property SkuPartNumber,SkuId
```

Возвращаемое значение.

```
SkuPartNumber      SkuId
-------------      -----
M365EDU_A5_FACULTY e97c048c-37a4-45fb-ab50-922fbf07a370
M365EDU_A5_STUDENT 46c119d4-0379-4a9d-85e4-97c66d3f909e
```

В этом примере вывод показывает, что лицензия факультета SkuId — "e97c048c-37a4-45fb-AB50-922fbf07a370".

> [!NOTE]
> Список материалов для образования и номер SKU можно найти в [справочнике по образованию SKU](sku-reference-edu.md).

Затем выполните указанные ниже действия, чтобы идентифицировать пользователей, у которых есть лицензия, и собирать их вместе.

```powershell
$faculty = Get-AzureADUser -All $true | Where-Object {($_.assignedLicenses).SkuId -contains "e97c048c-37a4-45fb-ab50-922fbf07a370"}
```

#### <a name="assign-a-policy-in-bulk"></a>Массовое назначение политики

Теперь пользователям можно назначать соответствующие политики. Максимальное количество пользователей, которым можно назначить или обновлять политики, составляет 5 000 за один раз. Например, если у вас более 5 000 сотрудников и преподавателей, вам нужно будет отправить несколько пакетов.

Выполните указанные ниже действия, чтобы назначить настраиваемую политику собраний с именем EducatorMeetingPolicy для сотрудников и преподавателей.

```powershell
New-CsBatchPolicyAssignmentOperation -PolicyType TeamsMeetingPolicy -PolicyName EducatorMeetingPolicy -Identity $faculty.ObjectId
```

> [!NOTE]
> Чтобы назначить другой тип политики в массовом режиме, например TeamsMessagingPolicy, необходимо изменить ```PolicyType``` политику, которую вы назначаете, и присвоить ей ```PolicyName``` имя политики.

#### <a name="get-the-status-of-a-bulk-assignment"></a>Получение состояния массового назначения

Каждое массовое назначение возвращает идентификатор операции, который можно использовать для отслеживания хода выполнения назначений политики или определения возможных сбоев. Например, выполните указанные ниже действия.

```powershell
Get-CsBatchPolicyAssignmentOperation -OperationId 3964004e-caa8-4eb4-b0d2-7dd2c8173c8c | fl
```

Чтобы просмотреть состояние назначения каждого пользователя в пакетной операции, выполните указанные ниже действия. Сведения о каждом пользователе находятся в ```UserState``` свойстве.

```powershell
Get-CsBatchPolicyAssignmentOperation -OperationId 3964004e-caa8-4eb4-b0d2-7dd2c8173c8c | Select -ExpandProperty UserState
```

#### <a name="assign-a-policy-in-bulk-if-you-have-more-than-5000-users"></a>Назначение политики в массовом режиме, если у вас более 5 000 пользователей

Сначала выполните указанные ниже действия, чтобы узнать, сколько у вас сотрудников и преподавателей.

```powershell
$faculty.count
```

Вместо того чтобы предоставлять весь список идентификаторов пользователей, выполните указанные ниже действия, чтобы указать первые 5 000, а затем следующие 5 000 и т. д.

```powershell
New-CsBatchPolicyAssignmentOperation -PolicyType TeamsMeetingPolicy -PolicyName EducatorMeetingPolicy -Identity $faculty[0..19999].ObjectId
```

Вы можете изменить диапазон идентификаторов пользователей, пока не дойдете до полного списка пользователей. Например, введите ```$faculty[0..4999``` первый пакет, ```$faculty[5000..9999``` который используется для второго пакета, введите ```$faculty[10000..14999``` третий пакет и т. д.

#### <a name="get-the-policies-assigned-to-a-user"></a>Получение политик, назначенных пользователю

Выполните указанные ниже действия, чтобы просмотреть все политики, назначенные определенному пользователю. В следующем примере показано, как получить политики, назначенные hannah@contoso.com.

```powershell
Get-CsUserPolicyAssignment -Identity hannah@contoso.com
```

## <a name="faq"></a>Вопросы и ответы

**Я не знаком с оболочкой PowerShell для Teams. Где можно найти дополнительные сведения?**

Общие сведения об использовании PowerShell для управления группами можно найти в разделе [Общие сведения о Teams PowerShell](teams-powershell-overview.md). Дополнительные сведения о командлетах, использованных в этой статье, можно найти в следующих статьях:

- [New-CsGroupPolicyAssignment](https://docs.microsoft.com/powershell/module/teams/new-csgrouppolicyassignment)
- [Get-CsGroupPolicyAssignment](https://docs.microsoft.com/powershell/module/teams/get-csgrouppolicyassignment)
- [New-CsBatchPolicyAssignmentOperation](https://docs.microsoft.com/powershell/module/teams/new-csbatchpolicyassignmentoperation)
- [Get-CsBatchPolicyAssignmentOperation](https://docs.microsoft.com/powershell/module/teams/get-csbatchpolicyassignmentoperation)
- [Get-CsUserPolicyAssignment](https://docs.microsoft.com/powershell/module/teams/get-csuserpolicyassignment)

## <a name="related-topics"></a>См. также

- [Назначение политик пользователям](assign-policies.md)
- [Политики групп и пакеты политик для образовательных учреждений](policy-packages-edu.md)
- [Управление политиками собраний в Teams](meeting-policies-in-teams.md)
