---
title: Настройка иерархии целей для команды
author: cichur
ms.author: v-cichur
manager: serdars
ms.topic: conceptual
ms.service: msteams
ms.reviewer: andfried, acolonna
search.appverid: MET150
description: Узнайте, как настроить иерархию групп в организации для публикации контента в большом наборе команд.
audience: admin
localization_priority: Normal
MS.collection:
- Teams_ITAdmin_Help
- M365-collaboration
appliesto:
- Microsoft Teams
ms.openlocfilehash: 63a9cf6cab1bfb50c17c8546a65ad50e41759edc
ms.sourcegitcommit: f0e5da6136656261567ffe0fa3f2fedd901209a8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/19/2021
ms.locfileid: "51891286"
---
# <a name="set-up-your-team-targeting-hierarchy"></a><span data-ttu-id="7bece-103">Настройка иерархии целей для команды</span><span class="sxs-lookup"><span data-stu-id="7bece-103">Set up your team targeting hierarchy</span></span>

<span data-ttu-id="7bece-104">Настройка иерархии целевой группы позволит вашей организации публиковать контент в большом наборе команд.</span><span class="sxs-lookup"><span data-stu-id="7bece-104">Setting up a team targeting hierarchy will allow your organization to publish content to a large set of teams.</span></span> <span data-ttu-id="7bece-105">Иерархия целевых групп определяет, как все группы в иерархии связаны друг с другом, какие пользователи могут публиковать задачи и на какие группы у пользователей есть разрешения на публикацию.</span><span class="sxs-lookup"><span data-stu-id="7bece-105">The team targeting hierarchy defines how all the teams in your hierarchy are related to each other, which users can publish tasks, and which teams users have permissions to publish to.</span></span> <span data-ttu-id="7bece-106">Функции публикации будут отключены для всех пользователей, если для вашей организации не настроена иерархия целевой группы.</span><span class="sxs-lookup"><span data-stu-id="7bece-106">Publishing features are disabled for all users unless a team targeting hierarchy is set up for your organization.</span></span> <span data-ttu-id="7bece-107">Чтобы настроить иерархию целевой группы, необходимо создать файл, определяющий ее, а затем добавить его в Teams, чтобы применить его к организации.</span><span class="sxs-lookup"><span data-stu-id="7bece-107">To set up a team targeting hierarchy, you'll need to create a file that defines the hierarchy and then upload it to Teams to apply it to your organization.</span></span> <span data-ttu-id="7bece-108">После добавления схемы приложения в Teams могут использовать ее.</span><span class="sxs-lookup"><span data-stu-id="7bece-108">After the schema is uploaded, apps within Teams can use it.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7bece-109">В первом выпуске только приложение "Задачи" поддерживает иерархические группы.</span><span class="sxs-lookup"><span data-stu-id="7bece-109">For the initial release, only the Tasks app supports hierarchical teams.</span></span>  <span data-ttu-id="7bece-110">Применение иерархии целевой группы к организации позволит публиковать [задачи](https://support.microsoft.com/office/publish-task-lists-to-create-and-track-work-in-your-organization-095409b3-f5af-40aa-9f9e-339b54e705df) в приложении "Задачи".</span><span class="sxs-lookup"><span data-stu-id="7bece-110">Applying a team targeting hierarchy to your organization will enable [task publishing](https://support.microsoft.com/office/publish-task-lists-to-create-and-track-work-in-your-organization-095409b3-f5af-40aa-9f9e-339b54e705df) in the Tasks app.</span></span> <span data-ttu-id="7bece-111">Иерархия команд в других областях не будет Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="7bece-111">You won't see a hierarchy of teams in other areas of Microsoft Teams.</span></span>

<span data-ttu-id="7bece-112">Ниже представлен пример представления иерархии в приложении "Задачи" Teams.</span><span class="sxs-lookup"><span data-stu-id="7bece-112">Here's an example of how the hierarchy is represented in the Tasks app in Teams.</span></span> <span data-ttu-id="7bece-113">После создания списка задач участники группы публикации могут выбрать группы получателей для отправки (публикации) списка задач.</span><span class="sxs-lookup"><span data-stu-id="7bece-113">After a task list is created, members of the publishing team can then select the recipient teams to send (publish) the task list to.</span></span> <span data-ttu-id="7bece-114">При выборе команд команда публикации может фильтроваться по иерархии, атрибутам или сочетанию обеих команд.</span><span class="sxs-lookup"><span data-stu-id="7bece-114">When selecting teams, the publishing team can filter by hierarchy, by attributes, or a combination of both.</span></span><br>

![Снимок экрана: публикация задачи](media/manage-tasks-app-publish.png)

## <a name="terminology"></a><span data-ttu-id="7bece-116">Терминологии</span><span class="sxs-lookup"><span data-stu-id="7bece-116">Terminology</span></span>

<span data-ttu-id="7bece-117">При навигации по иерархиям важно использовать следующие термины:</span><span class="sxs-lookup"><span data-stu-id="7bece-117">The following terms will be important as you navigate hierarchies.</span></span> <span data-ttu-id="7bece-118">Teams будут называться **узлами.**</span><span class="sxs-lookup"><span data-stu-id="7bece-118">Teams will be referred to as **nodes**.</span></span>

* <span data-ttu-id="7bece-119">**Корневые узлы** — это верхние узлы в иерархии.</span><span class="sxs-lookup"><span data-stu-id="7bece-119">**Root nodes** are the topmost nodes in the hierarchy.</span></span> <span data-ttu-id="7bece-120">В этом примере Retail Communications — это корневой узел.</span><span class="sxs-lookup"><span data-stu-id="7bece-120">In the example, Retail Communications is a root node.</span></span>
* <span data-ttu-id="7bece-121">**Родительские и** **родительские узлы —** это термины, которые представляют связь между двумя подключенными узлами.</span><span class="sxs-lookup"><span data-stu-id="7bece-121">**Parent nodes** and **child nodes** are terms that represent a relationship between two connected nodes.</span></span> <span data-ttu-id="7bece-122">В этом примере Район 01 — это ребенок, узел области 1.</span><span class="sxs-lookup"><span data-stu-id="7bece-122">In the example, District 01 is a child node of Area 1.</span></span>
* <span data-ttu-id="7bece-123">Несколько уровней детей называются **потомками.**</span><span class="sxs-lookup"><span data-stu-id="7bece-123">Multiple levels of children are referred to as **descendants**.</span></span> <span data-ttu-id="7bece-124">Район 01, Магазин 01, Магазин 03, Магазин 07, Район 02 и Район 03 — это все районы, которые являются частью 1.</span><span class="sxs-lookup"><span data-stu-id="7bece-124">District 01, Store 01, Store 03, Store 07, District 02, and District 03 are all descendants of Area 1.</span></span>
* <span data-ttu-id="7bece-125">Узел без детей называется узлом **листа**.</span><span class="sxs-lookup"><span data-stu-id="7bece-125">A node with no children is called a **leaf node**.</span></span> <span data-ttu-id="7bece-126">Они находятся в нижней части иерархии.</span><span class="sxs-lookup"><span data-stu-id="7bece-126">They are at the bottom of a hierarchy.</span></span>
* <span data-ttu-id="7bece-127">**Группы получателей** — это группы, которые были выбраны для получения определенного набора содержимого для публикации.</span><span class="sxs-lookup"><span data-stu-id="7bece-127">**Recipient teams** are teams that have been selected to receive a specific set of content to be published.</span></span> <span data-ttu-id="7bece-128">Это должны быть узлы с листами.</span><span class="sxs-lookup"><span data-stu-id="7bece-128">They must be leaf nodes.</span></span>

## <a name="plan-your-hierarchy"></a><span data-ttu-id="7bece-129">Планирование иерархии</span><span class="sxs-lookup"><span data-stu-id="7bece-129">Plan your hierarchy</span></span>

<span data-ttu-id="7bece-130">Перед созданием схемы, определяемой иерархией, необходимо спланируя схему и решим, как вы хотите сформировать свою организацию.</span><span class="sxs-lookup"><span data-stu-id="7bece-130">Before you create the schema that defines your hierarchy, you need to do some planning and decide how you want to shape your organization.</span></span>  <span data-ttu-id="7bece-131">Одним из первых приоритетов является выбор того, какие группы организации должны публиковать задачи в других группах.</span><span class="sxs-lookup"><span data-stu-id="7bece-131">One of the first priorities is deciding which organizational groups need to publish tasks to other groups.</span></span> <span data-ttu-id="7bece-132">Каждый узел в иерархии представляет рабочую группу или группу.</span><span class="sxs-lookup"><span data-stu-id="7bece-132">Each node in the hierarchy represents a working group or group of groups.</span></span>

### <a name="permissions-to-publish"></a><span data-ttu-id="7bece-133">Разрешения на публикацию</span><span class="sxs-lookup"><span data-stu-id="7bece-133">Permissions to publish</span></span>

<span data-ttu-id="7bece-134">Разрешение на публикацию зависит от того, является ли пользователь участником какой-либо команды в иерархии, а также от отношения этой команды или набора команд к другим командам в иерархии.</span><span class="sxs-lookup"><span data-stu-id="7bece-134">Permission to publish depends on whether a user is a member of any teams in the hierarchy plus the relationship of that team or set of teams to other teams in the hierarchy.</span></span>

> [!NOTE]
> <span data-ttu-id="7bece-135">Владельцу группы также предоставлены разрешения на публикацию.</span><span class="sxs-lookup"><span data-stu-id="7bece-135">The owner of a team is also granted publishing permissions.</span></span>

* <span data-ttu-id="7bece-136">Если пользователь входит по крайней мере в одну команду, которая имеет по крайней мере одну команду с помыками в иерархии, этот пользователь может публиковать публикацию в этих пользователях, не в том числе в состав всех команд, в которые он хочет опубликовать.</span><span class="sxs-lookup"><span data-stu-id="7bece-136">If a user is a member of at least one team that has descendants in the hierarchy, that user can publish to those descendants without being a member of all teams they want to publish to.</span></span>
* <span data-ttu-id="7bece-137">Если пользователь является участником хотя бы одной команды в иерархии, но не является участником какой-либо группы с иерархией, он может видеть и получать опубликованное содержимое из своей организации.</span><span class="sxs-lookup"><span data-stu-id="7bece-137">If a user is a member of a least one team in the hierarchy but isn't a member of any team with descendants in the hierarchy, that user can see and receive published content from their organization.</span></span>
* <span data-ttu-id="7bece-138">Если пользователь не является участником какой-либо группы в иерархии, он не увидит функции, связанные с публикацией.</span><span class="sxs-lookup"><span data-stu-id="7bece-138">If a user isn't a member of any team in the hierarchy, that user won't see any publishing-related functionality.</span></span>

### <a name="guidelines"></a><span data-ttu-id="7bece-139">Руководящие принципы</span><span class="sxs-lookup"><span data-stu-id="7bece-139">Guidelines</span></span>

* <span data-ttu-id="7bece-140">В организации может быть только один файл иерархии.</span><span class="sxs-lookup"><span data-stu-id="7bece-140">There can only be one hierarchy file applied per organization.</span></span> <span data-ttu-id="7bece-141">Однако вы можете использовать разные части организации как отдельные иерархии узлов в одном CSV-файле.</span><span class="sxs-lookup"><span data-stu-id="7bece-141">However, you can include different parts of your organization together as distinct hierarchies of nodes within one CSV file.</span></span> <span data-ttu-id="7bece-142">Например, у компании Contoso Pharmaceuticals есть корневый узел "Корневая сеть" и корневой узел Retail.</span><span class="sxs-lookup"><span data-stu-id="7bece-142">For example, Contoso Pharmaceuticals has a Pharmacy root node and a Retail root node.</span></span> <span data-ttu-id="7bece-143">Оба корневых узла имеют несколько строк корневых узлов, и между ними нет перекрытие.</span><span class="sxs-lookup"><span data-stu-id="7bece-143">Both root nodes have multiple rows of descendants and there's no overlap between them.</span></span>
* <span data-ttu-id="7bece-144">Получателями публикации могут быть только узлы с листами.</span><span class="sxs-lookup"><span data-stu-id="7bece-144">Only leaf nodes can be recipients of a publication.</span></span> <span data-ttu-id="7bece-145">Другие узлы в иерархии полезны для выбора получателей публикации.</span><span class="sxs-lookup"><span data-stu-id="7bece-145">Other nodes in the hierarchy are helpful for selecting recipients of a publication.</span></span>
* <span data-ttu-id="7bece-146">В иерархии команда может быть представлена только один раз.</span><span class="sxs-lookup"><span data-stu-id="7bece-146">A team can only be represented one time in a hierarchy.</span></span>
* <span data-ttu-id="7bece-147">Иерархия может содержать до 15 000 узлов.</span><span class="sxs-lookup"><span data-stu-id="7bece-147">A hierarchy can contain up to 15,000 nodes.</span></span> <span data-ttu-id="7bece-148">Мы планируем вместе с клиентами повысить это ограничение для крупных организаций.</span><span class="sxs-lookup"><span data-stu-id="7bece-148">We plan to work with customers to raise this limit for larger organizations.</span></span>

### <a name="example-hierarchy"></a><span data-ttu-id="7bece-149">Пример иерархии</span><span class="sxs-lookup"><span data-stu-id="7bece-149">Example hierarchy</span></span>

<span data-ttu-id="7bece-150">Например, в следующей иерархии команды "Отзыв", "Связь" и "Отдел кадров" могут публиковать задачи на всех нижних узлах (группах) в иерархии, но в северо-восточной зоне можно публиковать задачи только в командах Магазина Нью-Йорк и Магазина Москвы.</span><span class="sxs-lookup"><span data-stu-id="7bece-150">For example, in the following hierarchy, Recall, Communications, and HR can publish tasks to every bottom node (team) in the hierarchy, but Northeast Zone can only publish tasks to the New York Store and Boston Store teams.</span></span> <span data-ttu-id="7bece-151">Иерархия примера позволяет группам отзыва, связи и отдела кадров публиковать задачи, применимые к всей компании, например сведения о преимуществах или сообщения от директора.</span><span class="sxs-lookup"><span data-stu-id="7bece-151">The example hierarchy allows the Recall, Communications, and HR groups to publish tasks that apply to the entire company, such as benefits information or messages from the CEO.</span></span> <span data-ttu-id="7bece-152">В северо-восточной зоне можно публиковать такие задачи, как планирование персонала, сведения о погоде и так далее, только в командах Магазина Нью-Йорк и Store.</span><span class="sxs-lookup"><span data-stu-id="7bece-152">Northeast Zone can publish tasks like personnel scheduling, weather information, and so on, only to the New York Store and Boston Store teams.</span></span>

![Пример иерархической команды](media/team-targeting-schema-example-new.png)

## <a name="create-your-hierarchy"></a><span data-ttu-id="7bece-154">Создание иерархии</span><span class="sxs-lookup"><span data-stu-id="7bece-154">Create your hierarchy</span></span>

> [!NOTE]
> <span data-ttu-id="7bece-155">В оставшейся части этой статьи обсуждается настройка иерархии группы в контексте публикации задач в командах получателей.</span><span class="sxs-lookup"><span data-stu-id="7bece-155">The remainder of this article discusses setting up a team hierarchy in the context of publishing tasks to recipient teams.</span></span> <span data-ttu-id="7bece-156">Общие сведения о приложении "Задачи", в котором при включенной функции публикации [задач отображается Teams,](./manage-tasks-app.md) можно найти в приложении "Управление задачами" в Teams.</span><span class="sxs-lookup"><span data-stu-id="7bece-156">Refer to [Manage the Tasks app for your organization in Teams](./manage-tasks-app.md) for an overview of the Tasks app, where task publishing appears when enabled.</span></span>

<span data-ttu-id="7bece-157">Схема, определяемая иерархией, основана на CSV-файле.</span><span class="sxs-lookup"><span data-stu-id="7bece-157">The schema that defines your hierarchy is based on a comma-separated values (CSV) file.</span></span> <span data-ttu-id="7bece-158">Каждая строка в CSV-файле соответствует одному узлу в иерархии команд.</span><span class="sxs-lookup"><span data-stu-id="7bece-158">Each row in the CSV file corresponds to one node within the hierarchy of teams.</span></span> <span data-ttu-id="7bece-159">В каждой строке содержится информация, которая содержит имя узла в иерархии, при желании связывает его с командой и атрибуты, которые можно использовать для фильтрации команд в приложениях, поддерживаюх эту функцию.</span><span class="sxs-lookup"><span data-stu-id="7bece-159">Each row contains information that names the node within the hierarchy, optionally links it to a team, and includes attributes that can be used to filter teams in apps that support it.</span></span>

<span data-ttu-id="7bece-160">Вы также можете определить сегменты **,** которые являются категориями, которые группа публикации может использовать для организации контента, отправленного в группы получателей, чтобы упростить для них просмотр, сортировку и фокус на релевантном контенте.</span><span class="sxs-lookup"><span data-stu-id="7bece-160">You can also define **buckets**, which are categories that the publishing team can use to organize content sent to recipient teams to make it easier for them to view, sort, and focus on relevant content.</span></span>

### <a name="add-required-columns"></a><span data-ttu-id="7bece-161">Добавление необходимых столбцов</span><span class="sxs-lookup"><span data-stu-id="7bece-161">Add required columns</span></span>

<span data-ttu-id="7bece-162">CSV-файл должен содержать три столбца в следующем порядке, начиная с первого.</span><span class="sxs-lookup"><span data-stu-id="7bece-162">The CSV file must contain the following three columns, in the following order, starting at the first column.</span></span> <span data-ttu-id="7bece-163">Для получения задач узел должен быть связан с командой.</span><span class="sxs-lookup"><span data-stu-id="7bece-163">A node must be linked to a team for it to receive tasks.</span></span>

| <span data-ttu-id="7bece-164">Имя столбца</span><span class="sxs-lookup"><span data-stu-id="7bece-164">Column name</span></span>   | <span data-ttu-id="7bece-165">Обязательный?</span><span class="sxs-lookup"><span data-stu-id="7bece-165">Required</span></span> | <span data-ttu-id="7bece-166">Описание</span><span class="sxs-lookup"><span data-stu-id="7bece-166">Description</span></span>   |
----------------|----------|---------------|
| <span data-ttu-id="7bece-167">DisplayName</span><span class="sxs-lookup"><span data-stu-id="7bece-167">DisplayName</span></span>    | <span data-ttu-id="7bece-168">Да</span><span class="sxs-lookup"><span data-stu-id="7bece-168">Yes</span></span>      | <span data-ttu-id="7bece-169">Это поле называется узлом.</span><span class="sxs-lookup"><span data-stu-id="7bece-169">This field is the name of the node.</span></span> <span data-ttu-id="7bece-170">Имя может содержать не более 100 символов и содержать только символы A-Z, a-z и 0–9.</span><span class="sxs-lookup"><span data-stu-id="7bece-170">The name can be up to 100 characters long and contain only the characters A-Z, a-z, and 0-9.</span></span> <span data-ttu-id="7bece-171">Имена узлов должны быть уникальными.</span><span class="sxs-lookup"><span data-stu-id="7bece-171">Node names must be unique.</span></span> |
| <span data-ttu-id="7bece-172">ParentName</span><span class="sxs-lookup"><span data-stu-id="7bece-172">ParentName</span></span>    | <span data-ttu-id="7bece-173">Да</span><span class="sxs-lookup"><span data-stu-id="7bece-173">Yes</span></span>       | <span data-ttu-id="7bece-174">Это имя родительского узла.</span><span class="sxs-lookup"><span data-stu-id="7bece-174">This is the name of the parent node.</span></span> <span data-ttu-id="7bece-175">Это значение должно точно соответствовать значению в поле **DisplayName** родительского узла.</span><span class="sxs-lookup"><span data-stu-id="7bece-175">The value you specify here must match the value in the **DisplayName** field of the parent node exactly.</span></span> <span data-ttu-id="7bece-176">Если вы хотите добавить несколько родительских узлов, разделите их имена точками с за semicolon (;).</span><span class="sxs-lookup"><span data-stu-id="7bece-176">If you want to add more than one parent node, separate each parent node name with a semicolon (;).</span></span> <span data-ttu-id="7bece-177">Вы можете добавить до 25 родительских узлов, а каждое имя родительского узла может иметь длину до 2500 символов.</span><span class="sxs-lookup"><span data-stu-id="7bece-177">You can add up to 25 parent nodes, and each parent node name can be up to 2500 characters long.</span></span> <span data-ttu-id="7bece-178">Узел может иметь несколько родительских узлов, только если родительские узлы являются корневыми узлами.</span><span class="sxs-lookup"><span data-stu-id="7bece-178">A node can have multiple parent nodes only if the parent nodes are root nodes.</span></span>   <br><br><span data-ttu-id="7bece-179">**ВАЖНО!** Будьте осторожны, чтобы не создать цикл, в котором родительский узел выше в иерархии ссылается на child node lower in the hierarchy.</span><span class="sxs-lookup"><span data-stu-id="7bece-179">**IMPORTANT** Be careful not to create a loop where a parent higher up in the hierarchy references a child node lower in the hierarchy.</span></span> <span data-ttu-id="7bece-180">Это не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="7bece-180">This isn't supported.</span></span> |
| <span data-ttu-id="7bece-181">TeamId</span><span class="sxs-lookup"><span data-stu-id="7bece-181">TeamId</span></span>        | <span data-ttu-id="7bece-182">Да, если группа публикует задачи или получает задачи из родительского узла</span><span class="sxs-lookup"><span data-stu-id="7bece-182">Yes, if the team publishes tasks or receives tasks from a parent node</span></span>       | <span data-ttu-id="7bece-183">Он содержит ИД группы, с ней нужно связать узел.</span><span class="sxs-lookup"><span data-stu-id="7bece-183">This contains the ID of the team you want to link a node to.</span></span> <span data-ttu-id="7bece-184">Каждый узел должен ссылаться на уникальную команду, поэтому каждое значение TeamId может отображаться в файле иерархии только один раз.</span><span class="sxs-lookup"><span data-stu-id="7bece-184">Each node must refer to a unique team, so each TeamId value may appear only once in the hierarchy file.</span></span> <span data-ttu-id="7bece-185">Чтобы получить ИД группы, с которая будет связывать узел, запустите следующую команду PowerShell: `Get-Team | Export-Csv TeamList.csv` .</span><span class="sxs-lookup"><span data-stu-id="7bece-185">To get the ID of a team you want to link a node to, run the following PowerShell command: `Get-Team | Export-Csv TeamList.csv`.</span></span> <span data-ttu-id="7bece-186">Эта команда содержит список команд в организации, а также имя и ИД каждой из них.</span><span class="sxs-lookup"><span data-stu-id="7bece-186">This command lists the teams in your organization and includes the name and ID for each team.</span></span> <span data-ttu-id="7bece-187">Найдите имя группы, с командой, с которая вы хотите связаться, а затем скопируйте в это поле ИД.</span><span class="sxs-lookup"><span data-stu-id="7bece-187">Find the name of the team you want to link to, and then copy the ID into this field.</span></span>|

> [!NOTE]
> <span data-ttu-id="7bece-188">Если узел не является корневым узлом или узлом листа и вам не требуется, чтобы члены группы предоставили соответствующие разрешения на публикацию и отчеты, вы можете оставить TeamId пустым.</span><span class="sxs-lookup"><span data-stu-id="7bece-188">If a node isn't a root node or a leaf node and you don't need the team membership to grant the corresponding permissions for publishing and reporting, you can leave the TeamId blank.</span></span> <span data-ttu-id="7bece-189">Этот метод можно использовать для более детального выбора групп получателей или просмотра отчетов о завершении без на то, чтобы у них не было соответствующей команды.</span><span class="sxs-lookup"><span data-stu-id="7bece-189">This method can be used to add more granularity when choosing recipient teams or for viewing completion reports without having a corresponding team.</span></span>

### <a name="add-attribute-columns"></a><span data-ttu-id="7bece-190">Добавление столбцов атрибутов</span><span class="sxs-lookup"><span data-stu-id="7bece-190">Add attribute columns</span></span>

<span data-ttu-id="7bece-191">После добавления трех необходимых столбцов можно добавить необязательные столбцы атрибутов.</span><span class="sxs-lookup"><span data-stu-id="7bece-191">After you add the three required columns, you can add optional attribute columns.</span></span> <span data-ttu-id="7bece-192">Эти атрибуты можно использовать для фильтрации узлов, чтобы можно было легко выбрать те из них, на которые вы хотите опубликовать задачи.</span><span class="sxs-lookup"><span data-stu-id="7bece-192">These attributes can be used to filter nodes so that you can more easily select the ones you want to publish tasks to.</span></span> <span data-ttu-id="7bece-193">Существует два способа определения атрибутов в зависимости от того, являются ли значения для этого атрибута взаимоисключающими.</span><span class="sxs-lookup"><span data-stu-id="7bece-193">There are two ways to define your attributes, depending on whether values for that attribute are mutually exclusive.</span></span>

|<span data-ttu-id="7bece-194">Способы добавления атрибутов</span><span class="sxs-lookup"><span data-stu-id="7bece-194">Ways to add attributes</span></span>|<span data-ttu-id="7bece-195">Описание</span><span class="sxs-lookup"><span data-stu-id="7bece-195">Description</span></span> |<span data-ttu-id="7bece-196">Пример</span><span class="sxs-lookup"><span data-stu-id="7bece-196">Example</span></span>  |
|---|---------|---------|
|<span data-ttu-id="7bece-197">Если значения атрибута являются взаимоисключающими, имя заемного столбца становится именем атрибута.</span><span class="sxs-lookup"><span data-stu-id="7bece-197">If the values for an attribute are mutually exclusive, the column name you specify becomes the name of the attribute.</span></span>|<span data-ttu-id="7bece-198">Каждая строка может содержать одно значение для этого атрибута, а каждый столбец атрибута может содержать до 50 уникальных значений.</span><span class="sxs-lookup"><span data-stu-id="7bece-198">Each row can contain one value for that attribute, and each attribute column can have up to 50 unique values.</span></span> <span data-ttu-id="7bece-199">Каждое значение может иметь длину до 100 знаков.</span><span class="sxs-lookup"><span data-stu-id="7bece-199">Each value can be up to 100 characters long.</span></span> <span data-ttu-id="7bece-200">Набор значений атрибутов, которые вы указываете в столбце атрибута, будет отображаться в качестве значений фильтра для этого атрибута при выборе команд получателей с помощью иерархии целевой группы.</span><span class="sxs-lookup"><span data-stu-id="7bece-200">The set of attribute values you specify in the attribute column will be displayed as filter values for that attribute when selecting recipient teams using the team targeting hierarchy.</span></span>|<span data-ttu-id="7bece-201">Вы хотите, чтобы пользователи могли фильтровать хранилища по макетам.</span><span class="sxs-lookup"><span data-stu-id="7bece-201">You want users to be able to filter stores by layout.</span></span> <span data-ttu-id="7bece-202">Значения этого атрибута являются взаимоисключающими, так как магазин может иметь только один макет.</span><span class="sxs-lookup"><span data-stu-id="7bece-202">The values for this attribute are mutually exclusive because a store can have only one layout.</span></span> <br><br><span data-ttu-id="7bece-203">Чтобы добавить атрибут для фильтрации хранилищ по макету, добавьте столбец "Макет Магазина".</span><span class="sxs-lookup"><span data-stu-id="7bece-203">To add an attribute to filter stores by layout, add a column named Store layout.</span></span> <span data-ttu-id="7bece-204">В этом примере атрибут Store layout имеет такие значения: Сжатая, Стандартная и Большая.</span><span class="sxs-lookup"><span data-stu-id="7bece-204">In this example, values for the Store layout attribute are Compact, Standard, and Large.</span></span>
|<span data-ttu-id="7bece-205">Если необходимо указать несколько значений для атрибута и они не являются взаимоисключающими, используйте формат **AttributeName:UniqueValue** для имен столбцов.</span><span class="sxs-lookup"><span data-stu-id="7bece-205">If you need to indicate multiple values for an attribute and the values aren't mutually exclusive, use the **AttributeName:UniqueValue** format for the column names.</span></span> <br><br><span data-ttu-id="7bece-206">**ВАЖНО!** Убедитесь, что используется двоеточие только на английском языке (:) поскольку Юникод не поддерживается в качестве разных столбцов атрибутов.</span><span class="sxs-lookup"><span data-stu-id="7bece-206">**IMPORTANT** Make sure to use the English-only colon (:) as unicode isn't supported as an attribute column delimiter.</span></span> |<span data-ttu-id="7bece-207">Текстовая строка перед двоеточием (:) становится именем атрибута.</span><span class="sxs-lookup"><span data-stu-id="7bece-207">The text string before the colon (:) becomes the name of the attribute.</span></span> <span data-ttu-id="7bece-208">Все столбцы, содержащие одинаковые текстовые строки перед двоеточиями (:) группуются в раздел в меню фильтрации.</span><span class="sxs-lookup"><span data-stu-id="7bece-208">All columns that contain the same text string before the colons (:) are grouped together into a section in the filtering menu.</span></span> <span data-ttu-id="7bece-209">Каждая строка после двоеточия становится значениями для этого раздела.</span><span class="sxs-lookup"><span data-stu-id="7bece-209">Each of the strings after the colon become the values for that section.</span></span><br><br><span data-ttu-id="7bece-210">Каждая строка может иметь значение 0 (ноль) или 1 для этого атрибута.</span><span class="sxs-lookup"><span data-stu-id="7bece-210">Each row can have a value of 0 (zero) or 1 for that attribute.</span></span> <span data-ttu-id="7bece-211">Значение 0 означает, что атрибут не применяется к узлу, а значение 1 означает, что атрибут применяется к этому узлу.</span><span class="sxs-lookup"><span data-stu-id="7bece-211">A value of 0 means that the attribute doesn't apply to the node and a value of 1 means that the attribute applies to that node.</span></span>|<span data-ttu-id="7bece-212">Вы хотите, чтобы пользователи могли фильтровать хранилища по отделам.</span><span class="sxs-lookup"><span data-stu-id="7bece-212">You want users to be able to filter stores by department.</span></span> <span data-ttu-id="7bece-213">Магазин может иметь несколько отделов, поэтому значения этого атрибута не являются взаимоисключающими.</span><span class="sxs-lookup"><span data-stu-id="7bece-213">A store can have multiple departments and so the values for this attribute aren't mutually exclusive.</span></span><br><br><span data-ttu-id="7bece-214">В этом примере мы добавляем столбцы атрибутов Departments:Платежная система, Departments:Electronics, Departments:Foods, Departments:Home and Garden, Departments:Goods.</span><span class="sxs-lookup"><span data-stu-id="7bece-214">In this example, we add Departments:Clothing, Departments:Electronics, Departments:Foods, Departments:Home and Garden, Departments:Sporting goods as attribute columns.</span></span> <span data-ttu-id="7bece-215">Отделы становятся именем атрибута, и пользователи могут фильтровать их по отделам "Товары", "Электронная компания", "Еда", "Главная" и "Огород".</span><span class="sxs-lookup"><span data-stu-id="7bece-215">Departments becomes the attribute name and users can filter by the Clothing, Electronics, Foods, Home and Garden, and Sporting goods departments.</span></span>|

<span data-ttu-id="7bece-216">При добавлении столбца атрибутов помните следующее:</span><span class="sxs-lookup"><span data-stu-id="7bece-216">When you add an attribute column, keep the following in mind:</span></span>

* <span data-ttu-id="7bece-217">Имя столбца, которое вы указываете, или имя столбца, которое вы указываете перед двоеточием (:) становится именем атрибута.</span><span class="sxs-lookup"><span data-stu-id="7bece-217">The column name you specify or the column name that you specify before the colon (:) becomes the name of the attribute.</span></span> <span data-ttu-id="7bece-218">Это значение будет отображаться в Teams, которые используют иерархию.</span><span class="sxs-lookup"><span data-stu-id="7bece-218">This value will be displayed in the Teams apps that use the hierarchy.</span></span>
* <span data-ttu-id="7bece-219">В иерархии может быть до 50 столбцов атрибутов.</span><span class="sxs-lookup"><span data-stu-id="7bece-219">You can have up to 50 attribute columns in your hierarchy.</span></span>
* <span data-ttu-id="7bece-220">Имя столбца может содержать не более 100 символов и содержать только символы A-Z, a-z и 0–9, а также пробелы.</span><span class="sxs-lookup"><span data-stu-id="7bece-220">The column name can be up to 100 characters long and contain only the characters A-Z, a-z, and 0-9, and spaces.</span></span> <span data-ttu-id="7bece-221">Имена столбцов должны быть уникальными.</span><span class="sxs-lookup"><span data-stu-id="7bece-221">Column names must be unique.</span></span>

### <a name="add-bucket-columns"></a><span data-ttu-id="7bece-222">Добавление столбцов сегмента</span><span class="sxs-lookup"><span data-stu-id="7bece-222">Add bucket columns</span></span>

<span data-ttu-id="7bece-223">Вы можете добавить столбцы сегментов для создания сегментов, которые являются группировками, в которые можно организовать задачи.</span><span class="sxs-lookup"><span data-stu-id="7bece-223">You can add bucket columns to create buckets, which are groupings into which tasks can be organized.</span></span> <span data-ttu-id="7bece-224">Каждый сегмент получает свой столбец в CSV-файле.</span><span class="sxs-lookup"><span data-stu-id="7bece-224">Each bucket gets its own column in the CSV file.</span></span> <span data-ttu-id="7bece-225">Сегменты, которые вы создаете, доступны группе публикации.</span><span class="sxs-lookup"><span data-stu-id="7bece-225">The buckets you create are made available to the publishing team.</span></span> <span data-ttu-id="7bece-226">После этого команда публикации может классифицировать задачи для команд получателей с помощью этих сегментов.</span><span class="sxs-lookup"><span data-stu-id="7bece-226">The publishing team can then use these buckets to categorize tasks for the recipient teams.</span></span> <span data-ttu-id="7bece-227">Если в группе еще нет сегмента, сегменты создаются по запросу при публикации задач.</span><span class="sxs-lookup"><span data-stu-id="7bece-227">If a bucket doesn't already exist on a team, buckets are created on-demand when tasks are published.</span></span>

<span data-ttu-id="7bece-228">Централизованно классифицируя элементы работы по категориям, группа публикации может предварительно упорядоизировать список задач для всех десятков, сотен или тысяч команд получателей, которые получают список задач.</span><span class="sxs-lookup"><span data-stu-id="7bece-228">By categorizing the work items one time centrally, the publishing team can pre-organize the task list for all the tens, hundreds, or thousands of recipient teams that receive the task list.</span></span> <span data-ttu-id="7bece-229">Затем группы получателей могут сортировать и фильтровать свои задачи по сегментам, чтобы сосредоточиться на области, наиболее релевантной к их работе.</span><span class="sxs-lookup"><span data-stu-id="7bece-229">The recipient teams can then sort and filter their tasks by bucket to focus on the area most relevant to their work.</span></span>

<span data-ttu-id="7bece-230">При добавлении столбца сегмента обратите внимание на следующее:</span><span class="sxs-lookup"><span data-stu-id="7bece-230">When you add a bucket column, note the following:</span></span>

* <span data-ttu-id="7bece-231">Имя столбца становится именем сегмента.</span><span class="sxs-lookup"><span data-stu-id="7bece-231">The column name becomes the name of the bucket.</span></span> <span data-ttu-id="7bece-232">Каждый из них будет отображаться в списке Сегменты в Teams, которые используют иерархию.</span><span class="sxs-lookup"><span data-stu-id="7bece-232">Each bucket you specify will appear in the Buckets list in the Teams apps that use the hierarchy.</span></span>
* <span data-ttu-id="7bece-233">Не рекомендуется включать конфиденциальную информацию в названия сегментов.</span><span class="sxs-lookup"><span data-stu-id="7bece-233">We recommend that you don't include sensitive information in bucket names.</span></span> <span data-ttu-id="7bece-234">В настоящее время группы публикации не могут удалить сегмент путем публикации после его создания.</span><span class="sxs-lookup"><span data-stu-id="7bece-234">At this time, publishing teams can't remove a bucket through publishing after it's created.</span></span>
* <span data-ttu-id="7bece-235">Перед именем столбца должен быть хэштег (#).</span><span class="sxs-lookup"><span data-stu-id="7bece-235">The column name must be preceded by a hashtag (#).</span></span> <span data-ttu-id="7bece-236">Оно может содержать не более 100 символов и содержать только символы A-Z, a-z и 0–9.</span><span class="sxs-lookup"><span data-stu-id="7bece-236">It can be up to 100 characters long and contain only the characters A-Z, a-z, and 0-9.</span></span> <span data-ttu-id="7bece-237">Например, #Operations и #Frozen товары.</span><span class="sxs-lookup"><span data-stu-id="7bece-237">For example, #Operations and #Frozen Goods.</span></span>
* <span data-ttu-id="7bece-238">Иерархия может содержать до 25 столбцов сегментов.</span><span class="sxs-lookup"><span data-stu-id="7bece-238">A hierarchy may contain up to 25 bucket columns.</span></span> <span data-ttu-id="7bece-239">Мы планируем вместе с клиентами увеличить это ограничение для крупных организаций.</span><span class="sxs-lookup"><span data-stu-id="7bece-239">We plan to work with customers to increase this limit for larger organizations.</span></span>

### <a name="example"></a><span data-ttu-id="7bece-240">Пример</span><span class="sxs-lookup"><span data-stu-id="7bece-240">Example</span></span>

<span data-ttu-id="7bece-241">Ниже показан пример CSV-файла схемы, который будет создан для поддержки иерархии, показанной на предыдущем изображении.</span><span class="sxs-lookup"><span data-stu-id="7bece-241">Here's an example of a schema CSV file that would be created to support the hierarchy shown in the previous image.</span></span> <span data-ttu-id="7bece-242">Эта схема содержит следующие данные:</span><span class="sxs-lookup"><span data-stu-id="7bece-242">This schema contains the following:</span></span>

* <span data-ttu-id="7bece-243">Три необходимых столбца с `TargetName` `ParentName` именем , и `TeamId`</span><span class="sxs-lookup"><span data-stu-id="7bece-243">Three required columns named `TargetName`, `ParentName`, and `TeamId`</span></span>
* <span data-ttu-id="7bece-244">Три столбца атрибутов `Store layout` с `Departments:Clothing` именем , и `Departments:Foods`</span><span class="sxs-lookup"><span data-stu-id="7bece-244">Three attribute columns named `Store layout`, `Departments:Clothing`, and `Departments:Foods`</span></span>
* <span data-ttu-id="7bece-245">Три столбца сегментов `Fresh Foods` с `Frozen Foods` именем , и `Women's Wear`</span><span class="sxs-lookup"><span data-stu-id="7bece-245">Three bucket columns named `Fresh Foods`, `Frozen Foods`, and `Women's Wear`</span></span>

<span data-ttu-id="7bece-246">Атрибут `Store layout` содержит значения, которые включают `Compact` , `Standard` и `Large` .</span><span class="sxs-lookup"><span data-stu-id="7bece-246">The `Store layout` attribute has values that include `Compact`, `Standard`, and `Large`.</span></span> <span data-ttu-id="7bece-247">Для столбцов атрибута можно установить `Departments` значение `0` (ноль) или `1` .</span><span class="sxs-lookup"><span data-stu-id="7bece-247">The `Departments` attribute columns can be set to a value of `0` (zero) or `1`.</span></span> <span data-ttu-id="7bece-248">Макет и атрибуты не показаны `Store` на `Departments` рисунке выше.</span><span class="sxs-lookup"><span data-stu-id="7bece-248">The `Store` layout and `Departments` attributes aren't shown in the image above.</span></span> <span data-ttu-id="7bece-249">Они добавляются здесь, чтобы показать, как атрибуты можно добавлять в записи узлов.</span><span class="sxs-lookup"><span data-stu-id="7bece-249">They're added here to help show how attributes can be added to node entries.</span></span> <span data-ttu-id="7bece-250">То же самое относится и к трем столбцам сегментов.</span><span class="sxs-lookup"><span data-stu-id="7bece-250">The same is true for the three bucket columns.</span></span>

```CSV
TargetName,ParentName,TeamId,Store layout,Departments:Clothing,Departments:Foods,#Fresh Foods,#Frozen Foods,#Women's Wear
Recall,,db23e6ba-04a6-412a-95e8-49e5b01943ba,,,,,,
Communications,,145399ce-a761-4843-a110-3077249037fc,,,,,,
HR,,125399ce-a761-4983-a125-3abc249037fc,,,,,,
East Regional Office,HR;Communications;Recall,,,,,,,
West Regional Office,HR;Communications;Recall,,,,,,,
Northeast Zone,East Regional Office,,,,,,,
Southeast Zone,East Regional Office,,,,,,,
New York Store,Northeast Zone,e2ba65f6-25e7-488b-b8f0-b8562d5de60a,Large,1,1,,,
Boston Store,Northeast Zone,0454f08a-0507-437c-969a-682eb2fae7fc,Standard,1,1,,,
Miami Store,Southeast Zone,619d6e4e-5f68-4b36-8e1f-16c98d7396c1,Compact,0,1,,,
New Orleans Store,Southeast Zone,6be960b8-72af-4561-a343-9ac4711874eb,Compact,0,1,,,
Seattle Store,West Regional Zone,487c0d20-4e55-4dc2-8187-a24c826e0fee,Standard,1,1,,,
Los Angeles Store,West Regional Zone,204a1287-2efb-4a8a-88e0-56fbaf5a2389,Large,1,1,,,
```

## <a name="apply-your-hierarchy"></a><span data-ttu-id="7bece-251">Применение иерархии</span><span class="sxs-lookup"><span data-stu-id="7bece-251">Apply your hierarchy</span></span>

<span data-ttu-id="7bece-252">Определив иерархию в CSV-файле схемы, вы можете отправить ее в Teams.</span><span class="sxs-lookup"><span data-stu-id="7bece-252">After you've defined your hierarchy in the schema CSV file, you're ready to upload it to Teams.</span></span> <span data-ttu-id="7bece-253">Для этого запустите следующую команду:</span><span class="sxs-lookup"><span data-stu-id="7bece-253">To do this, run the following command.</span></span> <span data-ttu-id="7bece-254">Для этого необходимо быть глобальным администратором или администратором Teams службы.</span><span class="sxs-lookup"><span data-stu-id="7bece-254">You must be a global admin or Teams service admin to do this step.</span></span>

```powershell
Set-TeamTargetingHierarchy -FilePath "C:\ContosoTeamSchema.csv"
```

### <a name="update-your-hierarchy"></a><span data-ttu-id="7bece-255">Обновление иерархии</span><span class="sxs-lookup"><span data-stu-id="7bece-255">Update your hierarchy</span></span>

<span data-ttu-id="7bece-256">Вы можете добавить новую иерархию, чтобы заменить старую с помощью той же команды PowerShell, что и выше.</span><span class="sxs-lookup"><span data-stu-id="7bece-256">You can upload a new hierarchy to replace the old one using the same PowerShell command as above.</span></span> <span data-ttu-id="7bece-257">При каждом добавлении новой иерархии она заменяет предыдущую.</span><span class="sxs-lookup"><span data-stu-id="7bece-257">Each time you upload a new hierarchy, it replaces the previous hierarchy.</span></span>

### <a name="check-the-status-of-your-hierarchy"></a><span data-ttu-id="7bece-258">Проверка состояния иерархии</span><span class="sxs-lookup"><span data-stu-id="7bece-258">Check the status of your hierarchy</span></span>

<span data-ttu-id="7bece-259">Чтобы проверить состояние отправки иерархии, можно выполнить следующую команду:</span><span class="sxs-lookup"><span data-stu-id="7bece-259">You can run the following command to check the status of your hierarchy upload.</span></span>

```powershell
Get-TeamTargetingHierarchyStatus
```

<span data-ttu-id="7bece-260">Команда возвращает следующие поля:</span><span class="sxs-lookup"><span data-stu-id="7bece-260">The command will return the following fields:</span></span>

<span data-ttu-id="7bece-261">Поле</span><span class="sxs-lookup"><span data-stu-id="7bece-261">Field</span></span>|<span data-ttu-id="7bece-262">Описание</span><span class="sxs-lookup"><span data-stu-id="7bece-262">Description</span></span>
-----|------------
<span data-ttu-id="7bece-263">Id</span><span class="sxs-lookup"><span data-stu-id="7bece-263">Id</span></span> | <span data-ttu-id="7bece-264">Уникальный ИД для отправки.</span><span class="sxs-lookup"><span data-stu-id="7bece-264">The unique ID for the upload.</span></span>
<span data-ttu-id="7bece-265">Статус</span><span class="sxs-lookup"><span data-stu-id="7bece-265">Status</span></span> | <span data-ttu-id="7bece-266">Upload состояние.</span><span class="sxs-lookup"><span data-stu-id="7bece-266">Upload status.</span></span> <span data-ttu-id="7bece-267">Значения: **"Пуск",** **"Проверка",** **"Успешно"** и **"Не удалось"**</span><span class="sxs-lookup"><span data-stu-id="7bece-267">Values include **Starting**, **Validating**, **Successful**, and **Failed**</span></span>
<span data-ttu-id="7bece-268">ErrorDetails</span><span class="sxs-lookup"><span data-stu-id="7bece-268">ErrorDetails</span></span> | <span data-ttu-id="7bece-269">Сведения об ошибке отправки.</span><span class="sxs-lookup"><span data-stu-id="7bece-269">Details if there's an upload error.</span></span> <span data-ttu-id="7bece-270">Дополнительные сведения об ошибках см. в разделе Устранение неполадок.</span><span class="sxs-lookup"><span data-stu-id="7bece-270">For more information about the error details, see the Troubleshooting section.</span></span> <span data-ttu-id="7bece-271">Если ошибки нет, это поле пустое.</span><span class="sxs-lookup"><span data-stu-id="7bece-271">If there's no error, this field is blank.</span></span>
<span data-ttu-id="7bece-272">LastUpdatedAt</span><span class="sxs-lookup"><span data-stu-id="7bece-272">LastUpdatedAt</span></span> | <span data-ttu-id="7bece-273">Timestamp and date of when the file was last updated.</span><span class="sxs-lookup"><span data-stu-id="7bece-273">Timestamp and date of when the file was last updated.</span></span>
<span data-ttu-id="7bece-274">LastModifiedBy</span><span class="sxs-lookup"><span data-stu-id="7bece-274">LastModifiedBy</span></span> | <span data-ttu-id="7bece-275">ИД последнего пользователя, который изменил файл.</span><span class="sxs-lookup"><span data-stu-id="7bece-275">The ID of the last user who modified the file.</span></span>
<span data-ttu-id="7bece-276">FileName</span><span class="sxs-lookup"><span data-stu-id="7bece-276">FileName</span></span> | <span data-ttu-id="7bece-277">Имя CSV-файла.</span><span class="sxs-lookup"><span data-stu-id="7bece-277">The file name of the CSV.</span></span>

## <a name="remove-your-hierarchy"></a><span data-ttu-id="7bece-278">Удаление иерархии</span><span class="sxs-lookup"><span data-stu-id="7bece-278">Remove your hierarchy</span></span>

<span data-ttu-id="7bece-279">Если вы хотите немедленно  отключить вкладку Опубликованные списки для всех пользователей в организации, вы можете удалить иерархию.</span><span class="sxs-lookup"><span data-stu-id="7bece-279">If you want to immediately disable the **Published lists** tab for all users in your organization, you can remove your hierarchy.</span></span> <span data-ttu-id="7bece-280">Пользователи не смогут получить  доступ к вкладке Опубликованные списки или к ее функциям.  Это включает возможность создавать новые списки задач для публикации, доступа к черновикам, публикации, от публикации и дублирования списков, а также просмотра отчетов.</span><span class="sxs-lookup"><span data-stu-id="7bece-280">Users won't have access to the **Published lists** tab or any of the functionalities on the tab.  This includes the ability to create new task lists to publish, access draft lists, publish, unpublish, and duplicate lists, and view reporting.</span></span> <span data-ttu-id="7bece-281">При удалении иерархии не удаляются опубликованные задачи.</span><span class="sxs-lookup"><span data-stu-id="7bece-281">Removing the hierarchy doesn't unpublish tasks that were previously published.</span></span> <span data-ttu-id="7bece-282">Эти задачи останутся доступными для команд получателей.</span><span class="sxs-lookup"><span data-stu-id="7bece-282">These tasks will remain available for recipient teams to complete.</span></span>

<span data-ttu-id="7bece-283">Чтобы удалить иерархию, запустите следующую команду:</span><span class="sxs-lookup"><span data-stu-id="7bece-283">To remove your hierarchy, run the following command.</span></span> <span data-ttu-id="7bece-284">Для выполнения этого шага вы должны быть администратором.</span><span class="sxs-lookup"><span data-stu-id="7bece-284">You must be an admin to perform this step.</span></span>

```powershell
Remove-TeamTargetingHierarchy
```

<span data-ttu-id="7bece-285">При подтверждении удаления в сообщении о состоянии будет по-прежнему отображаться предыдущая схема, хотя при попытке удалить его снова возвращается ошибка, при этом объект имеет null.</span><span class="sxs-lookup"><span data-stu-id="7bece-285">When confirming deletion, the status message will still display the previous schema is present, although attempting to delete again returns an error that the object is null.</span></span>

## <a name="create-a-sample-hierarchy"></a><span data-ttu-id="7bece-286">Создание примера иерархии</span><span class="sxs-lookup"><span data-stu-id="7bece-286">Create a sample hierarchy</span></span>

### <a name="install-the-teams-powershell-module"></a><span data-ttu-id="7bece-287">Установка модуля Teams PowerShell</span><span class="sxs-lookup"><span data-stu-id="7bece-287">Install the Teams PowerShell module</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7bece-288">Для выполнения этого шага необходимо установить и использовать общедоступный модуль предварительного просмотра Teams PowerShell из [коллекции PowerShell.](https://www.powershellgallery.com/packages/MicrosoftTeams/)</span><span class="sxs-lookup"><span data-stu-id="7bece-288">To perform this step, you must install and use the Teams PowerShell public preview module from the [PowerShell Gallery](https://www.powershellgallery.com/packages/MicrosoftTeams/).</span></span> <span data-ttu-id="7bece-289">Действия по установке модуля см. в Teams [PowerShell.](teams-powershell-install.md)</span><span class="sxs-lookup"><span data-stu-id="7bece-289">For steps on how to install the module, see [Install Teams PowerShell](teams-powershell-install.md).</span></span>

### <a name="sample-script"></a><span data-ttu-id="7bece-290">Пример сценария</span><span class="sxs-lookup"><span data-stu-id="7bece-290">Sample script</span></span>

<span data-ttu-id="7bece-291">Следующий сценарий можно использовать для создания команд и добавления файла .csv в Microsoft Teams клиента.</span><span class="sxs-lookup"><span data-stu-id="7bece-291">The following script can be used to create the teams and upload a .csv file to your Microsoft Teams tenant.</span></span> <span data-ttu-id="7bece-292">Если у вас уже есть иерархия, сценарий заменит ее.</span><span class="sxs-lookup"><span data-stu-id="7bece-292">If you have an existing hierarchy, this script will replace it.</span></span>

#### <a name="create-teams-for-a-simple-hierarchy"></a><span data-ttu-id="7bece-293">Создание команд для простой иерархии</span><span class="sxs-lookup"><span data-stu-id="7bece-293">Create teams for a simple hierarchy</span></span>

```powershell
$tm1 = New-Team -DisplayName "HQ"
$tm2 = New-Team -DisplayName "North"
$tm3 = New-Team -DisplayName "Store 1"
$tm4 = New-Team -DisplayName "Store 2"
$tm5 = New-Team -DisplayName "South"
$tm6 = New-Team -DisplayName "Store 3"
$tm7 = New-Team -DisplayName "Store 4"
```

#### <a name="use-team-data-to-create-comma-separated-output-displayname-parentname-teamid"></a><span data-ttu-id="7bece-294">Использование данных группы для создания выходных данных, разделенных запятой (DisplayName, ParentName, TeamId)</span><span class="sxs-lookup"><span data-stu-id="7bece-294">Use team data to create comma-separated output (DisplayName, ParentName, TeamId)</span></span>

```powershell
$csvOutput = "DisplayName" + "," + "ParentName" + "," + "TeamId" + "`n"
$csvOutput = $csvOutput + $tm1.DisplayName + "," + "," + $tm1.GroupID + "`n"
$csvOutput = $csvOutput + $tm2.DisplayName + "," + $tm1.DisplayName + "," + $tm2.GroupID + "`n"
$csvOutput = $csvOutput + $tm3.DisplayName + "," + $tm2.DisplayName + "," + $tm3.GroupID + "`n"
$csvOutput = $csvOutput + $tm4.DisplayName + "," + $tm2.DisplayName + "," + $tm4.GroupID + "`n"
$csvOutput = $csvOutput + $tm5.DisplayName + "," + $tm1.DisplayName + "," + $tm5.GroupID + "`n"
$csvOutput = $csvOutput + $tm6.DisplayName + "," + $tm5.DisplayName + "," + $tm6.GroupID + "`n"
$csvOutput = $csvOutput + $tm7.DisplayName + "," + $tm5.DisplayName + "," + $tm7.GroupID 
```

#### <a name="save-output-to-a-csv-file-in-the-downloads-folder"></a><span data-ttu-id="7bece-295">Сохранение выходных данных в .csv файл в **папке** "Загрузки"</span><span class="sxs-lookup"><span data-stu-id="7bece-295">Save output to a .csv file in the **Downloads** folder</span></span>

```powershell
$csvOutputPath = $env:USERPROFILE + "\downloads\testhierarchy-" + (Get-Date -Format "yyyy-MM-dd-hhmmss") + ".csv" 
$csvOutput | Out-File $csvOutputPath
```

#### <a name="upload-the-hierarchy"></a><span data-ttu-id="7bece-296">Upload иерархию</span><span class="sxs-lookup"><span data-stu-id="7bece-296">Upload the hierarchy</span></span>

```powershell
Set-TeamTargetingHierarchy -FilePath $csvOutputPath
Get-TeamTargetingHierarchyStatus
```

## <a name="troubleshooting"></a><span data-ttu-id="7bece-297">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="7bece-297">Troubleshooting</span></span>

### <a name="how-to-view-error-details"></a><span data-ttu-id="7bece-298">Просмотр сведений об ошибке</span><span class="sxs-lookup"><span data-stu-id="7bece-298">How to view error details</span></span>

<span data-ttu-id="7bece-299">Чтобы понять, что вызывает ошибку, и получить сведения об ошибке, можно выполнить следующую команду:</span><span class="sxs-lookup"><span data-stu-id="7bece-299">You can run the following command to understand what is causing an error and return the error details.</span></span>

```powershell
(Get-TeamTargetingHierarchyStatus).ErrorDetails.ErrorMessage
```

### <a name="you-receive-an-error-message-when-you-upload-your-schema-csv-file"></a><span data-ttu-id="7bece-300">При отправке CSV-файла схемы вы получаете сообщение об ошибке</span><span class="sxs-lookup"><span data-stu-id="7bece-300">You receive an error message when you upload your schema CSV file</span></span>

<span data-ttu-id="7bece-301">Обратите внимание на сообщение об ошибке, которое должно включать сведения об устранении неполадок, чтобы указать, почему не удалось отправить схему.</span><span class="sxs-lookup"><span data-stu-id="7bece-301">Take note of the error message as it should include troubleshooting information to indicate why the schema couldn't be uploaded.</span></span> <span data-ttu-id="7bece-302">Просмотрите и отредактйте CSV-файл схемы на основе сведений в сообщении об ошибке, а затем попробуйте еще раз.</span><span class="sxs-lookup"><span data-stu-id="7bece-302">Review and edit your schema CSV file based on the information in the error message and then try again.</span></span>

### <a name="you-receive-an-error-invalidteamid-error-message-when-you-upload-your-schema-csv-file"></a><span data-ttu-id="7bece-303">При отправке CSV-файла схемы вы получаете сообщение об ошибке "Ошибка: InvalidTeamId"</span><span class="sxs-lookup"><span data-stu-id="7bece-303">You receive an "Error: InvalidTeamId" error message when you upload your schema CSV file</span></span>

<span data-ttu-id="7bece-304">При попытке отправить CSV-файл схемы вы получаете следующее сообщение об ошибке:</span><span class="sxs-lookup"><span data-stu-id="7bece-304">When you try to upload your schema CSV file, you get the following error message:</span></span>

```console
Error: InvalidTeamId
Description: TeamID in row # doesn't match a valid Group ID. Please view our documentation to learn how to get the proper GroupID for each team.
```

<span data-ttu-id="7bece-305">Проверьте, правильно ли вы используете TeamId для команды в CSV-файле схемы.</span><span class="sxs-lookup"><span data-stu-id="7bece-305">Check to make sure that you're using the correct TeamId for the team in your schema CSV file.</span></span> <span data-ttu-id="7bece-306">TeamId должен быть таким же, как и Microsoft 365 группы, которая является ее задней частью.</span><span class="sxs-lookup"><span data-stu-id="7bece-306">The TeamId should be the same as the Group ID of the Microsoft 365 group that backs the team.</span></span> <span data-ttu-id="7bece-307">Вы можете найти ИД группы в центре Microsoft Teams администрирования.</span><span class="sxs-lookup"><span data-stu-id="7bece-307">You can look up the Group ID of the team in the Microsoft Teams admin center.</span></span>

1. <span data-ttu-id="7bece-308">В левой области навигации центра [администрирования Microsoft Teams](https://admin.teams.microsoft.com/)перейдите в **Teams**  >  **Управление командами.**</span><span class="sxs-lookup"><span data-stu-id="7bece-308">In the left navigation of the [Microsoft Teams admin center](https://admin.teams.microsoft.com/), go to **Teams** > **Manage teams**.</span></span>
2. <span data-ttu-id="7bece-309">Если **столбец "ИД** группы" не отображается  в таблице, выберите Изменить столбцы в правом верхнем углу таблицы и включив ИД **группы**.</span><span class="sxs-lookup"><span data-stu-id="7bece-309">If the **Group ID** column isn't displayed in the table, select **Edit columns** in the upper-right corner of the table, and then turn on **Group ID**.</span></span>
3. <span data-ttu-id="7bece-310">Найдите группу в списке и найдите ее.</span><span class="sxs-lookup"><span data-stu-id="7bece-310">Find the team in the list, and then locate the Group ID.</span></span>

<span data-ttu-id="7bece-311">Убедитесь, что файл TeamId в CSV-файле схемы совпадает с ИД группы, который отображается в Microsoft Teams центре администрирования.</span><span class="sxs-lookup"><span data-stu-id="7bece-311">Make sure that the TeamId in your schema CSV file matches the Group ID that's displayed in the Microsoft Teams admin center.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7bece-312">Статьи по теме</span><span class="sxs-lookup"><span data-stu-id="7bece-312">Related topics</span></span>

* [<span data-ttu-id="7bece-313">Управление приложением "Задачи" для организации в Teams</span><span class="sxs-lookup"><span data-stu-id="7bece-313">Manage the Tasks app for your organization in Teams</span></span>](manage-tasks-app.md)
* [<span data-ttu-id="7bece-314">Обзор PowerShell в Teams</span><span class="sxs-lookup"><span data-stu-id="7bece-314">Teams PowerShell overview</span></span>](teams-powershell-overview.md)
