---
title: Настройка иерархии нацеливания группы
author: lanachin
ms.author: v-lanac
manager: serdars
ms.topic: conceptual
ms.service: msteams
ms.reviewer: andfried
search.appverid: MET150
description: Сведения о том, как настроить иерархию команд в Организации для публикации содержимого в большом наборе рабочих групп.
audience: admin
localization_priority: Normal
MS.collection:
- Teams_ITAdmin_Help
- M365-collaboration
appliesto:
- Microsoft Teams
ms.openlocfilehash: 581d67f0083ea8b0e91615a96685f10f4cd64785
ms.sourcegitcommit: 929c050c038a64216e38b0a67569a8f18ad4baf2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2020
ms.locfileid: "43940949"
---
# <a name="set-up-your-team-targeting-hierarchy"></a>Настройка иерархии нацеливания группы

> **В настоящее время эта функция доступна для закрытой предварительной версии.**

Чтобы создать иерархию групп, которую можно использовать в Организации для публикации содержимого в большом наборе рабочих групп, необходимо настроить схему нацеливания группы. Схема определяет, как все команды в иерархии связаны друг с другом, и атрибуты, которые можно использовать для фильтрации групп. После того как вы создадите схему, вы отправляете ее в Teams, и иерархия применяется во всей Организации. После отправки схемы приложения в клиенте Teams смогут использовать ее. 

> [!IMPORTANT]
> При просмотре команд и каналов в них не отображается иерархия групп. Для просмотра иерархии групп необходимо использовать приложение, которое его поддерживает. Для первого выпуска только приложение "задачи" поддерживает иерархические команды. В оставшейся части этой статьи обсуждается настройка иерархии команд в контексте задач публикации для групп адресатов. Перед настройкой иерархии нацеливания группы, ознакомьтесь со статьей Управление опубликованными задачами [в разделе Manage Tasks (приложение) для вашей организации в](manage-tasks-app.md) Teams.

Ниже приведен пример представления иерархии в приложении "задачи" в Teams. После создания списка задач участники группы публикации смогут выбрать получателей, которым нужно отправить (опубликовать) список задач. При выборе Teams Группа публикации может фильтровать по иерархии, по атрибутам или по их сочетанию.<br>

![Снимок экрана: публикация задач](media/manage-tasks-app-publish.png)

## <a name="plan-your-hierarchy"></a>Планирование иерархии

Перед созданием схемы, в которой определена ваша иерархия, необходимо выполнить какое – либо планирование и решить, как вы хотите соформировать организацию. Сюда входит решение о том, какие организационные группы должны публиковать задачи в других группах. Каждый узел в иерархии представляет рабочую группу или группу групп. Узлы в нижней части иерархии (без дочерних элементов) — это группы, которые могут принимать задачи, в то время как другие узлы (родители) — это организационные группы с разрешениями на публикацию задач вниз. Команда может быть представлена только один раз в иерархии.

Например, в приведенной ниже иерархии, отзыве, розничной связи и HR можно публиковать задачи для всех нижних узлов (групп) в иерархии, в то время как зона "Северные Востока" может публиковать задачи только в Нью-Йорке и в группе "Бостон магазина". Эта иерархия позволяет публиковать задачи отзыва, розничной связи и групп персонала для публикации задач, которые применяются ко всей компании, например сведения о преимуществах и сообщения от Генерального директора. С помощью зоны "Северные Востока" можно публиковать задачи, такие как планирование сотрудников, сведения о погоде и т. д., только в Нью – Йорке и в группе "Бостон магазина".

![Пример иерархического командного проекта](media/team-targeting-schema-example.png)

## <a name="create-your-hierarchy"></a>Создание иерархии

Схема, в которой определена ваша иерархия, основывается на CSV-файле со значениями, разделенными запятыми. Каждая строка в CSV-файле соответствует одному узлу в иерархии групп. Каждая строка содержит данные, указывающие на узел в иерархии, дополнительно связывает его с командой и включает атрибуты, которые можно использовать для фильтрации команд в приложениях, поддерживающих эту функцию.

Вы также можете определять сегменты, представляющие собой категории, которые может использовать Группа публикации для организации контента, отправляемого в группы получателей, чтобы упростить просмотр, сортировку и сфокусироваться на соответствующем содержимом.

### <a name="add-required-columns"></a>Добавление обязательных столбцов

CSV-файл должен содержать три следующие столбца в указанном ниже порядке, начиная с первого столбца. Узел должен быть связан с командой для получения задач. При закрытом предварительном просмотре поддерживаются узлы 500. По умолчанию при запуске мы рекомендуем поддерживать по крайней мере 2 000 узлов. Мы планируем работать с клиентами, чтобы увеличить это ограничение для более крупных организаций.

| Имя столбца   | Обязательный? | Описание   |
----------------|----------|---------------|
| TargetName    | Да      | Это имя узла. Имя может иметь длину до 100 символов и содержать только буквы A-Z, a-z и 0-9. Имена узлов должны быть уникальными. |
| ParentName    | Да       | Это имя родительского узла. Указанное здесь значение должно совпадать со значением в поле TargetName родительского узла. Если вы хотите добавить более одного родительского узла, разделяйте имена родительских узлов точкой с запятой (;). Вы можете добавить до 25 родительских узлов, и каждое имя родительского узла может иметь длину до 2500 символов. У узла может быть несколько родительских узлов только в том случае, если родительские являются корневыми узлами.   <br><br>**Важно!** Будьте внимательны, чтобы не создавать цикл, где родительский элемент более высокий, чем в иерархии, ссылается на дочерний узел в иерархии вниз. Это не поддерживается. |
| TeamID        | Да, если команда публикует задачи или получает задачи из родительского узла       | Она включает идентификатор группы, на которую вы хотите добавить ссылку на узел. Если вы хотите, чтобы пользователи смогли опубликовать с этого узла или вы хотите, чтобы пользователи смогли просматривать отчеты для этого узла и его потомков, узел должен быть связан с командой, если он находится в нижней части иерархии. Например, если руководитель для региона Office хочет просмотреть отчеты о завершении задач для узлов, которые находятся в этой области.<br><br>Если вы хотите добавить узел только для группировки других узлов в иерархии, вам не нужно привязать этот узел к группе, и это поле можно оставить пустым. Вы можете связать каждый узел только с одной командой.<br>Чтобы получить идентификатор команды, на которую вы хотите добавить ссылку на узел, выполните следующую команду PowerShell: `Get-Team | Export-Csv TeamList.csv`. В этом списке перечислены команды в вашей организации, а также указаны имя и идентификатор каждой команды. Найдите имя команды, на которую вы хотите добавить ссылку, а затем скопируйте идентификатор в это поле.|

### <a name="add-attribute-columns"></a>Добавление столбцов атрибутов

После добавления трех обязательных столбцов можно добавить столбцы необязательных атрибутов. Эти атрибуты можно использовать для фильтрации узлов, чтобы вы могли легко выбирать те из них, на которые вы хотите опубликовать задачи. Существует два способа определения атрибутов, в зависимости от того, являются ли значения атрибута взаимоисключающими.

|Способы добавления атрибутов|Описание |Пример  |
|---|---------|---------|
|Если значения для атрибута являются взаимоисключающими, указанное имя столбца становится именем атрибута.|Каждая строка может содержать одно значение для этого атрибута, и каждое значение может иметь длину до 100 символов. Набор значений атрибутов, указанных в столбце атрибутов, будет отображаться как доступные значения фильтра для этого атрибута в приложениях Teams, использующих эту иерархию. Каждый столбец атрибута может иметь до 50 уникальных значений. |Вы хотите, чтобы пользователи смогли отфильтровать магазины по макету. Значения этого атрибута являются взаимоисключающими, так как в магазине может быть только один макет. <br><br>Чтобы добавить атрибут для фильтрации хранилищ по макету, добавьте столбец с именем "макет магазина". В этом примере значения для атрибута "макет магазина" — "Компактный", "Стандартный" и "крупный".
|Если необходимо указать несколько значений атрибута, а значения не являются взаимоисключающими, используйте формат **Имя_атрибута: UniqueValue** для имен столбцов. |Текстовая строка перед двоеточием (:) становится именем атрибута. Все столбцы, содержащие одну и ту же текстовую строку, перед двоеточием (:) группируются вместе в раздел в меню "фильтр". Каждая строка после двоеточия становится значениями для этого раздела.<br><br>Каждая строка может иметь значение 0 (ноль) или 1 для этого атрибута. Значение 0 означает, что атрибут не применяется к узлу и значение 1 означает, что атрибут применяется к этому узлу.|Вы хотите, чтобы пользователи смогли отфильтровать магазины по отделам. Магазин может иметь несколько отделов, поэтому значения этого атрибута не являются взаимоисключающими.<br><br>В этом примере мы добавляем отделы: Одежда, отделы: электронную аппаратуру, отделы: продуктов, отделы: домашние и многопроцессорные и отделы: Спортивные товары как столбцы атрибутов. Отделы становятся именем атрибута, и пользователи могут фильтровать товары с помощью одежды, бытовой электроники, продуктов, дома и сада, а также отделов товаров для спорта.|

Когда вы добавите столбец атрибута, имейте в виду следующее:

- Указанное имя столбца или имя столбца, указанное перед двоеточием (:) становится именем атрибута. Это значение будет отображаться в приложениях Teams, использующих эту иерархию.
- Длина имени столбца не должна превышать 100 символов и содержать только буквы A-Z, a-z, 0-9 и пробелы. Имена столбцов должны быть уникальными.
- При запуске мы планируем разрешить столбцы атрибутов 50.

### <a name="add-bucket-columns"></a>Добавление столбцов сегментов

Вы можете добавлять столбцы с сегментами для создания сегментов, которые представляют собой группировки, в которых могут быть организованы задачи. Каждый сегмент получает собственный столбец в CSV-файле. Созданные вами сегменты становятся доступными для группы публикации. Группа публикаций может затем использовать эти сегменты для классификации задач для получателей групп. Если в группе еще не существует сегмента, то при публикации задач сегменты будут создаваться по запросу.

Выполнив централизованную классификацию трудозатрат, Группа публикации может предварительно упорядочить список задач для всех десятков, сотен или тысяч групп получателей, получивших список задач. Получатель может отсортировать и отфильтровать задачи по сегментам, чтобы сосредоточиться на области, наиболее подходящую для их работы.

При добавлении столбца "сегмент" Обратите внимание на следующее:

- Имя столбца становится именем сегмента. Каждый указанный сегмент появится в списке сегменты в приложениях Teams, использующих эту иерархию. Мы рекомендуем не включать конфиденциальную информацию в названия сегментов. На данный момент публикация команд не может удалить сегмент с помощью публикации после ее создания.
- Имени столбца должен предшествовать хэш-тег (#). Длина может составлять до 100 символов и содержать только буквы A-Z, a-z и 0-9. Например, #Operationsные и #Frozenные товары.
- При запуске мы ожидаем поддерживать 25 столбцов с сегментами. Мы планируем работать с клиентами, чтобы увеличить это ограничение для более крупных организаций.

### <a name="example"></a>Пример

Ниже приведен пример CSV-файла схемы, который будет создан для поддержки иерархии, показанной на рисунке выше. Эта схема состоит из следующих значений:

- Три обязательных столбца `TargetName`с `ParentName`именем и`TeamID`
- Три столбца атрибутов с `Store layout`именами `Departments:Clothing`и`Departments:Foods`
- Три столбца "сегмент `Fresh Foods`" `Frozen Foods`с именами и`Womenswear`

`Store layout` Атрибут содержит значения, которые включают `Compact`, `Standard`и `Large`. Для `Departments` столбцов атрибутов может быть задано значение `0` (ноль) или. `1` `Store` Макет и `Departments` атрибуты не отображаются на рисунке выше. Они добавляются здесь, чтобы показать, как атрибуты можно добавлять в записи узла. Это справедливо и для трех столбцов с сегментами.


| TargetName             | ParentName                      | TeamID                       | Макет магазина|Отделы: Одежда|Отделы: продуктов|#Fresh продуктов|#Frozen продуктов|#Womenswear|
|------------------------|-------------------------|--------------------------------------|-------------|---|---|---|---|---|
| Вызова                 |                         | db23e6ba-04a6-412a-95e8-49e5b01943ba |||||||
| Связь         |                         | 145399ce-a761-4843-a110-3077249037fc |||||||
| Отдел кадров                     |                         | b8f7db91-201c-4cf9-9f7e-90a4894ed8e4 |||||||
| Восточная региональная Office   |                         |                                      |||||||
| Западная Региональная Office   |                         |                                      |||||||
| Зона "Северные Востока"        | Восточная региональная Office    |                                      |||||||
| Зона Южной Востока        | Восточная региональная Office    |                                      |||||||
| Нью — Санкт Store         | Зона "Северные Востока"         | e2ba65f6-25e7-488b-b8f0-b8562d5de60a |Большая|1|1||||
| Бостон банк           | Зона "Северные Востока"         | 0454f08a-0507-437c-969a-682eb2fae7fc |Standard|1|1||||
| Магазин в Майами            | Зона Южной Востока         | 619d6e4e-5f68-4b36-8e1f-16c98d7396c1 |Компактный|до|1||||
| Новый магазин Орлеан      | Зона Южной Востока         | 6be960b8-72af-4561-a343-9ac4711874eb |Компактный|до|1||||
| Сиэтле — магазин          | Западная Региональная Office    | 487c0d20-4e55-4dc2-8187-a24c826e0fee |Standard|1|1||||
| Лос-Анджелес Store      | Западная Региональная Office    | 204a1287-2efb-4a8a-88e0-56fbaf5a2389 |Большая|1|1||||

## <a name="apply-your-hierarchy"></a>Применение иерархии

> [!IMPORTANT]
> Для выполнения этого действия необходимо установить и использовать последнюю версию модуля Teams PowerShell из коллекции тестов PowerShell. Инструкции, описанные в этой статье, описаны в [статье Установка последней версии модуля PowerShell для Teams из коллекции тестов PowerShell](#install-the-latest-teams-powershell-module-from-the-powershell-test-gallery).

После того как вы определили иерархию в CSV-файле схемы, вы можете отправить ее в Teams. Для этого выполните следующую команду: Это действие могут выполнять только администраторы. 

```powershell
Set-TeamTargetingHierarchy -FilePath "C:\ContosoTeamSchema.csv"
```

## <a name="remove-your-hierarchy"></a>Удаление иерархии

> [!IMPORTANT]
> Для выполнения этого действия необходимо установить и использовать последнюю версию модуля Teams PowerShell из коллекции тестов PowerShell. Инструкции, описанные в этой статье, описаны в [статье Установка последней версии модуля PowerShell для Teams из коллекции тестов PowerShell](#install-the-latest-teams-powershell-module-from-the-powershell-test-gallery).

Если вы хотите немедленно отключить вкладку **опубликованные списки** для всех пользователей в вашей организации, вы можете удалить иерархию. Пользователи не смогут получить доступ к вкладке **опубликованные списки** или какой – либо из функций на вкладке.  Сюда входят возможности создания новых списков задач для публикации, доступа к черновикам, публикации, отмены публикации и дублирования списков, а также просмотра отчетов. Удаление иерархии не отменяет публикацию ранее опубликованных задач. Эти задачи будут оставлены для завершения команд получателя. 

Чтобы удалить иерархию, выполните следующую команду: Это действие могут выполнять только администраторы. 

```powershell
Remove-TeamTargetingHierarchy
```

### <a name="teams-powershell-module"></a>Модуль PowerShell Teams

#### <a name="install-the-latest-teams-powershell-module-from-the-powershell-test-gallery"></a>Установка новейшего модуля PowerShell для Teams из коллекции тестов PowerShell

Самая свежая доступная версия модуля Teams PowerShell (в настоящее время [1.0.5](https://www.powershellgallery.com/packages/MicrosoftTeams/1.0.5)) не поддерживает управление иерархией групп. Выполните указанные ниже действия, чтобы установить последнюю версию модуля PowerShell Teams с поддержкой иерархии групп из коллекции тестов PowerShell.

> [!NOTE]
> Не устанавливайте модуль PowerShell Teams из коллекции тестов PowerShell рядом с версией модуля из общедоступной галереи PowerShell. Выполните эти действия, чтобы сначала удалить модуль Teams PowerShell из общедоступной коллекции PowerShell, а затем установить последнюю версию модуля из коллекции тестов PowerShell.

1. Закройте все существующие сеансы PowerShell.
2. Начните новый экземпляр модуля Windows PowerShell.
3. Выполните указанные ниже действия, чтобы удалить модуль PowerShell Teams из общедоступной галереи PowerShell.

    ```PowerShell
    Uninstall-Module -Name MicrosoftTeams
    ```

4. Закройте все существующие сеансы PowerShell.
5. Запустите модуль Windows PowerShell еще раз, а затем выполните указанные ниже действия, чтобы зарегистрировать библиотеку тестов PowerShell в качестве надежного источника.

    ```PowerShell
    Register-PSRepository -Name PSGalleryInt -SourceLocation https://www.poshtestgallery.com/ -InstallationPolicy Trusted
    ```

6. Выполните указанные ниже действия, чтобы установить последнюю версию модуля PowerShell для Teams из коллекции тестов PowerShell.

    ```PowerShell
    Install-Module -Name MicrosoftTeams -Repository PSGalleryInt -Force
    ```

7. Выполните указанные ниже действия, чтобы убедиться в том, что новейшая версия модуля Teams PowerShell из коллекции тестов PowerShell успешно установлена.

    ```PowerShell
    Get-Module -Name MicrosoftTeams
    ```

#### <a name="update-to-the-latest-version-of-the-teams-powershell-module-from-the-powershell-test-gallery"></a>Обновите модуль PowerShell до последней версии из коллекции тестовых команд PowerShell.

Если вы уже установили модуль Teams PowerShell из коллекции тестов PowerShell, выполните указанные ниже действия, чтобы обновить его до последней версии.

1. Закройте все существующие сеансы PowerShell.
2. Начните новый экземпляр модуля Windows PowerShell.
3. Выполните указанные ниже действия, чтобы обновить текущую установленную версию модуля PowerShell Teams из коллекции тестов PowerShell.

    ```PowerShell
    Update-Module -Name MicrosoftTeams -Force
    ```

4. Выполните указанные ниже действия, чтобы убедиться в том, что новейшая версия модуля Teams PowerShell из коллекции тестов PowerShell успешно установлена.

    ```PowerShell
    Get-Module -Name MicrosoftTeams
    ```

## <a name="troubleshooting"></a>Устранение неполадок

### <a name="you-receive-an-error-message-when-you-upload-your-schema-file"></a>При отправке файла схемы появляется сообщение об ошибке

Обратите внимание на сообщение об ошибке, так как оно должно содержать сведения для устранения неполадок, указывающие на то, почему не удалось отправить схему. Просмотрите и измените CSV-файл схемы на основе сведений в сообщении об ошибке, а затем повторите попытку.

## <a name="related-topics"></a>Статьи по теме

- [Управление приложением "задачи" для Организации в Teams](manage-tasks-app.md)
