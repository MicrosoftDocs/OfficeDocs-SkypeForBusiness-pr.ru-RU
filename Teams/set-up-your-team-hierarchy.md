---
title: Настройка иерархии целевого уровня группы
author: cichur
ms.author: v-cichur
manager: serdars
ms.topic: conceptual
ms.service: msteams
ms.reviewer: andfried
search.appverid: MET150
description: Узнайте, как настроить иерархию групп в организации для публикации контента в большом наборе команд.
audience: admin
localization_priority: Normal
MS.collection:
- Teams_ITAdmin_Help
- M365-collaboration
appliesto:
- Microsoft Teams
ms.openlocfilehash: 099ee82e5890e81b6fc89a5ffc1842d936e6ad1e
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/12/2021
ms.locfileid: "49806159"
---
# <a name="set-up-your-team-targeting-hierarchy"></a>Настройка иерархии целевого уровня группы

> **В настоящее время эта функция находится в режиме предварительного просмотра.**

Чтобы создать иерархию команд, которая может использоваться вашей организацией для публикации контента в большом наборе команд, необходимо настроить схему целевого использования команды. Схема определяет, как все команды в иерархии связаны друг с другом и какие атрибуты можно использовать для фильтрации команд. После создания схемы она будет добавлена в Teams, и иерархия будет применена во всей организации. После добавления схемы приложения в клиенте Teams могут использовать ее. 

> [!IMPORTANT]
> При просмотре команд или каналов вы не увидите иерархию команд. Чтобы увидеть иерархию команд, необходимо использовать приложение, которое ее поддерживает. В первом выпуске только приложение "Задачи" поддерживает иерархические группы. В оставшейся части этой статьи обсуждается настройка иерархии группы в контексте публикации задач для групп получателей. Перед тем как настроить иерархию целей группы, см. обзор публикации задач в приложении "Управление задачами" для организации в [Teams.](manage-tasks-app.md)

Ниже представлен пример представления иерархии в приложении "Задачи" в Teams. После создания списка задач участники группы публикации могут выбрать группы получателей, в которые нужно отправить (опубликовать) список задач. При выборе команд команда публикации может фильтроваться по иерархии, атрибутам или сочетанию обеих команд.<br>

![Снимок экрана: публикация задач](media/manage-tasks-app-publish.png)

## <a name="plan-your-hierarchy"></a>Планирование иерархии

Перед созданием схемы, определяемой иерархией, необходимо спланируя ее и запланив, как вы хотите сформировать свою организацию. Это относится к выбору групп организации, которые должны публиковать задачи в других группах. Каждый узел в иерархии представляет рабочую группу или группу. Узлы в нижней части иерархии (те, у которых нет детей) — это команды, которые могут получать задачи, в то время как другие узлы (родители) — это группы организации с разрешением на публикацию задач вниз. В иерархии команда может быть представлена только один раз.

Например, в следующей иерархии "Отзыв", "Розничная связь" и "Отдел кадров" можно публиковать задачи на каждом нижнем узле (группы) в иерархии, в то время как "Северо-восточная зона" может публиковать задачи только в командах "Нью-Йорк" и "Яролев". Такая иерархия позволяет группам отзывов, розничных коммуникаций и отдела кадров публиковать задачи, которые относятся к всей компании, например сведения о преимуществах или сообщения от директора. Северо-восточная зона может публиковать задачи, такие как планирование персонала, прогноз погоды и другие сведения, только в командах Магазина в Нью-Йорке и Москве.

![Пример иерархической группы](media/team-targeting-schema-example.png)

## <a name="create-your-hierarchy"></a>Создание иерархии

Схема, определяемая иерархией, основана на CSV-файле. Каждая строка в CSV-файле соответствует одному узлу в иерархии команд. В каждой строке содержится информация, которая содержит имя узла в иерархии, при желании связывает его с командой, а также атрибуты, которые можно использовать для фильтрации команд в приложениях, которые его поддерживают.

Вы также можете определить сегменты, которые являются категориями, с помощью которых группа публикации может упорядочеть содержимое, отправленное в группы получателей, чтобы упростить для них просмотр, сортировку и фокус на релевантном контенте.

### <a name="add-required-columns"></a>Добавление необходимых столбцов

CSV-файл должен содержать три столбца начиная с первого столбца в следующем порядке: Для получения задач узел должен быть связан с командой. Во время закрытой предварительной версии мы поддерживаем 2000 узлов. При запуске мы планируем по умолчанию поддерживать не менее 15 000 узлов. Мы планируем вместе с клиентами повысить это ограничение для крупных организаций.

| Имя столбца   | Обязательный? | Описание   |
----------------|----------|---------------|
| TargetName    | Да      | Это имя узла. Имя может содержать не более 100 знаков и содержать только символы A–Z, a–z и 0–9. Имена узлов должны быть уникальными. |
| ParentName    | Да       | Это имя родительского узла. Это значение должно в точности соответствовать значению в поле TargetName родительского узла. Если вы хотите добавить несколько родительских узлов, разделите их имена точками с заточкими (;). Вы можете добавить до 25 родительских узлов, каждый из которых может иметь длину до 2500 символов. Узел может иметь несколько родительских узлов, только если родительские узлы являются корневыми.   <br><br>**ВАЖНО!** Будьте осторожны, чтобы не создать цикл, в котором родительский узел выше в иерархии ссылается на узел ребенка, который находится ниже в иерархии. Эта поддержка не поддерживается. |
| TeamId        | Да, если группа публикует задачи или получает задачи из родительского узла       | Он содержит ИД группы, с командой, с которая будет связывать узел. Узел должен быть связан с командой, если он находится в нижней части иерархии, если вы хотите, чтобы пользователи могли публиковать данные из этого узла или могли видеть отчеты для этого узла и его потомков. Например, если руководитель офиса в Западной области хочет увидеть отчеты о завершении задач для узлов, которые относятся к этому региону.<br><br>Если вы хотите добавить узел только для группировки других узлов в иерархии, связывать его с группой не нужно, поэтому поле можно оставить пустым. Каждый узел можно связать только с одной командой.<br>Чтобы получить ИД группы, с которая будет связывать узел, запустите следующую команду PowerShell: `Get-Team | Export-Csv TeamList.csv` В этом списке перечислены группы в вашей организации, а также имена и ИД каждой из них. Найдите имя группы, с командой, с которая будет связываться, и скопируйте в это поле ее имя.|

### <a name="add-attribute-columns"></a>Добавление столбцов атрибута

После добавления трех необходимых столбцов можно добавить необязательные столбцы атрибутов. Эти атрибуты можно использовать для фильтрации узлов, чтобы можно было легко выбрать те из них, в которые вы хотите опубликовать задачи. Существует два способа определения атрибутов в зависимости от того, являются ли значения этого атрибута взаимоисключающими.

|Способы добавления атрибутов|Описание |Пример  |
|---|---------|---------|
|Если значения атрибута являются взаимоисключающими, имя столбца, которое вы указываете, становится именем атрибута.|Каждая строка может содержать одно значение для атрибута, а каждое значение может содержать до 100 знаков. Набор значений атрибутов, которые вы указываете в столбце атрибута, будет отображаться как доступные значения фильтра для атрибута в приложениях Teams, которые используют иерархию. Каждый столбец атрибутов может иметь до 50 уникальных значений. |Вы хотите, чтобы пользователи могли фильтровать хранилища по макетам. Значения этого атрибута являются взаимоисключающими, так как в хранилище может быть только один макет. <br><br>Чтобы добавить атрибут для фильтрации хранилищ по макету, добавьте столбец "Макет Магазина". В этом примере атрибуты макета Store имеют такие значения: "Сжатая", "Стандартная" и "Большая".
|Если необходимо указать несколько значений для атрибута и они не являются взаимоисключающими, используйте формат **AttributeName:UniqueValue** для имен столбцов. |Текстовая строка перед двоеточием (:) становится именем атрибута. Все столбцы, содержащие текстовую строку перед двоеточием (:) группуются в раздел в меню фильтрации. Каждая строка после двоеточия становится значениями для этого раздела.<br><br>Каждая строка может иметь значение 0 (ноль) или 1 для этого атрибута. Значение 0 означает, что атрибут не применяется к узлу, а значение 1 означает, что атрибут применяется к этому узлу.|Вы хотите, чтобы пользователи могли фильтровать хранилища по отделам. Магазин может иметь несколько отделов, поэтому значения этого атрибута не являются взаимоисключающими.<br><br>В этом примере мы добавляем столбцы "Отделы:одежда", "Отделы:электронная", "Отделы:продукты", "Отделы:дом" и "Саду", "Отделы:товаров и услуг" в качестве столбцов атрибутов. Названия атрибутов "Отделы" становятся атрибутами, и пользователи могут фильтровать их по отделам "Одежда", "Электронная бумага", "Продукты", "Дом" и "Садовый" и "Потребительские товары".|

При добавлении столбца атрибутов необходимо помнить следующее:

- Имя столбца, которое вы указываете, или имя столбца, за которое вы указываете перед двоеточием (:) становится именем атрибута. Это значение будет отображаться в приложениях Teams, которые используют иерархию.
- Имя столбца может содержать не более 100 знаков и содержать только символы A–Z, a-z и 0-9 и пробелы. Имена столбцов должны быть уникальными.
- При запуске планируется разрешить 50 столбцов атрибутов.

### <a name="add-bucket-columns"></a>Добавление столбцов сегмента

Вы можете добавить столбцы сегментов, чтобы создать сегменты, которые являются группировками, в которые можно организовать задачи. Каждый сегмент получает свой столбец в CSV-файле. Сегменты, которые вы создаете, доступны команде публикации. После этого группа публикации может классифицировать задачи для команд получателей с помощью этих сегментов. Если в команде еще нет сегмента, сегменты создаются по запросу при публикации задач.

Централизованно классифицируя работу, группа публикации может заранее организовать список задач для всех групп, которые получают список задач десятков, сотен или тысяч получателей. Затем группы получателей могут сортировать и фильтровать свои задачи по сегментам, чтобы сосредоточиться на области, наиболее релевантной для их работы.

При добавлении столбца сегмента обратите внимание на следующее:

- Имя столбца становится именем сегмента. Каждый из этих сегментов будет отображаться в списке "Сегменты" в приложениях Teams, которые используют иерархию. Не рекомендуется включать конфиденциальную информацию в имена сегментов. В настоящее время группы публикации не могут удалить сегмент с помощью публикации после его создания.
- Перед именем столбца должен быть хэштег (#). Оно может содержать не более 100 знаков и содержать только символы A–Z, a–z и 0–9. Например, #Operations и #Frozen товары.
- При запуске мы ожидаем поддерживать 25 столбцов сегментов. Мы планируем вместе с клиентами увеличить это ограничение для крупных организаций.

### <a name="example"></a>Пример

Ниже показан пример CSV-файла схемы, который будет создан для поддержки иерархии, показанной на рисунке выше. Эта схема содержит следующие данные:

- Три необходимых столбца с `TargetName` именем `ParentName` и `TeamId`
- Три столбца с `Store layout` атрибутами и `Departments:Clothing``Departments:Foods`
- Три столбца с `Fresh Foods` названием `Frozen Foods` "сегмент" и `Womenswear`

Атрибут `Store layout` имеет значения, которые включают `Compact` , `Standard` и `Large` . Для `Departments` столбцов атрибута можно установить значение `0` (ноль) или `1` . Макет `Store` и `Departments` атрибуты не показаны на рисунке выше. Они добавлены здесь, чтобы показать, как добавлять атрибуты к записям узлов. То же самое относится и к трем столбцам сегментов.


| TargetName             | ParentName                      | TeamId                       | Макет магазина|Отделы:одежда|Departments:Foods|#Fresh Еда|#Frozen и Продукты|#Womenswear|
|------------------------|-------------------------|--------------------------------------|-------------|---|---|---|---|---|
| Отзыв                 |                         | db23e6ba-04a6-412a-95e8-49e5b01943ba |||||||
| Связь         |                         | 145399ce-a761-4843-a110-3077249037fc |||||||
| Отдел кадров                     |                         | b8f7db91-201c-4cf9-9f7e-90a4894ed8e4 |||||||
| Восточное региональные офисы   |                         |                                      |||||||
| West Regional Office   |                         |                                      |||||||
| Северо-восточная зона        | Восточное региональные офисы    |                                      |||||||
| Юго-восточная зона        | Восточное региональные офисы    |                                      |||||||
| Нью-Йорк         | Северо-восточная зона         | e2ba65f6-25e7-488b-b8f0-b8562d5de60a |Большая|1|1||||
| Интернет-магазин           | Северо-восточная зона         | 0454f08a-0507-437c-969a-682eb2fae7fc |Standard|1|1||||
| Mмайского магазина            | Юго-Восточная зона         | 619d6e4e-5f68-4b36-8e1f-16c98d7396c1 |Компактный|0|1||||
| New Скайб      | Юго-Восточная зона         | 6be960b8-72af-4561-a343-9ac4711874eb |Компактный|0|1||||
| Сиэтл          | West Regional Office    | 487c0d20-4e55-4dc2-8187-a24c826e0fee |Standard|1|1||||
| Лос-Анджелес      | West Regional Office    | 204a1287-2efb-4a8a-88e0-56fbaf5a2389 |Большая|1|1||||

## <a name="apply-your-hierarchy"></a>Применение иерархии

> [!IMPORTANT]
> Для выполнения этого шага необходимо установить и использовать общедоступный предварительный модуль Teams PowerShell из [коллекции PowerShell.](https://www.powershellgallery.com/packages/MicrosoftTeams/) По шагам об установке модуля см. в [.оке "Установка Teams PowerShell".](teams-powershell-install.md)

После определения иерархии в CSV-файле схемы вы можете отправить ее в Teams. Для этого запустите следующую команду: Для выполнения этого шага необходимо быть глобальным администратором или администратором служб Teams.

```powershell
Set-TeamTargetingHierarchy -FilePath "C:\ContosoTeamSchema.csv"
```

## <a name="remove-your-hierarchy"></a>Удаление иерархии

> [!IMPORTANT]
> Для выполнения этого шага необходимо установить и использовать общедоступный предварительный модуль Teams PowerShell из [коллекции PowerShell.](https://www.powershellgallery.com/packages/MicrosoftTeams/) По шагам об установке модуля см. в [.оке "Установка Teams PowerShell".](teams-powershell-install.md)

Если вы хотите немедленно  отключить вкладку "Опубликованные списки" для всех пользователей в организации, вы можете удалить иерархию. У пользователей не будет  доступа к вкладке "Опубликованные списки" и функциям на ней.  Это включает возможность создавать новые списки задач для публикации, доступа к черновикам списков, публикации, от публикации и дублирования списков, а также просмотра отчетов. При удалении иерархии не удаляются опубликованные ранее задачи. Группы получателей не смогут выполнить эти задачи. 

Чтобы удалить иерархию, запустите следующую команду: Для выполнения этого шага необходимо быть администратором. 

```powershell
Remove-TeamTargetingHierarchy
```

## <a name="troubleshooting"></a>Устранение неполадок

### <a name="you-receive-an-error-message-when-you-upload-your-schema-csv-file"></a>При отправке CSV-файла схемы вы получаете сообщение об ошибке

Обратите внимание на сообщение об ошибке, которое должно включать информацию об устранении неполадок, чтобы указать, почему не удалось отправить схему. Просмотрите и отредактйте CSV-файл схемы на основе сведений в сообщении об ошибке и попробуйте еще раз.

### <a name="you-receive-an-error-invalidteamid-error-message-when-you-upload-your-schema-csv-file"></a>При отправке CSV-файла схемы вы получаете сообщение об ошибке "Ошибка: InvalidTeamId"

При попытке отправить CSV-файл схемы вы получаете следующее сообщение об ошибке:

```console
Error: InvalidTeamId
Description: TeamID in row # doesn't match a valid Group ID. Please view our documentation to learn how to get the proper GroupID for each team.
```

Убедитесь, что в CSV-файле схемы используется правильный TeamId для команды. Он должен быть таким же, как и у группы Microsoft 365, который является backs-группой. Вы можете найти ИД группы в Центре администрирования Microsoft Teams. 

1. В левой области навигации [Центра администрирования Microsoft Teams](https://admin.teams.microsoft.com/)перейдите в teams **Manage**  >  **teams.**
2. Если **столбец "ИД** группы" не отображается  в таблице, выберите "Изменить столбцы" в правом верхнем углу таблицы, а затем включит ИД **группы.**
3. Найдите группу в списке и найдите ее ИД.

Убедитесь, что файл TeamId в CSV-файле схемы совпадает с ИД группы, который отображается в Центре администрирования Microsoft Teams. 

## <a name="related-topics"></a>Статьи по теме

- [Приложение "Задачи" для организации в Teams](manage-tasks-app.md)
- [Обзор PowerShell в Teams](teams-powershell-overview.md)
