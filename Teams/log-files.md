---
title: Настройка файлов журналов для мониторинга и устранения неполадок в Teams
ms.reviewer: tejeshs
author: CarolynRowe
ms.author: crowe
manager: serdars
ms.date: 05/06/2021
audience: admin
ms.topic: troubleshooting
ms.service: msteams
f1.keywords:
- NOCSH
ms.collection:
- M365-collaboration
search.appverid: MET150
description: Узнайте о журналах отладки, мультимедиа и компьютеров, созданных в Microsoft Teams, где их можно найти, а также о том, как они могут помочь в мониторинге и устранении неполадок.
appliesto:
- Microsoft Teams
ms.openlocfilehash: 2ab00f7a1eedf2b1341819c7ec1c67abeb5f6e38
ms.sourcegitcommit: 6b4dad9cea8fdad74c493ef62b085dbb9957235d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/31/2022
ms.locfileid: "67486894"
---
# <a name="configure-log-files-for-monitoring-and-troubleshooting-in-teams"></a>Настройка файлов журналов для мониторинга и устранения неполадок в Teams

Существует три типа файлов журналов, автоматически создаваемых клиентом, которые можно использовать для мониторинга и устранения неполадок Teams:

-   [Журналы отладки](#debug-logs)

-   [Журналы мультимедиа](#media-logs)

-   [Рабочие журналы](#desktop-logs)

В этой статье описываются эти журналы и способы их использования. Сведения об устранении конкретных неполадок см. в разделе "Устранение [неполадок Teams"](/MicrosoftTeams/troubleshoot/teams). 

Сведения о том, как обратиться в службу поддержки, см. в [разделе "Получение поддержки"](/microsoft-365/business-video/get-help-support).

> [!NOTE]
> В этой статье термин " **журналы** отладки" относится к журналам, используемым для устранения неполадок. Однако файлы, созданные для этих журналов, будут **содержать в** именах журналы диагностики терминов.  

## <a name="logs-overview"></a>Общие сведения о журналах

Очень важно собирать журналы, как только возникает проблема.

При обращении в службу поддержки нужно предоставить журналы отладки. Наличие журналов отладки перед созданием запроса на поддержку позволит корпорации Майкрософт быстро приступить к устранению проблемы. **Журналы** **мультимедиа или** рабочего стола требуются только при запросе корпорации Майкрософт.

Журналы отладки, рабочего стола и мультимедиа будут собираться в одной папке с именем _MSTeams Diagnostics Log \<local date and time\>_. Эту папку можно сжать и использовать совместно при открытии запроса на поддержку с помощью служба поддержки Майкрософт. Папка будет содержать папки для настольных компьютеров, собраний (мультимедиа) и отладки (в Интернете). Вы можете собирать файлы с помощью следующих сочетаний клавиш:

- Windows: <kbd>CTRL</kbd> + <kbd>ALT</kbd> + <kbd>SHIFT</kbd> + <kbd>1</kbd>

- Mac: <kbd>option</kbd> + <kbd>COMMAND</kbd> + <kbd>SHIFT</kbd> + <kbd>1</kbd>


Если возникла проблема с определенным собранием или трансляцией, полезно иметь URL-адрес, связанный с собранием. URL-адрес содержит дополнительные сведения, которые помогут точно определить собрание или трансляцию в журналах. Эти сведения могут быть собраны от любого участника собрания или от выступающего или организатора для трансляции. Этот URL-адрес можно записать, наведя указатель мыши на URL-адрес соединения и выбрав " **Копировать гиперссылку"**.

> [!NOTE]
> Если ведение журнала мультимедиа включено, в папку "Собрание" будут включены дополнительные файлы, необходимые для изучения проблем со звуком и видео. Если ведение журнала мультимедиа не включено, будет доступно ограниченное количество журналов.
  
В следующей таблице описаны различные клиенты и связанные с ними журналы. Расположение файлов журналов зависит от клиента и операционной системы.

|Клиент |Журналы отладки|Рабочие журналы|Журналы мультимедиа|
|---------|---------|---------|---------|
|Веб-клиент    |X         |-         |-         |
|Windows     |X         |X         |X         |
|Mac OSX     |X         |X         |X         |
|Linux     |X         |X         |X         |
|iOS     |-         |-         |-         |
|Android     |-         |-         |-         |

Полный список поддерживаемых операционных систем и браузеров см. в статье [Работа с клиентами для Microsoft Teams](get-clients.md).

## <a name="debug-logs"></a>Журналы отладки

Журналы отладки создаются классическими клиентами Windows и Mac, а также браузерами. Журналы основаны на тексте и считываться снизу вверх. Их можно читать с помощью любого текстового редактора, и при входе в клиент создаются новые журналы.

Журналы отладки показывают следующие потоки данных:

-   Вход

-   Запросы на подключение к службам среднего уровня

-   Звонок/беседа

Чтобы собрать журналы для Linux, выполните следующее.
- Сочетание клавиш: <kbd>CTRL ALT</kbd> + <kbd></kbd> + <kbd>SHIFT</kbd> + <kbd>1</kbd>  
- Файлы будут доступны в `~/Downloads`

Чтобы собрать журналы для Браузера и Windows, выполните следующее.
- Сочетание клавиш: <kbd>CTRL ALT</kbd> + <kbd></kbd> + <kbd>SHIFT</kbd> + <kbd>1</kbd>  
- Файлы будут доступны в `%userprofile%\Downloads`

Чтобы собрать журналы для Mac, выполните следующее.
- Сочетание клавиш: <kbd>option</kbd> + <kbd>COMMAND</kbd> + <kbd>SHIFT</kbd> + <kbd>1</kbd>  
- Файлы будут доступны в `~/Downloads`

## <a name="media-logs"></a>Журналы мультимедиа

Журналы мультимедиа содержат диагностические данные о звуке, видео и демонстрации экрана в собраниях Teams. Они необходимы для случаев поддержки, связанных с проблемой, связанной с вызовами.

Ведение журнала мультимедиа включено по умолчанию для компьютеров, если ЦП:
- Любой Apple M1
- Любой Intel Xeon
- Любые Intel i9, за исключением серии U, G7, M и MQ
- Любое 6-е поколение и более поздние версии Intel i7, за исключением серии U, G7, M и MQ

В противном случае он отключен по умолчанию. Существует два способа ведения журнала диагностических данных для собраний Teams:

- Администратор конфигурации — вы можете управлять журналами мультимедиа для конечных пользователей
- Конфигурация конечных пользователей— конечные пользователи могут включать журналы мультимедиа

### <a name="admin-configuration"></a>Администратор конфигурации

Управление журналами мультимедиа для конечных пользователей обеспечивает простой процесс устранения неполадок, особенно при периодически возникающих проблемах. Администраторы могут использовать командлет TeamsMediaLoggingPolicy, чтобы включить ведение журнала мультимедиа для пользователей и управлять ими.

[Ознакомьтесь с командлетами Grant-CsTeamsMediaLoggingPolicy](/powershell/module/teams/grant-csteamsmedialoggingpolicy) для PowerShell и дополнительными сведениями.

### <a name="end-user-configuration"></a>Конфигурация конечного пользователя

Чтобы пользователи регистрирует диагностические данные для собраний Teams, они должны включить этот параметр в клиенте Teams. Они перейдите в  >  раздел "Общие параметры **", установите** флажок "Включить журналы мультимедиа" (диагностические данные для аудио, видео и демонстрации **экрана)** и воспроизведите проблему.

> [!NOTE]
> При выходе пользователей из Teams ведение журнала мультимедиа сбрасывается до значения по умолчанию.

### <a name="collecting-and-sending-media-logs"></a>Сбор и отправка журналов мультимедиа

Перед отправкой файлов журналов в службу поддержки Майкрософт проверьте метку времени файлов журналов, чтобы журналы охватывают временные рамки при воспроизведении проблемы.

Чтобы собрать журналы для Linux, выполните следующее.  
- Файлы будут доступны в следующих расположениях:
  - `~/.config/Microsoft/Microsoft Teams/media-stack/\*\.blog`
  - `~/.config/Microsoft/Microsoft Teams/skylib/\*\.blog`

Чтобы собрать журналы для Windows, выполните следующее.  
- Файлы будут доступны в следующих расположениях:
  - `%appdata%\Microsoft\Teams\media-stack\\\*\.blog`
  - `%appdata%\Microsoft\Teams\skylib\\\*\.blog` 

Чтобы собрать журналы для Mac, выполните следующее.
- Файлы будут доступны в следующих расположениях:
  - `~/Library/Application Support/Microsoft/Teams/media-stack\\\*\.blog`
  - `~/Library/Application Support/Microsoft/Teams/skylib\\\*\.blog`

Ниже приведен список создаваемых файлов журналов и содержащихся в них сведений.

<br/>

|Имя файла журнала  |Описание  |
|---------|---------|
|`Teams.msrtc-0-s1039525249.blog`     | Содержит сведения, связанные с стеком носителей. К ним относится состояние канала, например разрешение, используемые декодировщики и кодировщики, а также количество отправленных и полученных кадров, а также состояние сеанса общего доступа к экранам на основе камеры и видео (VBSS).         |
|`rtmcontrol.msrtc-0-2415069487.blog`      |Записывает сведения, связанные с действиями удаленного управления, такие как метка времени при указании элемента управления и сведения о указателе мыши.          |
|`Teams_MediaStackETW-2-U-xr-U.etl`      |Записывает события трассировки стека мультимедиа.         |
|`Debug-0-s2790420889.blog`    | Содержит сведения, связанные с агентом мультимедиа, включая качество отрисовки.          |
|`tscalling-0-2061129496.blog`   |Записывает события в API вызова ts.       |

## <a name="desktop-logs"></a>Рабочие журналы

Журналы рабочего стола, также известные как журналы начального загрузчика, содержат данные журналов, которые происходят между клиентом и браузером. Как и журналы мультимедиа, эти журналы следует предоставлять только по отдельному запросу Майкрософт. Журналы основаны на тексте и могут считываться с помощью любого текстового редактора в формате сверху вниз.

Чтобы собрать журналы для Linux, выполните следующее.
- Щелкните значок Microsoft Teams в области уведомлений и выберите команду **"Получить журналы"**.
- Файлы будут доступны в `~/.config/Microsoft/Microsoft Teams/logs.txt`.

Чтобы собрать журналы для Mac, выполните следующее.
- Щелкните меню "Справка" в Microsoft Teams и выберите " **Сбор файлов поддержки"**.
- Файл `logs.txt` будет находится в папке "Рабочий стол" в папке _журнала диагностики MSTeams \<local date and time>_ .

Чтобы собрать журналы для Windows, выполните следующее.
- Щелкните значок Microsoft Teams в области уведомлений и выберите " **Сбор файлов поддержки"**.
- Файл `logs.txt` будет открыт в Блокноте автоматически.

При изучении проблем при входе в Teams может потребоваться вручную собрать журналы рабочего стола. Эти файлы журналов находятся в папке %appdata%\Microsoft\Teams в Windows.

## <a name="related-topics"></a>Статьи по теме

[Устранение неполадок Teams](/MicrosoftTeams/troubleshoot/teams)

[Журналы браузера и трассировка для Teams](/MicrosoftTeams/browser-logs-and-tracing-for-teams)
