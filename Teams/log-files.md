---
title: Использование файлов журналов для устранения неполадок в Microsoft Teams
ms.reviewer: tejeshs
author: CarolynRowe
ms.author: crowe
manager: serdars
ms.date: 05/06/2021
audience: admin
ms.topic: troubleshooting
ms.service: msteams
f1.keywords:
- NOCSH
ms.collection:
- M365-collaboration
search.appverid: MET150
description: Узнайте о журналах отладки, мультимедиа и рабочего стола, созданных Microsoft Teams, где их можно найти, а также о том, как они могут помочь в мониторинге и устранении неполадок.
appliesto:
- Microsoft Teams
ms.openlocfilehash: 4d8e3ab079498ecfca11a7d2ba48736aaf457329
ms.sourcegitcommit: bd05783dfb33a63e0eb083a2135f97d110dc81a3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2022
ms.locfileid: "65059110"
---
# <a name="use-log-files-to-monitor-and-troubleshoot-microsoft-teams"></a>Использование файлов журналов для мониторинга и устранения неполадок Microsoft Teams

Существует три типа файлов журналов, автоматически создаваемых клиентом, которые можно использовать для мониторинга и устранения неполадок Teams:

-   [Журналы отладки](#debug-logs)

-   [Журналы мультимедиа](#media-logs)

-   [Рабочие журналы](#desktop-logs)

В этой статье описываются эти журналы и способы их использования. Сведения об устранении конкретных неполадок см. в Teams [устранении неполадок](/MicrosoftTeams/troubleshoot/teams). Сведения о том, как обратиться в службу поддержки, см. в [разделе "Получение поддержки"](/microsoft-365/business-video/get-help-support). При обращении в службу поддержки нужно предоставить журналы отладки. Наличие журналов отладки перед созданием запроса на поддержку позволит корпорации Майкрософт быстро приступить к устранению проблемы. **Журналы** **мультимедиа или** рабочего стола требуются только при запросе корпорации Майкрософт.

> [!NOTE]
> В этой статье термин " **журналы** отладки" относится к журналам, используемым для устранения неполадок. Однако файлы, созданные для этих журналов, будут **содержать в** именах журналы диагностики терминов.  

## <a name="collect-and-enable-logging"></a>Сбор и включение ведения журнала

Очень важно собирать журналы, как только возникает проблема. Журналы можно собирать всего несколькими щелчками мыши.

- Windows: щелкните правой кнопкой мыши значок Teams панели уведомлений и выберите команду "Сбор **файлов поддержки"**. 

- Mac: выберите меню "Справка" и выберите " **Сбор файлов поддержки"**.

Журналы отладки, рабочего стола и мультимедиа будут собираться в одной папке с именем _MSTeams Diagnostics Log \<local date and time\>_. Эту папку можно сжать и использовать совместно при открытии запроса на поддержку с помощью служба поддержки Майкрософт. Папка будет содержать папки для настольных компьютеров, собраний (мультимедиа) и отладки (в Интернете). Вы можете собирать файлы с помощью следующих сочетаний клавиш:

- Windows: <kbd>CTRL ALT</kbd> + <kbd></kbd> + <kbd>SHIFT</kbd> + <kbd>1</kbd>

- Mac: <kbd>option</kbd> + <kbd>COMMAND</kbd> + <kbd>SHIFT</kbd> + <kbd>1</kbd>


Ведение журнала мультимедиа включено по умолчанию только для некоторых ЦП, описанных в [журналах мультимедиа](#media-logs). В противном случае он отключен по умолчанию. Чтобы включить ведение журнала мультимедиа, пользователи должны включить этот параметр в Teams клиента. Перейдите **Параметры** >  **General** и выберите "Включить ведение журнала для диагностики собраний" (требуется перезапуск **Teams)**. Чтобы начать Teams клиента, необходимо перезапустить его (перезапустить его, щелкнув правой кнопкой мыши значок на панели док-станции (Mac) или панели задач (Windows) и нажав кнопку "Выйти **".** После выхода просто щелкните значок приложения, чтобы снова открыть его.

Если возникла проблема с определенным собранием или трансляцией, полезно иметь URL-адрес, связанный с собранием. Это предоставляет дополнительные сведения, которые помогут точно определить собрание или трансляцию в журналах. Эти сведения могут быть собраны от любого участника собрания или от выступающего или организатора для трансляции. Этот URL-адрес можно записать, наведя указатель мыши на URL-адрес соединения и выбрав " **Копировать гиперссылку"**.

> [!NOTE]
> Если ведение журнала мультимедиа включено, в папку "Собрание" будут включены дополнительные файлы, необходимые для изучения проблем со звуком и видео. Если ведение журнала мультимедиа не включено, будет доступно ограниченное количество журналов.
  
> [!NOTE]
> Журналы отладки ранее собирались с помощью приведенных ниже сочетаний клавиш. Они по-прежнему будут работать и будут выполнять запись в тот же журнал, что и параметр **"Сбор файлов поддержки** ".
>
> - Windows: <kbd>CRTL ALT</kbd> + <kbd></kbd> + <kbd>SHIFT</kbd> + <kbd>1</kbd>
>
> - Mac: <kbd>option</kbd> + <kbd>COMMAND</kbd> + <kbd>SHIFT</kbd> + <kbd>1</kbd>


В следующей таблице описаны различные клиенты и связанные с ними журналы. Расположение файлов журналов зависит от клиента и операционной системы.


|Клиент |Журналы отладки|Рабочие журналы|Журналы мультимедиа|
|---------|---------|---------|---------|
|Веб-клиент    |X         |-         |-         |
|Windows     |X         |X         |X         |
|Mac OSX     |X         |X         |X         |
|Linux     |X         |X         |X         |
|iOS     |-         |-         |-         |
|Android     |-         |-         |-         |

Полный список поддерживаемых операционных систем и браузеров см. в статье [Работа с клиентами для Microsoft Teams](get-clients.md).

## <a name="debug-logs"></a>Журналы отладки

Инструкции _по сбору и включению ведения_ журнала см. Windows Mac. Журналы отладки создаются классическими клиентами Windows и Mac, а также браузерами. Журналы основаны на тексте и считываться снизу вверх. Их можно читать с помощью любого текстового редактора, и при входе в клиент создаются новые журналы.

Журналы отладки показывают следующие потоки данных:

-   Вход

-   Запросы на подключение к службам среднего уровня

-   Звонок/беседа

Чтобы собрать журналы для Linux, выполните следующее.
- Сочетание клавиш: <kbd>CtrlAltShift1</kbd> + <kbd></kbd> + <kbd></kbd> + <kbd></kbd>  
- Файлы будут доступны в `~/Downloads`

Чтобы собрать журналы для браузера и Windows:
- Сочетание клавиш: <kbd>CtrlAltShift1</kbd> + <kbd></kbd> + <kbd></kbd> + <kbd></kbd>  
- Файлы будут доступны в `%userprofile%\Downloads`

## <a name="media-logs"></a>Журналы мультимедиа

Инструкции _по сбору и включению ведения_ журнала см. Windows Mac. Журналы мультимедиа содержат диагностические данные о звуке, видео и демонстрации экрана Teams собраниях. Они необходимы для случаев поддержки, связанных с проблемой, связанной с вызовами.

Ведение журнала мультимедиа включено по умолчанию для компьютеров, если ЦП:
- Любой Apple M1
- Любой Intel Xeon
- Любые Intel i9, за исключением серии U, G7, M и MQ
- Любое 6-е поколение и более поздние версии Intel i7, за исключением серии U, G7, M и MQ

В противном случае он отключен по умолчанию. Для записи диагностических данных Teams собраний пользователи должны включить этот параметр в Teams клиенте. Перейдите **к Параметры** >  **General**, установите флажок "Включить ведение журнала для диагностики собраний" **(** требуется перезапуск Teams), перезапустите Teams и воспроизведите проблему. 

> [!NOTE]
> При выходе из Teams журнал мультимедиа сбрасывается до значения по умолчанию. 

При отправке файлов журналов в службу поддержки Майкрософт проверьте метку времени файлов журналов, чтобы убедиться, что журналы охватывают временные рамки при воспроизведении проблемы.

Чтобы собрать журналы для Linux, выполните следующее.  
- Файлы будут доступны в следующих расположениях:
  - `~/.config/Microsoft/Microsoft Teams/media-stack/\*\.blog`
  - `~/.config/Microsoft/Microsoft Teams/skylib/\*\.blog`

Чтобы собрать журналы для Windows:  
- Файлы будут доступны в следующих расположениях:
  - `%appdata%\Microsoft\Teams\media-stack\\\*\.blog`
  - `%appdata%\Microsoft\Teams\skylib\\\*\.blog` 

Чтобы собрать журналы для Mac, выполните следующее.
- Файлы будут доступны в следующих расположениях:
  - `~/Library/Application Support/Microsoft/Teams/media-stack\\\*\.blog`
  - `~/Library/Application Support/Microsoft/Teams/skylib\\\*\.blog`

Ниже приведен список создаваемых файлов журналов и содержащихся в них сведений.

<br/>

|Имя файла журнала  |Описание  |
|---------|---------|
|`Teams.msrtc-0-s1039525249.blog`     | Содержит сведения, связанные с стеком носителей. К ним относится состояние канала, например разрешение, используемые декодировщики и кодировщики, а также количество отправленных и полученных кадров, а также состояние сеанса общего доступа к экранам на основе камеры и видео (VBSS).         |
|`rtmcontrol.msrtc-0-2415069487.blog`      |Записывает сведения, связанные с действиями удаленного управления, такие как метка времени при указании элемента управления и сведения о указателе мыши.          |
|`Teams_MediaStackETW-2-U-xr-U.etl`      |Записывает события трассировки стека мультимедиа.         |
|`Debug-0-s2790420889.blog`    | Содержит сведения, связанные с агентом мультимедиа, включая качество отрисовки.          |
|`tscalling-0-2061129496.blog`   |Записывает события в API вызова ts.       |

## <a name="desktop-logs"></a>Рабочие журналы

Инструкции _по сбору и включению ведения_ журнала см. Windows Mac. Журналы рабочего стола, также известные как журналы начального загрузчика, содержат данные журналов, которые происходят между клиентом и браузером. Как и журналы мультимедиа, эти журналы следует предоставлять только по отдельному запросу Майкрософт. Журналы основаны на тексте и могут считываться с помощью любого текстового редактора в формате сверху вниз.

Чтобы собрать журналы для Linux, выполните следующее.
- Щелкните значок Microsoft Teams в области уведомлений и выберите команду **"Получить журналы"**.
- Файлы будут доступны в `~/.config/Microsoft/Microsoft Teams/logs.txt`.
  
Чтобы собрать журналы для Windows:
- Щелкните значок Microsoft Teams в области уведомлений и выберите "**Сбор файлов поддержки"**.
- Файл `logs.txt` будет открыт в Блокнот автоматически.

При изучении проблем, связанных с Teams, может потребоваться вручную собрать журналы рабочего стола. Эти файлы журналов находятся в папке %appdata%\Microsoft\Teams в Windows.

## <a name="browser-trace"></a>Трассировка браузера

Для некоторых категорий ошибок служба поддержки Майкрософт может потребоваться сбор трассировки браузера. Эти сведения могут содержать важные сведения о состоянии Teams клиента при возникновении ошибки.

Перед запуском трассировки браузера убедитесь, что вы вошли в Teams. Это важно сделать перед запуском трассировки, чтобы трассировка не содержала конфиденциальные сведения о входе.

После входа выберите одну из следующих ссылок, соответствующую браузеру, и выполните указанные ниже действия. 

-   [Chrome & Edge (Chromium)](/azure/azure-portal/capture-browser-trace#google-chrome-and-microsoft-edge-chromium?preserve-view=true#resolution)

-   [Пограничный сервер](/azure/azure-portal/capture-browser-trace#microsoft-edge-edgehtml?preserve-view=true#resolution)

-   [Сафари](/azure/azure-portal/capture-browser-trace#apple-safari?preserve-view=true#resolution)

-   [Firefox](/azure/azure-portal/capture-browser-trace#firefox?preserve-view=true#resolution)

> [!NOTE]
> На этом этапе замените все ссылки на портал Azure на Teams клиента.
  
## <a name="webrtc-logs-in-browsers"></a>Журналы WebRTC в браузерах
Журналы WebRTC могут служба поддержки Майкрософт, предоставляя сведения о подключении для аудио- и видеозвонков. Выполните действия, чтобы получить доступ к журналам WebRTC в Edge (Chromium) или Chrome: 
  
1.  Откройте новую вкладку и перейдите по одному из следующих URL-адресов:
    -   Edge (Chromium):`edge://webrtc-internals/`
    -   Хром: `chrome://webrtc-internals/`
  
2.  Откройте веб-Teams и воспроизведите проблему.
  
3.  Назад на вкладку, доступ к которой был выполнен на шаге 1, и вы увидите по крайней мере две вкладки:
    -   Запросы GetUserMedia
    -   `https://teams.microsoft.com/url`

4.  Выберите вкладку с именем приложения Teams и сохраните содержимое страницы.

## <a name="related-topics"></a>Статьи по теме

[Устранение неполадок Teams](/MicrosoftTeams/troubleshoot/teams)
