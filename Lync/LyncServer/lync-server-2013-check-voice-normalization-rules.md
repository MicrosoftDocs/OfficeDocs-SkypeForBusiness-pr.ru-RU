---
title: 'Lync Server 2013: Проверка правил нормализации голосовых сообщений'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: Check voice normalization rules
ms:assetid: bf71a218-71cd-4b64-b8e8-b3a98b6e87a2
ms:mtpsurl: https://technet.microsoft.com/en-us/library/Dn725212(v=OCS.15)
ms:contentKeyID: 63969649
ms.date: 01/27/2015
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 04e383f38d5af6f106354a766c857635bcd87eb3
ms.sourcegitcommit: b693d5923d6240cbb865241a5750963423a4b33e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/04/2020
ms.locfileid: "41733869"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="http://msdn.microsoft.com/en-us/">

<div data-asp="http://msdn2.microsoft.com/asp">

# <a name="check-voice-normalization-rules-in-lync-server-2013"></a>Проверка правил нормализации голосовых сообщений в Lync Server 2013

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**Тема последнего изменения:** 2014-05-20_


<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p>Расписание проверки</p></td>
<td><p>Ежемесячно</p></td>
</tr>
<tr class="even">
<td><p>Средство тестирования</p></td>
<td><p>Windows PowerShell</p></td>
</tr>
<tr class="odd">
<td><p>Требуемые разрешения</p></td>
<td><p>При локальном запуске с помощью командной консоли Lync Server пользователи должны быть членами группы безопасности Рткуниверсалсерверадминс.</p>
<p>При запуске с помощью удаленного экземпляра Windows PowerShell пользователям должна быть назначена роль RBAC, имеющая разрешение на запуск командлета Test-Ксвоиценормализатионруле. Чтобы просмотреть список всех ролей RBAC, которые могут использовать этот командлет, выполните в командной строке Windows PowerShell следующую команду:</p>
<p><code>Get-CsAdminRole | Where-Object {$_.Cmdlets -match &quot;Test-CsVoiceNormalizationRule&quot;}</code></p></td>
</tr>
</tbody>
</table>


<div>

## <a name="description"></a>Описание

Правила нормализации голоса используются для преобразования номера телефона, набранного пользователем (например, 2065551219), в формат E. 164, который используется приложением Lync Server (+ 12065551219). Например, если пользователи находятся в привычке набрать номер телефона, не включая код страны или код города (например, 5551219), необходимо иметь правило нормализации голоса, которое может преобразовать этот номер в формат E. 164: + 12065551219. Без такого правила пользователь не сможет позвонить в 555-1219.

Командлет Test-Ксвоиценормализатионруле удостоверяется в том, что указанное правило нормализации голоса может успешно преобразовать указанный номер телефона. Например, эта команда проверяет, может ли глобальная Ноареакоде правило нормализации нормализация и преобразование строки набора 5551219.

`Get-CsVoiceNormalizationRule -Identity "global/NoAreaCode" | Test-CsVoiceNormalizationRule -DialedNumber "5551219"`

</div>

<div>

## <a name="running-the-test"></a>Выполнение теста

Чтобы запустить командлет Test-Ксвоиценормализатионруле, необходимо сначала использовать командлет Get-Ксвоиценормализатионруле, чтобы получить экземпляр тестируемого правила, а затем передать этот экземпляр для проверки в Ксвоиценормализатионруле. Синтаксис, похожий на этот, не подходит.

Test-Ксвоиценормализатионруле-Диаледнумбер "12065551219" — Нормализатионруле "Global/prefix ALL"

Вместо этого используйте следующий синтаксис, объединяющий командлеты Get-Ксвоиценормализатионруле и Test-Ксвоиценормализатионруле:

Get-Ксвоиценормализатионруле-Identity "Global/prefix ALL" | Test-Ксвоиценормализатионруле-Диаледнумбер "12065551219"

<div>


> [!NOTE]  
> . Кроме того, вы также можете использовать этот подход, чтобы получить экземпляр правила, а затем проверить правило по указанному номеру телефона.



</div>

`$x = Get-CsVoiceNormalizationRule -Identity "global/Prefix All"`

`Test-CsVoiceNormalizationRule -DialedNumber "12065551219" -NormalizationRule $x`

Введите значение параметра Диаледнумбер точно так же, как ожидается набор номера. Например, если указанное правило нормализации голоса должно автоматически добавлять код страны (первый 1 в значении 12065551219), то вы должны выйти из кода страны.

`-DialedNumber "2065551219"`

Если правило настроено правильно, оно автоматически добавляет код страны при переводе номера в формат E. 164, который используется в Lync Server.

Дополнительные сведения можно найти в справочной документации по командлету Test-Ксвоиценормализатионруле.

</div>

<div>

## <a name="determining-success-or-failure"></a>Определение успеха или сбоя

Если указанное правило нормализации голоса может перевести предоставленный номер, на экране будет отображаться переведенный номер.

транслатеднумбер

\----------------

\+12065551219

Если проверка завершится ошибкой, будет возвращено пустое переведенное число.

транслатеднумбер

\----------------

</div>

<div>

## <a name="reasons-why-the-test-might-have-failed"></a>Причины, по которым может произойти сбой теста

Если тест-Ксвоиценормализатионруле возвращает переведенное число, которое означает, что указанное правило нормализации голоса не смогло перевести предоставленный телефонный номер в формат E. 164, используемый Lync Server. Чтобы убедиться в том, что вы ввели правильный номер телефона, убедитесь в том, что он правильно введен. Например, вы ожидаете, что правило нормализации голоса будет иметь проблемы при преобразовании числа, похожего на следующее:

`-DialedNumber "1"`

Если номер введен правильно, необходимо убедиться в том, что указанное правило нормализации предназначено для обработки этого номера телефона. Например, одно правило нормализации может быть спроектировано для обработки формата 12065551219, но второе правило может быть спроектировано для обработки числа 2065551219. (Это тот же самый и тот же номер телефона, но и код страны 1 в самом начале.) Чтобы получить подробные сведения о правиле нормализации голосовой связи, выполните команду, подобную следующей:

`Get-CsVoiceNormalizationRule -Identity "global/Prefix All" | Format-List`

Чтобы получить подробные сведения о всех правилах нормализации голоса, выполните эту команду:

`Get-CsVoiceNormalizationRule | Format-List`

</div>

<div>

## <a name="see-also"></a>См. также


[Test-CsVoiceNormalizationRule](https://docs.microsoft.com/powershell/module/skype/Test-CsVoiceNormalizationRule)  
  

</div>

</div>

<span> </span>

</div>

</div>

</div>

