---
title: 'Lync Server 2013: Планирование аварийного восстановления для группы ответа'
description: 'Lync Server 2013: Планирование аварийного восстановления группы ответа.'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: Planning for response group disaster recovery
ms:assetid: 14e0f5dc-77cd-42cd-a9c9-4d0da38fb1cf
ms:mtpsurl: https://technet.microsoft.com/en-us/library/JJ204699(v=OCS.15)
ms:contentKeyID: 48183482
ms.date: 07/23/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 5294ddf7dbd42d95c5eb17acd6be6a5abc7a5917
ms.sourcegitcommit: d42a21b194f4a45e828188e04b25c1ce28a5d1ae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2020
ms.locfileid: "48549265"
---
# <a name="planning-for-response-group-disaster-recovery-in-lync-server-2013"></a>Планирование аварийного восстановления группы ответа в Lync Server 2013

<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="https://msdn.microsoft.com/">

<div data-asp="https://msdn2.microsoft.com/asp">



</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**Последнее изменение темы:** 2012-11-01_

В этом разделе описываются некоторые способы подготовки групп ответа к аварийному восстановлению и обзор процесса аварийного восстановления.

<div>

## <a name="preparing-for-response-group-disaster-recovery"></a>Подготовка к аварийному восстановлению группы ответа

При подготовке и выполнении процедур аварийного восстановления имейте в виду следующее.

<div>


> [!NOTE]  
> В среде сосуществования для процедур аварийного восстановления, описанных в этом документе, поддерживаются только группы ответа Lync Server 2013.



</div>

  - Планируйте аварийное восстановление в ходе планирования мощности. Для емкости аварийного восстановления каждый пул в связанном пуле должен иметь возможность обрабатывать рабочие нагрузки всех групп ответа в обоих пулах. Подробнее о планировании мощности группы ответа можно узнать [в статье Планирование мощности для группы ответа в Lync Server 2013](lync-server-2013-capacity-planning-for-response-group.md).

  - Создайте стандартные резервные копии всех конфигураций группы ответа во всех пулах переднего плана, где вы развернули приложение группы ответа с помощью процедуры экспорта, описанной в этом документе. Для получения дополнительных сведений см. [процедуры аварийного восстановления группы ответа в Lync Server 2013](lync-server-2013-response-group-disaster-recovery-procedures.md). Резервные копии следует хранить в надежном месте.

  - Сохраните отдельную резервную копию всех исходных файлов, которые использовались для приложения группы ответа, включая записи и файлы для хранения музыки. Храните файлы резервных копий в надежном месте.

  - При аварийном восстановлении Lync Server 2013 все параметры группы ответа должны иметь уникальные имена во всем развертывании. Это требование относится к рабочим процессам, очередям, группам агентов, наборам праздников и часам бизнеса. Необходимо убедиться, что это требование выполнено, когда основной и резервный пулы по-прежнему активны, и до того, как необходимо инициировать какую-либо процедуру отработки отказа. Если при импорте данных группы ответа в резервный пул возникли конфликты имен, Импорт завершается неудачей. Чтобы выполнить процедуру импорта и отработки отказа, необходимо устранить конфликты имен, переопределив объект группы ответа в резервном пуле, или с помощью командлета **Import-CsRgsConfiguration** с параметром – ресолвенамеконфликтс, чтобы автоматически разрешить конфликт, добавив уникальный идентификационный номер в объект группы ответа.

  - Как правило, рекомендуется выполнять ежедневное резервное копирование, но если у вас большой объем изменений, можно запланировать более частые резервные копии. Объем данных, которые можно потерять в случае аварии, зависит от частоты резервного копирования, а также частоты и объема изменений.

  - Можно импортировать группы ответа в резервный пул перед выполнением аварийной или резервной операции. Импорт групп ответа в продвижение сокращает время простоя, так как служба группы ответа Lync Server может быть восстановлена в резервном пуле, как только вызовы направляются в резервный пул.
    
    <div>
    

    > [!NOTE]  
    > Приложение группы ответа не может получить доступ к агентам, размещенным в неактивном пуле, пока отработка отказа не завершена. В течение этого времени приложение группы ответа обрабатывает вызовы, как если бы эти агенты были недоступны.

    
    </div>

</div>

<div>

## <a name="response-group-disaster-recovery-process"></a>Процесс аварийного восстановления группы ответа

В случае аварии вы можете восстановить группы ответа, используя один из следующих подходов к восстановлению:

  - Отработка отказа в резервном пуле и восстановление исходного пула.

  - Отработка отказа для резервного копирования в резервный пул, создание нового пула с другим полным доменным именем (FQDN), а затем импорт групп ответа в новый пул.

На этапе отработки отказа в процессе аварийного восстановления группы ответа находятся в двух пулах: основном (который недоступен) и резервном. Группы ответа в обоих пулах имеют одинаковое имя и владельца (основной пул), но разные родительские объекты.

При восстановлении путем создания нового пула с другим полным доменным именем необходимо назначить новый пул владельцем групп ответа при их импорте. Владелец групп ответа остается в исходном пуле до тех пор, пока не будет явно переназначено владение с помощью параметра – Овервритеовнер с помощью командлета **Import-CsRgsConfiguration** .

<div>


> [!NOTE]  
> Кроме того, необходимо использовать параметр – Овервритеовнер, если вы перестроили пул во время восстановления (то есть, что база данных группы ответа пуста), независимо от того, используется ли такое же полное доменное имя. Нет необходимости использовать параметр – Овервритеовнер, если вы не перестраивать пул, но этот параметр можно использовать при импорте групп ответа обратно в основной пул.



</div>

Для каждого пула можно определить только один набор параметров конфигурации группы ответа уровня приложения. Эти параметры включают используемую по умолчанию конфигурацию хранения музыки, а также стандартный звуковой файл с музыкой по умолчанию, период отсрочки агента удерживаемого абонента и контекстную конфигурацию вызова. Чтобы просмотреть эти параметры конфигурации, запустите командлет **Get – CsRgsConfiguration** . Сведения о командлете **Get – CsRgsConfiguration** можно найти в статье [Get – CsRgsConfiguration](https://docs.microsoft.com/powershell/module/skype/Get-CsRgsConfiguration).

Эти параметры уровня приложения можно перенести из одного пула в другой с помощью командлета **Import-CsRgsConfiguration** с параметром – реплацеексистингсеттингс, но это переопределяет параметры в целевом пуле.

<div>


> [!IMPORTANT]  
> Это ограничение для переноса параметров в другой пул имеет значение true только для параметров уровня приложения и музыкальных файлов по умолчанию. Она не применяется к группам агентов, очередям, рабочим процессам, рабочим часам и наборам праздников.



</div>

Если вы не хотите заменять параметры уровня приложения в резервном пуле во время аварии, и основной пул восстановить невозможно, параметры уровня приложения из основного пула будут утрачены. Если необходимо создать новый пул для замены основного пула в ходе восстановления с таким же полным доменным именем или с другим полным доменным именем, вы не сможете восстановить исходные параметры на уровне приложения. В этом случае необходимо настроить новый пул с использованием этих параметров и включить звуковой файл с музыкой для сохранения.

Если вы решили использовать командлет **Import – CsRgsConfiguration** для переноса параметров уровня приложения из основного пула в резервный пул во время аварии, вы можете перенести параметры из резервного пула в новый пул во время восстановления, как это было передано из основного пула в резервный пул.

В следующей таблице представлен обзор действий, необходимых для восстановления групп ответа.

Для получения дополнительных сведений о выполнении этих шагов обратитесь к разделу [процедуры аварийного восстановления группы ответа в Lync Server 2013](lync-server-2013-response-group-disaster-recovery-procedures.md).

### <a name="response-group-disaster-recovery-steps"></a>Этапы аварийного восстановления группы ответа

<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th>Этап</th>
<th>Действия</th>
<th>Необходимые группы и роли</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Перед отключением</p></td>
<td><p>При необходимости выполните командлет <strong>Export-CsRgsConfiguration</strong> , чтобы создать резервные копии всех конфигураций группы ответа во всех пулах переднего плана, где развернуто приложение группы ответа.</p></td>
<td><p>RTCUniversalServerAdmins</p>
<p>ксреспонсеграупадминистратор</p></td>
</tr>
<tr class="even">
<td><p>Во время сбоя</p></td>
<td><p>Выполните командлет <strong>Import – CsRgsConfiguration</strong> для импорта конфигурации службы группы ответа Lync Server из основного пула в резервный пул.</p>
<div>

> [!NOTE]  
> Используйте параметр – Реплацеексистингсеттингс, если требуется заменить параметры группы ответа уровня приложения в резервном пуле на параметры из основного пула. Если не перенести параметры уровня приложения из основного пула в резервный пул, а основной пул восстановить невозможно, параметры из основного пула будут потеряны.


</div></td>
<td><p>RTCUniversalServerAdmins</p>
<p>ксреспонсеграупадминистратор</p></td>
</tr>
<tr class="odd">
<td><p>После импорта</p></td>
<td><p>Выполните командлеты группы ответа с параметром – ShowAll (для отображения всех групп ответа) или параметр – Owner (для отображения только импортированных групп ответа), чтобы убедиться в том, что все конфигурации группы ответа были импортированы в резервный пул.</p>
<div>

> [!IMPORTANT]  
> Если вы не используете параметр – ShowAll или параметр – owner, группы ответа, импортированные в резервный пул, не будут отображаться в результатах, возвращенных командлетами.


</div>
<p>Выполните следующие командлеты:</p>
<ul>
<li><p><strong>Get — CsRgsWorkflow</strong></p></li>
<li><p><strong>Get — CsRgsQueue</strong></p></li>
<li><p><strong>Get — CsRgsAgentGroup</strong></p></li>
<li><p><strong>Get — CsRgsHoursOfBusiness</strong></p></li>
<li><p><strong>Get — CsRgsHolidaySet</strong></p></li>
</ul></td>
<td><p>RTCUniversalServerAdmins</p>
<p>ксреспонсеграупадминистратор</p></td>
</tr>
<tr class="even">
<td><p>После отработки отказа</p></td>
<td><ul>
<li><p>Установите тестовый вызов группы ответа, которая была импортирована в резервный пул, и убедитесь, что вызов обрабатывается правильно.</p></li>
<li><p>Все формальные агенты должны снова войти в свои формальные группы в резервном пуле.</p></li>
<li><p>Управление изменениями конфигурации:</p>
<p>Группы ответа в резервном пуле, импортированные в резервный пул или принадлежащие резервному пулу, могут быть изменены как обычно во время сбоя.</p>
<div>

> [!IMPORTANT]  
> Для управления группами ответа, импортированными в резервный пул, необходимо использовать командную консоль Lync Server. Вы не можете использовать панель управления Lync Server для управления этими группами ответа, пока они находятся в резервном пуле.


</div></li>
</ul></td>
<td><p>Недоступно</p></td>
</tr>
<tr class="odd">
<td><p>После восстановления до восстановления размещения</p></td>
<td><p>Выполните командлет <strong>Export-CsRgsConfiguration</strong> , указав параметр-Source в качестве резервного пула, и параметр – owner в качестве основного пула для экспорта групп ответа, принадлежащих основному пулу, из резервного пула.</p></td>
<td><p>RTCUniversalServerAdmins</p>
<p>ксреспонсеграупадминистратор</p></td>
</tr>
<tr class="even">
<td><p>После восстановления размещения</p></td>
<td><ul>
<li><p>Выполните командлет <strong>Import – CsRgsConfiguration</strong> , чтобы импортировать группы ответа обратно в основной пул.</p>
<div>

> [!NOTE]  
> Если основной пул восстановить невозможно и вы развернете новый пул, чтобы заменить его, используйте параметр – Реплацеексистингсеттингс для переноса параметров уровня приложения из резервного пула в новый пул. Если вы не переносите параметры из резервного пула, новый пул будет использовать параметры по умолчанию.


</div></li>
<li><p>Выполните следующие командлеты с параметром – ShowAll (для отображения всех групп ответа) или параметр – Owner (для отображения только импортированных групп ответа), чтобы убедиться, что все конфигурации группы ответа успешно импортированы обратно в основной пул:</p>
<ul>
<li><p><strong>Get — CsRgsWorkflow</strong></p></li>
<li><p><strong>Get — CsRgsQueue</strong></p></li>
<li><p><strong>Get — CsRgsAgentGroup</strong></p></li>
<li><p><strong>Get — CsRgsHoursOfBusiness</strong></p></li>
<li><p><strong>Get — CsRgsHolidaySet</strong></p></li>
</ul></li>
<li><p>Поместите тестовый вызов в группу ответа, которая была импортирована обратно в основной пул, и убедитесь, что вызов обрабатывается правильно.</p></li>
<li><p>При необходимости выполните командлет <strong>Export-CsRgsConfiguration</strong> в резервном пуле с параметром – ремовикспортедконфигуратион, чтобы удалить из резервного пула группы ответа, принадлежащие основному пулу.</p></li>
</ul></td>
<td><p>RTCUniversalServerAdmins</p>
<p>ксреспонсеграупадминистратор</p></td>
</tr>
</tbody>
</table>


</div>

</div>

<span> </span>

</div>

</div>

</div>

