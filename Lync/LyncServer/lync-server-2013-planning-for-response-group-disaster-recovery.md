---
title: 'Lync Server 2013: планирование аварийного восстановления для группы ответа'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
TOCTitle: Planning for response group disaster recovery
ms:assetid: 14e0f5dc-77cd-42cd-a9c9-4d0da38fb1cf
ms:mtpsurl: https://technet.microsoft.com/en-us/library/JJ204699(v=OCS.15)
ms:contentKeyID: 48183482
ms.date: 07/23/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 70622364349eb83ecbc171cb3d5bf894ba03d3f9
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/11/2019
ms.locfileid: "34824563"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="http://msdn.microsoft.com/en-us/">

<div data-asp="http://msdn2.microsoft.com/asp">

# <a name="planning-for-response-group-disaster-recovery-in-lync-server-2013"></a>Планирование аварийного восстановления для группы ответа в Lync Server 2013

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**Тема последнего изменения:** 2012-11-01_

В этом разделе описаны некоторые способы подготовки групп ответов для аварийного восстановления и обзор процесса аварийного восстановления.

<div>

## <a name="preparing-for-response-group-disaster-recovery"></a>Подготовка к аварийному восстановлению группы ответов

При подготовке и выполнении процедур аварийного восстановления следует учитывать следующее:

<div>


> [!NOTE]  
> В среде сосуществования для процедур аварийного восстановления, описанных в этом документе, поддерживаются только группы ответов Lync Server 2013.



</div>

  - Планирование аварийного восстановления при планировании производственных мощностей. Для производительности аварийного восстановления каждый пул в Объединенном пуле должен иметь возможность обрабатывать рабочие нагрузки всех групп ответов в обоих пулах. Подробные сведения о планировании мощности групп ответов можно найти [в разделе Планирование ресурсов для группы ответа в Lync Server 2013](lync-server-2013-capacity-planning-for-response-group.md).

  - Регулярно заполните резервные копии всех конфигураций групп ответа во всех пулах интерфейсов, в которых вы развернули приложение группы ответа с помощью процедуры экспорта, описанной в этом документе. Дополнительные сведения можно найти [в разделе процедуры аварийного восстановления группы ответа в Lync Server 2013](lync-server-2013-response-group-disaster-recovery-procedures.md). Храните резервные копии в безопасном месте.

  - Храните резервные копии всех исходных аудиофайлов, которые вы использовали для приложения группы ответа, включая любые записи и файлы на удержании музыки. Храните архивные файлы в безопасном месте.

  - Для Lync Server 2013 с аварийным восстановлением все параметры группы ответа должны иметь уникальные имена в рамках развертывания. Это требование относится к рабочим процессам, очередям, группам агентов, наборам праздников и часам бизнеса. Убедитесь в том, что это требование выполняется, когда основной пул и пулы резервных копий по-прежнему активны, а перед тем, как вы захотите инициировать резервную процедуру. Если при импорте данных группы ответа в пул резервных копий возникло конфликт имен, импорт завершится сбоем. Чтобы завершить импорт и отработку отказа, необходимо устранить конфликты имен, переименование объекта группы ответа в пуле резервных копий, или с помощью командлета **Import-ксргсконфигуратион** с параметром – ресолвенамеконфликтс автоматически. Устраните конфликт, добавив уникальный идентификационный номер к объекту группы ответа.

  - Как правило, мы рекомендуем выполнять ежедневные архивации, но если у вас много изменений, вам может понадобиться запланировать более частые резервные копии. Объем данных, которые можно потерять в случае аварии, зависит от частоты резервных копий, а также частоты и объема изменений.

  - Вы можете импортировать группы ответа в пул резервных копий перед выполнением аварийной или резервной операции. Импорт групп ответа в заранее сокращает время простоя, так как служба группы ответа Lync Server может быть восстановлена в пуле резервного копирования сразу после того, как звонки пересылаются в пул резервных копий.
    
    <div>
    

    > [!NOTE]  
    > Приложение группы ответа не может связаться ни с одним агентом в неактивном пуле, пока не завершится отработка отказа. В течение этого времени приложение "группа ответа" обрабатывает звонки так, как если бы эти агенты были недоступны.

    
    </div>

</div>

<div>

## <a name="response-group-disaster-recovery-process"></a>Процесс аварийного восстановления группы ответов

В случае аварии вы можете восстановить группы ответа, используя один из указанных ниже подходов к восстановлению.

  - Отработка отказа в резервной копии пула, после чего он не будет восстановлен в исходном пуле.

  - Отработка отказа в резервной копии пула, создание нового пула с другим полным доменным именем (FQDN), а затем импорт групп ответа в новый пул.

На этапе восстановления после сбоя в аварийном восстановлении группы ответа находятся в нескольких пулах: в основном пуле (который недоступен) и в пуле резервных копий. Группы ответа в обоих пулах имеют одинаковое имя и одного и того же владельца (основного пула), но у них разные родители.

При восстановлении путем создания нового пула с другим полным доменным именем необходимо назначить новый пул владельцем групп ответа при импорте. Владелец групп ответов остается в исходном пуле, если только вы не переназначьте владение с помощью параметра – Овервритеовнер с командлетом **Import-ксргсконфигуратион** .

<div>


> [!NOTE]  
> Кроме того, вы также можете использовать параметр – Овервритеовнер, если вы перестроили пул во время восстановления (то есть она пуста), независимо от того, используется ли это полное доменное имя. Если вы не перестроены в пул, вам не нужно использовать параметр – Овервритеовнер, но этот параметр можно использовать при импорте групп ответа обратно в основной пул.



</div>

Вы можете задать только один набор параметров конфигурации группы ответов на уровне приложения для каждого пула. Эти параметры включают стандартную конфигурацию сохранения музыки, используемую по умолчанию в качестве звукового файла для сохранения музыки, агент рингбакк льготный период и контекстную конфигурацию вызова. Чтобы просмотреть эти параметры конфигурации, запустите командлет **Get-ксргсконфигуратион** . Дополнительные сведения о командлете **Get-ксргсконфигуратион** можно найти в [статьях Get-ксргсконфигуратион](https://docs.microsoft.com/powershell/module/skype/Get-CsRgsConfiguration).

Вы можете перенести эти параметры уровня приложения из одного пула в другой с помощью командлета **Import-ксргсконфигуратион** с параметром – реплацеексистингсеттингс, но это переопределит параметры в целевом пуле.

<div>


> [!IMPORTANT]  
> Это ограничение для перемещения параметров в другой пул имеет значение true только для параметров уровня приложения и звукового файла, используемого по умолчанию при хранении музыки. Это не относится к группам агентов, очередям, рабочим процессам, часам и наборам праздников.



</div>

Если вы не хотите заменять параметры уровня приложения в пуле резервных копий во время аварии, и основной пул невозможно восстановить, параметры уровня приложения из основного пула будут потеряны. Если необходимо создать новый пул для замены основного пула при восстановлении с таким же полным доменным именем или с другим полным доменным именем, вы не сможете восстановить исходные параметры уровня приложения. В этом случае необходимо настроить новый пул с помощью этих параметров и добавить звуковой файл для сохранения музыки.

Если вы решили использовать командлет **Import-ксргсконфигуратион** для переноса параметров уровня приложения из основного пула в пул резервных копий во время аварии, вы можете перенести настройки из пула резервных копий в новый пул в том же так, как вы перенесли их из основного пула в пул резервных копий.

В таблице ниже приведены инструкции по восстановлению групп ответа.

Дополнительные сведения о выполнении этих действий можно найти [в разделе процедуры аварийного восстановления группы ответа в Lync Server 2013](lync-server-2013-response-group-disaster-recovery-procedures.md).

### <a name="response-group-disaster-recovery-steps"></a>Инструкции по аварийному восстановлению группы ответа

<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th>Этап</th>
<th>Шаги</th>
<th>Необходимые группы и роли</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Перед отключением</p></td>
<td><p>С помощью командлета <strong>Export-ксргсконфигуратион</strong> можно создавать резервные копии всех конфигураций групп ответа во всех пулах интерфейсных служб, в которых развернуто приложение группы ответа.</p></td>
<td><p>RTCUniversalServerAdmins</p>
<p>CsResponseGroupAdministrator</p></td>
</tr>
<tr class="even">
<td><p>Во время отключения</p></td>
<td><p>Запустите командлет <strong>Import-ксргсконфигуратион</strong> , чтобы импортировать из резервной копии конфигурации службы ответов на Lync Server из основного пула в пул резервных копий.</p>
<div>

> [!NOTE]  
> Используйте параметр – Реплацеексистингсеттингс, если вы хотите заменить параметры группы ответа уровня приложения в пуле резервного копирования на параметры из основного пула. Если вы не переносите параметры уровня приложения из основного пула в пул резервных копий, и основной пул восстановить невозможно, параметры из основного пула будут потеряны.


</div></td>
<td><p>RTCUniversalServerAdmins</p>
<p>CsResponseGroupAdministrator</p></td>
</tr>
<tr class="odd">
<td><p>После импорта</p></td>
<td><p>Запустите командлеты группы ответа с параметром – Шовалл (для отображения всех групп ответа) или параметр – владелец (чтобы отобразить только импортированные группы ответов), чтобы убедиться в том, что все конфигурации группы ответа были импортированы в резервный пул.</p>
<div>

> [!IMPORTANT]  
> Если вы не используете либо параметр – Шовалл, либо параметр – владелец, группы ответа, импортированные в пул резервных копий, не будут указаны в результатах, возвращенных командлетами.


</div>
<p>Выполните следующие командлеты:</p>
<ul>
<li><p><strong>Get-CsRgsWorkflow</strong></p></li>
<li><p><strong>Get-CsRgsQueue</strong></p></li>
<li><p><strong>Get-CsRgsAgentGroup</strong></p></li>
<li><p><strong>Get-CsRgsHoursOfBusiness</strong></p></li>
<li><p><strong>Get-CsRgsHolidaySet</strong></p></li>
</ul></td>
<td><p>RTCUniversalServerAdmins</p>
<p>CsResponseGroupAdministrator</p></td>
</tr>
<tr class="even">
<td><p>После перехода на другой ресурс</p></td>
<td><ul>
<li><p>Наведите тестовый звонок в группу ответа, которая была импортирована в пул резервных копий, и убедитесь, что звонок обрабатывается должным образом.</p></li>
<li><p>Все формальные агенты должны повторно входить в их формальные группы в пуле резервных копий.</p></li>
<li><p>Управление изменениями конфигурации.</p>
<p>Группы ответа в пуле резервных копий, импортированные в резервную копию или принадлежащую пулу резервных копий, можно изменять в обычном режиме простоя.</p>
<div>

> [!IMPORTANT]  
> Вы должны использовать командную консоль Lync Server для управления группами ответов, которые вы импортировали в пул резервных копий. Вы не можете использовать панель управления Lync Server для управления этими группами ответа, пока они находятся в пуле резервных копий.


</div></li>
</ul></td>
<td><p>Н/Д</p></td>
</tr>
<tr class="odd">
<td><p>После восстановления перед восстановлением после сбоя</p></td>
<td><p>Запустите командлет <strong>Export-ксргсконфигуратион</strong> , указав параметр-Source в качестве пула резервных копий, и параметр – владелец в качестве основного пула для экспорта групп ответов, принадлежащих основным пулам из пула резервных копий.</p></td>
<td><p>RTCUniversalServerAdmins</p>
<p>CsResponseGroupAdministrator</p></td>
</tr>
<tr class="even">
<td><p>После восстановления после сбоя</p></td>
<td><ul>
<li><p>Запустите командлет <strong>Import-ксргсконфигуратион</strong> , чтобы импортировать группы ответа обратно в основной пул.</p>
<div>

> [!NOTE]  
> Если основной пул не поддается восстановлению и вы развертываете новый пул для его замены, используйте параметр – Реплацеексистингсеттингс для переноса параметров уровня приложения из пула резервных копий в новый пул. Если вы не переносяте параметры из пула резервных копий, для нового пула будут использоваться параметры по умолчанию.


</div></li>
<li><p>Выполните следующие командлеты с параметром – Шовалл (для отображения всех групп ответа) или параметр – владелец (для отображения только импортированных групп ответа), чтобы убедиться в том, что все конфигурации группы ответа успешно импортированы в основной пул.</p>
<ul>
<li><p><strong>Get-CsRgsWorkflow</strong></p></li>
<li><p><strong>Get-CsRgsQueue</strong></p></li>
<li><p><strong>Get-CsRgsAgentGroup</strong></p></li>
<li><p><strong>Get-CsRgsHoursOfBusiness</strong></p></li>
<li><p><strong>Get-CsRgsHolidaySet</strong></p></li>
</ul></li>
<li><p>Наведите тестовый звонок в группу ответа, которая была импортирована обратно в основной пул, и убедитесь, что звонок обрабатывается должным образом.</p></li>
<li><p>При необходимости выполните командлет <strong>Export-ксргсконфигуратион</strong> в пуле резервных копий с параметром – ремовикспортедконфигуратион, чтобы удалить группы ответов, принадлежащие основным пулам из пула резервных копий.</p></li>
</ul></td>
<td><p>RTCUniversalServerAdmins</p>
<p>CsResponseGroupAdministrator</p></td>
</tr>
</tbody>
</table>


</div>

</div>

<span> </span>

</div>

</div>

</div>

