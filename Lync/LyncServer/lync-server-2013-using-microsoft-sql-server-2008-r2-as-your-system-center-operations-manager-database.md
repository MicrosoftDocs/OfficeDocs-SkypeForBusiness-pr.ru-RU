---
title: "Lync Server 2013: исп. Microsoft SQL Server 2008 R2 как БД System Center Operations Manager"
TOCTitle: "Lync Server 2013: исп. Microsoft SQL Server 2008 R2 как БД System Center Operations Manager"
ms:assetid: 0efe76da-8854-499e-bdc7-3623244a8e85
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/JJ687969(v=OCS.15)
ms:contentKeyID: 49887868
ms.date: 05/19/2016
mtps_version: v=OCS.15
ms.translationtype: HT
---

# Использование Microsoft SQL Server 2008 R2 в качестве базы данных System Center Operations Manager

 

_**Дата изменения раздела:** 2013-07-29_

Чтобы использовать SQL Server 2008 R2 в качестве серверной базы данных, выполните действия, описываемые в этом разделе.

## Настройка SQL Server 2008 R2 и служб SQL Server Reporting Services

Прежде чем начать установку System Center Operations Manager, необходимо внести два изменения в SQL Server 2008 R2 и конфигурацию служб SQL Server Reporting Services. (Эти изменения необходимы только в том случае, если используется SQL Server 2008 R2 в качестве базы данных Operations Manager.) Сначала выполните на компьютере, на котором будет размещаться база данных Operations Manager, следующие действия:

1.  Щелкните **Пуск**, затем **Выполнить**.

2.  В диалоговом окне **Запуск программы** введите **C:\\Program Files\\Microsoft SQL Server\\ MSRS10\_50.ARCHINST\\Reporting Services\\ReportServer** и затем нажмите клавишу ENTER.

3.  В папке **ReportServer** откройте файл **rsreportserver.config** в Блокноте или любом другом текстовом редакторе.

4.  Недалеко от начала файла видна последовательность узлов "Add Key". Найдите запись, начинающуюся с выражения **\<Add Key="SecureConnectionLevel"**, и установите значение равным **0**:
    
        <Add Key="SecureConnectionLevel" Value="0"/>

5.  Сохраните файл **rsreportserver.config** и затем закройте текстовый редактор.

После обновления файла конфигурации сервера отчетов, необходимо затем назначить правильный сертификат службам SQL Server Reporting Services. Чтобы сделать это, выполните следующие действия:

1.  Нажмите кнопку **Пуск**, последовательно выберите **Все программы**, **Microsoft SQL Server 2008 R2**, **Средства конфигурации** и **Диспетчер конфигурации служб отчетности**.

2.  В диалоговом окне **Подключение конфигурации служб отчетности** убедитесь, что имя сервера отображается в поле **Имя сервера**. Выберите экземпляр SQL Server, на котором размещается база данных Operations Manager (например, **ARCHINST**), в раскрывающемся списке **Экземпляр сервера отчетов** и затем щелкните **Подключить**.

3.  В диспетчере конфигурации служб отчетности щелкните **URL-адрес веб-службы**.

4.  На странице **URL-адрес веб-службы** выберите сертификат, который будет использоваться для служб отчетности в раскрывающемся списке **SSL-сертификат**, а затем нажмите кнопку **Применить**. Спустя несколько секунд вы увидите пару URL-адресов, перечисляемых в разделе **URL-адреса веб-служб сервера отчетности**.

5.  Щелкните оба URL-адреса, чтобы убедиться в возможности доступа к службам отчетности SQL-сервера.

6.  Закройте диспетчер конфигурации служб отчетности.

## Создание базы данных System Center Operations Manager для использования с SQL Server 2008 R2

Если требуется настроить System Center Operations Manager для использования базы данных SQL Server 2008 R2, потребуется "вручную" создать базу данных Operations Manager на компьютере с SQL Server 2008 R2. (Опять же, эти действия не требуется выполнять, если в качестве серверной базы данных используется SQL Server 2005 или SQL Server 2008.)

Чтобы вручную создать базу данных Operations Manager, выполните следующие действия:

1.  На установочном носителе System Center Operations Manager 2007 R2, в папке SupportTools\\AMD64 дважды щелкните исполняемый файл **DBCreateWizard.exe**.

2.  На странице **Мастер настройки базы данных** нажмите кнопку **Далее**.

3.  На странице **Сведения о базе данных** оставьте все параметры как есть и нажмите кнопку **Далее**

4.  На странице **Конфигурация группы управления** введите имя для своей группы управления (например, **Мониторинг Lync Server**) в поле **Имя группы управления** и нажмите кнопку **Далее**.

5.  На странице **Отчеты об ошибках Operations Manager** нажмите кнопку **Далее**.

6.  На странице **Сводка** нажмите кнопку **Готово**.

## Создание хранилища данных System Center Operations Manager для использования с SQL Server 2008 R2

Программное обеспечение Microsoft Lync Server 2013 поставляется с тремя новыми отчетами System Center Operations Manager:

  - **Отчет о доступности сквозного сценария**   В этом отчете содержатся данные о доступности / времени работы ключевых служб Lync Server, таких как регистрация или наличие.

  - **Отчет о производительности**   С помощью информации счетчика производительности в этом отчете показываются временные характеристики компонентов системы, такие как доступность памяти и загрузка процессора.

  - **Отчет о компонентах**   В этом отчете перечисляются расположенные вверху списка генераторы предупреждений, сгруппированные по компонентам Lync Server.

Чтобы использовать эти новые отчеты, необходимо установить хранилище данных System Center Operations Manager. (Хранилище данных предоставляется для долговременного хранения данных по операциям.) Чтобы использовать хранилище данных с SQL Server 2008 R2, необходимо выполнить на компьютере, на котором размещается база данных SQL Server, следующие действия:

1.  На установочном носителе System Center Operations Manager, в папке Setup\\SupportTools\\AMD64 дважды щелкните исполняемый файл **DBCreateWizard.exe**.

2.  На странице **Мастер настройки базы данных** нажмите кнопку **Далее**.

3.  На странице **Сведения о базе данных** выберите вариант **База данных хранилища данных диспетчера операций** в раскрывающемся списке **Тип базы данных**, а затем нажмите кнопку **Далее**.

4.  На странице **Сводка** нажмите кнопку **Готово**.

## Установка консоли System Center Operations Manager

Консоль Operations Manager является главным средством, используемым для управления System Center Operations Manager. Прежде чем установить консоль Operations Manager, убедитесь, что уже установлена поддерживаемая версия SQL Server вместе со службами SQL Server Reporting Services. Также рекомендуется запустить диспетчер конфигурации служб отчетности SQL-сервера, чтобы проверить правильность установки и настройки служб отчетности.

Чтобы установить консоль System Center Operations Manager, выполните следующие действия:

1.  На установочном носителе System Center Operations Manager дважды щелкните исполняемый файл **SetupOM.exe**.

2.  В программе установки System Center Operations Manager 2007 R2 щелкните **Проверка выполнения необходимых условий**.

3.  В средстве проверки готовности к установке System Center Operations Manager выберите устанавливаемые компоненты System Center: (**Сервер**, **Консоль** и **PowerShell**) и щелкните **Проверить**. Проверьте отсутствие сообщений о проблемах, связанных с блокировкой, а затем щелкните **Закрыть**. Если сообщается о проблеме блокировки, устраните проблему, а затем щелкните **Проверить**, чтобы снова запустить проверку готовности к установке.

4.  В программе установки System Center Operations Manager щелкните **Установить диспетчер операций**.

5.  В мастере установки System Center Operations Manager, на странице **Мастер установки System Center Operations Manager** нажмите кнопку **Далее**.

6.  На странице **Лицензионное соглашение** выберите настройку **Я принимаю условия лицензионного соглашения** и нажмите кнопку **Далее**.

7.  На странице **Регистрация продукта** введите свое имя в поле **Имя пользователя** и название своей организации в поле **Организация**. Введите свой ключ продукта System Center Operations Manager в поле **Введите свой 25-значный ключ компакт-диска**, а затем нажмите кнопку **Далее**.

8.  На странице **Выборочная установка** выберите устанавливаемые компоненты System Center и нажмите кнопку **Далее**. Для установки необходимо выбрать компоненты: **Сервер управления**, **Пользовательские интерфейсы** и **Веб-консоль**. Не следует выбирать и устанавливать компонент **База данных**.

9.  На странице **Экземпляр сервера базы данных SC** проверьте, чтобы имя компьютера, на котором устанавливаются базы данных Operations Manager, отображалось в поле **Сервер базы данных System Center**. Нажмите кнопку **Далее**.

10. На странице **Учетная запись действия сервера управления** выберите настройку **Учетная запись домена или локального компьютера**, а затем введите подходящие значения в поля **Учетная запись пользователя**, **Пароль** и **Домен или локальный компьютер**. Нажмите кнопку **Далее**.

11. На странице **Учетная запись SDK и службы настройки** выберите вариант **Учетная запись домена или локального компьютера**, а затем введите подходящие значения в поля **Учетная запись пользователя**, **Пароль** и **Домен или локальный компьютер**. Нажмите кнопку **Далее**.

12. На странице **Отчеты об ошибках Operations Manager** нажмите кнопку **Далее**.

13. На странице **Программ по улучшению качества программного обеспечения** нажмите кнопку **Далее**.

14. На странице **Все готово к установке программы** нажмите **Установить**.

15. На странице **Завершение установки диспетчера операций системного центра** снимите флажки **Резервное копирование ключа шифрования** и **Запуск консоли**, а затем нажмите кнопку **Готово**.

16. В программе установки System Center Operations Manager нажмите кнопку **Выход**.

## Установка служб System Center Reporting Services

После установки и настройки консоли System Center Operations Manager затем необходимо установить службы System Center Reporting Services. Если вы используете SQL Server 2008 R2 в качестве серверной базы данных Operations Manager, то это означает, что сначала необходимо внести временное изменение в группу безопасности, связанную со службами SQL Server Reporting Services. Если вы используете SQL Server 2008 R2, потребуется выполнить следующие действия:

1.  Щелкните **Пуск**, выберите **Администрирование**, затем **Диспетчер сервера**.

2.  В диспетчере сервера разверните узел **Конфигурация**, затем **Локальные пользователи и группы** и щелкните **Группы**.

3.  Найдите следующую группу, где atl-sc-001 представляет имя вашего компьютера, а ARCHINST представляет экземпляр SQL Server для базы данных системного центра: **SQLServerReportServerUser$atl-sc-001$MSRS10\_50.ARCHINST**.

4.  Щелкните группу правой кнопкой мыши и выберите в контекстном меню команду **Переименовать**. Переименуйте группу, удалив **\_50** из имени группы. Пример: **SQLServerReportServerUser$atl-sc-001$MSRS10.ARCHINST**.

5.  Закройте диспетчер сервера.

Теперь все готово для установки служб System Center Reporting Services. Чтобы сделать это, выполните следующие действия:

1.  На установочном носителе System Center Operations Manager 2007 R2 дважды щелкните исполняемый файл **SetupOM.exe**.

2.  В программе установки System Center Operations Manager 2007 R2 щелкните **Установить службы отчетности диспетчера операций**.

3.  В мастере установки служб отчетности System Center Operations Manager 2007 R2, на странице **Установка служб отчетности диспетчера операций** нажмите кнопку **Далее**.

4.  На странице **Лицензионное соглашение** выберите настройку **Я принимаю условия лицензионного соглашения**, а затем нажмите кнопку **Далее**.

5.  На странице **Регистрация продукта** убедитесь, что ваше имя и название вашей организации отображаются в полях **Имя пользователя** и **Организация**, а затем нажмите кнопку **Далее**.

6.  На странице **Выборочная установка** щелкните **Сервер отчетности** и выберите настройку **Этот компонент и все зависимые компоненты устанавливаются на локальный диск**. Щелкните **Хранилище данных** и выберите настройку **Этот компонент будет недоступен**, а затем нажмите кнопку **Далее**.

7.  На странице **Подключение к корневому серверу управления** введите имя корневого сервера управления Operations Manager в поле **Корневой сервер управления** и нажмите кнопку **Далее**.

8.  На странице **Подключение к хранилищу данных Operations Manager** введите экземпляр SQL-сервера, на котором находится хранилище данных, в поле **Экземпляр SQL-сервера**. (Если ваше хранилище данных находится на экземпляре, используемом по умолчанию, тогда просто введите имя сервера; пример: atl-sql-001.) Убедитесь, что имя базы данных **OperationsManagerDW** отображается в поле **Имя**, и что порт **1433** отображается в поле **Порт SQL-сервера**. Нажмите кнопку **Далее**.

9.  На странице **Экземпляр служб отчетности SQL-сервера** выберите свой сервер служб отчетности SQL-сервера в раскрывающемся списке **Введите сервер служб отчетности SQL-сервера**, а затем нажмите кнопку **Далее**.

10. На странице **Учетная запись для записи в хранилище данных** введите имя и пароль пользователя, которому вначале назначаются права записи в хранилище данных, в поля **Учетная запись пользователя** и **Пароль**. Выберите домен пользователя в раскрывающемся списке **Домен** и нажмите кнопку **Далее**.

11. На странице **Учетная запись средства считывания данных** введите имя и пароль учетной записи пользователя, используемой при запросах хранилища данных службами отчетности SQL, в поля **Учетная запись пользователя** и **Пароль**. Выберите домен учетной записи в раскрывающемся списке **Домен** и нажмите кнопку **Далее**.

12. На странице **Отчеты по рабочим данным** нажмите кнопку **Далее**.

13. На странице **Обновление Microsoft** нажмите кнопку **Далее**.

14. На странице **Все готово к установке программы** нажмите **Установить**.

15. На странице **Завершение мастера установки компонентов служб отчетности Operations Manager** нажмите кнопку **Готово**.

16. В программе установки System Center Operations Manager 2007 R2 нажмите кнопку **Выход**.

После того как службы отчетности системного центра установлены, для сброса имени группы безопасности, связанной со службами отчетности SQL Server, используется следующая процедура. Опять же, эту процедуру требуется выполнить только в том случае, если вы используете SQL Server:

1.  Щелкните **Пуск**, выберите **Администрирование**, затем **Диспетчер сервера**.

2.  В диспетчере сервера разверните узел **Конфигурация**, затем **Локальные пользователи и группы** и щелкните **Группы**.

3.  Найдите следующую группу, где atl-sc-001 представляет имя вашего компьютера, а ARCHINST представляет экземпляр SQL Server для архивирования и мониторинга базы данных: **SQLServerReportServerUser$atl-sc-001$MSRS10.ARCHINST**.

4.  Щелкните группу правой кнопкой мыши и выберите в контекстном меню команду **Переименовать**. Переименуйте группу, добавив **\_50** в конец имени группы, непосредственно перед именем экземпляра SQL Server. Пример: **SQLServerReportServerUser$atl-sc-001$MSRS10\_50.ARCHINST**.

5.  Закройте диспетчер сервера.

Если консоль операций системного центра открыта, необходимо закрыть приложение, а затем перезапустить его. Если этого не сделать, вкладка **Отчетность** не появится в пользовательском интерфейсе консоли операций. Обратите внимание, что после перезапуска консоли операций в первый раз, возможно потребуется подождать несколько минут, прежде чем все отчеты мониторинга появятся на вкладке **Отчетность**.

