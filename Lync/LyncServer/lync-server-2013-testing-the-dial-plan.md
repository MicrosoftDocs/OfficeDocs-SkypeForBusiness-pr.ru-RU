---
title: 'Lync Server 2013: тестирование абонентской группы'
description: 'Lync Server 2013: тестирование абонентской группы.'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: Testing the dial plan
ms:assetid: 70eec03c-aca3-4106-86a7-77ae96b53779
ms:mtpsurl: https://technet.microsoft.com/en-us/library/Dn690130(v=OCS.15)
ms:contentKeyID: 63969616
ms.date: 01/27/2015
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: a0ef2e3fce9d1fbbb0186b1b7aef608834145d3e
ms.sourcegitcommit: d42a21b194f4a45e828188e04b25c1ce28a5d1ae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2020
ms.locfileid: "48556175"
---
# <a name="testing-the-dial-plan-in-lync-server-2013"></a>Тестирование абонентской группы в Lync Server 2013

<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="https://msdn.microsoft.com/">

<div data-asp="https://msdn2.microsoft.com/asp">



</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**Последнее изменение темы:** 2014-06-05_


<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p>Расписание проверки</p></td>
<td><p>Ежедневное</p></td>
</tr>
<tr class="even">
<td><p>Средство тестирования</p></td>
<td><p>Windows PowerShell</p></td>
</tr>
<tr class="odd">
<td><p>Необходимые разрешения</p></td>
<td><p>При локальном запуске с помощью командной консоли Lync Server пользователи должны быть членами группы безопасности RTCUniversalServerAdmins.</p>
<p>При выполнении с помощью удаленного экземпляра Windows PowerShell пользователям должна быть назначена роль RBAC, имеющая разрешение на запуск командлета Test-CsDialPlan. Чтобы просмотреть список всех ролей RBAC, которые могут использовать этот командлет, выполните следующую команду в командной консоли Windows PowerShell:</p>
<pre><code>Get-CsAdminRole | Where-Object {$_.Cmdlets -match &quot;Test-CsDialPlan&quot;}</code></pre></td>
</tr>
</tbody>
</table>


<div>

## <a name="description"></a>Описание

Командлет Test-CsDialPlan позволяет просматривать результаты применения абонентской группы к заданному телефонному номеру. Абонентские группы предоставляют сведения, например, способ применения правил нормализации, необходимые для того, чтобы пользователи корпоративной голосовой связи могли совершать телефонные звонки. Принимая во внимание набранный номер и абонентскую группу, этот командлет будет проверять, какое правило нормализации в данной абонентской группе будет применяться, и каким будет преобразованный номер.

Этот командлет можно использовать для устранения неполадок, связанных с числом переводов, или для проверки применения правил к определенным числам.

</div>

<div>

## <a name="running-the-test"></a>Выполнение теста

Для командлета Test-CsDialPlan необходимо выполнить два действия. Для начала необходимо получить тестируемый экземпляр абонентской группы; Это можно сделать с помощью командлета Get-CsDialPlan. Во вторых, необходимо указать телефонный номер, который должен быть нормализован. Формат, используемый для телефонного номера, должен быть таким, как номер, набранный или введенный пользователем. Например, эта команда получает экземпляр абонентской группы абонентскую redmonddialplan и проверяет, можно ли нормализовать номер телефона 12065551219:

    Get-CsDialPlan -Identity "RedmondDialPlan" | Test-CsDialPlan -DialedNumber "12065551219" | Format-List

Если у вас есть правило нормализации, которое автоматически добавляет код страны (в этом примере 1) и код города (206), можно проверить номер телефона 5551219, как показано ниже:

    Get-CsDialPlan -Identity "RedmondDialPlan" | Test-CsDialPlan -DialedNumber "5551219" | Format-List

Дополнительные сведения можно найти в справочной документации по командлету [Test-CsDialPlan](https://docs.microsoft.com/powershell/module/skype/Test-CsDialPlan) .

</div>

<div>

## <a name="determining-success-or-failure"></a>Определение успешности или сбоя

Test-CsDialPlan отличается от многих командлетов тестирования Lync Server, так как он только косвенно указывает, успешно ли выполнен тест или закончился неудачно. При использовании Test-CsDialPlan не получает обратных выходных данных, как показано ниже:

TargetFqdn: atl-cs-001.litwareinc.com

Результат: успешное выполнение

Задержка: 00:00:06.8630376

Ошибкой

Диагност

Вместо этого, если Test-CsDialPlan успешно, вы получите сведения о правиле нормализации, способном успешно перевести и использовать указанный номер телефона:

Транслатеднумбер: + 12065551219

Матчингруле: Description =; Pattern = ^ ( \\ г (11)) $; Перевод = + $1;

Имя = префикс все; Исинтерналекстенсион = false

Если Test-CsDialPlan завершается с ошибкой (то есть если для абонентской группы не задано правило нормализации, которое может выполнить перевод указанного номера телефона), вы просто получите "пустой" вывод, как показано ниже:

Транслатеднумбер:

Матчингруле:

</div>

<div>

## <a name="reasons-why-the-test-might-have-failed"></a>Причины, по которым может произойти сбой теста

Ниже приведены некоторые распространенные причины, по которым может произойти ошибка Test-CsDialPlan:

  - При указании номера телефона вы могли использовать недопустимый формат. Абонентские группы включают правила нормализации, которые обеспечивают Lync Server для преобразования телефонных номеров, набранных или вводимых пользователем. Поэтому абонентская абонентская схема должна иметь правила нормализации, которые совпадают с числами, которые пользователи могут набирать. Например, если пользователи могут набрать код страны, код города, а затем номер телефона, это означает, что абонентская абонентская абонентская схема должна иметь правило нормализации для обработки телефонных номеров, например:
    
    12065551219
    
    Однако при вводе неправильного номера телефона (например, после выхода из завершающей цифры) Test-CsDialPlan не будет выполнен. Это связано с неисправностью абонентской группы, так как вы ввели номер телефона, который не может быть интерпретирован.

</div>

</div>

<span> </span>

</div>

</div>

</div>

