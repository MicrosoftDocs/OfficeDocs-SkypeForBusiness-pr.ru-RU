---
title: 'Lync Server 2013: Проверка абонентской группы'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: Testing the dial plan
ms:assetid: 70eec03c-aca3-4106-86a7-77ae96b53779
ms:mtpsurl: https://technet.microsoft.com/en-us/library/Dn690130(v=OCS.15)
ms:contentKeyID: 63969616
ms.date: 01/27/2015
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 8e0e39b88d7b6c90a55d236038d03cc4cc717319
ms.sourcegitcommit: b693d5923d6240cbb865241a5750963423a4b33e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/04/2020
ms.locfileid: "41745459"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="http://msdn.microsoft.com/en-us/">

<div data-asp="http://msdn2.microsoft.com/asp">

# <a name="testing-the-dial-plan-in-lync-server-2013"></a>Проверка абонентской группы в Lync Server 2013

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**Тема последнего изменения:** 2014-06-05_


<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p>Расписание проверки</p></td>
<td><p>Ежедневно</p></td>
</tr>
<tr class="even">
<td><p>Средство тестирования</p></td>
<td><p>Windows PowerShell</p></td>
</tr>
<tr class="odd">
<td><p>Требуемые разрешения</p></td>
<td><p>При локальном запуске с помощью командной консоли Lync Server пользователи должны быть членами группы безопасности Рткуниверсалсерверадминс.</p>
<p>При запуске с помощью удаленного экземпляра Windows PowerShell пользователям должна быть назначена роль RBAC, имеющая разрешение на запуск командлета Test-Ксдиалплан. Чтобы просмотреть список всех ролей RBAC, которые могут использовать этот командлет, выполните в командной строке Windows PowerShell следующую команду:</p>
<pre><code>Get-CsAdminRole | Where-Object {$_.Cmdlets -match &quot;Test-CsDialPlan&quot;}</code></pre></td>
</tr>
</tbody>
</table>


<div>

## <a name="description"></a>Описание

Командлет Test-Ксдиалплан позволяет видеть результаты применения абонентской группы к указанному номеру телефона. Абонентские группы предоставляют сведения, например, как применяются правила нормализации, необходимые для того, чтобы пользователи корпоративной голосовой связи были звонить по телефону. При наборе номера и абонентской группы этот командлет проверит, какое правило нормализации в абонентской группе будет применено, и что будет переведенный номер.

Вы можете использовать этот командлет для устранения проблем с преобразованиями чисел или для проверки того, как применять правила к определенным числам.

</div>

<div>

## <a name="running-the-test"></a>Выполнение теста

Командлет Test-Ксдиалплан требует выполнения двух действий. Сначала необходимо получить экземпляр тестируемой абонентской группы; Это можно сделать с помощью командлета Get-Ксдиалплан. Во вторых, необходимо указать телефонный номер, который должен быть нормализован. Формат, используемый для номера телефона, должен совпадать с номером, набранным и введенным пользователем. Например, эта команда извлекает экземпляр абонентской группы RedmondDialPlan и проверяет, можно ли использовать номер телефона 12065551219.

    Get-CsDialPlan -Identity "RedmondDialPlan" | Test-CsDialPlan -DialedNumber "12065551219" | Format-List

Если у вас есть правило нормализации, которое автоматически добавляет код страны (в этом примере, 1) и код города (206), вам может потребоваться проверить номер телефона 5551219, как показано ниже.

    Get-CsDialPlan -Identity "RedmondDialPlan" | Test-CsDialPlan -DialedNumber "5551219" | Format-List

Дополнительные сведения можно найти в справочной документации по командлету [Test-ксдиалплан](https://docs.microsoft.com/powershell/module/skype/Test-CsDialPlan) .

</div>

<div>

## <a name="determining-success-or-failure"></a>Определение успеха или сбоя

Тест-Ксдиалплан отличается от многих командлетов тестирования Lync Server, так как он не только косвенно указывает, успешно ли прошел тест. При использовании команды Test-Ксдиалплан вы не получаете обратные результаты, аналогичные таким образом, что приводит к четкому пометке:

Таржетфкдн: atl-cs-001.litwareinc.com

Результат: успех

Задержка: 00:00:06.8630376

Ошибки

Диагностик

Вместо этого, если Test-Ксдиалплан завершается успешно, вы получите сведения о правиле нормализации, которое могло бы успешно перевести и использовать указанный номер телефона:

Транслатеднумбер: + 12065551219

Матчингруле: описание =; Шаблон = ^ (\\d (11)) $; Перевод = + $1;

Name = prefix (префикс); Исинтерналекстенсион = false

Если при выполнении теста-Ксдиалплан возникла ошибка (то есть, если абонентская группа не имеет правила нормализации, которое может перевести указанный номер телефона), вы просто получите "пустой" выходной файл, как описано ниже.

Транслатеднумбер:

Матчингруле:

</div>

<div>

## <a name="reasons-why-the-test-might-have-failed"></a>Причины, по которым может произойти сбой теста

Ниже приведены некоторые распространенные причины, по которым может произойти сбой Test-Ксдиалплан:

  - Возможно, вы использовали неверный формат при указании номера телефона. Абонентские планы включают правила нормализации, позволяющие серверу Lync Server переводить телефонные номера, набранные или введенные пользователем. Поэтому абонентская группа должна иметь правила нормализации, соответствующие числам, которые пользователи могут набрать. Например, если пользователь может набрать код страны, код города, а затем сам номер телефона, это означает, что абонентская группа должна иметь правило нормализации для обработки телефонных номеров, например:
    
    12065551219
    
    Тем не менее, если ввести неправильный номер телефона (например, выход из последней цифры), проверка-Ксдиалплан завершится сбоем. Это не значит, что абонентская группа является неисправной, но из-за того, что вы ввели номер телефона, который не удается интерпретировать.

</div>

</div>

<span> </span>

</div>

</div>

</div>

