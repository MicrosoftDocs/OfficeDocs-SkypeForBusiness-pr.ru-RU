---
title: 'Lync Server 2013: Проверка телефонного номера на соответствие маршруту голосовой связи'
description: 'Lync Server 2013: тестовый номер телефона по маршруту голосовой связи.'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: Test telephone number against a voice route
ms:assetid: 9a77ed6d-9394-4bef-9344-3d91b6959b97
ms:mtpsurl: https://technet.microsoft.com/en-us/library/Dn725211(v=OCS.15)
ms:contentKeyID: 63969631
ms.date: 01/27/2015
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 789f4a538a992a72abf61f4c1fbdb98370f2e643
ms.sourcegitcommit: d42a21b194f4a45e828188e04b25c1ce28a5d1ae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2020
ms.locfileid: "48563395"
---
# <a name="test-telephone-number-against-a-voice-route-in-lync-server-2013"></a>Проверка номера телефона на соответствие маршруту голосовой связи в Lync Server 2013

<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="https://msdn.microsoft.com/">

<div data-asp="https://msdn2.microsoft.com/asp">



</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**Последнее изменение темы:** 2014-05-20_


<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p>Расписание проверки</p></td>
<td><p>Monthly</p></td>
</tr>
<tr class="even">
<td><p>Средство тестирования</p></td>
<td><p>Windows PowerShell</p></td>
</tr>
<tr class="odd">
<td><p>Необходимые разрешения</p></td>
<td><p>При локальном запуске с помощью командной консоли Lync Server пользователи должны быть членами группы безопасности RTCUniversalServerAdmins.</p>
<p>При выполнении с помощью удаленного экземпляра Windows PowerShell пользователям должна быть назначена роль RBAC, имеющая разрешение на запуск командлета Test-CsVoiceRoute. Чтобы просмотреть список всех ролей RBAC, которые могут использовать этот командлет, выполните следующую команду в командной консоли Windows PowerShell:</p>
<p><code>Get-CsAdminRole | Where-Object {$_.Cmdlets -match &quot;Test-CsVoiceRoute&quot;}</code></p></td>
</tr>
</tbody>
</table>


<div>

## <a name="description"></a>Описание

Маршруты голосовой связи работают вместе с политиками голосовой связи для направления вызовов корпоративной голосовой связи в сеть PSTN. Каждый маршрут голосовой связи включает регулярное выражение (шаблон номера), которое определяет номера телефонов, которые будут маршрутизироваться через указанный маршрут голосовых вызовов: маршрут будет обрабатывать любые телефонные номера, которые удовлетворяют этому регулярному выражению. Например, маршрут голосовой связи может иметь регулярное выражение, которое позволяет ему обрабатывать все 10 цифр. Это означает, что маршрут сможет обработать номер телефона, подобный указанному ниже.

  - 2065551219

Маршрут не сможет обработать один из следующих двух чисел, оба из которых не имеют 10 цифр:

  - 5551219

  - 12065551219

Командлет Test-CsVoiceRoute проверяет, может ли данный маршрут голосом маршрутизировать указанный номер телефона.

</div>

<div>

## <a name="running-the-test"></a>Выполнение теста

Проверка возможности маршрута голосовых вызовов к указанному номеру телефона состоит из двух этапов. Сначала необходимо использовать командлет Get-CsVoiceRoute, чтобы возвратить экземпляр маршрута голосовой связи, а затем использовать командлет Test-CsVoiceRoute, чтобы проверить способность этого маршрута обрабатывать целевой номер телефона. Например, эта команда проверяет, может ли маршрут голосовой связи Редмондвоицерауте маршрутизировать номер телефона 2065551219:

`Get-CsVoiceRoute -Identity "RedmondVoiceRoute" | Test-CsVoiceRoute -TargetNumber "2065551219"`

Обратите внимание на то, что номер должен быть введен так, как предполагается, что пользователи набирает этот номер. Например, если вы не хотите, чтобы пользователи включали код страны и код города при наборе номера, используйте синтаксис, аналогичный следующему:

`-TargetNumber "5551219"`

В этом случае целевой номер оставляет и код страны, и код города.

Чтобы использовать одну команду для проверки всех маршрутов голосовой связи по указанному целевому номеру, используйте следующий синтаксис:

`Get-CsVoiceRoute | Test-CsVoiceRoute -TargetNumber "2065551219"`

Для получения дополнительных сведений обратитесь к справочной документации по командлету Test-CsVoiceRoute.

</div>

<div>

## <a name="determining-success-or-failure"></a>Определение успешности или сбоя

Если маршрут голосовых вызовов может маршрутизировать целевой номер телефона, командлет Test-CsVoiceRoute просто возвращает значение true:

матчеспаттерн

\--------------

Верно

Это означает, что маршрут может обрабатывать числа, аналогичные целевому номеру. Если маршрут голосовых вызовов не может обработать целевой номер, Test-CsVoiceRoute возвращает значение false:

матчеспаттерн

\--------------

False

</div>

<div>

## <a name="reasons-why-the-test-might-have-failed"></a>Причины, по которым может произойти сбой теста

При тестировании голосовых маршрутов "сбой" является относительным термином. В этом случае это не означает, что маршрут является каким-либо «сломанным», а просто только означает, что маршрут не может обработать целевой номер. Это может быть вызвано неправильной настройкой маршрута голосовых вызовов. Это также может означать, что маршрут не предназначен для обработки чисел с помощью этого шаблона. Например, если вы не хотите маршрутизировать звонки в другие страны по указанному маршруту, можно настроить отклонения всех номеров телефонов, включающих код страны, в другие страны. Если Test-CsVoiceRoute возвращает значение false, если ожидается, что возвращаемое значение равно true, убедитесь, что целевой номер введен правильно. В этом случае используйте команду, аналогичную следующей, для просмотра Нумберпаттерн, настроенной для маршрута:

`Get-CsVoiceRoute -Identity "RedmondVoiceRoute" | Select-Object NumberPattern`

</div>

<div>

## <a name="see-also"></a>См. также


[Test-Ксвоицерауте](https://docs.microsoft.com/powershell/module/skype/Test-CsVoiceRoute)  
  

</div>

</div>

<span> </span>

</div>

</div>

</div>

