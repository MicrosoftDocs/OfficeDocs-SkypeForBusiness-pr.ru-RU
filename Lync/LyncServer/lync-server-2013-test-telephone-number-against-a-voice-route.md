---
title: 'Lync Server 2013: Проверка номера телефона на маршруте голосовой связи'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
TOCTitle: Test telephone number against a voice route
ms:assetid: 9a77ed6d-9394-4bef-9344-3d91b6959b97
ms:mtpsurl: https://technet.microsoft.com/en-us/library/Dn725211(v=OCS.15)
ms:contentKeyID: 63969631
ms.date: 01/27/2015
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: ed50971c9656d454a44eeee627de95c187ef008f
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/11/2019
ms.locfileid: "34849430"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="http://msdn.microsoft.com/en-us/">

<div data-asp="http://msdn2.microsoft.com/asp">

# <a name="test-telephone-number-against-a-voice-route-in-lync-server-2013"></a>Проверка номера телефона на маршруте голосовой связи в Lync Server 2013

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**Тема последнего изменения:** 2014-05-20_


<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p>Расписание проверки</p></td>
<td><p>Ежемесячно</p></td>
</tr>
<tr class="even">
<td><p>Средство тестирования</p></td>
<td><p>Windows PowerShell</p></td>
</tr>
<tr class="odd">
<td><p>Требуемые разрешения</p></td>
<td><p>При локальном запуске с помощью командной консоли Lync Server пользователи должны быть членами группы безопасности Рткуниверсалсерверадминс.</p>
<p>При запуске с помощью удаленного экземпляра Windows PowerShell пользователям должна быть назначена роль RBAC, имеющая разрешение на запуск командлета Test-Ксвоицерауте. Чтобы просмотреть список всех ролей RBAC, которые могут использовать этот командлет, выполните в командной строке Windows PowerShell следующую команду:</p>
<p><code>Get-CsAdminRole | Where-Object {$_.Cmdlets -match &quot;Test-CsVoiceRoute&quot;}</code></p></td>
</tr>
</tbody>
</table>


<div>

## <a name="description"></a>Описание

Голосовые маршруты работают вместе с голосовыми политиками, помогающие перенаправлять голосовые звонки в сеть PSTN. Каждый маршрут голосовой связи содержит регулярное выражение (шаблон номера), который определяет номера телефонов, которые будут маршрутизироваться по данному голосовому маршруту. маршрут сможет обрабатывать любые телефонные номера, соответствующие этому регулярному выражению. Например, голосовой маршрут может иметь регулярное выражение, которое позволяет ему обрабатывать любое 10-значное число. Это означает, что маршрут сможет обработать номер телефона, например:

  - 2065551219

Маршрут не может обрабатывать одно из следующих двух чисел, оба из которых содержат 10 цифр:

  - 5551219

  - 12065551219

Командлет Test-Ксвоицерауте проверяет, может ли указанный голосовой маршрут перенаправлять указанный номер телефона.

</div>

<div>

## <a name="running-the-test"></a>Выполнение теста

Проверка возможности маршрута голоса к указанному номеру телефона состоит из двух этапов. Сначала необходимо использовать командлет Get-Ксвоицерауте, чтобы вернуть экземпляр маршрута голосовой связи, а затем использовать командлет Test-Ксвоицерауте, чтобы проверить способность маршрута обрабатывать номер целевого телефона. Например, эта команда проверяет, может ли голосовой маршрут Редмондвоицерауте перенаправлять номер телефона 2065551219:

`Get-CsVoiceRoute -Identity "RedmondVoiceRoute" | Test-CsVoiceRoute -TargetNumber "2065551219"`

Обратите внимание на то, что номер телефона должен вводиться так, как ожидается, что пользователи будут набирать этот номер. Например, если вы не предполагаете, что пользователи должны включать код страны и города при наборе номера, используйте синтаксис, подобный приведенному ниже.

`-TargetNumber "5551219"`

В этом случае целевой номер выходит из кода страны и кода города.

Чтобы использовать одну команду для проверки всех голосовых маршрутов по указанному целевому номеру, используйте следующий синтаксис:

`Get-CsVoiceRoute | Test-CsVoiceRoute -TargetNumber "2065551219"`

Дополнительные сведения можно найти в справочной документации по командлету Test-Ксвоицерауте.

</div>

<div>

## <a name="determining-success-or-failure"></a>Определение успеха или сбоя

Если маршрут голосовой связи может перенаправлять целевой номер телефона, командлет Test-Ксвоицерауте просто возвращает значение true:

Матчеспаттерн

\--------------

True

Это означает, что маршрут может обрабатывать номера, аналогичные целевому номеру. Если голосовой маршрут не может обработать целевой номер, функция Test-Ксвоицерауте возвращает значение false.

Матчеспаттерн

\--------------

False

</div>

<div>

## <a name="reasons-why-the-test-might-have-failed"></a>Причины, по которым может произойти сбой теста

При тестировании голосовых маршрутов "сбой" — это относительный термин. В этом случае это не означает, что маршрут является "разорванным"; вместо этого он просто означает, что маршрут не может обработать целевой номер. Это может быть вызвано неправильным настройкам голосового маршрута. Это также может означать, что маршрут не предназначался для обработки чисел с помощью этого шаблона. Например, если вы не хотите перенаправлять звонки в другие страны по определенному маршруту, этот маршрут можно настроить таким образом, чтобы он отклонил все номера телефонов, включающие код страны. Если функция Test-Ксвоицерауте возвращает значение ложь, если предполагается, что она возвращает значение истина, убедитесь, что конечный номер введен правильно. Если вы сделали это, для просмотра Нумберпаттерн, настроенного для маршрута, используйте следующую команду:

`Get-CsVoiceRoute -Identity "RedmondVoiceRoute" | Select-Object NumberPattern`

</div>

<div>

## <a name="see-also"></a>См. также


[Test-CsVoiceRoute](https://docs.microsoft.com/powershell/module/skype/Test-CsVoiceRoute)  
  

</div>

</div>

<span> </span>

</div>

</div>

</div>

