---
title: 'Lync Server 2013: абонентские группы и правила нормализации'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: Dial plans and normalization rules
ms:assetid: fde45195-6eb4-403c-9094-57df7fc0bd2a
ms:mtpsurl: https://technet.microsoft.com/en-us/library/Gg413082(v=OCS.15)
ms:contentKeyID: 48185960
ms.date: 07/23/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 4adcd2cd6bebfb0797427d15819399c9b2b9f86d
ms.sourcegitcommit: 88a16c09dd91229e1a8c156445eb3c360c942978
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/15/2020
ms.locfileid: "42036759"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="http://msdn.microsoft.com/">

<div data-asp="http://msdn2.microsoft.com/asp">

# <a name="dial-plans-and-normalization-rules-in-lync-server-2013"></a>Абонентские группы и правила нормализации в Lync Server 2013

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**Последнее изменение темы:** 2012-09-21_

Абонентская группа ? это именованный набор правил нормализации, которые преобразуют номера телефонов для именованного расположения, отдельного пользователя или контактного объекта в единый стандартный формат (E.164) для целей авторизации телефонов и маршрутизации вызовов.

Правила нормализации определяют, как номера телефонов, заданные в различных форматах, перенаправляются в требуемое расположение, требуемому пользователю или контактному объекту. Одна и та же строка набора номера может интерпретироваться и преобразовываться по-разному, в зависимости от расположения, в котором она была набрана, и лица или контактного объекта, разместившего вызов.

<div>

## <a name="dial-plan-scope"></a>Область абонентской группы

*Область* абонентской группы определяет иерархический уровень, на котором может применяться эта группа. В Lync Server пользователю можно назначить определенную абонентскую абонентскую абонентскую абонентскую систему. Если абонентская группа пользователя не назначена, применяется группа пула регистратора. Если абонентская группа пула регистратора также отсутствует, применяется группа уровня сайта. Наконец, если для пользователя не заданы никакие другие группы, применяется глобальная абонентская группа.

Клиенты получают уровни области абонентской группы с помощью параметров подготовки в стандартном расположении, которые предоставляются при входе пользователей на Lync Server. Администратор может управлять и назначать уровни области абонентской группы с помощью панели управления Lync Server.

<div>


> [!NOTE]  
> Абонентская группа шлюза телефонной сети общего пользования (ТСОП) уровня служб применяется к входящим звонкам с конкретного шлюза.



</div>

Уровни области абонентской группы определяются следующим образом.

  - **Абонентская схема пользователя:** Можно назначить отдельным пользователям, группам или контактным объектам. Голосовые приложения могут запрашивать абонентскую группу на уровне пользователей в случае получения звонка, для которого установлено пользовательское значение по умолчанию телефонного контекста. В рамках назначения абонентской группы контактный объект считается отдельным пользователем.

  - **Абонентская группа пула:** Можно создать на уровне обслуживания для любого шлюза или регистратора PSTN в топологии. Для определения абонентской группы пула необходимо указать конкретную службу (шлюз ТСОП или пул регистратора), к которой применяется абонентская группа.

  - **Абонентская Схема сайта:** Может создаваться для всего сайта, за исключением пользователей, групп или контактных объектов, которым назначена абонентская группа пула или абонентская группа пользователя. Чтобы определить абонентскую группу, следует указать сайт, к которому она применяется.

  - **Глобальная абонентская схема:** Абонентская схема по умолчанию, установленная вместе с продуктом. Вы можете изменить глобальную абонентскую группу, но не можете удалить ее. Эта абонентская группа применяется ко всем пользователям, группам и контактам корпоративной голосовой связи в развертывании, если не настроена и не назначена абонентская группа с более определенной областью.

</div>

<div>

## <a name="planning-for-dial-plans"></a>Планирование абонентских групп

Для планирования абонентской группы выполните следующие действия:

  - Укажите все адреса, по которым у вашей организации есть офис.
    
    Этот список должен быть полным и актуальным. По мере роста и развития организации его следует пересматривать. В большой международной компании с большим количеством небольших филиалов эта задача может потребовать довольно много времени.

  - Укажите допустимые шаблоны номеров для каждого сайта.
    
    Наиболее трудоемкой частью планирования абонентские группы является определение допустимых шаблонов номеров для каждого сайта. В некоторых случаях, возможно, получится скопировать правила нормализации, созданные для одной абонентской группы, в другие группы (особенно если соответствующие сайты находятся в пределах той же страны или региона или даже континента). В других случаях внесение небольших изменений в номера одной абонентской группы может быть достаточным для их использования в других абонентских группах.

  - Разработайте схему для именования абонентских групп в рамках всей организации.
    
    Принятие стандартной схемы именования гарантирует согласованность данных в пределах организации и упрощает решение задач обслуживания и обновления.

  - Решите, требуется ли использовать несколько абонентских групп для одного расположения.
    
    Если ваша организация поддерживает одну абонентскую абонентскую систему для нескольких расположений, вам по-прежнему потребуется создать отдельную абонентскую схему для пользователей корпоративной голосовой связи, которые переходят с УАТС, и которые должны сохранить существующие расширения.

  - Решите,требуются ли абонентские группы для индивидуальных пользователей. Например, если у вас есть пользователи на сайте филиала, которые зарегистрированы на центральном сайте, или если у вас есть пользователи, зарегистрированные на устройстве для обеспечения связи в филиалах, вы можете использовать специальные сценарии набора номера для таких пользователей, которые используют абонентские группы и правила нормализации для отдельных пользователей. . Дополнительные сведения см. в статье [требования к устойчивости для сайтов филиалов для Lync Server 2013](lync-server-2013-branch-site-resiliency-requirements.md).

  - Определите область абонентской группы (как описано выше в данном разделе).

Чтобы создать абонентскую абонентскую систему, укажите значения в следующих полях, как это необходимо, с помощью панели управления Lync Server или консоли управления Lync Server.

<div>

## <a name="name-and-simple-name"></a>Имя и простое имя

Для абонентских групп пользователей следует указать описательное имя, обозначающее пользователей, группы или контактные объекты, которым эта абонентская группа будет назначена. Для абонентских групп сайтов поле "Имя" предварительно заполняется именем сайта и не может быть изменено. Для абонентских групп пулов поле "Имя" предварительно заполняется полным доменным именем шлюза ТСОП или интерфейсного пула и не может быть изменено.

Абонентская группа *Простое имя* предварительно заполняется строкой, получаемой из имени абонентской группы. Поле "Простое имя" доступно для редактирования, что позволяет вам создать для абонентских групп более описательный контекст именования. Значение *Простое имя* не может быть пустым и должно быть уникальным. Рекомендуется разработать контекст именования для всей организации и последовательно использовать его для всех сайтов и пользователей.

</div>

<div>

## <a name="description"></a>Описание

Рекомендуется вводить общеупотребительные узнаваемые имена географических расположений, к которым применяются соответствующие абонентские группы. Например, если имя абонентской группы — London.Contoso.com, рекомендуемым описанием будет "Лондон".

</div>

<div>

## <a name="dial-in-conferencing-region"></a>Регион конференц-связи с телефонным подключением

Если выполняется развертывание конференц-связи с телефонным подключением, необходимо указать регион конференц-связи с телефонным подключением, чтобы связать соответствующие номера доступа с абонентской группой.

</div>

<div>

## <a name="external-access-prefix"></a>Префикса внешнего доступа

Можно указать префикс внешнего доступа длиной до четырех символов (\#, \*и 0-9), если пользователям требуется набирать одну или несколько дополнительных начальных цифр (например, 9), чтобы получить внешнюю линию.

<div>


> [!NOTE]  
> Если указан префикс внешнего доступа, не требуется создавать дополнительное правило нормализации для обработки префикса.



</div>

</div>

</div>

<div>

## <a name="normalization-rules"></a>Правила нормализации

Правила нормализации определяют, как номера телефонов, заданные в различных форматах, перенаправляются в заданное расположение. Одна и та же строка номера может интерпретироваться и преобразовываться по-разному, в зависимости от адреса, в котором она была набрана. Правила нормализации необходимы для маршрутизации вызовов, так как пользователи могут использовать и используют различные форматы при вводе номеров телефонов в своих списках контактов.

Нормализация указанных пользователями номеров телефонов позволяет получить согласованный формат, облегчающий выполнение следующих задач:

  - Сравнение набранного номера с URI SIP требуемого получателя.

  - Применение правил авторизации набора номера к вызывающей стороне.

Следующие поля номера могут потребоваться правилу нормализации при обработке набираемого номера:

  - абонентская группа,

  - код страны,

  - код города,

  - длина расширения,

  - префикс сайта.

<div>

## <a name="creating-normalization-rules"></a>Создание правил нормализации

Правила нормализации используют регулярные выражения .NET Framework для указания шаблонов совпадения номеров, используемых сервером для преобразования строк набора номера в формат E.164 с целью выполнения обратного поиска номеров. Правила нормализации создаются в панели управления Lync Server путем ввода выражений вручную или при вводе начальных цифр, а также длины строк набора номера, которые должны быть сопоставляемыми и разрешив создание соответствующей панели управления Lync Server. регулярное выражение. В любом случае после завершения вы можете ввести тестовый номер, чтобы убедиться в правильной работе правил нормализации.

Более подробную информацию об использовании регулярных выражений .NET Framework можно узнать в [http://go.microsoft.com/fwlink/p/?linkId=140927](http://go.microsoft.com/fwlink/p/?linkid=140927)разделе "регулярные выражения .NET Framework".

</div>

<span id="BKMK_SampleNormalizationRules"></span>

<div>

## <a name="sample-normalization-rules"></a>Примеры правил нормализации

В следующей таблице приведены примеры правил нормализации, созданные как регулярные выражения .NET Framework. Они приводятся только для справки и не являются предписывающим эталоном для создания собственных правил нормализации.

### <a name="table-1normalization-rules-using-net-framework-regular-expressions"></a>Таблица 1. Правила нормализации на основе регулярных выражений .NET Framework

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th>Имя правила</th>
<th>Описание</th>
<th>Шаблон номера</th>
<th>Translation</th>
<th>Пример</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>4digitExtension</p></td>
<td><p>Преобразование 4-значных расширений</p></td>
<td><p>^ (\d{4}) $</p></td>
<td><p>+ 1425555 $1</p></td>
<td><p>0100 преобразуется в +14255550100</p></td>
</tr>
<tr class="even">
<td><p>5digitExtension</p></td>
<td><p>Преобразование 5-значных расширений</p></td>
<td><p>^ 5 (\d{4}) $</p></td>
<td><p>+ 1425555 $1</p></td>
<td><p>50100 преобразуется в +14255550100</p></td>
</tr>
<tr class="odd">
<td><p>7digitcallingRedmond</p></td>
<td><p>Преобразование 7-значных номеров в локальные номера Редмонда</p></td>
<td><p>^ (\d{7}) $</p></td>
<td><p>+ 1425 $1</p></td>
<td><p>5550100 преобразуется в +14255550100</p></td>
</tr>
<tr class="even">
<td><p>7digitcallingDallas</p></td>
<td><p>Преобразование 7-значных номеров в локальные номера Далласа</p></td>
<td><p>^ (\d{7}) $</p></td>
<td><p>+ 1972 $1</p></td>
<td><p>5550100 преобразуется в +19725550100</p></td>
</tr>
<tr class="odd">
<td><p>10digitcallingUS</p></td>
<td><p>Преобразование 10-значных номеров в номера США</p></td>
<td><p>^ (\d{10}) $</p></td>
<td><p>+ 1 $1</p></td>
<td><p>2065550100 преобразуется в +12065550100</p></td>
</tr>
<tr class="even">
<td><p>лдкаллингус</p></td>
<td><p>Преобразование номеров с междугородными префиксами в номера США</p></td>
<td><p>^ 1 (\d{10}) $</p></td>
<td><p>+ $1</p></td>
<td><p>12145550100 преобразуется в +2145550100</p></td>
</tr>
<tr class="odd">
<td><p>интлкаллингус</p></td>
<td><p>Преобразование номеров с международными префиксами в номера США</p></td>
<td><p>^ 011 (\d *) $</p></td>
<td><p>+ $1</p></td>
<td><p>01191445550100 преобразуется в +91445550100</p></td>
</tr>
<tr class="even">
<td><p>редмондоператор</p></td>
<td><p>Преобразование 0 в оператора Редмонда</p></td>
<td><p>^ $0</p></td>
<td><p>+ 14255550100</p></td>
<td><p>0 преобразуется в +14255550100</p></td>
</tr>
<tr class="odd">
<td><p>редмондситепрефикс</p></td>
<td><p>Преобразование номеров с сетевым префиксом (6) и кодами сайта Редмонда (222)</p></td>
<td><p>^ 6222 (\d{4}) $</p></td>
<td><p>+ 1425555 $1</p></td>
<td><p>62220100 преобразуется в +14255550100</p></td>
</tr>
<tr class="even">
<td><p>ниситепрефикс</p></td>
<td><p>Преобразование номеров с сетевым префиксом (6) и кодами сайта Нью-Йорка (333)</p></td>
<td><p>^ 6333 (\d{4}) $</p></td>
<td><p>+ 1202555 $1</p></td>
<td><p>63330100 преобразуется в +12025550100</p></td>
</tr>
<tr class="odd">
<td><p>далласситепрефикс</p></td>
<td><p>Преобразование номеров с сетевым префиксом (6) и кодами сайта Далласа (444)</p></td>
<td><p>^ 6444 (\d{4}) $</p></td>
<td><p>+ 1972555 $1</p></td>
<td><p>64440100 преобразуется в +19725550100</p></td>
</tr>
</tbody>
</table>


В следующей таблице приводится пример абонентской группы для сайта Редмонда (шт. Вашингтон, США) на основе правил нормализации, приведенных в предыдущей таблице.

### <a name="table-2-redmond-dial-plan-based-on-normalization-rules-shown-in-table-1"></a>Таблица 2. Абонентская группа Редмонда, основанная на правилах нормализации из таблицы 1

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th>Redmond. Форестфкдн</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>5digitExtension</p></td>
</tr>
<tr class="even">
<td><p>7digitcallingRedmond</p></td>
</tr>
<tr class="odd">
<td><p>10digitcallingUS</p></td>
</tr>
<tr class="even">
<td><p>интлкаллингус</p></td>
</tr>
<tr class="odd">
<td><p>редмондситепрефикс</p></td>
</tr>
<tr class="even">
<td><p>ниситепрефикс</p></td>
</tr>
<tr class="odd">
<td><p>далласситепрефикс</p></td>
</tr>
<tr class="even">
<td><p>редмондоператор</p></td>
</tr>
</tbody>
</table>


<div>


> [!NOTE]  
> Имена правил нормализации, приведенные в предыдущей таблице, не включают пробелы, но это не является обязательным требованием. Например, первое имя в таблице можно записать как "5 значное расширение" или "5-значное расширение", и оно будет допустимым.



</div>

</div>

</div>

</div>

<span> </span>

</div>

</div>

</div>

