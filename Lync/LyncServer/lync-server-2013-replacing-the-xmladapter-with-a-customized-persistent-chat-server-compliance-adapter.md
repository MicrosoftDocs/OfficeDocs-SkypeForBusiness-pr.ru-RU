---
title: "Lync Server 2013: замена XmlAdapter спецадаптером сервера сохраняемого чата"
TOCTitle: "Lync Server 2013: замена XmlAdapter спецадаптером сервера сохраняемого чата"
ms:assetid: 2cb70db2-663f-40a6-abcf-89ea7d4a8b65
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/JJ680106(v=OCS.15)
ms:contentKeyID: 49887922
ms.date: 05/19/2016
mtps_version: v=OCS.15
ms.translationtype: HT
---

# Замена адаптера XmlAdapter настраиваемым адаптером совместимости сервера сохраняемого сеанса беседы в Lync Server 2013

 

_**Дата изменения раздела:** 2012-11-01_

Можно создать настраиваемый адаптер и использовать его вместо адаптера XmlAdapter, установленного с сервером сохраняемого сеанса беседы. Для этого необходимо предоставить сборку .NET Framework, содержащую общий класс, который реализует интерфейс **IComplianceAdapter**. Эту сборку необходимо поместить в папку установки сохраняемого сеанса беседы на каждом сервере в пуле серверов сохраняемого сеанса беседы. Любой из серверов совместимости может предоставлять данные о совместимости адаптеру, но серверы совместимости не могут предоставлять дублированные данные о совместимости нескольким экземплярам адаптера.

## Реализация интерфейса адаптера IComplianceAdapter

Интерфейс определен в сборке Compliance.dll в пространстве имен `Microsoft.Rtc.Internal.Chat.Server.Compliance`. В интерфейсе определены два метода, которые должен реализовать настраиваемый адаптер.

    void SetConfig(AdapterConfig config)

Сервер совместимости, обслуживающий сохраняемый сеанс беседы, будет вызывать этот метод при первой загрузке адаптера. Объект `AdapterConfig` содержит конфигурацию совместимости, которую имеет сохраняемый сеанс беседы, соответствующую адаптеру совместимости.

    void Translate(ConversationCollection conversations)

Сервер совместимости, обслуживающий сохраняемый сеанс беседы, вызывает этот метод через определенные интервалы, пока есть новые данные, требующие перевода. Этот интервал задается параметром `RunInterval` в конфигурации совместимости, которую имеет сохраняемый сеанс беседы.

Объект `ConversationCollection` содержит сведения о беседах, собранные при последнем вызове этого метода.

