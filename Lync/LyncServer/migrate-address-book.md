---
title: Перенос адресной книги
ms.reviewer: ''
ms.author: kenwith
author: kenwith
TOCTitle: Migrate Address Book
ms:assetid: ac7f0f39-4c6d-4702-8e25-93a73e3d800f
ms:mtpsurl: https://technet.microsoft.com/en-us/library/JJ205160(v=OCS.15)
ms:contentKeyID: 48185064
ms.date: 07/23/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 2293b7ad3e5ac14071bae4d5ecb935c24cfbb335
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/11/2019
ms.locfileid: "34849033"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="http://msdn.microsoft.com/en-us/">

<div data-asp="http://msdn2.microsoft.com/asp">

# <a name="migrate-address-book"></a>Перенос адресной книги

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**Тема последнего изменения:** 2012-10-09_

Как правило, адресная книга Lync Server 2010 переносится вместе с оставшейся частью вашей топологии. Тем не менее, если вы настроили указанные ниже действия в среде Lync Server 2010, вам может потребоваться выполнить некоторые шаги после миграции.

  - Установите свойство WMI **партитионбйоу** для группировки записей в адресную книгу по организационному подразделению (OU).

  - Настроены правила нормализации адресных книг.

  - Изменение значения по умолчанию для параметра **усенормализатионрулес** на false.

**Группировка записей в адресную книгу**

Если для свойства **партитионбйоу** WMI установлено значение true, чтобы создать адресные книги для каждого подразделения, необходимо задать атрибут **msRTCSIP-граупингид** Active Directory для пользователей и контактов, если вы хотите продолжить группировку записей в адресной книге. Возможно, вам потребуется сгруппировать записи в адресную книгу, чтобы ограничить область поиска в адресной книге. Чтобы использовать атрибут **msRTCSIP-граупингид** , напишите сценарий для заполнения атрибута и назначайте одинаковые значения для всех пользователей, которые нужно сгруппировать. Например, вы назначаете одно значение для всех пользователей в подразделении.

**Правила нормализации адресных книг**

Если вы настроили правила нормализации адресных книг в среде Lync Server 2010, вы должны перенести настроенные правила в ваш пилотный пул. Если вы не настраиваете правила нормализации адресных книг, вы не можете выполнить миграцию для службы адресной книги. Правила нормализации по умолчанию для Lync Server 2013 совпадают с правилами по умолчанию для Lync Server 2010. Выполните действия, описанные ниже в этом разделе, чтобы перенести настраиваемые правила нормализации.

<div>


> [!NOTE]  
> Если в вашей организации используется удаленное управление звонками и настроены правила нормализации адресных книг, необходимо выполнить описанные ниже действия, прежде чем можно будет использовать удаленное управление звонками. Процедура требует членства в группе Рткуниверсалсерверадминс или эквивалентных прав.



</div>

**Для Усенормализатионрулес задано значение false**

Если для **усенормализатионрулес** задано значение false, чтобы пользователи могли использовать номера телефонов, определенные в доменных службах Active Directory без применения правил нормализации для Lync Server 2013, необходимо установить параметр **усенормализатионрулес. **и **игнореженерикрулес** для параметров значения истина. Выполните действия, описанные ниже в этом разделе, чтобы установить для этих параметров значение true.

<div>

## <a name="to-migrate-address-book-customized-normalization-rules"></a>Миграция настроенных правил нормализации в адресной книге

1.  Найдите в корневом каталоге\_в общей\_папке адресной книги файл rules нормализации для компании\_\_, а затем скопируйте его в корневой каталог в общей папке адресной книги в Lync Server 2013 Pilot pooling.
    
    <div>
    

    > [!NOTE]  
    > Примеры правил нормализации адресных книг установлены в каталог файлов веб-компонентов ABS. Путь <STRONG>$installedDriveLetter: \Program Files\Microsoft Lync Server 2013 \ Web Компонентс\аддресс Book Филес\филес\ сампле_компани_фоне_нумбер_нормализатион_рулес. txt,</STRONG>. Этот файл можно скопировать и переименовать как &nbsp; <STRONG>компани_фоне_нумбер_нормализатион_рулес. txt</STRONG> &nbsp;в корневой каталог общей папки адресной книги. Например, адресная книга, доступная <STRONG></STRONG>в $serverX&nbsp;, будет выглядеть примерно так: <STRONG> \\$serverX \LyncFileShare\2-WebServices-1\ABFiles</STRONG>.

    
    </div>

2.  Используйте текстовый редактор, например Блокнот,\_для открытия файла\_\_\_Rules Normal. txt для компании.

3.  Некоторые типы записей не будут правильно работать в Lync Server 2013. Просмотрите файл на предмет типов записей, описанных в этом шаге, внесите необходимые изменения и сохраните изменения в общей папке адресной книги в вашем пилотном пуле.
    
    Строки, содержащие требуемый пробел или знаки препинания, приводят к сбою правил нормализации, так как эти символы удаляются из строки, вводимой в правила нормализации. Если у вас есть строки, содержащие необходимые пробелы или знаки препинания, необходимо изменить строки. Например, следующая строка может привести к сбою правила нормализации:
    
        \s*\(\s*\d\d\d\s*\)\s*\-\s*\d\d\d\s*\-\s*\d\d\d\d
    
    Следующая строка не приводила к сбою правила нормализации:
    
        \s*\(?\s*\d\d\d\s*\)?\s*\-?\s*\d\d\d\s*\-?\s*\d\d\d\d

</div>

<div>

## <a name="to-set-usenormalizationrules-and-ignoregenericrules-to-true"></a>Чтобы установить для Усенормализатионрулес и Игнореженерикрулес значение true,

1.  Запустите командную консоль Lync Server Management Shell: нажмите кнопку **Пуск**, выберите **все программы**, а затем — **Microsoft Lync Server 2013**, а затем — **Командная консоль Lync Server Management Shell**.

2.  Выполните одно из следующих действий:
    
      - Если развертывание включает только сервер Lync Server 2013, выполните следующий командлет на глобальном уровне, чтобы изменить значения для **усенормализатионрулес** и **игнореженерикрулес** на true:
        
            Set-CsAddressBookConfiguration -identity <XdsIdentity> -UseNormalizationRules=$true -IgnoreGenericRules=$true
    
      - Если в развертывании есть сочетание Lync Server 2013 и Lync Server 2010 или Office Communications Server 2007 R2, запустите следующий командлет и назначьте его каждому пулу Lync Server 2013 в топологии.
        
            New-CsAddressBookConfiguration -identity <XdsIdentity> -UseNormalizationRules=$true -IgnoreGenericRules=$true

3.  Дождитесь, когда репликация хранилища центрального управления будет выполняться на всех пулах.

4.  Измените файл правил нормализации\_телефонной линии "\_\_\_правила нормализации для телефонной номера компании. txt" для развертывания, чтобы очистить содержимое. Файл находится в общей папке каждого пула Lync Server 2013. Если файл отсутствует, создайте пустой файл\_с именем "\_\_\_Rules Normal. txt" для номера компании.

5.  Подождите несколько минут, пока все клиентские пулы смогут прочитать новые файлы.

6.  Выполните следующий командлет на каждом пуле Lync Server 2013 в развертывании:
    
        Update-CsAddressBook

</div>

</div>

<span> </span>

</div>

</div>

</div>

