---
title: Настройка кластеризации SQL Server в Lync Server 2013
TOCTitle: Настройка кластеризации SQL Server в Lync Server 2013
ms:assetid: d7b52ef1-573c-48ed-bb94-34e37b49645c
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Dn383982(v=OCS.15)
ms:contentKeyID: 56558977
ms.date: 12/10/2016
mtps_version: v=OCS.15
ms.translationtype: HT
---

# Настройка кластеризации SQL Server в Lync Server 2013

 

_**Дата изменения раздела:** 2016-12-08_

Microsoft Lync Server 2013 поддерживает кластеризацию для SQL Server 2012 и SQL Server 2008 R2. Подробные сведения о поддерживаемых возможностях см. в документе [Поддержка программного обеспечения баз данных в Lync Server 2013](lync-server-2013-database-software-support.md).

Создать и настроить кластер SQL Server необходимо до установки и развертывания сервера переднего плана и внутренней базы данных выпуска Enterprise Edition. Рекомендации и инструкции по настройке отказоустойчивой кластеризации в SQL Server 2012 см. здесь: <http://technet.microsoft.com/ru-ru/library/hh231721.aspx>. Об отказоустойчивой кластеризации в SQL Server 2008 можно прочесть по адресу [http://technet.microsoft.com/ru-ru/library/ms189134%28v=sql.105%29.aspx](http://technet.microsoft.com/ru-ru/library/ms189134\(v=sql.105\).aspx).

При установке SQL Server следует также установить SQL Server Management Studio для управления расположениями базы данных и файлов журнала. SQL Server Management Studio устанавливается с SQL Server как необязательный компонент.

> [!IMPORTANT]  
> Для установки и развертывания баз данных на сервере SQL Server нужно быть членом группы системных администраторов SQL Server на этом сервере. Если вы не входите в группу системных администраторов SQL Server, необходимо отправить запрос о добавлении в эту группу, прежде чем развертывать файлы базы данных. Если включить вас в группу системных администраторов невозможно, предоставьте администратору вашей базы данных SQL Server сценарий для настройки и развертывания баз данных. Подробнее о правах пользователя и разрешениях, необходимых для выполнения этих процедур, см. здесь: <a href="lync-server-2013-deployment-permissions-for-sql-server.md">Разрешения на развертывание для SQL Server в Lync Server 2013</a>.

## Настройка кластеризации SQL Server

1.  По завершении установки и настройки кластеризации SQL Server необходимо определить хранилище SQL Server в построителе топологий, указав имя виртуального кластера SQL Server (которое указано в параметрах кластеризации SQL Server) и имя экземпляра базы данных SQL Server. В отличие от одиночного сервера SQL Server здесь указывается полное доменное имя виртуального узла кластеризированного сервера SQL Server.
    
    > [!NOTE]  
    > Отдельные узлы кластера Windows Server в построителе топологий указывать не обязательно. Будет использоваться только имя виртуального кластера SQL Server.

2.  Если вы развертываете свои базы данных с помощью построителя топологий, вы должны быть членом группы системных администраторов SQL Server. Если вы входите в эту группу, но не имеете привилегий в этом домене (например, выступая в роли администратора базы данных SQL Server), то у вас есть права на создание баз данных, но не на чтение необходимой информации в Lync Server. Подробнее о правах и разрешениях пользователя, необходимых для развертывания Lync Server см. в документе [Разрешения на развертывание для SQL Server в Lync Server 2013](lync-server-2013-deployment-permissions-for-sql-server.md).

3.  Убедитесь, что папка базы данных и файлы журнала правильно сопоставлены общим дискам в кластере SQL Server, используя SQL Server Management Studio. Это обязательная процедура при создании баз данных с помощью построителя топологий.
    
    > [!NOTE]  
    > Если вы не устанавливали SQL Server Management Studio, можно установить это средство, повторно запустив установку SQL Server и выбрав SQL Server Management Studio в качестве дополнительного компонента к уже установленному программному обеспечению SQL Server.

4.  Установите базы данных сервера SQL Server, используя построитель топологий или командлеты Windows PowerShell. При использовании построителя топологии следуйте описанной ниже процедуре. При использовании командлетов Windows PowerShell см. раздел [Установка базы данных с помощью командной консоли Lync Server в Lync Server 2013](lync-server-2013-database-installation-using-lync-server-management-shell.md).

## Создание баз данных с помощью построителя топологий

1.  Запустите построитель топологий. Для этого нажмите кнопку **Пуск**, а затем последовательно выберите пункты **Все программы**, **Microsoft Lync Server 2013** и **Построитель топологии Lync Server**.
    
    > [!WARNING]  
    > Описанная ниже процедура предполагает, что вы определили и настроили топологию в построителе топологий. Подробнее об определении топологии см. здесь: <a href="lync-server-2013-defining-and-configuring-the-topology.md">Определение и настройка топологии в Lync Server 2013</a>. Чтобы опубликовать топологию и настроить базу данных с помощью построителя топологий, необходимо войти в систему в качестве пользователя с соответствующими правами и членством в группах, как описано в разделе <a href="lync-server-2013-deployment-permissions-for-sql-server.md">Разрешения на развертывание для SQL Server в Lync Server 2013</a>.

2.  В построителе топологий при публикации топологии на странице **Создание баз данных** нажмите кнопку **Дополнительно**.

3.  На странице **Выбор расположения файла базы данных** предлагается два варианта развертывания файлов базы данных в кластере SQL Server. Выберите один из указанных ниже вариантов.
    
      - **Автоматически определять местоположение файла базы данных.** В этом варианте используется алгоритм, определяющий местоположение файлов журнала и файлов данных для базы данных исходя из конфигурации дисков на сервере SQL Server. При этом делается попытка распределить файлы таким образом, чтобы обеспечить оптимальную производительность.
    
      - Использовать параметры по умолчанию экземпляра SQL Server. В этом варианте места установки файлов журнала и данных определяются в соответствии с параметрами экземпляра SQL Server, заданными по умолчанию. После развертывания файлов базы данных в SQL Server администратору вашей базы данных SQL Server имеет смысл переместить файлы для оптимизации производительности в соответствии с требованиями к данной конкретной конфигурации SQL Server.

4.  Завершите публикацию топологии и убедитесь, что в ходе этой операции не было зафиксировано ошибок.

