---
title: 'Lync Server 2013: создание или редактирование конфигурации XMPP-партнеров'
TOCTitle: Создание или редактирование конфигурации XMPP-партнеров
ms:assetid: 362dbe5e-8ee9-4aba-8c26-5907312b4a60
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/JJ552447(v=OCS.15)
ms:contentKeyID: 49309418
ms.date: 12/10/2016
mtps_version: v=OCS.15
ms.translationtype: HT
---

# Создание или редактирование конфигурации XMPP-партнеров в Lync Server 2013

 

_**Дата изменения раздела:** 2016-12-08_

Microsoft Lync Server 2013 интегрирует XMPP-прокси на пограничном сервере сервер и XMPP-шлюз на сервере переднего плана или в пуле переднего плана. Чтобы разрешить подключения из других XMPP-развертываний, необходимо настроить XMPP, используя панель управления Lync Server. Настраивайте параметры на основе домена XMPP. Чтобы создать новую связь с партнером, выполните описанные ниже действия.

## Создание нового федеративного партнера или изменение существующей конфигурации

1.  Войдите на любой компьютер, находящийся во внутреннем развертывании, с использованием учетной записи, входящей в группу RTCUniversalServerAdmins (или имеющей равнозначные права пользователя) либо назначенной роли CsAdministrator.

2.  Откройте окно браузера и введите URL-адрес для администрирования, чтобы открыть панель управления Lync Server. Дополнительные сведения о различных методах, которые можно использовать для запуска панели управления Lync Server см. в разделе [Открытие средств администрирования Lync Server](lync-server-2013-open-lync-server-administrative-tools.md).

3.  На левой панели навигации щелкните **Доступ федерац. и внешний доступ**, затем выберите **Федеративные партнеры XMPP**.

4.  Чтобы создать новую конфигурацию, нажмите кнопку **Создать**

5.  Чтобы изменить существующую конфигурацию, выберите конфигурацию и нажмите кнопку **Изменить**

6.  Чтобы создать или изменить конфигурацию для функции **Федеративные партнеры XMPP**, определите следующие параметры:

7.  **Основной домен** (обязательно). Основной домен — это базовый домен партнера XMPP. Например, в качестве имени домена партнера XMPP можно указать **fabrikam.com**. Это обязательная запись.

8.  **Описание**. В этом поле можно ввести заметки и другие полезные сведения для данной конкретной конфигурации. Эта запись не является обязательной.

9.  **Дополнительные домены**. Дополнительными называются домены, являющиеся частью домена XMPP-партнера, которые необходимо включить как часть разрешенного соединения XMPP. Например, если вашим основным доменом является **fabrikam.com**, то вы можете перечислить все прочие домены в рамках fabrikam.com, с которыми вы будете связываться через XMPP. Например, можно ввести **corp.fabrikam.com** и **it.fabrikam.com** для доменов XMPP "Corporate" и "Information Technologies" в рамках основного домена XMPP fabrikam.com.

10. **Тип партнера**. Параметр **Тип партнера** обязателен. На выбор предоставляется три варианта в раскрывающемся меню. Вы должны выбрать один из перечисленных ниже вариантов, чтобы описать, какие контакты можно добавлять. Возможные варианты:
    
      - **Федеративный**. Тип **Федеративный** представляет доверительное соединение между Lync Server и партнерским развертыванием Office Communications Server 2007 R2.
    
      - **Общедоступный проверенный**. Партнер относится к типу **Общедоступный проверенный**, если контакты, являющиеся частью развертывания, проверяемого поставщиком услуг, можно добавить в список контактов пользователя. Приглашения могут отправляться пользователем Lync, или пользователь Lync может принимать приглашения от контакта партнера.
    
      - **Общедоступный непроверенный**. Тип **Общедоступный непроверенный** указывает на отсутствие установленного и проверяемого состояния между двумя развертываниями. Пользователь Lync должен пригласить непроверенный контакт, чтобы этот контакт мог добавить пользователя Lync в свой список контактов. Например, Google GTalk не является общедоступной проверенной XMPP-службой по отношению к Lync Server. Пользователь GTalk не сможет добавить пользователя Lync в качестве контакта, если не получит формального приглашения, отправленного пользователем Lync.

11. Примечания по согласованию потока данных и методам защиты с использованием протоколов TLS и SASL:
    
    **XMPP Standards Foundation** (XSF) и **Internet Engineering Task Force** (IETF) определяют набор правил и стандартов для использования клиентских сертификатов TLS, серверных сертификатов TLS и механизма SASL. Использование TLS и SASL является обязательной частью процесса защиты потока данных XMPP. В документе о стандартах XMPP **XEP-0178** “задается рекомендуемый поток данных протокола для использования механизма SASL EXTERNAL с сертификатами PKIX, особенно если XMPP-служба указывает, что TLS является обязательным для согласования”. Согласно документу XSF, PKIX представляет инфраструктуру открытых ключей, называемую также PKI.
    
    Более подробные сведения о требованиях XMPP см. в XSF-документе XEP-0178. Дополнительные сведения см. в статье о лучших методиках использования SASL EXTERNAL с сертификатами согласно XEP-0178. <http://xmpp.org/extensions/xep-0178.html>
    
    См. документ по IETF, посвященный основным компонентам XMPP, раздел 5.0, согласование STARTTLS <http://tools.ietf.org/html/rfc6120>.
    
      - **Согласование TLS**. Задает правила согласования TLS. Служба XMPP может требовать TLS, может установить необязательность TLS, а также вы можете задать, что TLS не поддерживается. При выборе значения "Необязательно" решение об обязательности согласования будет принимать служба XMPP. Все возможные параметры и подробные сведения для согласования SASL, TLS и обратным вызовом, а также недопустимые и известные ошибочные конфигурации см. в статье [Параметры согласования для федеративных XMPP-партнеров в Lync Server 2013](lync-server-2013-negotiation-settings-for-xmpp-federated-partners.md).
        
           **Обязательный**. Служба XMPP требует согласование TLS.
        
           **Необязательный**. Служба XMPP указывает на обязательность согласования TLS.
        
           **Не поддерживается**. Служба XMPP не поддерживает TLS.
    
      - **Согласование SASL**. Задает правила согласования SASL. Служба XMPP может требовать SASL или установить необязательность SASL, а также вы можете задать, что SASL не поддерживается. При выборе значения "Необязательно" решение об обязательности согласования будет принимать служба XMPP.
        
        > [!WARNING]  
        > SASL нуждается в TLS. Чтобы использовать SASL, TLS должен быть обязательным или необязательным. Для любой конфигурации, в которой определяется SASL как обязательный или необязательный, требуется поддержка TLS. Если при нажатии кнопки <strong>Сохранить</strong> для сохранения изменений у вас не задан обязательный или необязательный протокол TLS, вы получите предупреждение о том, что для протокола SASL необходима поддержка TLS, при этом изменения не сохраняются. Чтобы избавиться от этой ошибки, задайте для TLS значение <strong>Требуется</strong> или <strong>Необязательно</strong>. Если использование SASL является необязательным и поддержка согласования TLS невозможна, необходимо задать для согласования SASL значение <strong>Не поддерживается</strong>. Проверьте с помощью XMPP-службы, какие методы согласования необходимы для протоколов TLS и SASL, иначе произойдет нарушение работы службы.   
             
           **Обязательный**. Служба XMPP требует согласование SASL.
        
           **Необязательный** . Служба XMPP указывает на обязательность согласования SASL.
        
           **Не поддерживается**. Служба XMPP не поддерживает SASL.
    
      - **Согласование с обратным вызовом**. Согласование с обратным вызовом определяется в XSF-документе **XEP-220: Server Dialback**<http://xmpp.org/extensions/xep-0220.html>. Процесс обратного вызова с помощью службы доменных имен (DNS) и полномочного сервера проверяет, от допустимого ли XMPP-партнера пришел запрос. Для этого отправляющий сервер создает сообщение особого типа с генерируемым ключом обратного вызова и ищет принимающий сервер в DNS. Отправляющий сервер передает ключ в XML-потоке вместе с результатами поиска DNS, предположительно, принимающему серверу. При получении ключа в XML-потоке принимающий сервер не отвечает отправляющему серверу, но передает ключ известному полномочному серверу. Полномочный сервер проверяет, действителен ли ключ. Если ключ недействителен, принимающий сервер не отвечает отправляющему серверу. Если ключ действителен, принимающий сервер сообщает отправляющему серверу, что удостоверение и ключ действительны и можно начинать преобразование.
        
        **Согласование обратным вызовом** может иметь два следующих допустимых состояния.
        
           **True**. Сервер XMPP настроен на использование согласования с обратным вызовом, когда требуется получить запрос от отправляющего сервера.
        
           **False**. Сервер XMPP не настроен на использование согласования с обратным вызовом, поэтому когда требуется получить запрос от отправляющего сервера, этот запрос игнорируется.

