---
title: 'Lync Server 2013: создание или изменение конфигурации партнеров XMPP'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: Create or edit XMPP partner configuration
ms:assetid: 362dbe5e-8ee9-4aba-8c26-5907312b4a60
ms:mtpsurl: https://technet.microsoft.com/en-us/library/JJ552447(v=OCS.15)
ms:contentKeyID: 48679558
ms.date: 09/03/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: f8400c6bbcf0cfc7d69bcba9dbebab07d14b5e0a
ms.sourcegitcommit: 831d141dfc5a49dd764cb296b73b63e5a9f8e599
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/21/2020
ms.locfileid: "42180166"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="https://msdn.microsoft.com/">

<div data-asp="https://msdn2.microsoft.com/asp">

# <a name="create-or-edit-xmpp-partner-configuration-in-lync-server-2013"></a>Создание или редактирование конфигурации XMPP-партнеров в Lync Server 2013

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**Последнее изменение темы:** 2014-09-03_

Microsoft Lync Server 2013 интегрирует в пограничный сервер прокси-сервер Extensible Messaging and Presence Protocol (XMPP) и шлюз XMPP на сервере переднего плана или интерфейсном пуле. Чтобы разрешить подключения от других развертываний XMPP, необходимо настроить XMPP в панели управления Lync Server. Настраивайте параметры на основе домена XMPP. Чтобы создать новую связь с партнером, выполните описанные ниже действия.

<div>

## <a name="to-create-a-new-federated-partner-or-edit-an-existing-configuration"></a>Создание нового федеративного партнера или изменение существующей конфигурации

1.  Из учетной записи пользователя, которая является членом группы RTCUniversalServerAdmins (или имеет эквивалентные права пользователя) или назначается роли CsAdministrator, войдите на любой компьютер во внутреннем развертывании.

2.  Откройте окно браузера и введите URL-адрес администрирования, чтобы открыть панель управления Lync Server. Для получения дополнительных сведений о различных методах, которые можно использовать для запуска панели управления Lync Server, ознакомьтесь со статьей [Open Lync server 2013 администрирование](lync-server-2013-open-lync-server-administrative-tools.md).

3.  На левой панели навигации щелкните **Доступ федерац. и внешний доступ**, затем выберите **Федеративные партнеры XMPP**.

4.  Чтобы создать новую конфигурацию, нажмите кнопку **Создать**

5.  Чтобы изменить существующую конфигурацию, выберите конфигурацию и нажмите кнопку **Изменить**

6.  Чтобы создать или изменить конфигурацию для функции **Федеративные партнеры XMPP**, определите следующие параметры:

7.  **Основной домен** (обязательно). Основной домен — это базовый домен партнера XMPP. Например, в качестве имени домена партнера XMPP можно указать **fabrikam.com**. Это обязательная запись.

8.  **Description**. В этом поле можно ввести заметки и другие полезные сведения для данной конкретной конфигурации. Эта запись не является обязательной.

9.  **Дополнительные домены**. Это домены, которые являются частью домена партнера XMPP, и которые следует включить как часть разрешенного взаимодействия XMPP. Например, если вашим основным доменом является **fabrikam.com**, то вы можете перечислить все прочие домены в рамках fabrikam.com, с которыми вы будете связываться через XMPP. Например, можно ввести **corp.fabrikam.com** и **it.fabrikam.com** для доменов XMPP "Corporate" и "Information Technologies" в рамках основного домена XMPP fabrikam.com.

10. **Тип партнера**. **Тип партнера** является обязательным параметром и предоставляет выбор из трех вариантов в раскрывающемся меню. Необходимо выбрать один из указанных далее типов для описания контактов, которые могут добавляться. Можно выбрать один из следующих типов.
    
      - **Федеративная**. Тип **федеративного** партнера — это надежное соединение между развертыванием партнеров Lync Server или Office Communications Server 2007 R2.
    
      - **Общедоступный проверенный**. Партнер относится к типу **Общедоступный проверенный**, если контакты, являющиеся частью развертывания, проверяемого поставщиком услуг, можно добавить в список контактов пользователя. Приглашения можно отправлять от пользователя Lync или пользователя Lync, чтобы принимать приглашения от контакта партнера.
    
      - **Общедоступная непроверенная**. Тип **Общедоступный непроверенный** указывает на отсутствие установленного и проверяемого состояния между двумя развертываниями. Пользователь Lync должен пригласить непроверенного контакта для этого контакта, чтобы иметь возможность добавить пользователя Lync в свой список контактов. Например, Google Гталк не является общедоступной проверенной службой XMPP, так как она относится к Lync Server. Пользователь Гталк не сможет добавить пользователя Lync в качестве контакта, если не было явно отправлено приглашение от пользователя Lync.

11. Примечания по согласованию потока данных и методам защиты с использованием протоколов TLS и SASL:
    
    **XMPP Standards Foundation** (XSF) и **Internet Engineering Task Force** (IETF) определяют набор правил и стандартов для использования клиентских сертификатов TLS, серверных сертификатов TLS и механизма SASL. Использование TLS и SASL является обязательной частью процесса защиты потока данных XMPP. В документе о стандартах XMPP **XEP-0178** “задается рекомендуемый поток данных протокола для использования механизма SASL EXTERNAL с сертификатами PKIX, особенно если XMPP-служба указывает, что TLS является обязательным для согласования”. Согласно документу XSF, PKIX представляет инфраструктуру открытых ключей, называемую также PKI.
    
    Более подробные сведения о требованиях XMPP см. в XSF-документе XEP-0178. Дополнительные сведения см. в статье о лучших методиках использования SASL EXTERNAL с сертификатами согласно XEP-0178. <http://xmpp.org/extensions/xep-0178.html>
    
    Ознакомьтесь с документом IETF "расширенный обмен сообщениями и протоколами присутствия (XMPP): ядро", раздел 5,0 <https://tools.ietf.org/html/rfc6120>, согласование STARTTLS.
    
      - **Согласование TLS**. Задает правила согласования TLS. Служба XMPP может требовать TLS, может установить необязательность TLS, а также вы можете задать, что TLS не поддерживается. При выборе значения "Необязательно" решение об обязательности согласования будет принимать служба XMPP. Чтобы просмотреть все возможные параметры и сведения о согласовании SASL, TLS и обратный вызов, включая недействительные и известные ошибки, — см. [Параметры согласования для федеративных партнеров XMPP в Lync Server 2013](lync-server-2013-negotiation-settings-for-xmpp-federated-partners.md).
        
          - <span></span>  
            **Обязательный**. XMPP-служба нуждается в протоколе согласования TLS.
        
          - <span></span>  
            **Необязательный**параметр. XMPP-служба указывает, что протокол согласования TLS является обязательным.
        
          - <span></span>  
            **Не поддерживается**. XMPP-служба не поддерживает TLS.
    
      - **Согласование SASL**. Задает правила согласования SASL. Служба XMPP может требовать SASL, может установить необязательность SASL, а также вы можете задать, что SASL не поддерживается. Выбор пункта "Необязательный" означает, что решение об обязательном согласовании принимается на стороне партнерской XMPP-службы.
        
        <div>
        

        > [!WARNING]  
        > SASL нуждается в TLS. Чтобы использовать SASL, TLS должен быть обязательным или необязательным. Для любой конфигурации, в которой определяется SASL как обязательный или необязательный, требуется поддержка TLS. Если при нажатии кнопки <STRONG>Сохранить</STRONG> для сохранения изменений у вас не задан обязательный или необязательный протокол TLS, вы получите предупреждение о том, что для протокола SASL необходима поддержка TLS, при этом изменения не сохраняются. Чтобы избавиться от этой ошибки, задайте для TLS значение <STRONG>Требуется</STRONG> или <STRONG>Необязательно</STRONG>. Если использование SASL является необязательным и поддержка согласования TLS невозможна, необходимо задать для согласования SASL значение <STRONG>Не поддерживается</STRONG>. Проверьте с помощью XMPP-службы, какие методы согласования необходимы для протоколов TLS и SASL, иначе произойдет нарушение работы службы.

        
        </div>
        
          - <span></span>  
            **Обязательный**. XMPP-служба нуждается в протоколе согласования SAS.
        
          - <span></span>  
            **Необязательный**параметр. XMPP-служба указывает, что протокол согласования SAS является обязательным.
        
          - <span></span>  
            **Не поддерживается**. XMPP-служба не поддерживает SAS.
    
      - **Согласование обратный вызов**. Обратный вызов согласование определяется элементом XSF в документе **КСЕП-220: Server обратный вызов** <http://xmpp.org/extensions/xep-0220.html>. Процесс обратного вызова с помощью службы доменных имен (DNS) и полномочного сервера проверяет, от допустимого ли XMPP-партнера пришел запрос. Для этого отправляющий сервер создает сообщение особого типа с генерируемым ключом обратного вызова и ищет принимающий сервер в DNS. Затем исходный сервер отправляет этот ключ в XML-потоке в результат поиска в DNS, предположительно на принимающий сервер. После получения ключа в XML-потоке принимающий сервер не отвечает исходному серверу, а отправляет этот ключ на известный полномочный сервер. Полномочный сервер проверяет, является ли ключ допустимым. Если ключ недопустимый, то принимающий сервер не отвечает исходному серверу. Если ключ допустимый, то принимающий сервер информирует исходный сервер о допустимости удостоверения и ключа и о том, что можно начать беседу.
        
        **Согласование обратным вызовом** может иметь два следующих допустимых состояния.
        
          - <span></span>  
            **Значение true**. Сервер XMPP настроен на использование согласования с обратным вызовом, когда требуется получить запрос от отправляющего сервера
        
          - <span></span>  
            **False**. Сервер XMPP не настроен на использование согласования с обратным вызовом, поэтому когда требуется получить запрос от отправляющего сервера, этот запрос игнорируется

</div>

</div>

<span> </span>

</div>

</div>

</div>

