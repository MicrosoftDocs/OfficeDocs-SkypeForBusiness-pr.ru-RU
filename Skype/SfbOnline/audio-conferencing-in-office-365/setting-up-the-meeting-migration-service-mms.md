---
title: Использование службы переноса собраний (MMS)
ms.author: tonysmit
author: tonysmit
manager: serdars
ms.reviewer: oscarr
ms.topic: article
ms.assetid: 031f09c0-9d2a-487a-b6db-b5d4bed6d16a
ms.tgt.pltfrm: cloud
ms.service: skype-for-business-online
search.appverid: MET150
ms.collection:
- Adm_Skype4B_Online
- Strat_SB_PSTN
audience: Admin
appliesto:
- Skype for Business
- Microsoft Teams
localization_priority: Normal
f1.keywords:
- NOCSH
ms.custom:
- Audio Conferencing
description: Служба переноса собраний (MMS) — это служба, которая работает в фоновом режиме и автоматически обновляет собрания Skype для бизнеса и Microsoft Teams для пользователей. MMS позволяет пользователям не запускать средство переноса собраний для обновления собраний Skype для бизнеса и Microsoft Teams.
ms.openlocfilehash: 9223102ef9c264fdafdb9f52ec74d6edb383f987
ms.sourcegitcommit: 67c686810d37bffda72a6e92155d9c8ec86bfae6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/15/2020
ms.locfileid: "47765351"
---
# <a name="using-the-meeting-migration-service-mms"></a>Использование службы переноса собраний (MMS)

Служба переноса собраний (MMS) обновляет существующие собрания пользователя в следующих сценариях:

- При переносе пользователя из локальной сети в облако (в Skype для бизнеса Online или TeamsOnly).
- Изменение параметров аудиоконференции для пользователя администратором 
- Когда пользователь в сети обновляется только до Teams или если для него в режиме TeamsUpgradePolicy установлено имя SfBwithTeamsCollabAndMeetings
- При использовании PowerShell 


По умолчанию MMS автоматически активируется в каждом из этих случаев, хотя администраторы могут отключить ее на уровне клиента. Кроме того, администраторы могут использовать для запуска переноса собраний для определенного пользователя вручную с помощью powerShell.


**Ограничения:** службу переноса собраний нельзя использовать, если применяются следующие правила:

- Почтовый ящик пользователя находится в локальной сети Exchange.
- Пользователь переносимый из облака в локальное решение Skype для бизнеса Server.

В таких ситуациях конечные пользователи [](https://www.microsoft.com/download/details.aspx?id=51659) могут использовать средство переноса собраний для переноса собственных собраний.

## <a name="how-mms-works"></a>Как работает MMS

При запуске MMS для пользователя запрос на миграцию помещается в очередь. Чтобы избежать каких-либо условий трассиности, запросы в очереди преднамеренно обрабатываются, пока не исчезнет по крайней мере 90 минут. После обработки запроса MMS выполняет следующие задачи:

1. Она ищет в почтовом ящике пользователя все существующие собрания, организованные этим пользователем и запланированные на будущее.
2. На основе сведений, найденных в почтовом ящике пользователя, он либо обновляет, либо планировать новые собрания в Teams или Skype для бизнеса Online для этого пользователя в зависимости от конкретного сценария.
3. В сообщении электронной почты оно заменяет блок собрания по сети в сведениях о собрании.
4. Обновленная версия собрания отправляется всем получателям собрания от имени организатора собрания. Приглашенные на собрание получат обновление с обновленными координатами собрания в сообщении электронной почты. 

    ![Блокировка собрания, обновляемого MMS](../images/210a03ee-30c1-46f3-808f-4c2ebdaa3ea1.png)

После запуска MMS обычно занимает около 2 часов до переноса собраний пользователя. Однако если у пользователя много собраний, это может занять больше времени. Если при переносе одного или нескольких собраний для пользователя mmS столкнется с ошибкой, оно будет периодически повторить попытку до 9 раз в течение 24 часов.

**Примечания:**

- При переносе собрания MMS заменяет все сведения в блоке информации о собрании по сети. Если же пользователь изменил этот блок, внесенные им изменения будут перезаписаны. Все остальные данные в сведениях о собрании, за исключением этого блока, останутся нетронутыми. Это означает, что все файлы, вложенные в приглашение на собрание, будут включены. 
- Переносятся только те собрания Skype для бизнеса или Microsoft Teams, которые были запланированы с помощью кнопки **Добавить собрание Skype** в Outlook в Интернете или с помощью надстройки "Собрание Skype" для Outlook. Если пользователь копирует и вает сведения о собрании по сети из одного собрания в новое, это новое собрание не будет обновлено, так как в исходной службе нет собрания.
- Содержимое собрания, которое было создано или присоединено к собранию (доски, опросы и т. д.), не сохранится после того, как продится MMS. Если организаторы собрания заранее прикрепили содержимое к собраниям, его потребуется воссоздать после того, как начнется MMS.
- Ссылки на общие заметки собрания в элементе календаря и в собрании Skype также будут перезаписаны. Обратите внимание на то, что фактические заметки к собранию, сохраненные в OneNote, по-прежнему будут там; перезаписывается только ссылка на общие заметки.
- Собрания с числом участников больше 250 (включая организатора) не будут перенесены.
- Некоторые символы ЮНИКОДА в теле приглашения могут быть неправильно обновлены на один из следующих специальных символов: ï, ¿, 1/2, .

## <a name="triggering-mms-for-a-user"></a>Запуск MMS для пользователя

В этом разделе описано, что происходит при срабатывии MMS в следующих случаях:

- При переносе пользователя из локальной сети в облако
- Изменение параметров аудиоконференции для пользователя администратором 
- Если в режиме пользователя в TeamsUpgradePolicy установлено имя TeamsOnly или SfBWithTeamsCollabAndMeetings (с помощью Powershell или портала администрирования Teams)
- При использовании cmdlet PowerShell используйте Start-CsExMeetingMigration

### <a name="updating-meetings-when-you-move-an-on-premises-user-to-the-cloud"></a>Обновление собраний при помещении локального пользователя в облако

Это самый распространенный сценарий, в котором MMS помогает сделать переход более плавным для пользователей. Без переноса собраний существующие собрания, организованные пользователем в локальной службе Skype для бизнеса Server, больше не будут работать после переноса пользователя в сеть. Таким образом, при использовании средств локального администрирования (или панели управления администратором) для перемещения пользователя в облако существующие собрания автоматически перемещаются в облако следующим `Move-CsUser` образом:

- Если задан этот переключатель, собрания будут перенесены непосредственно в Teams и пользователь перейдет `MoveToTeams` `Move-CsUser` в режим TeamsOnly. Для использования этого переключения требуется Skype для бизнеса Server 2015 с CU8 или более поздней. Эти пользователи могут присоединяться к любым собраниям Skype для бизнеса, на которые они могут быть приглашены, используя клиент Skype для бизнеса или приложение для собраний Skype.
- В противном случае собрания будут перенесены в Skype для бизнеса Online.

В любом случае, если пользователю была назначена лицензия на аудиоконференцию до того, как он переместился в облако, собрания будут созданы с координатами телефонного связи. Если вы переместите пользователя из локальной службы в облако и предполагаете, что он будет использовать аудиоконференцию, рекомендуется сначала назначить аудиоконференции, прежде чем перемещать пользователя, чтобы активировали только 1 перенос собраний.


### <a name="updating-meetings-when-a-users-audio-conferencing-settings-change"></a>Обновление собраний при изменении параметров аудиоконференции для пользователя

В следующих случаях MMS обновляет существующие собрания Skype для бизнеса и Microsoft Teams, добавляя, удаляя или изменяя координаты телефонного дозвона.

- Когда пользователь назначает или удаляет лицензию на службу аудиоконференций Майкрософт, для этого пользователя не включен сторонний поставщик услуг аудиоконференций.
- При смене поставщика услуг аудиоконференций пользователя на Майкрософт при условии, что пользователю назначена лицензия на аудиоконференцию Майкрософт. Дополнительные сведения см. в назначении Майкрософт в качестве поставщика услуг [аудиоконференций.](https://docs.microsoft.com/skypeforbusiness/audio-conferencing-in-office-365/assign-microsoft-as-the-audio-conferencing-provider) Также обратите внимание на то, что поддержка сторонних поставщиков аудиоконференций [ACP] планируется на 1 апреля 2019 г., как было объявлено [ранее.](https://docs.microsoft.com/skypeforbusiness/legal-and-regulatory/end-of-integration-with-3rd-party-providers)
- Когда вы включаете или отключая аудиоконференцию для пользователя.
- При изменении или сбросе ИД конференции для пользователя, настроенного для использования общедоступных собраний.
- При переключении пользователя на новый мост аудиоконференции.
- Если номер телефона для моста аудиоконференции не назначен. Это сложный сценарий, который потребует дополнительных действий. Дополнительные сведения см. в сведениях об изменении номеров телефонов на мосте [аудиоконференции.](https://docs.microsoft.com/MicrosoftTeams/change-the-phone-numbers-on-your-audio-conferencing-bridge)

Не все изменения в параметрах аудиоконференции для пользователя приводят к запуску MMS. В частности, MMS не будет обновлять собрания в двух следующих случаях:

- При изменении SIP-адреса организатора собрания (его имени пользователя SIP или домена SIP)
- При изменении URL-адреса собрания организации с помощью `Update-CsTenantMeetingUrl` этой команды.


### <a name="updating-meetings-when-assigning-teamsupgradepolicy"></a>Обновление собраний при назначении TeamsUpgradePolicy

По умолчанию перенос собраний запускается автоматически, когда пользователю предоставлен экземпляр `TeamsUpgradePolicy` с или `mode=TeamsOnly` `mode= SfBWithTeamsCollabAndMeetings` . Если вы не хотите переносить собрания при предоставлении любого из этих режимов, укажите (при использовании `MigrateMeetingsToTeams $false` PowerShell) или сделайте это при настройке режима сосуществования пользователя (при использовании портала администрирования `Grant-CsTeamsUpgradePolicy` Teams).

Также обратите внимание на следующее:

- Перенос собраний вызывается только в том случае, если вы `TeamsUpgradePolicy` предоставили конкретному пользователю. Если вы предоставляете собрание на уровне клиента или предоставляете его на уровне клиента, перенос собраний `TeamsUpgradePolicy` `mode=TeamsOnly` не `mode=SfBWithTeamsCollabAndMeetings` вызывается. 
- Пользователю можно предоставить режим TeamsOnly, только если он находится в сети. Пользователей, которые находятся на локальном сайте, необходимо передвигать, как `Move-CsUser` описано выше.
- Предоставление режима, кроме TeamsOnly или SfBWithTeamsCollabAndMeetings, не преобразует существующие собрания Teams в собрания Skype для бизнеса.

### <a name="trigger-meeting-migration-manually-via-powershell-cmdlet"></a>Запуск переноса собраний вручную с помощью cmdlet PowerShell

В дополнение к автоматическому переносу собраний администраторы могут запускать перенос собраний для пользователя вручную с помощью `Start-CsExMeetingMigration` cmdlet. Этот cmdlet очереди запроса на миграцию для указанного пользователя.  Помимо обязательного параметра, он имеет два необязательных параметра и позволяет указать, как перенести `Identity` `SourceMeetingType` `TargetMeetingType` собрания:

**TargetMeetingType:**

- Если установлено, что собрания Skype для бизнеса остаются собраниями Skype для бизнеса, а собрания Teams остаются `TargetMeetingType Current` собраниями Teams. Однако координаты аудиоконференции могут быть изменены, а все локальное собрание Skype для бизнеса Online будет перенесено в Skype для бизнеса Online. Это значение по умолчанию для TargetMeetingType.
- В этом режиме указывается, что любое существующее собрание необходимо перенести в Teams независимо от того, где оно находится : в Skype для бизнеса Online или локально, независимо от того, требуется ли обновление `TargetMeetingType Teams` аудиоконференции. 

**SourceMeetingType:**
- Это означает, что необходимо обновить только собрания Skype для бизнеса (как локальное, так и `SourceMeetingType SfB` сетевое).
- Использование `SourceMeetingType Teams` указывает на то, что обновление следует только для собраний Teams.
- Использование указывает на то, что должны обновляться и собрания Skype для бизнеса, и `SourceMeetingType All` собрания Teams. Это значение по умолчанию для SourceMeetingType.
    

В примере ниже показано, как инициировать перенос собраний для пользователей ashaw@contoso.com таким образом, чтобы все собрания переносились в Teams:

```PowerShell
Start-CsExMeetingMigration -Identity ashaw@contoso.com -TargetMeetingType Teams
```



## <a name="managing-mms"></a>Управление MMS

С Windows PowerShell вы можете проверить состояние текущей миграции, вручную активировать перенос собраний и полностью отключить ее. 

### <a name="check-the-status-of-meeting-migrations"></a>Проверка состояния переноса собраний

Он используется для проверки `Get-CsMeetingMigrationStatus` состояния переноса собраний. Ниже приведено несколько примеров.

- Чтобы получить сводное состояние всех миграций MMS, запустите следующую команду, которая предоставляет табли представление всех штатов миграции:

    ```PowerShell
    Get-CsMeetingMigrationStatus -SummaryOnly

    State      UserCount
    ------     ---------
    Pending      21
    InProgress    6
    Failed            2 
    Succeeded   131
    ```
- Чтобы получить полные сведения о всех миграциях в течение определенного периода времени, используйте `StartTime` `EndTime` параметры и параметры. Например, следующая команда возвращает полные сведения о всех миграциях, которые были совершены с 1 по 8 октября 2018 г.

    ```PowerShell
    Get-CsMeetingMigrationStatus -StartTime "10/1/2018" -EndTime "10/8/2018"
    ```
- Чтобы проверить состояние миграции для конкретного пользователя, используйте `Identity` параметр. Например, следующая команда получит состояние переноса для пользователя ashaw@contoso.com:

    ```PowerShell
    Get-CsMeetingMigrationStatus -Identity ashaw@contoso.com
    ```
Если вы видите, что какие-либо миграции завершили сбой, как можно скорее примите меры для устранения этих проблем, так как пользователи не смогут звонить на собрания, организованные этими пользователями, пока вы их не уберите. Если `Get-CsMeetingMigrationStatus` показана любая миграция в состоянии сбойного выполнения, выполните следующие действия:
 
1. Определите пользователей, которых затронул сбой. Для получения списка пользователей, которых затронул сбой, и возникших ошибок выполните следующую команду:

    ```PowerShell
    Get-CsMeetingMigrationStatus| Where {$_.State -eq "Failed"}| Format-Table UserPrincipalName, LastMessage
    ```
2. Для каждого затронутого пользователя запустите средство переноса собраний, чтобы перенести собрания вручную.

3. Если с помощью средства переноса собраний перенос выполнить все равно не удается, есть два варианта действий.

    - Попросить пользователей создать собрания Skype заново.
    - [Связаться со службой поддержки](https://go.microsoft.com/fwlink/p/?LinkID=518322).


### <a name="enabling-and-disabling-mms"></a>Включение и отключение MMS

MMS по умолчанию включена для всех организаций, но ее можно отключить следующим образом:

- Полностью отключить для клиента. 
- Отключать только изменения, связанные с аудиоконференцией. В этом случае MMS будет по-прежнему работать при переносе пользователя из локальной сети в облако или при предоставлении режима TeamsOnly или SfBWithTeamsCollabAndMeetings в режиме `TeamsUpgradePolicy` .

Например, может потребоваться вручную перенести все собрания или временно отключить MMS, внося существенные изменения в параметры аудиоконференции для вашей организации.

Чтобы узнать, включена ли MMS для вашей организации, запустите следующую команду: MMS включена, если `MeetingMigrationEnabled` параметр имеет. `$true`
```PowerShell
Get-CsTenantMigrationConfiguration
```
Чтобы полностью включить или отключить MMS, используйте `Set-CsTenantMigrationConfiguration` эту команду. Например, чтобы отключить MMS, запустите следующую команду:

```PowerShell
Set-CsTenantMigrationConfiguration -MeetingMigrationEnabled $false
```
Если MMS включена в организации и вы хотите проверить, включена ли она для обновления аудиоконференции, проверьте значение параметра в выходных `AutomaticallyMigrateUserMeetings` данных. `Get-CsOnlineDialInConferencingTenantSettings` Чтобы включить или отключить MMS для аудиоконференции, используйте `Set-CsOnlineDialInConferencingTenantSettings` функцию. Например, чтобы отключить MMS для аудиоконференции, запустите следующую команду:

```PowerShell
Set-CsOnlineDialInConferencingTenantSettings  -AutomaticallyMigrateUserMeetings $false
```

## <a name="related-topics"></a>Статьи по теме

[Попробуйте или приобретйте аудиоконференцию в Microsoft 365 или Office 365](../audio-conferencing-in-office-365/try-or-purchase-audio-conferencing-in-office-365.md)

[Перемещение пользователей между локальной средой и облаком](https://docs.microsoft.com/SkypeForBusiness/hybrid/move-users-between-on-premises-and-cloud)
