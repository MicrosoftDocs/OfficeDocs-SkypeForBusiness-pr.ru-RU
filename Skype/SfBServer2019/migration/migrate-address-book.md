---
title: Перенос адресной книги
ms.author: kenwith
author: kenwith
manager: serdars
ms.audience: ITPro
ms.topic: get-started-article
ms.prod: skype-for-business-itpro
localization_priority: Normal
description: 'В целом наряду с топологией переносится в адресной книге. Тем не менее необходимо выполнить некоторые действия после переноса, если настроены следующие в старой среды:'
ms.openlocfilehash: 081246acaaede37ab7f7f204a3f7204d9b25fbcc
ms.sourcegitcommit: 0458232441d3aed8dd578f41a13078aa379c9b00
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/10/2019
ms.locfileid: "27788996"
---
# <a name="migrate-address-book"></a>Перенос адресной книги

В целом наряду с топологией переносится в адресной книге. Тем не менее необходимо выполнить некоторые действия после переноса, если настроены следующие в старой среды: 

- Настроить правила нормализации адресной книги.

- Изменено значение по умолчанию параметра **UseNormalizationRules** на False. 


 **Правила нормализации адресной книги**

Если настраиваемые правила нормализации адресной книги в старой среды необходимо перенести настраиваемых правил пилотного пула. Если не были указаны пользователем правила нормализации адресной книги, вы не для переноса для службы адресной книги. Правила нормализации по умолчанию для Скайп для Business Server 2019 такие же, как правила по умолчанию при установке прежних версий. Выполните процедуру, описанную далее в этом разделе перенос правил нормализации настраиваемая.

> [!NOTE]
> Если организация использует удаленного управления звонками и настроенных правил нормализации адресной книги, необходимо выполнить процедуры в этом разделе прежде чем можно будет использовать удаленное управление звонками. Процедуры необходимо быть членом группы RTCUniversalServerAdmins или эквивалентные права. 

 **Параметр UseNormalizationRules имеет значение False**

При установке значения для **UseNormalizationRules** значение False, чтобы пользователи могли использовать номера телефонов, как они определены в доменных службах Active Directory без необходимости Скайп для Business Server 2019 применения правил нормализации, необходимо задать ** UseNormalizationRules** и параметры **IgnoreGenericRules** на True. Выполните процедуру, описанную далее в этом разделе для этих параметров на значение True. 

## <a name="to-migrate-address-book-customized-normalization-rules"></a>Перенос адресной книги настроенных правил нормализации

1. Найдите файл Company_Phone_Number_Normalization_Rules.txt в корне общей папки адресной книги и скопируйте его в корень общей папки адресной книги в вашей Скайп для пилотного пула Business Server 2019.

    > [!NOTE]
    > Примеры правил нормализации адресной книги установленные ABS каталога используемого веб-компонент файла. — Это путь **$installedDriveLetter: \Program Files\Microsoft Скайп для Business Server 2019\Web Components\Address книги Files\Files\ Sample_Company_Phone_Number_Normalization_Rules.txt**. Этот файл можно скопировать и переименован как **Company_Phone_Number_Normalization_Rules.txt** в корневой каталог адресной книги общей папки. Например, в адресной книге, совместно в **$serverX**путь будет аналогичен: ** \\$serverX \SkypeForBusiness-FileShare\2-WebServices-1\ABFiles**. 

2. Используйте текстовый редактор, например "Блокнот", чтобы открыть файл Company_Phone_Number_Normalization_Rules.txt.

3. Определенные типы записей не будет работать в Скайп для Business Server 2019. Просмотрите файл для типов записей, описанного на этом шаге, при необходимости изменить и сохранить изменения в общую папку адресной книги в пилотном пуле.

    Строки, содержащие требуемые пробелов и знаков препинания причина правил нормализации к сбою, так как эти символы удаляются из строки, полученный правила нормализации. Если у вас есть строк, содержащих необходимые пробелов и знаков препинания, необходимо изменить строк. Например следующая строка приведет к сбою правила нормализации:

   ```
   \s*\(\s*\d\d\d\s*\)\s*\-\s*\d\d\d\s*\-\s*\d\d\d\d
   ```

    Следующая строка не приведет к сбою правила нормализации:

   ```
   \s*\(?\s*\d\d\d\s*\)?\s*\-?\s*\d\d\d\s*\-?\s*\d\d\d\d
   ```

## <a name="to-set-usenormalizationrules-and-ignoregenericrules-to-true"></a>Чтобы задать UseNormalizationRules и IgnoreGenericRules на true

1. Запустите Скайп для консоли Business Server: нажмите кнопку **Пуск**, последовательно выберите пункты **Все программы**, щелкните **Скайп Microsoft для Business Server 2019**и нажмите кнопку **Скайп для консоли Business Server**.

2. Выполните одно из указанных ниже действий.

   - Если в развертывании имеется только Скайп для 2019 Business Server, выполните следующий командлет на глобальном уровне, чтобы изменить значения для **UseNormalizationRules** и **IgnoreGenericRules** на True: 

   ```
   Set-CsAddressBookConfiguration -identity <XdsIdentity> -UseNormalizationRules=$true -IgnoreGenericRules=$true
   ```

   - Если развертывание включает сочетание Скайп Business Server 2019 и устаревшие установки, выполните следующий командлет и назначьте его для каждого Скайп для пула Business Server 2019 в топологии:

   ```
   New-CsAddressBookConfiguration -identity <XdsIdentity> -UseNormalizationRules=$true -IgnoreGenericRules=$true
   ```

3. Дождитесь репликации хранилища централизованного управления будет выполнена для всех пулов.

4. Измените файл правил нормализации телефонных, «Company_Phone_Number_Normalization_Rules.txt», для развертывания для очистки содержимого. Файл находится в файловом ресурсе каждого Скайп для пула Business Server 2019. Если файл не существует, создайте пустой файл с именем «Company_Phone_Number_Normalization_Rules.txt».

5. Подождите несколько минут для всех пулов переднего плана не будут прочитаны новые файлы.

6. Выполните следующий командлет на каждом Скайп для Business Server 2019 пула в развертывании:

   ```
   Update-CsAddressBook
   ```


