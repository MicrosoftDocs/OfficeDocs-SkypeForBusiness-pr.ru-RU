---
title: Перенос адресной книги
ms.reviewer: ''
ms.author: kenwith
author: kenwith
manager: serdars
audience: ITPro
ms.topic: get-started-article
ms.prod: skype-for-business-itpro
localization_priority: Normal
description: В общем случае адресная книга переносится вместе с оставшейся частью вашей топологии. Однако вам может потребоваться выполнить некоторые действия после миграции, если в устаревшей среде были настроены указанные ниже компоненты.
ms.openlocfilehash: 4263ae5bff60859cc9606a3683a3a03b0d2d4c35
ms.sourcegitcommit: ab47ff88f51a96aaf8bc99a6303e114d41ca5c2f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/20/2019
ms.locfileid: "34307121"
---
# <a name="migrate-address-book"></a>Перенос адресной книги

В общем случае адресная книга переносится вместе с оставшейся частью вашей топологии. Однако вам может потребоваться выполнить некоторые действия после миграции, если в устаревшей среде были настроены указанные ниже компоненты. 

- Настроены правила нормализации адресных книг.

- Изменение значения по умолчанию для параметра **усенормализатионрулес** на false. 


 **Правила нормализации адресных книг**

Если вы настроили правила нормализации адресных книг в устаревшей среде, необходимо перенести настроенные правила в свой проект пилотного пула. Если вы не настраиваете правила нормализации адресных книг, вы не можете выполнить миграцию для службы адресной книги. Правила нормализации по умолчанию для Skype для бизнеса Server 2019 совпадают с правилами по умолчанию для установленной версии. Выполните действия, описанные ниже в этом разделе, чтобы перенести настраиваемые правила нормализации.

> [!NOTE]
> Если в вашей организации используется удаленное управление звонками и настроены правила нормализации адресных книг, необходимо выполнить описанные ниже действия, прежде чем можно будет использовать удаленное управление звонками. Процедура требует членства в группе Рткуниверсалсерверадминс или эквивалентных прав. 

 **Для Усенормализатионрулес задано значение false**

Если задать для **усенормализатионрулес** значение false, чтобы пользователи могли использовать номера телефонов, определенные в доменных службах Active Directory, не имея в Skype для бизнеса Server 2019 правила нормализации, необходимо задать **для параметра **Для параметров усенормализатионрулес и **Игнореженерикрулес** значение true. Выполните действия, описанные ниже в этом разделе, чтобы установить для этих параметров значение true. 

## <a name="to-migrate-address-book-customized-normalization-rules"></a>Миграция настроенных правил нормализации в адресной книге

1. Найдите файл Компани_фоне_нумбер_нормализатион_рулес. txt в корне общей папки адресной книги и скопируйте его в корневой каталог общей папки адресной книги в корпоративном пуле Skype для бизнеса Server 2019.

    > [!NOTE]
    > Примеры правил нормализации адресных книг установлены в каталог файлов веб-компонентов ABS. Путь — это **$installedDriveLetter: \Program Files\Microsoft Компонентс\аддресс Book Филес\филес\ сампле_компани_фоне_нумбер_нормализатион_рулес. txt в Skype для бизнеса Server 2019**. Этот файл можно скопировать и переименовать как **компани_фоне_нумбер_нормализатион_рулес. txt** в корневой каталог общей папки адресной книги. Например, адресная книга, доступная в **$serverX**, будет выглядеть примерно так: ** \\$serverX \SkypeForBusiness-FileShare\2-WebServices-1\ABFiles**. 

2. Откройте файл Компани_фоне_нумбер_нормализатион_рулес. txt с помощью текстового редактора (например, блокнота).

3. Некоторые типы записей не будут правильно работать в Skype для бизнеса Server 2019. Просмотрите файл на предмет типов записей, описанных в этом шаге, внесите необходимые изменения и сохраните изменения в общей папке адресной книги в вашем пилотном пуле.

    Строки, содержащие требуемый пробел или знаки препинания, приводят к сбою правил нормализации, так как эти символы удаляются из строки, вводимой в правила нормализации. Если у вас есть строки, содержащие необходимые пробелы или знаки препинания, необходимо изменить строки. Например, следующая строка может привести к сбою правила нормализации:

   ```
   \s*\(\s*\d\d\d\s*\)\s*\-\s*\d\d\d\s*\-\s*\d\d\d\d
   ```

    Следующая строка не приводила к сбою правила нормализации:

   ```
   \s*\(?\s*\d\d\d\s*\)?\s*\-?\s*\d\d\d\s*\-?\s*\d\d\d\d
   ```

## <a name="to-set-usenormalizationrules-and-ignoregenericrules-to-true"></a>Чтобы установить для Усенормализатионрулес и Игнореженерикрулес значение true,

1. Запустите консоль управления в Skype для бизнеса Server: нажмите кнопку **Пуск**, выберите пункт **все программы**, а затем — **Microsoft Skype для бизнеса Server 2019**, а затем — **Командная консоль управления Skype для бизнеса Server**.

2. Выполните одно из следующих действий:

   - Если в развертывании есть только Skype для бизнеса Server 2019, выполните следующий командлет на глобальном уровне, чтобы изменить значения **усенормализатионрулес** и **игнореженерикрулес** на true: 

   ```
   Set-CsAddressBookConfiguration -identity <XdsIdentity> -UseNormalizationRules=$true -IgnoreGenericRules=$true
   ```

   - Если в развертывании есть сочетание Skype для бизнеса Server 2019 и устаревшая установка, запустите следующий командлет и назначьте его каждому из пулов Skype для Business Server 2019 в топологии.

   ```
   New-CsAddressBookConfiguration -identity <XdsIdentity> -UseNormalizationRules=$true -IgnoreGenericRules=$true
   ```

3. Дождитесь, когда репликация хранилища центрального управления будет выполняться на всех пулах.

4. Измените файл правил нормализации телефона в разделе "Компани_фоне_нумбер_нормализатион_рулес. txt" для развертывания, чтобы очистить содержимое. Этот файл находится в общей папке каждого пула 2019 в Skype для бизнеса Server. Если файл не отображается, создайте пустой файл с именем "Компани_фоне_нумбер_нормализатион_рулес. txt".

5. Подождите несколько минут, пока все клиентские пулы смогут прочитать новые файлы.

6. Выполните следующий командлет на каждом пуле 2019 для Business Server в среде Skype.

   ```
   Update-CsAddressBook
   ```


