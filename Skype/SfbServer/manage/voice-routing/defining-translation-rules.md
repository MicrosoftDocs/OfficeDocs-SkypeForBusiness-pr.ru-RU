---
title: Определение правил преобразования в Скайп для Business Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
description: Скайп для корпоративной голосовой связи Business Server Маршрутизация звонков на основании номера телефонов, приводятся в формат E.164. Это означает, что все набранный строки, должны быть упорядочены в формат E.164 для выполнения обратного номеров поиск, чтобы преобразовать их соответствия SIP URI. Скайп для Business Server предоставляет возможность управлять вызываемый идентификатор и идентификатора звонящего.
ms.openlocfilehash: 1615983b4ebeecc7374f8ef5c5c84ced83d0c151
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/11/2019
ms.locfileid: "33896325"
---
# <a name="defining-translation-rules-in-skype-for-business-server"></a>Определение правил преобразования в Скайп для Business Server

Скайп для корпоративной голосовой связи Business Server Маршрутизация звонков на основании номера телефонов, приводятся в формат E.164. Это означает, что все набранный строки, должны быть упорядочены в формат E.164 для выполнения обратного номеров поиск, чтобы преобразовать их соответствия SIP URI. Скайп для Business Server предоставляет возможность управлять вызываемый идентификатор и идентификатора звонящего.

С помощью Скайп для Business Server, вызываемой стороны (то есть, называемые номер телефона) может быть преобразован из формата E.164 в местный формат набора номера, необходимые для одноранговой магистральной линии связи (то есть, соответствующего шлюза, АТС учреждения (УАТС) или SIP линии связи). Для этого необходимо определить одно или несколько правил преобразования для преобразования URI запроса перед переадресованием на магистральный узел.

## <a name="caller-id-presentation"></a>Отображение идентификатора звонящего

Скайп для Business Server предлагает возможность также перевести телефонный номер вызывающей стороны (то есть, номер телефона, который звонит абонент из) из формата E.164 в местный формат набора номера, необходимые для одноранговой магистральной линии связи. Например, можно создать правило преобразования для замены +44 в начале строки набора на 0144.

**Настройка идентификатора звонящего с помощью Скайп для панели управления Business Server**

1. Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator. Дополнительные сведения см [Делегирование разрешений на установку](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).
2. Откройте окно браузера и введите URL-адрес администрирования, чтобы открыть панель управления. Для получения дополнительных сведений о различных способах, которые можно использовать для запуска Скайп для панели управления Business видеть [установки и откройте Администрирование](../../management-tools/install-and-open-administrative-tools.md).
3. На левой панели навигации щелкните **Маршрутизация голосовой связи** и **Настройка магистрали**.
4. На странице Конфигурация магистрали дважды щелкните существующую магистраль (например, **глобальную**), чтобы открыть диалоговое окно **Изменение конфигурации магистрали**.
5. Настройка представления идентификатора звонящего
    - Чтобы выбрать одно или несколько правил из списка всех правил перевода, доступные в вашем развертывании корпоративной голосовой связи, нажмите кнопку **выбрать**. В окне **Правила трансляции вызывающего номера** выберите правила, которые требуется сопоставить с магистральной линией связи, а затем нажмите кнопку **ОК**.
    - Чтобы определить новое правило преобразования и сопоставить его с магистральной линией связи, щелкните **Создать**. 
    - Чтобы изменить правило преобразования, уже сопоставленное с магистральной линией связи, щелкните имя правила, а затем выберите **Подробнее**.
    - Чтобы скопировать существующее правило преобразования для использования в качестве отправной точки для определения нового правила, щелкните имя правила, нажмите кнопку **Копировать**и выберите команду **Вставить**.
    - Чтобы удалить правило преобразования из магистральной линии связи, выделите имя этого правила, а затем щелкните **Удалить**.

> [!Warning] 
> Не сопоставляйте правила преобразования с магистральной линией связи, если вы уже настроили их для связанной одноранговой магистральной линии связи, поскольку эти два правила могут конфликтовать друг с другом. 

## <a name="called-id-presentation"></a>Представление вызываемого номера

> [!Important]
> Связывать один или несколько правил преобразования с конфигурацией магистрали корпоративной голосовой связи предназначен для использования в качестве *альтернативного* Настройка правил преобразования на узле магистрали. Не связывайте правила трансляции с конфигурацией магистрали корпоративной голосовой связи, если вы настроили правила преобразования на узле магистрали два правила могут конфликтовать. 

Создание или изменение правила преобразования, можно использовать один из следующих методов:

- [Использование построения правила преобразования средство](#create-or-modify-a-translation-rule-by-using-the-build-a-translation-rule-tool) для указания значения для начала цифр, длина, цифры для удаления и цифры для добавления и подождите, пока Скайп для панели управления сервера Business создания соответствующего соответствующий шаблон и правило преобразования.
- [Вручную напишите регулярные выражения,](#create-or-modify-a-translation-rule-manually) чтобы определить соответствующий шаблон и правило преобразования.

> [!Note]
> Сведения о том, как создавать регулярные выражения содержатся [Регулярных выражений .NET Framework](http://go.microsoft.com/fwlink/p/?linkId=140927). 

### <a name="create-or-modify-a-translation-rule-by-using-the-build-a-translation-rule-tool"></a>Создание или изменение правила преобразования с помощью средства построения правила преобразования средство

Чтобы определить правила преобразования, введя набор значений в построение правила преобразования средство и включение Скайп для панели управления Business Server для создания соответствующий шаблон поиска соответствия и правило преобразования, выполните следующие действия. 

**Создание правила с помощью средства Build a Translation Rule (Создание правила преобразования)**

1. Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator. Дополнительные сведения см [Делегирование разрешений на установку](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).
2. Откройте окно браузера и введите URL-адрес администрирования, чтобы открыть панель управления. Для получения дополнительных сведений о различных способах, которые можно использовать для запуска Скайп для панели управления Business видеть [установки и откройте Администрирование](../../management-tools/install-and-open-administrative-tools.md).
3. Чтобы приступить к созданию правила преобразования, следуйте указаниям в [обход настройка магистрали с мультимедиа](GET LINK AFTER MIGRATION)по действие 10 или [Настройка магистрали без такого обхода](GET LINK AFTER MIGRATION) по действие 9.
4. На странице **Создание правила трансляции** или **Изменение правила трансляции** в поле **Имя** введите описательное имя правила преобразования.
5. (Необязательно) В поле **Описание**введите описание правила преобразования — например, **США междугородных набору номера**.
6. В разделе **Построение правила трансляции** введите следующие значения:
    - **Начальных цифр**: (необязательно) укажите начальные цифры номерам, которые должны сопоставляться с шаблоном в соответствии с. Например, введите + в это поле для сопоставления номеров E.164 в формате (которой начинаются с +).
    - **Длина**. Укажите число цифр шаблона и укажите, должны ли цифры номера соответствовать всему шаблону, минимальному числу цифр шаблона или любому числу цифр шаблона. Например, введите **11** и в раскрывающемся списке выберите **At least** (Минимум) для поиска номеров, состоящих как минимум из 11 цифр.
    - **Цифры для удаления**: (необязательно) укажите количество начальных цифр для удаления. Например введите **1** для убирается + с самого начала номера телефона.
    - **Цифры для добавления**. Укажите цифры, добавляемые в начало преобразуемых номеров (необязательно). Например, если вы хотите, чтобы при применении правила преобразования в начало номеров добавлялись цифры 011, введите значение **011**.
    
    Значения, введенные в этих полях отражаются в полях правила **шаблон для поиска соответствия** и **перевода** . Например при указании значения предыдущего примера, будет результате регулярное выражение в поле **шаблон, который требуется учитывать**h:
    
    **^\+(\d{9}\d+)$** 

    Поле **Правило трансляции** задает шаблон для формата преобразованных номеров. Этот шаблон состоит из 2 частей:
    - Значение (например, **$1**), которое представляет число цифр в шаблоне соответствия
    - Значение, добавляемое перед номером, которое вводится в поле **Цифры для добавления** (необязательно)

    Для значений предыдущего примера в поле **Правило трансляции** будет отображаться **011$1**.
    
    После применения этого правила преобразования номер +441235551010 будет изменен на 011441235551010.
7. Чтобы сохранить правило трансляции, нажмите кнопку **ОК**.
8. Чтобы сохранить конфигурацию магистрали, нажмите кнопку **ОК**.
9. На странице " **Конфигурация магистрали**n" нажмите кнопку **зафиксировать**и нажмите кнопку **Сохранить все**. 

> [!Note]
> Всякий раз при создании или изменении правила преобразования необходимо выполнять команду **Сохранить все**, чтобы опубликовать изменение конфигурации. Для получения дополнительных сведений ознакомиться с разделом [Publish ожидающих изменений конфигурации маршрутизации голосовых данных](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx). 

### <a name="create-or-modify-a-translation-rule-manually"></a>Создание или изменение правила преобразования вручную

Чтобы определить правила преобразования, создав регулярное выражение для шаблон поиска соответствия и правило преобразования, выполните следующие действия. 

**Определение правила преобразования вручную**

1. Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator. Дополнительные сведения см [Делегирование разрешений на установку](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).
2. Откройте окно браузера и введите URL-адрес администрирования, чтобы открыть панель управления. Для получения дополнительных сведений о различных способах, которые можно использовать для запуска Скайп для панели управления Business видеть [установки и откройте Администрирование](../../management-tools/install-and-open-administrative-tools.md).
3. Чтобы приступить к созданию правила преобразования, следуйте указаниям в [обход настройка магистрали с мультимедиа](GET LINK AFTER MIGRATION)по действие 10 или [Настройка магистрали без такого обхода](GET LINK AFTER MIGRATION) по действие 9.
4. В поле **Имя** на странице **Создание правила трансляции** или **Изменение правила трансляции** введите имя, описывающее шаблон номера для преобразования.
5. (Необязательно) В поле **Описание**введите описание правила преобразования; Например, **США междугородных набора номера**.
6. Внизу раздела **Построение правила трансляции** нажмите кнопку **Правка**.
7. Введите следующую команду в типе **Регулярных выражений**:
    - В поле **Сопоставить этот шаблон** укажите шаблон, который будет использоваться для сопоставления номеров для преобразования.
    - В поле **Правило трансляции** укажите шаблон для формата преобразованных номеров.

    Например, если вводится ** ^ \+(\d{9}\d+)$** в **соответствие этому шаблону** и **011$ 1** в поле **правило преобразования**, то правило будет преобразовывать номер + 441235551010 в 011441235551010.
8. Чтобы сохранить правило трансляции, нажмите кнопку **ОК**.
9. Чтобы сохранить конфигурацию магистрали, нажмите кнопку **ОК**.
10. На странице **Конфигурация линии связи** нажмите **Сохранить**, затем **Сохранить все**. 

> [!Note] 
> Всякий раз при создании или изменении правила преобразования необходимо выполнять команду **Сохранить все**, чтобы опубликовать изменение конфигурации. Для получения дополнительных сведений ознакомиться с разделом [Publish ожидающих изменений конфигурации маршрутизации голосовых данных](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx). 
