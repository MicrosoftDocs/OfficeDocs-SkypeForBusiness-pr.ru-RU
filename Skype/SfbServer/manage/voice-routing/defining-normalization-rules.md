---
title: Определение правил нормализации в Скайп для Business Server
ms.reviewer: ''
ms.author: jambirk
author: jambirk
manager: serdars
ms.audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
description: Скайп для правил нормализации Business Server использование регулярных выражений .NET Framework для перевода набранного номера телефонов в формате E.164. Другими словами правила нормализации занять телефонный номер, набираемый пользователем и преобразования в формат, используется системой Скайп для Business Server этот номер. Каждой абонентской группе должно быть назначено хотя бы одно правило нормализации.
ms.openlocfilehash: a1157e9cf435fdd655e9d1772294fa3f57acf3f4
ms.sourcegitcommit: 920a7dbdc2a0ede94d0a4bd573c01a1ccd838b7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "31993517"
---
# <a name="defining-normalization-rules-in-skype-for-business-server"></a><span data-ttu-id="768f2-104">Определение правил нормализации в Скайп для Business Server</span><span class="sxs-lookup"><span data-stu-id="768f2-104">Defining normalization rules in Skype for Business Server</span></span>

<span data-ttu-id="768f2-105">Скайп для правил нормализации Business Server использование регулярных выражений .NET Framework для перевода набранного номера телефонов в формате E.164. Другими словами правила нормализации занять телефонный номер, набираемый пользователем и преобразования в формат, используется системой Скайп для Business Server этот номер.</span><span class="sxs-lookup"><span data-stu-id="768f2-105">Skype for Business Server normalization rules use .NET Framework regular expressions to translate dialed phone numbers to E.164 format; in other words, normalization rules take the phone number dialed by a user and convert that number to the format used internally by Skype for Business Server.</span></span> <span data-ttu-id="768f2-106">Каждой абонентской группе должно быть назначено хотя бы одно правило нормализации.</span><span class="sxs-lookup"><span data-stu-id="768f2-106">Each dial plan must be assigned one or more normalization rules.</span></span>

<span data-ttu-id="768f2-107">Для получения дополнительных сведений о правил нормализации видеть [абонентских групп и правила нормализации](https://technet.microsoft.com/en-us/library/gg413082(v=ocs.15).aspx).</span><span class="sxs-lookup"><span data-stu-id="768f2-107">For details about normalization rules, see [Dial plans and normalization rules](https://technet.microsoft.com/en-us/library/gg413082(v=ocs.15).aspx).</span></span>

<span data-ttu-id="768f2-108">Для получения дополнительных сведений о том, как создавать регулярные выражения видеть [Регулярных выражений .NET Framework](http://go.microsoft.com/fwlink/p/?linkId=140927).</span><span class="sxs-lookup"><span data-stu-id="768f2-108">For details about how to write regular expressions, see [.NET Framework Regular Expressions](http://go.microsoft.com/fwlink/p/?linkId=140927).</span></span>

<span data-ttu-id="768f2-109">Определение или изменение правила нормализации, можно использовать один из следующих методов:</span><span class="sxs-lookup"><span data-stu-id="768f2-109">You can use either of the following methods to define or edit a normalization rule:</span></span>
- <span data-ttu-id="768f2-110">[Использование средства **построения правила нормализации** ](#create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule) для указания значения для начала цифр, длина, цифры для удаления и цифры для добавления и подождите, пока Скайп для панели управления сервера Business создания соответствующего pattern и translation правило сопоставления Для Вас.</span><span class="sxs-lookup"><span data-stu-id="768f2-110">[Use the **Build a Normalization Rule** tool](#create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule) to specify values for the starting digits, length, digits to remove and digits to add, and then let Skype for Business Server Control Panel generate the corresponding matching pattern and translation rule for you.</span></span>
- <span data-ttu-id="768f2-111">[Вручную напишите регулярные выражения,](#create-or-modify-a-normalization-rule-manually) чтобы определить соответствующий шаблон и правило преобразования.</span><span class="sxs-lookup"><span data-stu-id="768f2-111">[Write regular expressions manually](#create-or-modify-a-normalization-rule-manually) to define the matching pattern and translation rule.</span></span> 

## <a name="create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule"></a><span data-ttu-id="768f2-112">Создание или изменение правила нормализации с помощью средства построения правила нормализации</span><span class="sxs-lookup"><span data-stu-id="768f2-112">Create or modify a normalization rule by using Build a Normalization Rule</span></span>

<span data-ttu-id="768f2-113">Если вы хотите создать или изменить правило нормализации в Скайп для панели управления Business Server, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="768f2-113">Complete the following steps if you want to create or modify a normalization rule in Skype for Business Server Control Panel.</span></span> 

<span data-ttu-id="768f2-114">**Чтобы определить правила с помощью средства построения правила нормализации**</span><span class="sxs-lookup"><span data-stu-id="768f2-114">**To define a rule by using Build a Normalization Rule**</span></span>

1. <span data-ttu-id="768f2-115">Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator.</span><span class="sxs-lookup"><span data-stu-id="768f2-115">Log on to the computer as a member of the RTCUniversalServerAdmins group, or as a member of the CsVoiceAdministrator, CsServerAdministrator, or CsAdministrator role.</span></span> <span data-ttu-id="768f2-116">Дополнительные сведения см [Делегирование разрешений на установку](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).</span><span class="sxs-lookup"><span data-stu-id="768f2-116">For details, see [Delegate setup permissions](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).</span></span>
2. <span data-ttu-id="768f2-117">Откройте окно браузера и введите URL-адрес администрирования, чтобы открыть панель управления.</span><span class="sxs-lookup"><span data-stu-id="768f2-117">Open a browser window, and then enter the Admin URL to open the Control Panel.</span></span> <span data-ttu-id="768f2-118">Для получения дополнительных сведений о различных способах, которые можно использовать для запуска Скайп для панели управления Business видеть [установки и откройте Администрирование](../../management-tools/install-and-open-administrative-tools.md).</span><span class="sxs-lookup"><span data-stu-id="768f2-118">For details about the different methods you can use to start the Skype for Business Control Panel, see [Install and open administrative tools](../../management-tools/install-and-open-administrative-tools.md).</span></span>
3. <span data-ttu-id="768f2-119">(Необязательно) Выполните действия в разделе [Создание абонентской группы](https://docs.microsoft.com/skypeforbusiness/deploy/deploy-enterprise-voice/dial-plans#to-create-a-dial-plan) через шаг 11 или [Изменение абонентской группы](https://docs.microsoft.com/skypeforbusiness/deploy/deploy-enterprise-voice/dial-plans#to-modify-a-dial-plan) по действие 10.</span><span class="sxs-lookup"><span data-stu-id="768f2-119">(Optional) Follow the steps in [Create a dial plan](https://docs.microsoft.com/skypeforbusiness/deploy/deploy-enterprise-voice/dial-plans#to-create-a-dial-plan) through step 11 or [Modify a dial plan](https://docs.microsoft.com/skypeforbusiness/deploy/deploy-enterprise-voice/dial-plans#to-modify-a-dial-plan) through step 10.</span></span> 
4. <span data-ttu-id="768f2-120">В разделе **создания** или **редактирования правила нормализации**в поле **Имя** введите имя, описывающее нормализуемый числовой шаблон (например, назовите правило нормализации **5DigitExtension**).</span><span class="sxs-lookup"><span data-stu-id="768f2-120">In **New Normalization Rule** or **Edit Normalization Rule**, type a name that describes the number pattern being normalized in **Name** (for example, **5DigitExtension**).</span></span>
5. <span data-ttu-id="768f2-121">В поле **Описание** введите описание правила нормализации (например, "Преобразование пятизначных добавочных номеров") (не обязательно).</span><span class="sxs-lookup"><span data-stu-id="768f2-121">(Optional) In **Description**, type a description of the normalization rule (for example, "Translates 5-digit extensions").</span></span>
6. <span data-ttu-id="768f2-122">В разделе **Построение правила нормализации** введите значения в следующих полях.</span><span class="sxs-lookup"><span data-stu-id="768f2-122">In **Build a Normalization Rule**, enter values in the following fields:</span></span>
    - <span data-ttu-id="768f2-123">**Начальных цифр**: начальных цифр набираемым номерам, которые должны сопоставляться с шаблоном в соответствии с укажите (необязательно).</span><span class="sxs-lookup"><span data-stu-id="768f2-123">**Starting digits**:   (Optional) Specify the leading digits of dialed numbers you want the pattern to match.</span></span> <span data-ttu-id="768f2-124">Например тип **425** Если вы хотите, чтобы шаблон для поиска соответствия набираемым номера, начинающиеся с 425.</span><span class="sxs-lookup"><span data-stu-id="768f2-124">For example, type **425** if you want the pattern to match dialed numbers beginning with 425.</span></span>
    - <span data-ttu-id="768f2-125">**Продолжительность**: укажите количество цифр в сопоставлении шаблон и выберите должны сопоставляться с шаблоном на точное соответствие длину, совпадение набираемым номерам, которые по крайней мере длину или совпадение набираемым номерам, любой длины.</span><span class="sxs-lookup"><span data-stu-id="768f2-125">**Length**:   Specify the number of digits in the matching pattern and select whether you want the pattern to match this length exactly, match dialed numbers that are at least this length, or match dialed numbers of any length.</span></span>
    - <span data-ttu-id="768f2-126">**Цифры для удаления**: (необязательно) укажите количество начальных цифр для удаления из набираемых номеров, которые должны сопоставляться с шаблоном в соответствии с.</span><span class="sxs-lookup"><span data-stu-id="768f2-126">**Digits to remove**:   (Optional) Specify the number of starting digits to be removed from dialed numbers you want the pattern to match.</span></span>
    - <span data-ttu-id="768f2-127">**Цифры для добавления**: (необязательно) укажите количество цифр для добавления к набираемым номера вы должны сопоставляться с шаблоном для сопоставления.</span><span class="sxs-lookup"><span data-stu-id="768f2-127">**Digits to add**:   (Optional) Specify digits to be added to dialed numbers you want the pattern to match.</span></span>
    
    <span data-ttu-id="768f2-128">Значения, введенные в этих полях, отражаются в полях **Шаблон для поиска соответствия** и **Правило трансляции**.</span><span class="sxs-lookup"><span data-stu-id="768f2-128">The values you enter in these fields are reflected in **Pattern to match** and **Translation rule**.</span></span> <span data-ttu-id="768f2-129">К примеру при **начала цифр** оставить пустым, тип **7** в поле **Длина** выберите **точно**и укажите **0** в **цифры для удаления**, результирующий регулярного выражения в **шаблон для поиска соответствия** :</span><span class="sxs-lookup"><span data-stu-id="768f2-129">For example, if you leave **Starting digits** empty, type **7** into the **Length** field select **Exactly**, and specify **0** in **Digits to remove**, the resulting regular expression in the **Pattern to match** is:</span></span>

    <span data-ttu-id="768f2-130">**^(\d{7})$**</span><span class="sxs-lookup"><span data-stu-id="768f2-130">**^(\d{7})$**</span></span>

7. <span data-ttu-id="768f2-131">В поле **Правило трансляции** укажите шаблон для формата преобразованных телефонных номеров E.164 следующим образом.</span><span class="sxs-lookup"><span data-stu-id="768f2-131">In **Translation rule**, specify a pattern for the format of translated E.164 phone numbers as follows:</span></span>
    - <span data-ttu-id="768f2-132">Значение количества цифр, указанных в шаблоне соответствия.</span><span class="sxs-lookup"><span data-stu-id="768f2-132">A value that represents the number of digits specified in the matching pattern.</span></span> <span data-ttu-id="768f2-133">Например, если шаблон поиска соответствия **^(\d{7})$**, а затем $1 в поле правило преобразования представляет 7-значных набираемых номеров.</span><span class="sxs-lookup"><span data-stu-id="768f2-133">For example, if the matching pattern is **^(\d{7})$**, then $1 in the translation rule represents 7-digit dialed numbers.</span></span>
    - <span data-ttu-id="768f2-134">В поле **Цифры для добавления** введите значение, указывающее цифры, которые должны добавляться в начале преобразуемого номера, например, **+1425** (не обязательно).</span><span class="sxs-lookup"><span data-stu-id="768f2-134">(Optional) Type a value into the **Digits to add** field to specify digits to be prepended to the translated number (for example, **+1425**).</span></span>
    
    <span data-ttu-id="768f2-135">Например, если **шаблон для поиска соответствия** содержит **^(\d{7})$** как шаблон для набираемых номеров и **правило преобразования** содержит **+ 1425$ 1** как шаблон для телефонных номеров E.164, правило будет выполнять нормализацию номера 5550100 до + 14255550100.</span><span class="sxs-lookup"><span data-stu-id="768f2-135">For example, if **Pattern to match** contains **^(\d{7})$** as the pattern for dialed numbers and **Translation rule** contains **+1425$1** as the pattern for E.164 phone numbers, the rule normalizes 5550100 to +14255550100.</span></span>

8. <span data-ttu-id="768f2-136">Если в результате применения правила нормализации получается внутренний телефонный номер организации, выберите **Внутреннее расширение** (не обязательно).</span><span class="sxs-lookup"><span data-stu-id="768f2-136">(Optional) If the normalization rule results in a phone number that is internal to your organization, select **Internal extension**.</span></span>
9. <span data-ttu-id="768f2-p108">Введите номер для проверки правила нормализации, затем нажмите кнопку **Перейти** (необязательно). Результаты проверки отображаются под полем **Введите номер телефона для проверки**.</span><span class="sxs-lookup"><span data-stu-id="768f2-p108">(Optional) Enter a number to test the normalization rule, and then click **Go**. The test results are displayed under **Enter a number to test**.</span></span>
    > [!Note] 
    > <span data-ttu-id="768f2-139">Можно сохранить правило нормализации, который еще не прошел проверку и настроить его более поздняя версия.</span><span class="sxs-lookup"><span data-stu-id="768f2-139">You can save a normalization rule that does not yet pass the test and then reconfigure it later.</span></span> <span data-ttu-id="768f2-140">Дополнительные сведения см [Тестирование маршрутизации голосовой связи](https://technet.microsoft.com/en-us/library/gg398915(v=ocs.15).aspx).</span><span class="sxs-lookup"><span data-stu-id="768f2-140">For details, see [Test voice routing](https://technet.microsoft.com/en-us/library/gg398915(v=ocs.15).aspx).</span></span> 

10. <span data-ttu-id="768f2-141">Нажмите кнопку **ОК** для сохранения правила нормализации.</span><span class="sxs-lookup"><span data-stu-id="768f2-141">Click **OK** to save the normalization rule.</span></span>
11. <span data-ttu-id="768f2-142">Нажмите кнопку **ОК** для сохранения абонентской группы.</span><span class="sxs-lookup"><span data-stu-id="768f2-142">Click **OK** to save the dial plan.</span></span>
12. <span data-ttu-id="768f2-143">На странице **Абонентская группа** нажмите кнопку **Сохранить**, затем **Сохранить все**.</span><span class="sxs-lookup"><span data-stu-id="768f2-143">On the **Dial Plan** page, click **Commit**, and then click **Commit all**.</span></span> 
    > [!Note]
    > <span data-ttu-id="768f2-144">При создании или изменение правила нормализации, необходимо выполнить зафиксировать все команду публикация изменений конфигурации.</span><span class="sxs-lookup"><span data-stu-id="768f2-144">Whenever you create or change a normalization rule, you must run the Commit all command to publish the configuration change.</span></span> <span data-ttu-id="768f2-145">Для получения дополнительных сведений ознакомиться с разделом [Publish ожидающих изменений конфигурации маршрутизации голосовых данных](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx).</span><span class="sxs-lookup"><span data-stu-id="768f2-145">For details, see [Publish pending changes to the voice routing configuration](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx).</span></span> 

## <a name="create-or-modify-a-normalization-rule-manually"></a><span data-ttu-id="768f2-146">Создание или изменение правила нормализации вручную</span><span class="sxs-lookup"><span data-stu-id="768f2-146">Create or modify a normalization rule manually</span></span>

<span data-ttu-id="768f2-147">Если вы хотите создать или изменить правила нормализации вручную, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="768f2-147">Complete the following steps if you want to create or modify a normalization rule manually.</span></span>

<span data-ttu-id="768f2-148">**Определение правила нормализации вручную**</span><span class="sxs-lookup"><span data-stu-id="768f2-148">**To define a normalization rule manually**</span></span>

1. <span data-ttu-id="768f2-149">Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator.</span><span class="sxs-lookup"><span data-stu-id="768f2-149">Log on to the computer as a member of the RTCUniversalServerAdmins group, or as a member of the CsVoiceAdministrator, CsServerAdministrator, or CsAdministrator role.</span></span> <span data-ttu-id="768f2-150">Дополнительные сведения см [Делегирование разрешений на установку](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).</span><span class="sxs-lookup"><span data-stu-id="768f2-150">For details, see [Delegate setup permissions](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).</span></span>
2. <span data-ttu-id="768f2-151">Откройте окно браузера и введите URL-адрес администрирования, чтобы открыть панель управления.</span><span class="sxs-lookup"><span data-stu-id="768f2-151">Open a browser window, and then enter the Admin URL to open the Control Panel.</span></span> <span data-ttu-id="768f2-152">Для получения дополнительных сведений о различных способах, которые можно использовать для запуска Скайп для панели управления Business видеть [установки и откройте Администрирование](../../management-tools/install-and-open-administrative-tools.md).</span><span class="sxs-lookup"><span data-stu-id="768f2-152">For details about the different methods you can use to start the Skype for Business Control Panel, see [Install and open administrative tools](../../management-tools/install-and-open-administrative-tools.md).</span></span>
3. <span data-ttu-id="768f2-153">(Необязательно) Выполните действия в разделе [Создание абонентской группы](GET LINK AFTER MIGRATION) через шаг 11 или [Изменение абонентской группы](GET LINK AFTER MIGRATION) по действие 10.</span><span class="sxs-lookup"><span data-stu-id="768f2-153">(Optional) Follow the steps in [Create a dial plan](GET LINK AFTER MIGRATION) through step 11 or [Modify a dial plan](GET LINK AFTER MIGRATION) through step 10.</span></span>  
4. <span data-ttu-id="768f2-154">В разделе **создания** или **редактирования правила нормализации** в поле **Имя** введите имя, описывающее нормализуемый числовой шаблон (например, **5DigitExtension**).</span><span class="sxs-lookup"><span data-stu-id="768f2-154">In **New Normalization Rule** or **Edit Normalization Rule**, type a name that describes the number pattern being normalized in **Name** (for example, name the normalization rule **5DigitExtension**).</span></span>
5. <span data-ttu-id="768f2-155">В поле **Описание** введите описание правила нормализации (например, "Преобразование пятизначных добавочных номеров") (не обязательно).</span><span class="sxs-lookup"><span data-stu-id="768f2-155">(Optional) In **Description**, type a description of the normalization rule (for example, "Translates 5-digit extensions").</span></span>
6. <span data-ttu-id="768f2-156">В разделе **Построение правила нормализации** нажмите кнопку **Изменить**.</span><span class="sxs-lookup"><span data-stu-id="768f2-156">In **Build a Normalization Rule**, click **Edit**.</span></span>
7. <span data-ttu-id="768f2-157">В разделе Введите регулярное выражение введите следующие данные.</span><span class="sxs-lookup"><span data-stu-id="768f2-157">Enter the following in Type a Regular Expression:</span></span>
    - <span data-ttu-id="768f2-158">В поле **Сопоставить этот шаблон** укажите шаблон, которому должен соответствовать набираемый телефонный номер.</span><span class="sxs-lookup"><span data-stu-id="768f2-158">In **Match this pattern**, specify the pattern that you want to use to match the dialed phone number.</span></span>
    - <span data-ttu-id="768f2-159">В поле **Правило трансляции** укажите шаблон для формата преобразуемых телефонных номеров E.164.</span><span class="sxs-lookup"><span data-stu-id="768f2-159">In **Translation rule**, specify a pattern for the format of translated E.164 phone numbers.</span></span>

    <span data-ttu-id="768f2-160">Например, если вводится **^(\d{7})$** в **соответствие этому шаблону** и **+ 1425$ 1** в поле **правило преобразования**, правило будет выполнять нормализацию номера 5550100 до + 14255550100.</span><span class="sxs-lookup"><span data-stu-id="768f2-160">For example, if you enter **^(\d{7})$** in **Match this pattern** and **+1425$1** in **Translation rule**, the rule normalizes 5550100 to +14255550100.</span></span>

8. <span data-ttu-id="768f2-161">Если в результате применения правила нормализации получается внутренний телефонный номер организации, выберите **Внутреннее расширение** (не обязательно).</span><span class="sxs-lookup"><span data-stu-id="768f2-161">(Optional) If the normalization rule results in a phone number that is internal to your organization, select **Internal extension**.</span></span>
9. <span data-ttu-id="768f2-p113">Введите номер для проверки правила нормализации, затем нажмите кнопку **Перейти** (необязательно). Результаты проверки отображаются под полем **Введите номер телефона для проверки**.</span><span class="sxs-lookup"><span data-stu-id="768f2-p113">(Optional) Enter a number to test the normalization rule, and then click **Go**. The test results are displayed under **Enter a number to test**.</span></span>

    > [!Note]
    > <span data-ttu-id="768f2-164">Можно сохранить правило нормализации, который еще не прошел проверку и настроить его более поздняя версия.</span><span class="sxs-lookup"><span data-stu-id="768f2-164">You can save a normalization rule that does not yet pass the test and then reconfigure it later.</span></span> <span data-ttu-id="768f2-165">Дополнительные сведения см [Тестирование маршрутизации голосовой связи](https://technet.microsoft.com/en-us/library/gg398915(v=ocs.15).aspx).</span><span class="sxs-lookup"><span data-stu-id="768f2-165">For details, see [Test voice routing](https://technet.microsoft.com/en-us/library/gg398915(v=ocs.15).aspx).</span></span> 

10. <span data-ttu-id="768f2-166">Нажмите кнопку **ОК** для сохранения правила нормализации.</span><span class="sxs-lookup"><span data-stu-id="768f2-166">Click **OK** to save the normalization rule.</span></span>
11. <span data-ttu-id="768f2-167">Нажмите кнопку **ОК** для сохранения абонентской группы.</span><span class="sxs-lookup"><span data-stu-id="768f2-167">Click **OK** to save the dial plan.</span></span>
12. <span data-ttu-id="768f2-168">На странице **Абонентская группа** нажмите кнопку **Commi**t и нажмите кнопку **Сохранить все**.</span><span class="sxs-lookup"><span data-stu-id="768f2-168">On the **Dial Plan** page, click **Commi**t, and then click **Commit all**.</span></span> 
