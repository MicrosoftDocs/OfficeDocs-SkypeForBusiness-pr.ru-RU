---
title: Определение правил нормализации в Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
description: Правила нормализации Skype для бизнеса Server платформа .NET Framework регулярными выражениями для перевода набраных номеров телефонов в формат E.164; Другими словами, правила нормализации принимают номер телефона, набираемого пользователем, и преобразовывать его в формат, используемый внутренне Skype для бизнеса Server. Каждой абонентской группе должно быть назначено одно или несколько правил нормализации.
ms.openlocfilehash: 1be34e5c40a4da4e9def4de294ece134f2fe229d
ms.sourcegitcommit: 01087be29daa3abce7d3b03a55ba5ef8db4ca161
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "51120921"
---
# <a name="defining-normalization-rules-in-skype-for-business-server"></a><span data-ttu-id="6113b-104">Определение правил нормализации в Skype для бизнеса Server</span><span class="sxs-lookup"><span data-stu-id="6113b-104">Defining normalization rules in Skype for Business Server</span></span>

<span data-ttu-id="6113b-105">Правила нормализации Skype для бизнеса Server платформа .NET Framework регулярными выражениями для перевода набраных номеров телефонов в формат E.164; Другими словами, правила нормализации принимают номер телефона, набираемого пользователем, и преобразовывать его в формат, используемый внутренне Skype для бизнеса Server.</span><span class="sxs-lookup"><span data-stu-id="6113b-105">Skype for Business Server normalization rules use .NET Framework regular expressions to translate dialed phone numbers to E.164 format; in other words, normalization rules take the phone number dialed by a user and convert that number to the format used internally by Skype for Business Server.</span></span> <span data-ttu-id="6113b-106">Каждой абонентской группе должно быть назначено одно или несколько правил нормализации.</span><span class="sxs-lookup"><span data-stu-id="6113b-106">Each dial plan must be assigned one or more normalization rules.</span></span>

<span data-ttu-id="6113b-107">Сведения о правилах нормализации см. в материале [Dial plans and normalization rules.](/previous-versions/office/lync-server-2013/lync-server-2013-dial-plans-and-normalization-rules)</span><span class="sxs-lookup"><span data-stu-id="6113b-107">For details about normalization rules, see [Dial plans and normalization rules](/previous-versions/office/lync-server-2013/lync-server-2013-dial-plans-and-normalization-rules).</span></span>

<span data-ttu-id="6113b-108">Подробные сведения о записи регулярных выражений см. [в платформа .NET Framework Regular Expressions.](/dotnet/standard/base-types/regular-expressions)</span><span class="sxs-lookup"><span data-stu-id="6113b-108">For details about how to write regular expressions, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expressions).</span></span>

<span data-ttu-id="6113b-109">Для задания или изменения регулярных выражений можно использовать следующие способы.</span><span class="sxs-lookup"><span data-stu-id="6113b-109">You can use either of the following methods to define or edit a normalization rule:</span></span>
- <span data-ttu-id="6113b-110">Используйте средство Build [ **a Normalization Rule**](#create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule) для указания значений для начальных цифр, длины, цифр для удаления и добавления цифр, а затем дайте панели управления Skype для бизнес-сервера создать соответствующий шаблон и правило перевода для вас.</span><span class="sxs-lookup"><span data-stu-id="6113b-110">[Use the **Build a Normalization Rule** tool](#create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule) to specify values for the starting digits, length, digits to remove and digits to add, and then let Skype for Business Server Control Panel generate the corresponding matching pattern and translation rule for you.</span></span>
- <span data-ttu-id="6113b-111">[Записывая регулярные выражения вручную](#create-or-modify-a-normalization-rule-manually) для определения шаблона и правила перевода.</span><span class="sxs-lookup"><span data-stu-id="6113b-111">[Write regular expressions manually](#create-or-modify-a-normalization-rule-manually) to define the matching pattern and translation rule.</span></span> 

## <a name="create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule"></a><span data-ttu-id="6113b-112">Создание или изменение правила нормализации с помощью правила Сборка нормализации</span><span class="sxs-lookup"><span data-stu-id="6113b-112">Create or modify a normalization rule by using Build a Normalization Rule</span></span>

<span data-ttu-id="6113b-113">Выполните следующие действия, если вы хотите создать или изменить правило нормализации в панели управления Skype для бизнес-серверов.</span><span class="sxs-lookup"><span data-stu-id="6113b-113">Complete the following steps if you want to create or modify a normalization rule in Skype for Business Server Control Panel.</span></span> 

<span data-ttu-id="6113b-114">**"Построение правила нормализации"**</span><span class="sxs-lookup"><span data-stu-id="6113b-114">**To define a rule by using Build a Normalization Rule**</span></span>

1. <span data-ttu-id="6113b-115">Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator.</span><span class="sxs-lookup"><span data-stu-id="6113b-115">Log on to the computer as a member of the RTCUniversalServerAdmins group, or as a member of the CsVoiceAdministrator, CsServerAdministrator, or CsAdministrator role.</span></span> <span data-ttu-id="6113b-116">Подробные сведения см. [в материале Уполномоченные разрешения на установку.](/previous-versions/office/lync-server-2013/lync-server-2013-delegate-setup-permissions)</span><span class="sxs-lookup"><span data-stu-id="6113b-116">For details, see [Delegate setup permissions](/previous-versions/office/lync-server-2013/lync-server-2013-delegate-setup-permissions).</span></span>
2. <span data-ttu-id="6113b-117">Откройте окно браузера и введите URL-адрес администратора, чтобы открыть панель управления.</span><span class="sxs-lookup"><span data-stu-id="6113b-117">Open a browser window, and then enter the Admin URL to open the Control Panel.</span></span> <span data-ttu-id="6113b-118">Дополнительные сведения о различных методах, которые можно использовать для запуска панели управления Skype для бизнеса, см. в материале [Install и open administrative tools.](../../management-tools/install-and-open-administrative-tools.md)</span><span class="sxs-lookup"><span data-stu-id="6113b-118">For details about the different methods you can use to start the Skype for Business Control Panel, see [Install and open administrative tools](../../management-tools/install-and-open-administrative-tools.md).</span></span>
3. <span data-ttu-id="6113b-119">(Необязательный) Выполните действия в ["Создание набора](../../deploy/deploy-enterprise-voice/dial-plans.md#to-create-a-dial-plan) номеров" с помощью шага 11 или [изменение](../../deploy/deploy-enterprise-voice/dial-plans.md#to-modify-a-dial-plan) набора на этапе 10.</span><span class="sxs-lookup"><span data-stu-id="6113b-119">(Optional) Follow the steps in [Create a dial plan](../../deploy/deploy-enterprise-voice/dial-plans.md#to-create-a-dial-plan) through step 11 or [Modify a dial plan](../../deploy/deploy-enterprise-voice/dial-plans.md#to-modify-a-dial-plan) through step 10.</span></span> 
4. <span data-ttu-id="6113b-120">В разделе **Создание правила нормализации** или **Изменение правила нормализации** в поле **Имя** введите имя, которое описывает шаблон номера для нормализации (например, **5DigitExtension**).</span><span class="sxs-lookup"><span data-stu-id="6113b-120">In **New Normalization Rule** or **Edit Normalization Rule**, type a name that describes the number pattern being normalized in **Name** (for example, **5DigitExtension**).</span></span>
5. <span data-ttu-id="6113b-121">В поле **Описание** введите описание правила нормализации (например, "Преобразует 5-значные добавочные номера") (не обязательно).</span><span class="sxs-lookup"><span data-stu-id="6113b-121">(Optional) In **Description**, type a description of the normalization rule (for example, "Translates 5-digit extensions").</span></span>
6. <span data-ttu-id="6113b-122">В разделе **Построение правила нормализации** введите значения в следующих полях.</span><span class="sxs-lookup"><span data-stu-id="6113b-122">In **Build a Normalization Rule**, enter values in the following fields:</span></span>
    - <span data-ttu-id="6113b-123">**Начальные цифры:**(Необязательный) Укажите ведущие цифры набраных номеров, которые необходимо соответствовать шаблону.</span><span class="sxs-lookup"><span data-stu-id="6113b-123">**Starting digits**:   (Optional) Specify the leading digits of dialed numbers you want the pattern to match.</span></span> <span data-ttu-id="6113b-124">Например, введите **425,** если вы хотите, чтобы шаблон совпадал с набраными номерами, начиная с 425.</span><span class="sxs-lookup"><span data-stu-id="6113b-124">For example, type **425** if you want the pattern to match dialed numbers beginning with 425.</span></span>
    - <span data-ttu-id="6113b-125">**Длина**. Укажите количество цифр в шаблоне совпадения и выберите, хотите ли вы, чтобы шаблон точно соответствует этой длине, совпадают с набраными номерами, которые по крайней мере этой длины, или совпадают с набраными номерами любой длины.</span><span class="sxs-lookup"><span data-stu-id="6113b-125">**Length**:   Specify the number of digits in the matching pattern and select whether you want the pattern to match this length exactly, match dialed numbers that are at least this length, or match dialed numbers of any length.</span></span>
    - <span data-ttu-id="6113b-126">**Цифры для** удаления. (Необязательно) Укажите количество начальных цифр, которые будут удалены из набраных номеров, которые необходимо использовать для совпадения шаблона.</span><span class="sxs-lookup"><span data-stu-id="6113b-126">**Digits to remove**:   (Optional) Specify the number of starting digits to be removed from dialed numbers you want the pattern to match.</span></span>
    - <span data-ttu-id="6113b-127">**Цифры, чтобы** добавить: (Необязательно) Укажите цифры, которые будут добавлены в набраны номера, которые необходимо соответствовать шаблону.</span><span class="sxs-lookup"><span data-stu-id="6113b-127">**Digits to add**:   (Optional) Specify digits to be added to dialed numbers you want the pattern to match.</span></span>
    
    <span data-ttu-id="6113b-128">Значения, введенные в этих полях, отражаются в **шаблоне для поиска соответствия** и в **правиле преобразования**.</span><span class="sxs-lookup"><span data-stu-id="6113b-128">The values you enter in these fields are reflected in **Pattern to match** and **Translation rule**.</span></span> <span data-ttu-id="6113b-129">Например, если оставить  начальные цифры пустыми,  введите **7** в поле Длина выберите Точно **,** и укажите **0** в Цифры, чтобы **удалить,** в результате регулярное выражение в **шаблоне,** чтобы соответствовать:</span><span class="sxs-lookup"><span data-stu-id="6113b-129">For example, if you leave **Starting digits** empty, type **7** into the **Length** field select **Exactly**, and specify **0** in **Digits to remove**, the resulting regular expression in the **Pattern to match** is:</span></span>

    <span data-ttu-id="6113b-130">**^(\d {7} )$**</span><span class="sxs-lookup"><span data-stu-id="6113b-130">**^(\d{7})$**</span></span>

7. <span data-ttu-id="6113b-131">В поле **Правило преобразования** укажите шаблон для формата преобразуемых телефонных номеров E.164 следующим образом.</span><span class="sxs-lookup"><span data-stu-id="6113b-131">In **Translation rule**, specify a pattern for the format of translated E.164 phone numbers as follows:</span></span>
    - <span data-ttu-id="6113b-132">Значение, которое представляет количество цифр, указанных в шаблоне соответствия.</span><span class="sxs-lookup"><span data-stu-id="6113b-132">A value that represents the number of digits specified in the matching pattern.</span></span> <span data-ttu-id="6113b-133">Например, если шаблон совпадения **^(\d {7} )$,** то $1 в правиле перевода представляет 7-значные набраные номера.</span><span class="sxs-lookup"><span data-stu-id="6113b-133">For example, if the matching pattern is **^(\d{7})$**, then $1 in the translation rule represents 7-digit dialed numbers.</span></span>
    - <span data-ttu-id="6113b-134">Введите значение в поле **Цифры для добавления**, указывающее цифры, которые должны добавляться в начало преобразуемого номера, например, **+1425** (необязательно).</span><span class="sxs-lookup"><span data-stu-id="6113b-134">(Optional) Type a value into the **Digits to add** field to specify digits to be prepended to the translated number (for example, **+1425**).</span></span>
    
    <span data-ttu-id="6113b-135">Например, если  шаблон для совпадения содержит **^(\d {7} )$**  в качестве шаблона для набраных номеров и правила перевода содержит **+1425$1** в качестве шаблона для номеров телефонов E.164, правило нормализует 5550100 до +14255550100.</span><span class="sxs-lookup"><span data-stu-id="6113b-135">For example, if **Pattern to match** contains **^(\d{7})$** as the pattern for dialed numbers and **Translation rule** contains **+1425$1** as the pattern for E.164 phone numbers, the rule normalizes 5550100 to +14255550100.</span></span>

8. <span data-ttu-id="6113b-136">Если правило нормализации приводит к телефонному номеру, который является внутренним номером в организации, выберите **Внутренний добавочный номер** (не обязательно).</span><span class="sxs-lookup"><span data-stu-id="6113b-136">(Optional) If the normalization rule results in a phone number that is internal to your organization, select **Internal extension**.</span></span>
9. <span data-ttu-id="6113b-p108">Введите номер для проверки правила нормализации и нажмите кнопку **Перейти** (необязательно). Результаты теста появятся под заголовком **Введите номер телефона для проверки**.</span><span class="sxs-lookup"><span data-stu-id="6113b-p108">(Optional) Enter a number to test the normalization rule, and then click **Go**. The test results are displayed under **Enter a number to test**.</span></span>
    > [!Note] 
    > <span data-ttu-id="6113b-139">Можно сохранить правило нормализации, которое еще не прошло проверку, а затем изменить его настройки.</span><span class="sxs-lookup"><span data-stu-id="6113b-139">You can save a normalization rule that does not yet pass the test and then reconfigure it later.</span></span> <span data-ttu-id="6113b-140">Подробные сведения см. [в материале Test voice routing](/previous-versions/office/lync-server-2013/lync-server-2013-test-voice-routing).</span><span class="sxs-lookup"><span data-stu-id="6113b-140">For details, see [Test voice routing](/previous-versions/office/lync-server-2013/lync-server-2013-test-voice-routing).</span></span> 

10. <span data-ttu-id="6113b-141">Нажмите кнопку **ОК**, чтобы сохранить правило нормализации.</span><span class="sxs-lookup"><span data-stu-id="6113b-141">Click **OK** to save the normalization rule.</span></span>
11. <span data-ttu-id="6113b-142">Нажмите кнопку **ОК**, чтобы сохранить абонентскую группу.</span><span class="sxs-lookup"><span data-stu-id="6113b-142">Click **OK** to save the dial plan.</span></span>
12. <span data-ttu-id="6113b-143">На странице **Абонентская группа**, нажмите кнопку **Зафиксировать**, а затем **Commit all** (Фиксировать все).</span><span class="sxs-lookup"><span data-stu-id="6113b-143">On the **Dial Plan** page, click **Commit**, and then click **Commit all**.</span></span> 
    > [!Note]
    > <span data-ttu-id="6113b-144">Каждый раз при создании или изменении правила нормализации следует запускать команду Сохранить все, чтобы опубликовать изменение конфигурации.</span><span class="sxs-lookup"><span data-stu-id="6113b-144">Whenever you create or change a normalization rule, you must run the Commit all command to publish the configuration change.</span></span> <span data-ttu-id="6113b-145">Подробнее см. в [материале Публикация ожидающих изменений конфигурации маршрутивки голосовой маршрутики.](/previous-versions/office/lync-server-2013/lync-server-2013-publish-pending-changes-to-the-voice-routing-configuration)</span><span class="sxs-lookup"><span data-stu-id="6113b-145">For details, see [Publish pending changes to the voice routing configuration](/previous-versions/office/lync-server-2013/lync-server-2013-publish-pending-changes-to-the-voice-routing-configuration).</span></span> 

## <a name="create-or-modify-a-normalization-rule-manually"></a><span data-ttu-id="6113b-146">Создание или изменение правила нормализации вручную</span><span class="sxs-lookup"><span data-stu-id="6113b-146">Create or modify a normalization rule manually</span></span>

<span data-ttu-id="6113b-147">Выполните следующие действия, чтобы создать или изменить правило нормализации вручную.</span><span class="sxs-lookup"><span data-stu-id="6113b-147">Complete the following steps if you want to create or modify a normalization rule manually.</span></span>

<span data-ttu-id="6113b-148">**Определение правила нормализации вручную**</span><span class="sxs-lookup"><span data-stu-id="6113b-148">**To define a normalization rule manually**</span></span>

1. <span data-ttu-id="6113b-149">Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator.</span><span class="sxs-lookup"><span data-stu-id="6113b-149">Log on to the computer as a member of the RTCUniversalServerAdmins group, or as a member of the CsVoiceAdministrator, CsServerAdministrator, or CsAdministrator role.</span></span> <span data-ttu-id="6113b-150">Подробные сведения см. [в материале Уполномоченные разрешения на установку.](/previous-versions/office/lync-server-2013/lync-server-2013-delegate-setup-permissions)</span><span class="sxs-lookup"><span data-stu-id="6113b-150">For details, see [Delegate setup permissions](/previous-versions/office/lync-server-2013/lync-server-2013-delegate-setup-permissions).</span></span>
2. <span data-ttu-id="6113b-151">Откройте окно браузера и введите URL-адрес администратора, чтобы открыть панель управления.</span><span class="sxs-lookup"><span data-stu-id="6113b-151">Open a browser window, and then enter the Admin URL to open the Control Panel.</span></span> <span data-ttu-id="6113b-152">Дополнительные сведения о различных методах, которые можно использовать для запуска панели управления Skype для бизнеса, см. в материале [Install и open administrative tools.](../../management-tools/install-and-open-administrative-tools.md)</span><span class="sxs-lookup"><span data-stu-id="6113b-152">For details about the different methods you can use to start the Skype for Business Control Panel, see [Install and open administrative tools](../../management-tools/install-and-open-administrative-tools.md).</span></span>
3. <span data-ttu-id="6113b-153">(Необязательный) Выполните действия в ["Создание набора](GET LINK AFTER MIGRATION) номеров" с помощью шага 11 или [изменение](GET LINK AFTER MIGRATION) набора на этапе 10.</span><span class="sxs-lookup"><span data-stu-id="6113b-153">(Optional) Follow the steps in [Create a dial plan](GET LINK AFTER MIGRATION) through step 11 or [Modify a dial plan](GET LINK AFTER MIGRATION) through step 10.</span></span>  
4. <span data-ttu-id="6113b-154">В разделе **New Normalization Rule** (Создать правило нормализации) или **Edit Normalization Rule** (Изменить правило нормализации) в поле **Имя** введите шаблон нормализуемого номера (например, задайте имя правила нормализации **5DigitExtension**).</span><span class="sxs-lookup"><span data-stu-id="6113b-154">In **New Normalization Rule** or **Edit Normalization Rule**, type a name that describes the number pattern being normalized in **Name** (for example, name the normalization rule **5DigitExtension**).</span></span>
5. <span data-ttu-id="6113b-155">В поле **Описание** введите описание правила нормализации (например, "Преобразует 5-значные добавочные номера") (не обязательно).</span><span class="sxs-lookup"><span data-stu-id="6113b-155">(Optional) In **Description**, type a description of the normalization rule (for example, "Translates 5-digit extensions").</span></span>
6. <span data-ttu-id="6113b-156">В разделе **Build a Normalization Rule** (Создание правила нормализации) нажмите кнопку **Изменить**.</span><span class="sxs-lookup"><span data-stu-id="6113b-156">In **Build a Normalization Rule**, click **Edit**.</span></span>
7. <span data-ttu-id="6113b-157">В разделе Type a Regular Expression (Введите регулярное выражение) введите следующие данные.</span><span class="sxs-lookup"><span data-stu-id="6113b-157">Enter the following in Type a Regular Expression:</span></span>
    - <span data-ttu-id="6113b-158">В поле **Match this pattern** (Соответствие этому шаблону) укажите шаблон, который требуется использовать для сопоставления набираемых номеров.</span><span class="sxs-lookup"><span data-stu-id="6113b-158">In **Match this pattern**, specify the pattern that you want to use to match the dialed phone number.</span></span>
    - <span data-ttu-id="6113b-159">В поле **Translation rule** (Правило преобразования) укажите шаблон для формата преобразуемых номеров E.164.</span><span class="sxs-lookup"><span data-stu-id="6113b-159">In **Translation rule**, specify a pattern for the format of translated E.164 phone numbers.</span></span>

    <span data-ttu-id="6113b-160">Например, если вы вводите **^(\d {7} )$** в соответствие этому шаблону и **+1425$1** в правиле **перевода,** правило нормализует 5550100 до +14255550100. </span><span class="sxs-lookup"><span data-stu-id="6113b-160">For example, if you enter **^(\d{7})$** in **Match this pattern** and **+1425$1** in **Translation rule**, the rule normalizes 5550100 to +14255550100.</span></span>

8. <span data-ttu-id="6113b-161">Если правило нормализации приводит к телефонному номеру, который является внутренним номером в организации, выберите **Внутренний добавочный номер** (не обязательно).</span><span class="sxs-lookup"><span data-stu-id="6113b-161">(Optional) If the normalization rule results in a phone number that is internal to your organization, select **Internal extension**.</span></span>
9. <span data-ttu-id="6113b-p113">Введите номер для проверки правила нормализации и нажмите кнопку **Перейти** (необязательно). Результаты теста появятся под заголовком **Введите номер телефона для проверки**.</span><span class="sxs-lookup"><span data-stu-id="6113b-p113">(Optional) Enter a number to test the normalization rule, and then click **Go**. The test results are displayed under **Enter a number to test**.</span></span>

    > [!Note]
    > <span data-ttu-id="6113b-164">Можно сохранить правило нормализации, которое еще не прошло проверку, а затем изменить его настройки.</span><span class="sxs-lookup"><span data-stu-id="6113b-164">You can save a normalization rule that does not yet pass the test and then reconfigure it later.</span></span> <span data-ttu-id="6113b-165">Подробные сведения см. [в материале Test voice routing](/previous-versions/office/lync-server-2013/lync-server-2013-test-voice-routing).</span><span class="sxs-lookup"><span data-stu-id="6113b-165">For details, see [Test voice routing](/previous-versions/office/lync-server-2013/lync-server-2013-test-voice-routing).</span></span> 

10. <span data-ttu-id="6113b-166">Нажмите кнопку **ОК**, чтобы сохранить правило нормализации.</span><span class="sxs-lookup"><span data-stu-id="6113b-166">Click **OK** to save the normalization rule.</span></span>
11. <span data-ttu-id="6113b-167">Нажмите кнопку **ОК**, чтобы сохранить абонентскую группу.</span><span class="sxs-lookup"><span data-stu-id="6113b-167">Click **OK** to save the dial plan.</span></span>
12. <span data-ttu-id="6113b-168">На странице **Dial Plan** щелкните **Commi** t и нажмите кнопку **Фиксация всех**.</span><span class="sxs-lookup"><span data-stu-id="6113b-168">On the **Dial Plan** page, click **Commi** t, and then click **Commit all**.</span></span>