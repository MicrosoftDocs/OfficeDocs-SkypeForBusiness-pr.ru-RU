---
title: Определение правил нормализации в Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
description: Правила нормализации Skype для бизнеса Server используют регулярные выражения .NET Framework для преобразования набранных телефонных номеров в формат E. 164; другими словами, правила нормализации получают телефонный номер, набранный пользователем, и преобразовывают его в формат, используемый в Skype для бизнеса Server. Каждой абонентской группе должно быть назначено одно или несколько правил нормализации.
ms.openlocfilehash: 42ec43a08d1c155f61869bdfebf07e94ac040e56
ms.sourcegitcommit: 88a16c09dd91229e1a8c156445eb3c360c942978
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/15/2020
ms.locfileid: "42028850"
---
# <a name="defining-normalization-rules-in-skype-for-business-server"></a>Определение правил нормализации в Skype для бизнеса Server

Правила нормализации Skype для бизнеса Server используют регулярные выражения .NET Framework для преобразования набранных телефонных номеров в формат E. 164; другими словами, правила нормализации получают телефонный номер, набранный пользователем, и преобразовывают его в формат, используемый в Skype для бизнеса Server. Каждой абонентской группе должно быть назначено одно или несколько правил нормализации.

Подробные сведения о правилах нормализации приведены в статье [абонентские группы и правила нормализации](https://technet.microsoft.com/library/gg413082(v=ocs.15).aspx).

Сведения о написании регулярных выражений можно найти в статье [регулярные выражения .NET Framework](http://go.microsoft.com/fwlink/p/?linkId=140927).

Для задания или изменения регулярных выражений можно использовать следующие способы.
- С [помощью средства " **Построение правила нормализации** "](#create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule) укажите значения для начальных цифр, длины, цифр для удаления и цифр для добавления, а затем позвольте панели управления Skype для бизнеса Server создать соответствующий шаблон и правило преобразования.
- [Запишите регулярные выражения вручную](#create-or-modify-a-normalization-rule-manually) , чтобы определить шаблон сравнения и правило преобразования. 

## <a name="create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule"></a>Создание или изменение правила нормализации с помощью построения правила нормализации

Выполните следующие действия, чтобы создать или изменить правило нормализации в панели управления Skype для бизнеса Server. 

**"Построение правила нормализации"**

1. Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator. Дополнительные сведения см. в разделе [Делегирование разрешений на установку](https://technet.microsoft.com/library/gg412735(v=ocs.15).aspx).
2. Откройте окно браузера и введите URL-адрес администрирования, чтобы открыть панель управления. Дополнительные сведения о различных методах, которые можно использовать для запуска панели управления Skype для бизнеса, можно найти в [статье Установка и открытие средств администрирования](../../management-tools/install-and-open-administrative-tools.md).
3. Необязательно Выполните действия, описанные в статье [Создание абонентской группы](https://docs.microsoft.com/skypeforbusiness/deploy/deploy-enterprise-voice/dial-plans#to-create-a-dial-plan) до шага 11, или [измените абонентскую схему](https://docs.microsoft.com/skypeforbusiness/deploy/deploy-enterprise-voice/dial-plans#to-modify-a-dial-plan) , выполнив шаг 10. 
4. В разделе **Создание правила нормализации** или **Изменение правила нормализации** в поле **Имя** введите имя, которое описывает шаблон номера для нормализации (например, **5DigitExtension**).
5. В поле **Описание** введите описание правила нормализации (например, "Преобразует 5-значные добавочные номера") (не обязательно).
6. В разделе **Построение правила нормализации** введите значения в следующих полях.
    - **Начальные цифры**: (необязательно) укажите начальные цифры набранных номеров, которые должны сопоставляться с шаблоном. Например, введите **425** , если вы хотите, чтобы шаблон собирал номера с набором, начинающийся с 425.
    - **Length**: укажите количество цифр в соответствующем шаблоне и укажите, будет ли шаблон соответствовать этой длине точно, совпадать с набранными номерами, по крайней мере с указанной длиной, или же совпадать с набираемыми номерами любой длины.
    - **Цифры для удаления**: (необязательно) укажите количество начальных цифр, удаляемых из набора номеров, которые должны соответствовать шаблону.
    - **Цифры для добавления**: (необязательно) укажите цифры для добавления к номерам, которые должны сопоставляться с шаблоном.
    
    Значения, введенные в этих полях, отражаются в **шаблоне для поиска соответствия** и в **правиле преобразования**. Например, если вы оставляете **начальные цифры** пустыми, введите в поле Длина значение **7** **, а**в поле **Длина** — значение **0** **, а**в качестве совпадения используется регулярное выражение в **шаблоне** :

    **^ (\d{7}) $**

7. В поле **Правило преобразования** укажите шаблон для формата преобразуемых телефонных номеров E.164 следующим образом.
    - Значение, которое представляет количество цифр, указанных в шаблоне соответствия. Например, если шаблон соответствует **^ (\d{7}) $**, то $1 в правиле преобразования представляет номера набора из 7 цифр.
    - Введите значение в поле **Цифры для добавления**, указывающее цифры, которые должны добавляться в начало преобразуемого номера, например, **+1425** (необязательно).
    
    Например, если **шаблон для сравнения** содержит **{7}^ (\d) $** как шаблон для набранных номеров, а **правило преобразования** содержит **+ 1425 $1** в качестве шаблона для телефонных номеров E. 164, то правило нормализует 5550100 в + 14255550100.

8. Если правило нормализации приводит к телефонному номеру, который является внутренним номером в организации, выберите **Внутренний добавочный номер** (не обязательно).
9. Введите номер для проверки правила нормализации и нажмите кнопку **Перейти** (необязательно). Результаты теста появятся под заголовком **Введите номер телефона для проверки**.
    > [!Note] 
    > Можно сохранить правило нормализации, которое еще не прошло проверку, а затем изменить его настройки. Подробнее: " [Проверка маршрутизации голосовых вызовов](https://technet.microsoft.com/library/gg398915(v=ocs.15).aspx)". 

10. Нажмите кнопку **ОК**, чтобы сохранить правило нормализации.
11. Нажмите кнопку **ОК**, чтобы сохранить абонентскую группу.
12. На странице **Абонентская группа**, нажмите кнопку **Зафиксировать**, а затем **Commit all** (Фиксировать все). 
    > [!Note]
    > Каждый раз при создании или изменении правила нормализации следует запускать команду Сохранить все, чтобы опубликовать изменение конфигурации. Дополнительные сведения см. в статье [Публикация ожидающих изменений в конфигурации маршрутизации голосовой связи](https://technet.microsoft.com/library/gg413088(v=ocs.15).aspx). 

## <a name="create-or-modify-a-normalization-rule-manually"></a>Создание или изменение правила нормализации вручную

Выполните следующие действия, чтобы создать или изменить правило нормализации вручную.

**Определение правила нормализации вручную**

1. Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator. Дополнительные сведения см. в разделе [Делегирование разрешений на установку](https://technet.microsoft.com/library/gg412735(v=ocs.15).aspx).
2. Откройте окно браузера и введите URL-адрес администрирования, чтобы открыть панель управления. Дополнительные сведения о различных методах, которые можно использовать для запуска панели управления Skype для бизнеса, можно найти в [статье Установка и открытие средств администрирования](../../management-tools/install-and-open-administrative-tools.md).
3. Необязательно Выполните действия, описанные в статье [Создание абонентской группы](GET LINK AFTER MIGRATION) до шага 11, или [измените абонентскую схему](GET LINK AFTER MIGRATION) , выполнив шаг 10.  
4. В разделе **New Normalization Rule** (Создать правило нормализации) или **Edit Normalization Rule** (Изменить правило нормализации) в поле **Имя** введите шаблон нормализуемого номера (например, задайте имя правила нормализации **5DigitExtension**).
5. В поле **Описание** введите описание правила нормализации (например, "Преобразует 5-значные добавочные номера") (не обязательно).
6. В разделе **Build a Normalization Rule** (Создание правила нормализации) нажмите кнопку **Изменить**.
7. В разделе Type a Regular Expression (Введите регулярное выражение) введите следующие данные.
    - В поле **Match this pattern** (Соответствие этому шаблону) укажите шаблон, который требуется использовать для сопоставления набираемых номеров.
    - В поле **Translation rule** (Правило преобразования) укажите шаблон для формата преобразуемых номеров E.164.

    Например, если ввести **{7}^ (\d) $** в поле **найти** , а затем **+ 1425 $1** в **правиле трансляции**, то правило нормализует 5550100 до + 14255550100.

8. Если правило нормализации приводит к телефонному номеру, который является внутренним номером в организации, выберите **Внутренний добавочный номер** (не обязательно).
9. Введите номер для проверки правила нормализации и нажмите кнопку **Перейти** (необязательно). Результаты теста появятся под заголовком **Введите номер телефона для проверки**.

    > [!Note]
    > Можно сохранить правило нормализации, которое еще не прошло проверку, а затем изменить его настройки. Подробнее: " [Проверка маршрутизации голосовых вызовов](https://technet.microsoft.com/library/gg398915(v=ocs.15).aspx)". 

10. Нажмите кнопку **ОК**, чтобы сохранить правило нормализации.
11. Нажмите кнопку **ОК**, чтобы сохранить абонентскую группу.
12. На странице **абонентская** абонентия выберите **комми**t, а затем нажмите кнопку **сохранить все**. 
