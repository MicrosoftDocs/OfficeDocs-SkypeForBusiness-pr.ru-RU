---
title: Определение правил нормализации в Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
description: В правилах нормализации в Skype для бизнеса Server используются регулярные выражения .NET Framework для перевода телефонных номеров с набором в формат E. 164. другими словами, правила нормализации принимают номер телефона, набранный пользователем, и преобразуют его в формат, используемый Skype для бизнеса Server для внутренних целей. Каждой абонентской группе должно быть назначено хотя бы одно правило нормализации.
ms.openlocfilehash: e5156816de13a8d59e3e6eea4890046d5b4f586a
ms.sourcegitcommit: ab47ff88f51a96aaf8bc99a6303e114d41ca5c2f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/20/2019
ms.locfileid: "34274984"
---
# <a name="defining-normalization-rules-in-skype-for-business-server"></a>Определение правил нормализации в Skype для бизнеса Server

В правилах нормализации в Skype для бизнеса Server используются регулярные выражения .NET Framework для перевода телефонных номеров с набором в формат E. 164. другими словами, правила нормализации принимают номер телефона, набранный пользователем, и преобразуют его в формат, используемый Skype для бизнеса Server для внутренних целей. Каждой абонентской группе должно быть назначено хотя бы одно правило нормализации.

Подробные сведения о правилах нормализации описаны в разделе [абонентские группы и правила нормализации](https://technet.microsoft.com/en-us/library/gg413082(v=ocs.15).aspx).

Подробнее об написании регулярных выражений можно узнать в разделе [регулярные выражения .NET Framework](http://go.microsoft.com/fwlink/p/?linkId=140927).

Чтобы определить или изменить правило нормализации, можно использовать один из указанных ниже способов.
- С [помощью средства **создания правил нормализации** ](#create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule) укажите значения для начальных цифр, длину, цифр для удаления и цифр, которые нужно добавить, а затем настройте соответствующий шаблон сопоставления и правило перевода на панели управления в Skype для бизнеса Server. Для Вас.
- [Напишите регулярные выражения вручную](#create-or-modify-a-normalization-rule-manually) , чтобы задать шаблон сопоставления и правило трансляции. 

## <a name="create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule"></a>Создание и изменение правила нормализации с помощью построения правила нормализации

Если вы хотите создать или изменить правило нормализации на панели управления Skype для бизнеса Server, выполните указанные ниже действия. 

**Определение правила с помощью построения правила нормализации**

1. Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator. Дополнительные сведения можно найти в разделе [Делегирование разрешений на настройку](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).
2. Откройте окно браузера и введите URL-адрес администратора, чтобы открыть панель управления. Дополнительные сведения о различных способах использования панели управления "Skype для бизнеса" можно найти в разделе [Установка и открытие меню Администрирование](../../management-tools/install-and-open-administrative-tools.md).
3. Необязательно Выполните действия, описанные в статье [Создание абонентской группы на](https://docs.microsoft.com/skypeforbusiness/deploy/deploy-enterprise-voice/dial-plans#to-create-a-dial-plan) этапе 11, или [измените абонентскую группу](https://docs.microsoft.com/skypeforbusiness/deploy/deploy-enterprise-voice/dial-plans#to-modify-a-dial-plan) на шаге 10. 
4. В разделе **создания** или **редактирования правила нормализации**в поле **Имя** введите имя, описывающее нормализуемый числовой шаблон (например, назовите правило нормализации **5DigitExtension**).
5. В поле **Описание** введите описание правила нормализации (например, "Преобразование пятизначных добавочных номеров") (не обязательно).
6. В разделе **Построение правила нормализации** введите значения в следующих полях.
    - **Начальные цифры**: (необязательно) укажите начальные цифры номеров, которые должны соответствовать шаблону. Например, введите **425** , если вы хотите, чтобы шаблон соответствовал номерам, набираемым начиная с 425.
    - **Length (длина**): укажите количество цифр в совпадающем шаблоне и укажите, следует ли точно соответствовать этой длине, совпадать с набранными номерами по крайней мере до данной длины или с одинаковым набором номеров.
    - **Цифры для удаления**: (необязательно) укажите количество начальных цифр, которые должны быть удалены из набора номера, который должен соответствовать шаблону.
    - **Цифры для добавления**: (необязательно) укажите цифры, которые нужно добавить к номерам, которые должны соответствовать шаблону.
    
    Значения, введенные в этих полях, отражаются в полях **Шаблон для поиска соответствия** и **Правило трансляции**. Например, если вы оставляете **начальные цифры** пустыми, введите в поле "длина ****" значение " **7** ", а затем укажите **для числа** **0** цифровую **величину** , совпадающую с результирующим регулярным выражением в **шаблоне** :

    **^ (\d{7}) $**

7. В поле **Правило трансляции** укажите шаблон для формата преобразованных телефонных номеров E.164 следующим образом.
    - Значение количества цифр, указанных в шаблоне соответствия. Например, если шаблон соответствует **^ (\d{7}) $**, то $1 в правиле перевода представляет номера из 7 цифр.
    - В поле **Цифры для добавления** введите значение, указывающее цифры, которые должны добавляться в начале преобразуемого номера, например, **+1425** (не обязательно).
    
    Например, если **в** качестве шаблона для набора номера указан параметр **^ (\d{7}) $** и в **правиле перевода** содержится **+ 1425 $1** в качестве шаблона для номеров телефонов E. 164, правило нормализует 5550100 в + 14255550100.

8. Если в результате применения правила нормализации получается внутренний телефонный номер организации, выберите **Внутреннее расширение** (не обязательно).
9. Введите номер для проверки правила нормализации, затем нажмите кнопку **Перейти** (необязательно). Результаты проверки отображаются под полем **Введите номер телефона для проверки**.
    > [!Note] 
    > Вы можете сохранить правило нормализации, которое еще не прошло тест, а затем настроить его позже. Подробности можно найти в разделе [Проверка маршрутизации голоса](https://technet.microsoft.com/en-us/library/gg398915(v=ocs.15).aspx). 

10. Нажмите кнопку **ОК** для сохранения правила нормализации.
11. Нажмите кнопку **ОК** для сохранения абонентской группы.
12. На странице **Абонентская группа** нажмите кнопку **Сохранить**, затем **Сохранить все**. 
    > [!Note]
    > Каждый раз, когда вы создаете или изменяете правило нормализации, необходимо выполнить команду commit all, чтобы опубликовать изменение конфигурации. Дополнительные сведения можно найти в разделе [Публикация ожидающих изменений в конфигурации голосовой маршрутизации](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx). 

## <a name="create-or-modify-a-normalization-rule-manually"></a>Создание или изменение правила нормализации вручную

Если вы хотите создать или изменить правило нормализации вручную, выполните указанные ниже действия.

**Определение правила нормализации вручную**

1. Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator. Дополнительные сведения можно найти в разделе [Делегирование разрешений на настройку](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).
2. Откройте окно браузера и введите URL-адрес администратора, чтобы открыть панель управления. Дополнительные сведения о различных способах использования панели управления "Skype для бизнеса" можно найти в разделе [Установка и открытие меню Администрирование](../../management-tools/install-and-open-administrative-tools.md).
3. Необязательно Выполните действия, описанные в статье [Создание абонентской группы на](GET LINK AFTER MIGRATION) этапе 11, или [измените абонентскую группу](GET LINK AFTER MIGRATION) на шаге 10.  
4. В разделе **создания** или **редактирования правила нормализации** в поле **Имя** введите имя, описывающее нормализуемый числовой шаблон (например, **5DigitExtension**).
5. В поле **Описание** введите описание правила нормализации (например, "Преобразование пятизначных добавочных номеров") (не обязательно).
6. В разделе **Построение правила нормализации** нажмите кнопку **Изменить**.
7. В разделе Введите регулярное выражение введите следующие данные.
    - В поле **Сопоставить этот шаблон** укажите шаблон, которому должен соответствовать набираемый телефонный номер.
    - В поле **Правило трансляции** укажите шаблон для формата преобразуемых телефонных номеров E.164.

    Например, если ввести **^ (\d{7}) $** в соответствии с **этим шаблоном** и **+ 1425 $1** в **правиле перевода**, правило нормализует 5550100 в + 14255550100.

8. Если в результате применения правила нормализации получается внутренний телефонный номер организации, выберите **Внутреннее расширение** (не обязательно).
9. Введите номер для проверки правила нормализации, затем нажмите кнопку **Перейти** (необязательно). Результаты проверки отображаются под полем **Введите номер телефона для проверки**.

    > [!Note]
    > Вы можете сохранить правило нормализации, которое еще не прошло тест, а затем настроить его позже. Подробности можно найти в разделе [Проверка маршрутизации голоса](https://technet.microsoft.com/en-us/library/gg398915(v=ocs.15).aspx). 

10. Нажмите кнопку **ОК** для сохранения правила нормализации.
11. Нажмите кнопку **ОК** для сохранения абонентской группы.
12. На странице **абонентской группы** нажмите кнопку **комми**t и выберите команду **сохранить все**. 
