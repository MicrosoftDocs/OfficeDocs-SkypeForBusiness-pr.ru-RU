---
title: Определение правил нормализации в Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
description: Правила нормализации Skype для бизнеса Server используют регулярные выражения .NET Framework для перевода набираемой телефонной связи в формат E.164; Другими словами, правила нормализации принимают номер телефона, набираемого пользователем, и преобразуют этот номер в формат, используемый в Skype для бизнеса Server. Каждой абонентской группе должно быть назначено одно или несколько правил нормализации.
ms.openlocfilehash: d4e248dc9b814610df544bca9d932a29756a80b0
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/12/2021
ms.locfileid: "49823379"
---
# <a name="defining-normalization-rules-in-skype-for-business-server"></a>Определение правил нормализации в Skype для бизнеса Server

Правила нормализации Skype для бизнеса Server используют регулярные выражения .NET Framework для перевода набираемой телефонной связи в формат E.164; Другими словами, правила нормализации принимают номер телефона, набираемого пользователем, и преобразуют этот номер в формат, используемый в Skype для бизнеса Server. Каждой абонентской группе должно быть назначено одно или несколько правил нормализации.

Подробные сведения о правилах нормализации см. в сведениях [о планах набора номера и правилах нормализации.](https://technet.microsoft.com/library/gg413082(v=ocs.15).aspx)

Подробные сведения о написании регулярных выражений см. в [.NET Framework Regular Expressions.](https://go.microsoft.com/fwlink/p/?linkId=140927)

Для задания или изменения регулярных выражений можно использовать следующие способы.
- [  ](#create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule) Используйте средство создания правила нормализации, чтобы указать значения начальных цифр, длины, цифр, удаляемой и добавляемой цифр, а затем позвольте панели управления Skype для бизнеса Server создать соответствующий шаблон и правило трансляции.
- [Написание регулярных выражений вручную](#create-or-modify-a-normalization-rule-manually) для определения шаблона совпадения и правила трансляции. 

## <a name="create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule"></a>Создание или изменение правила нормализации с помощью создания правила нормализации

Выполните следующие действия, чтобы создать или изменить правило нормализации в панели управления Skype для бизнеса Server. 

**"Построение правила нормализации"**

1. Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator. Подробные сведения см. в [делегирования разрешений на установку.](https://technet.microsoft.com/library/gg412735(v=ocs.15).aspx)
2. Откройте окно браузера и введите URL-адрес администратора, чтобы открыть панель управления. Дополнительные сведения о различных методах запуска панели управления Skype для бизнеса см. в сведениях [об установке и запуске средств администрирования.](../../management-tools/install-and-open-administrative-tools.md)
3. (Необязательно) Выполните действия, которые необходимо предпринять при [](https://docs.microsoft.com/skypeforbusiness/deploy/deploy-enterprise-voice/dial-plans#to-modify-a-dial-plan) создании телефонной [программы с](https://docs.microsoft.com/skypeforbusiness/deploy/deploy-enterprise-voice/dial-plans#to-create-a-dial-plan) помощью шага 11 или изменения ее до шага 10. 
4. В разделе **Создание правила нормализации** или **Изменение правила нормализации** в поле **Имя** введите имя, которое описывает шаблон номера для нормализации (например, **5DigitExtension**).
5. В поле **Описание** введите описание правила нормализации (например, "Преобразует 5-значные добавочные номера") (не обязательно).
6. В разделе **Построение правила нормализации** введите значения в следующих полях.
    - **Начальные цифры:**(Необязательно) Укажите начальные цифры набираемого номера, которые должны соответствовать шаблону. Например, введите **425,** если шаблон должен соответствовать набираемой цифре, начиная с 425.
    - **Length**: Specify the number of digits in the matching pattern and select whether you want the pattern to match this length exactly, match dialed numbers that are at least this length, or match dialed numbers of any length.
    - **Цифры, которые необходимо** удалить: (Необязательно) Укажите количество начальных цифр, удаляемого из набираемого номера, который должен соответствовать шаблону.
    - **Цифры для добавления:**(Необязательно) Укажите цифры, добавляемые в набираемые номера, которые должны соответствовать шаблону.
    
    Значения, введенные в этих полях, отражаются в **шаблоне для поиска соответствия** и в **правиле преобразования**. Например, если оставить  начальные цифры пустыми,  введите  **7** в поле "Длина" выберите "Точно" и  укажите **0** в цифрах, которые необходимо **удалить,** итоговый регулярный выражение в шаблоне будет таким:

    **^(\d {7} )$**

7. В поле **Правило преобразования** укажите шаблон для формата преобразуемых телефонных номеров E.164 следующим образом.
    - Значение, которое представляет количество цифр, указанных в шаблоне соответствия. Например, если шаблоном совпадения является **^(\d {7} )$**, то $1 в правиле трансляции представляет 7-значные набраные номера.
    - Введите значение в поле **Цифры для добавления**, указывающее цифры, которые должны добавляться в начало преобразуемого номера, например, **+1425** (необязательно).
    
    Например, если  шаблон для совпадения содержит **^(\d {7} )$**  в качестве шаблона для набираемой цифры, а правило трансляции содержит **+1425$1** в качестве шаблона для номеров телефонов E.164, правило нормализует от 5550100 до +14255550100.

8. Если правило нормализации приводит к телефонному номеру, который является внутренним номером в организации, выберите **Внутренний добавочный номер** (не обязательно).
9. Введите номер для проверки правила нормализации и нажмите кнопку **Перейти** (необязательно). Результаты теста появятся под заголовком **Введите номер телефона для проверки**.
    > [!Note] 
    > Можно сохранить правило нормализации, которое еще не прошло проверку, а затем изменить его настройки. Подробные сведения см. в [тестовой маршрутике голосовой почты.](https://technet.microsoft.com/library/gg398915(v=ocs.15).aspx) 

10. Нажмите кнопку **ОК**, чтобы сохранить правило нормализации.
11. Нажмите кнопку **ОК**, чтобы сохранить абонентскую группу.
12. На странице **Абонентская группа**, нажмите кнопку **Зафиксировать**, а затем **Commit all** (Фиксировать все). 
    > [!Note]
    > Каждый раз при создании или изменении правила нормализации следует запускать команду Сохранить все, чтобы опубликовать изменение конфигурации. Подробные сведения см. в подстановке ["Публикация ожидающих изменений в конфигурации маршрутации голосовой почты".](https://technet.microsoft.com/library/gg413088(v=ocs.15).aspx) 

## <a name="create-or-modify-a-normalization-rule-manually"></a>Создание или изменение правила нормализации вручную

Выполните следующие действия, чтобы создать или изменить правило нормализации вручную.

**Определение правила нормализации вручную**

1. Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator. Подробные сведения см. в [делегирования разрешений на установку.](https://technet.microsoft.com/library/gg412735(v=ocs.15).aspx)
2. Откройте окно браузера и введите URL-адрес администратора, чтобы открыть панель управления. Дополнительные сведения о различных методах запуска панели управления Skype для бизнеса см. в сведениях [об установке и запуске средств администрирования.](../../management-tools/install-and-open-administrative-tools.md)
3. (Необязательно) Выполните действия, которые необходимо предпринять при [](GET LINK AFTER MIGRATION) создании телефонной [программы с](GET LINK AFTER MIGRATION) помощью шага 11 или изменения ее до шага 10.  
4. В разделе **New Normalization Rule** (Создать правило нормализации) или **Edit Normalization Rule** (Изменить правило нормализации) в поле **Имя** введите шаблон нормализуемого номера (например, задайте имя правила нормализации **5DigitExtension**).
5. В поле **Описание** введите описание правила нормализации (например, "Преобразует 5-значные добавочные номера") (не обязательно).
6. В разделе **Build a Normalization Rule** (Создание правила нормализации) нажмите кнопку **Изменить**.
7. В разделе Type a Regular Expression (Введите регулярное выражение) введите следующие данные.
    - В поле **Match this pattern** (Соответствие этому шаблону) укажите шаблон, который требуется использовать для сопоставления набираемых номеров.
    - В поле **Translation rule** (Правило преобразования) укажите шаблон для формата преобразуемых номеров E.164.

    Например, если ввести **^(\d {7} )$** в соответствие этому шаблону и **+1425$1** в правиле трансляции, правило нормализует от 5550100 до +14255550100.  

8. Если правило нормализации приводит к телефонному номеру, который является внутренним номером в организации, выберите **Внутренний добавочный номер** (не обязательно).
9. Введите номер для проверки правила нормализации и нажмите кнопку **Перейти** (необязательно). Результаты теста появятся под заголовком **Введите номер телефона для проверки**.

    > [!Note]
    > Можно сохранить правило нормализации, которое еще не прошло проверку, а затем изменить его настройки. Подробные сведения см. в [тестовой маршрутике голосовой почты.](https://technet.microsoft.com/library/gg398915(v=ocs.15).aspx) 

10. Нажмите кнопку **ОК**, чтобы сохранить правило нормализации.
11. Нажмите кнопку **ОК**, чтобы сохранить абонентскую группу.
12. На странице **"Dial Plan"** (Dial Plan) **щелкните Commi t (Commi** t) и выберите **"Commit all" (Зафиксировать все).** 
