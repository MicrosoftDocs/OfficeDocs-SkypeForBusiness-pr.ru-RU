---
title: Определение правил нормализации в Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-mahoffman
author: cichur
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
ms.localizationpriority: medium
description: Skype для бизнеса Server правила нормализации используют платформа .NET Framework регулярные выражения для перевода набраных номеров телефонов в формат E.164; Другими словами, правила нормализации принимают номер телефона, набираемого пользователем, и преобразовывать его в формат, используемый Skype для бизнеса Server. Каждой абонентской группе должно быть назначено одно или несколько правил нормализации.
ms.openlocfilehash: e2cf2deaefa18323dcd69e9f09703d6994f101c4
ms.sourcegitcommit: 65a10f80e5dfd67b2778e09f5f92c21ef09ce36a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2021
ms.locfileid: "60778289"
---
# <a name="defining-normalization-rules-in-skype-for-business-server"></a>Определение правил нормализации в Skype для бизнеса Server

Skype для бизнеса Server правила нормализации используют платформа .NET Framework регулярные выражения для перевода набраных номеров телефонов в формат E.164; Другими словами, правила нормализации принимают номер телефона, набираемого пользователем, и преобразовывать его в формат, используемый Skype для бизнеса Server. Каждой абонентской группе должно быть назначено одно или несколько правил нормализации.

Сведения о правилах нормализации см. в материале [Dial plans and normalization rules.](/previous-versions/office/lync-server-2013/lync-server-2013-dial-plans-and-normalization-rules)

Подробные сведения о записи регулярных выражений см. в платформа .NET Framework [Regular Expressions.](/dotnet/standard/base-types/regular-expressions)

Для задания или изменения регулярных выражений можно использовать следующие способы.
- Используйте средство Build [ **a Normalization Rule**](#create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule) для указания значений для начальных цифр, длины, цифр для удаления и добавления цифр, а затем Skype для бизнеса Server панели управления создать соответствующий шаблон и правило перевода.
- [Записывая регулярные выражения вручную](#create-or-modify-a-normalization-rule-manually) для определения шаблона и правила перевода. 

## <a name="create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule"></a>Создание или изменение правила нормализации с помощью правила Сборка нормализации

Выполните следующие действия, если вы хотите создать или изменить правило нормализации в Skype для бизнеса Server панели управления. 

**"Построение правила нормализации"**

1. Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator. Подробные сведения см. [в материале Уполномоченные разрешения на установку.](/previous-versions/office/lync-server-2013/lync-server-2013-delegate-setup-permissions)
2. Откройте окно браузера и введите URL-адрес администратора, чтобы открыть панель управления. Дополнительные сведения о различных методах, которые можно использовать для запуска панели управления Skype для бизнеса, см. в материале [Install и open administrative tools.](../../management-tools/install-and-open-administrative-tools.md)
3. (Необязательный) Выполните действия в ["Создание набора](../../deploy/deploy-enterprise-voice/dial-plans.md#to-create-a-dial-plan) номеров" с помощью шага 11 или [изменение](../../deploy/deploy-enterprise-voice/dial-plans.md#to-modify-a-dial-plan) набора на этапе 10. 
4. В разделе **Создание правила нормализации** или **Изменение правила нормализации** в поле **Имя** введите имя, которое описывает шаблон номера для нормализации (например, **5DigitExtension**).
5. В поле **Описание** введите описание правила нормализации (например, "Преобразует 5-значные добавочные номера") (не обязательно).
6. В разделе **Построение правила нормализации** введите значения в следующих полях.
    - **Начальные цифры:**(Необязательный) Укажите ведущие цифры набраных номеров, которые необходимо соответствовать шаблону. Например, введите **425,** если вы хотите, чтобы шаблон совпадал с набраными номерами, начиная с 425.
    - **Длина**. Укажите количество цифр в шаблоне совпадения и выберите, хотите ли вы, чтобы шаблон точно соответствует этой длине, совпадают с набраными номерами, которые по крайней мере этой длины, или совпадают с набраными номерами любой длины.
    - **Цифры для** удаления. (Необязательно) Укажите количество начальных цифр, которые будут удалены из набраных номеров, которые необходимо использовать для совпадения шаблона.
    - **Цифры, чтобы** добавить: (Необязательно) Укажите цифры, которые будут добавлены в набраны номера, которые необходимо соответствовать шаблону.
    
    Значения, введенные в этих полях, отражаются в **шаблоне для поиска соответствия** и в **правиле преобразования**. Например, если оставить  начальные цифры пустыми,  введите **7** в поле Длина выберите Точно **,** и укажите **0** в Цифры, чтобы **удалить,** в результате регулярное выражение в **шаблоне,** чтобы соответствовать:

    **^(\d {7} )$**

7. В поле **Правило преобразования** укажите шаблон для формата преобразуемых телефонных номеров E.164 следующим образом.
    - Значение, которое представляет количество цифр, указанных в шаблоне соответствия. Например, если шаблон совпадения **^(\d {7} )$,** то $1 в правиле перевода представляет 7-значные набраные номера.
    - Введите значение в поле **Цифры для добавления**, указывающее цифры, которые должны добавляться в начало преобразуемого номера, например, **+1425** (необязательно).
    
    Например, если  шаблон для совпадения содержит **^(\d {7} )$**  в качестве шаблона для набраных номеров и правила перевода содержит **+1425$1** в качестве шаблона для номеров телефонов E.164, правило нормализует 5550100 до +14255550100.

8. Если правило нормализации приводит к телефонному номеру, который является внутренним номером в организации, выберите **Внутренний добавочный номер** (не обязательно).
9. Введите номер для проверки правила нормализации и нажмите кнопку **Перейти** (необязательно). Результаты теста появятся под заголовком **Введите номер телефона для проверки**.
    > [!Note] 
    > Можно сохранить правило нормализации, которое еще не прошло проверку, а затем изменить его настройки. Подробные сведения см. [в материале Test voice routing](/previous-versions/office/lync-server-2013/lync-server-2013-test-voice-routing). 

10. Нажмите кнопку **ОК**, чтобы сохранить правило нормализации.
11. Нажмите кнопку **ОК**, чтобы сохранить абонентскую группу.
12. На странице **Абонентская группа**, нажмите кнопку **Зафиксировать**, а затем **Commit all** (Фиксировать все). 
    > [!Note]
    > Каждый раз при создании или изменении правила нормализации следует запускать команду Сохранить все, чтобы опубликовать изменение конфигурации. Подробнее см. в [материале Публикация ожидающих изменений конфигурации маршрутивки голосовой маршрутики.](/previous-versions/office/lync-server-2013/lync-server-2013-publish-pending-changes-to-the-voice-routing-configuration) 

## <a name="create-or-modify-a-normalization-rule-manually"></a>Создание или изменение правила нормализации вручную

Выполните следующие действия, чтобы создать или изменить правило нормализации вручную.

**Определение правила нормализации вручную**

1. Войдите на компьютер как член группы RTCUniversalServerAdmins или роли CsVoiceAdministrator, CsServerAdministrator или CsAdministrator. Подробные сведения см. [в материале Уполномоченные разрешения на установку.](/previous-versions/office/lync-server-2013/lync-server-2013-delegate-setup-permissions)
2. Откройте окно браузера и введите URL-адрес администратора, чтобы открыть панель управления. Дополнительные сведения о различных методах, которые можно использовать для запуска панели управления Skype для бизнеса, см. в материале [Install и open administrative tools.](../../management-tools/install-and-open-administrative-tools.md)
3. (Необязательный) Выполните действия в ["Создание набора](GET LINK AFTER MIGRATION) номеров" с помощью шага 11 или [изменение](GET LINK AFTER MIGRATION) набора на этапе 10.  
4. В разделе **New Normalization Rule** (Создать правило нормализации) или **Edit Normalization Rule** (Изменить правило нормализации) в поле **Имя** введите шаблон нормализуемого номера (например, задайте имя правила нормализации **5DigitExtension**).
5. В поле **Описание** введите описание правила нормализации (например, "Преобразует 5-значные добавочные номера") (не обязательно).
6. В разделе **Build a Normalization Rule** (Создание правила нормализации) нажмите кнопку **Изменить**.
7. В разделе Type a Regular Expression (Введите регулярное выражение) введите следующие данные.
    - В поле **Match this pattern** (Соответствие этому шаблону) укажите шаблон, который требуется использовать для сопоставления набираемых номеров.
    - В поле **Translation rule** (Правило преобразования) укажите шаблон для формата преобразуемых номеров E.164.

    Например, если вы введите **^(\d {7} )$** в соответствие этому шаблону и **+1425$1** в правиле **перевода,** правило нормализует 5550100 до +14255550100. 

8. Если правило нормализации приводит к телефонному номеру, который является внутренним номером в организации, выберите **Внутренний добавочный номер** (не обязательно).
9. Введите номер для проверки правила нормализации и нажмите кнопку **Перейти** (необязательно). Результаты теста появятся под заголовком **Введите номер телефона для проверки**.

    > [!Note]
    > Можно сохранить правило нормализации, которое еще не прошло проверку, а затем изменить его настройки. Подробные сведения см. [в материале Test voice routing](/previous-versions/office/lync-server-2013/lync-server-2013-test-voice-routing). 

10. Нажмите кнопку **ОК**, чтобы сохранить правило нормализации.
11. Нажмите кнопку **ОК**, чтобы сохранить абонентскую группу.
12. На странице **Dial Plan** щелкните **Commi** t и нажмите кнопку **Фиксация всех**.