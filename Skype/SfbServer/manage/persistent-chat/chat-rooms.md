---
title: Управление комнатами чатов в persistent Chat Server в Skype для бизнеса Server 2015 г.
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
ms.date: 1/31/2018
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
ms.localizationpriority: medium
ms.assetid: 7b2e1302-280c-4efe-9ec8-787687b414da
description: Сводка. Узнайте, как управлять комнатами чата сохраняемой чат-сервера в Skype для бизнеса Server 2015 г.
ms.openlocfilehash: 928fef65d63165721957ca0622b959860d82704e
ms.sourcegitcommit: 556fffc96729150efcc04cd5d6069c402012421e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2021
ms.locfileid: "58630573"
---
# <a name="manage-chat-rooms-in-persistent-chat-server-in-skype-for-business-server-2015"></a>Управление комнатами чатов в persistent Chat Server в Skype для бизнеса Server 2015 г.
 
**Сводка:** Узнайте, как управлять комнатами чатов с постоянными чатами в Skype для бизнеса Server 2015 г.
  
Создание и управление комнатами чатов намного проще при правильном использовании категорий. Категория определяет, кто может создавать или присоединяться к чатам. Прежде чем пытаться управлять комнатами чатов, обязательно ознакомьтесь с категориями постоянных чатов, чатами и ролями пользователей в [Skype для бизнеса Server 2015](../../plan-your-deployment/persistent-chat-server/categories-chat-rooms-and-user-roles.md) г. и категориями Manage в Persistent Chat Server в [Skype для бизнеса Server 2015](categories.md)г. .
  
> [!NOTE]
> Постоянный чат доступен в Skype для бизнеса Server 2015 г., но больше не поддерживается Skype для бизнеса Server 2019 г. Такая же функциональность доступна в Teams. Дополнительные сведения см. в ссылке Начало работы [с обновлением Microsoft Teams обновления.](/microsoftteams/upgrade-start-here) Если вам нужно использовать постоянный чат, вы можете либо перенести пользователей, требующих Teams, либо продолжить использование Skype для бизнеса Server 2015 г. 

Вы можете настроить и управлять комнатами чата с Windows PowerShell интерфейсом командной строки или с помощью Skype для бизнеса клиента, если вы член комнаты чата. В этом разделе описывается управление комнатами чатов с помощью интерфейса Windows PowerShell командной строки. Если вы хотите управлять комнатами чатов с помощью Skype для бизнеса клиента, см. в справке клиента. 
  
Комнаты чата могут быть одним из двух типов: нормальный и аудитории. Обычная комната чата позволяет всем участникам отправлять и читать сообщения. Аудитория — это тип комнаты чата, в которой могут размещаться только презентаторы, но каждый может читать.
  
Кто могут получать доступ к чатам и управлять ими, зависит от ролей пользователей следующим образом:
  
- Пользователи должны быть членами комнаты чата, чтобы иметь возможность отправлять и читать сообщения.
    
- Презентаторам разрешено размещать сообщения в аудиториях.
    
- Администраторы могут удалить старое содержимое (например, содержимое, размещенное до определенной даты) из любой комнаты чата, чтобы не дать базе данных сильно увеличиться в размерах. Администраторы также могут удалять или заменять сообщения, которые считаются неуместными для определенной комнаты чата.
    
- Сами пользователи, включая авторов сообщений, не могут удалять содержимое комнаты чата.
    
- Менеджеры комнат чата могут вносить изменения во все свойства комнат чата, включая отключение комнат. Однако руководители не могут удалить комнату или изменить категорию комнаты. 
    
- Только администраторы могут удалять чат после его создания.
    
Вы можете настроить и управлять комнатами чатов с помощью следующих Windows PowerShell:
  

|**Командлет**|**Описание**|
|:-----|:-----|
|New-CsPersistentChatRoom  <br/> |Создание новой комнаты чата  <br/> |
|Set-CsPersistentChatRoom  <br/> |Настройка параметров для существующего помещения; назначение пользователей и групп пользователей в комнату  <br/> |
|Get-CsPersistentChatRoom  <br/> |Извлечение сведений о комнатах  <br/> |
|Clear-CsPersistentChatRoom  <br/> |Очистка комнаты или сообщений из комнаты  <br/> |
|Remove-CsPersistentChatRoom  <br/> |Удаление комнаты  <br/> |
|Remove-CsPersistentChatMessage  <br/> |Удаление сообщений из комнаты  <br/> |
   
Вы используете комлет **New-CsPersistentChatRoom** для создания комнат чата и комлет **Set-CsPersistentChatRoom** для настройки существующей комнаты чата, включая добавление пользователей в комнату чата. Можно настроить следующие параметры для комнат чата:
  
- Отключено. Позволяет отключить или включить комнату чата. 
    
- Приглашения. Позволяет включить или отключить приглашения в чате, которые используются для уведомления пользователей, когда они были добавлены в качестве участников чата. Параметр по умолчанию для приглашений в наследии, из-за которого комната чата приняла параметр приглашения, настроенный в категории, к которой он принадлежит. Настройка параметра приглашения на ложный на уровне комнаты чата позволяет переопределять параметр категории. 
    
- Конфиденциальность. Позволяет указать, является ли комната чата открытой, закрытой или секретной. Открыть комнаты может любой желающий. Закрытые комнаты могут искать все, но доступ к ним могут получить только участники. Секретные комнаты можно искать и получать доступ только к членам комнаты. По умолчанию каждая новая комната изначально настроена как Закрытая.
    
- Введите. Позволяет указать, является ли комната чата обычной комнатой, которая принимает сообщения, которые размещены любым участником, или комнату аудитории, которая принимает сообщения, которые размещены только от презента.
    
- Addin. Позволяет связать ранее настроенную надстройку с комнатой чата, которая позволяет просматривать содержимое URL-адреса участниками во время участия.
    
В дополнение к перечисленным выше параметрам, в cmdlet **Set-CsPersistentChatRoom** можно назначить пользователей в комнату чата следующим образом:
  
- Участники. Настраивает членство для комнаты чата. Вы можете добавить или удалить отдельных или нескольких членов с помощью одного комлета, указав SIP-адрес пользователей. Чтобы разрешить массовое добавление пользователей, можно также укаварить организационные единицы или группы рассылки Active Directory.
    
- Менеджеры. Позволяет назначать менеджеров в чат. У менеджеров есть разрешения на определение членства в чате наряду с другими настройками.
    
- Презентаторы. Позволяет назначать презентаторов в комнату чата Auditorium. 
    
  Подробные сведения о синтаксис, включая все параметры, см. в Skype для бизнеса Server [2015 года.](../management-shell.md)
  
## <a name="create-a-new-room"></a>Создание новой комнаты

Создать новую комнату можно с помощью **комлета New-CsPersistentChatRoom.** Например, следующая команда создает новую комнату чата с именем ITChatRoom в пуле atl-cs-001.contoso.com. В этом примере комната чата добавляется к категории ИТ:
  
```PowerShell
New-CsPersistentChatRoom -Name "ITChatRoom" -PersistentChatPoolFqdn "atl-cs-001.contoso.com"-Category "IT"
```

**Примечание:** PersistentChatPoolFqdn не требуется, если верно одно из следующих ниже: 
  
- Существует только один пул сохраняемой сервера чата.
    
- для категории указано полное доменное имя пула;
    
- для добавления комнаты указывается полное доменное имя пула.
    
## <a name="configure-an-existing-room"></a>Настройка существующей комнаты

Можно настроить существующую комнату с помощью **комлета Set-CsPersistentChatRoom.** Например, следующая команда назначает user1 в качестве члена и презентатора, а user2 в качестве диспетчера в аудитории testCat:
  
```PowerShell
Set-CsPersistentChatRoom -Identity testCat -Members @{Add="sip:user1@contoso.com", "CN=container,DC=contoso,DC=com"}
Set-CsPersistentChatRoom -Identity testCat -Presenters @{Add="sip:user1@contoso.com"}
Set-CsPersistentChatRoom -Identity testCat -Managers @{Add="sip:user2@contoso.com"}
```

 В следующем примере все пользователи из OU NorthAmericaUsers в active Directory добавляются в комнату чата NorthAmerica:
  
```PowerShell
Set-CsPersistentChatRoom -PersistentChatPoolFqdn "atl-cs-001.contoso.com\NorthAmerica" -Members @{Add="OU=NorthAmericaUsers,DC=contoso,DC=com"}
```

В следующем примере все участники группы рассылки "Финансы" добавляются в ту же комнату чата:
  
```PowerShell
Set-CsPersistentChatRoom -PersistentChatPoolFqdn "atl-cs-001.contoso.com\NorthAmerica" -Members @{Add="CN=Finance,OU=ExternalUsers,DC=contoso,DC=com"}
```

## <a name="disable-or-enable-a-room"></a>Отключение или включит комнату

Если тема сохраняемого чата больше не актуальна, вы можете сделать комнату чата недоступной для пользователей, отключив ее. Когда чат отключен, все подключенные на данный момент участники отключаются от него. Пользователи не могут снова подключиться к чату или найти его через поиск после его отключения.
  
Если история чата сохраняется, содержимое сохраняется при отключении комнаты чата. Тем не менее, содержимое не будет отображаться в поиске, пока чат остается в отключенном состоянии. Если включить чат позднее, пользователи смогут находить сообщения, опубликованные до того, как чат был отключен. Сведения о настройке истории комнат чата см. в рубрике Управление категориями в [persistent Chat Server Skype для бизнеса Server 2015 г.](categories.md) 
  
Если чат отключен, список его участников и другие параметры сохраняются. Как администратор вы можете включить отключенную комнату, и вам не нужно вручную повторно создавать параметры.
  
Вы можете отключить комнату с помощью комлета **Set-CsPersistentChatRoom** и задав параметру Отключение true:
  
```PowerShell
Set-CsPersistentChatRoom -Identity "atl-cs-001.contoso.com\ITChatRoom" -Disabled $True
```

Чтобы включить комнату чата, установите параметр Disabled false:
  
```PowerShell
Set-CsPersistentChatRoom -Identity "atl-cs-001.contoso.com\ITChatRoom" -Disabled $False
```

## <a name="get-information-about-rooms"></a>Сведения о комнатах

Чтобы получить сведения о комнатах, настроенных для использования в организации, можно использовать cmdlet **Get-CsPersistentChatRoom.**
  
Следующая команда возвращает сведения обо всех комнатах чата, настроенных для использования в организации:
  
```PowerShell
Get-CsPersistentChatRoom
```

## <a name="remove-all-content-from-a-room"></a>Удаление всего контента из комнаты

Вы можете удалить содержимое из комнаты с помощью **cmdlet Clear-CsPersistentChatRoom.** Например, следующая команда удаляет все содержимое из комнаты постоянных чатов ITChatRoom, которая была добавлена в комнату до 1 марта 2015 г.:
  
```PowerShell
Clear-CsPersistentChatRoom -Identity "atl-cs-001.contoso.com\ITChatRoom" -EndDate "3/1/2015"
```

## <a name="remove-a-message-from-a-room"></a>Удаление сообщения из комнаты

Вы можете удалить одно или несколько сообщений в базе данных сохраняемого чата и необязательно заменить сообщение сообщением по умолчанию или сообщением, предоставленным администратором, с помощью cmdlet **Remove-CsPersistentChatMessage.** Например, следующая команда удаляет все сообщения из комнаты чата ITChatRoom, которые были размещены пользователем kenmyer@contoso.com:
  
```PowerShell
Remove-CsPersistentChatMessage -Identity "atl-persistentchat-001.contoso.com\ITChatRoom" -UserUri "sip:kenmyer@contoso.com"
```

В следующем примере любые удалены сообщения заменяются примечанием о том, что сообщение больше не доступно:
  
```PowerShell
Remove-CsPersistentChatMessage -Identity "atl-persistentchat-001.contoso.com\ITChatRoom" -UserUri "sip:kenmyer@contoso.com" -ReplaceMessage "This message is no longer available."
```

## <a name="remove-a-room"></a>Удаление комнаты

Удалить комнату можно с помощью **комлета Remove-CsPersistentChatRoom.**
  
Например, следующая команда удаляет комнату чата RedmondChatRoom:
  
```PowerShell
Remove-CsPersistentChatRoom -Identity "atl-gc-001.contoso.com\RedmondChatRoom"
```

## <a name="move-a-room-from-one-category-to-another"></a>Перемещение комнаты из одной категории в другую

Если администратор чата имеет привилегии **Создателя** в другой категории, он может переместить комнату из одной категории в другую. Комната не удаляется и воссоздается. Это изменение связи с базой данных.
  
Изменение категории комнаты чата следует делать редко и с осторожностью. Категория определяет разрешенное членство в комнате чата, поэтому при перемещении комнаты чата в другую категорию все системные списки управления доступом (SACL), которые более не поддерживаются новой категорией, очищаются. Например, если пользователь был членом комнаты и больше не является разрешенным членом в новой категории, членство в комнате будет изменено и пользователь будет удален из комнаты.
  

