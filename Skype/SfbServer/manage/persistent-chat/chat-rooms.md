---
title: Управление комнатами чата на сервере сохраняемой беседы в Skype для бизнеса Server 2015
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
ms.date: 1/31/2018
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.assetid: 7b2e1302-280c-4efe-9ec8-787687b414da
description: Сводка. Узнайте, как управлять комнатами чата сервера сохраняемой беседы в Skype для бизнеса Server 2015.
ms.openlocfilehash: 2b1b2e3bdc3411a4bacae5f1dc81b626abb92a91
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/12/2021
ms.locfileid: "49815109"
---
# <a name="manage-chat-rooms-in-persistent-chat-server-in-skype-for-business-server-2015"></a>Управление комнатами чата на сервере сохраняемой беседы в Skype для бизнеса Server 2015
 
**Сводка:** Узнайте, как управлять комнатами чата сервера сохраняемой беседы в Skype для бизнеса Server 2015.
  
Создание комнат чата и управление им намного проще при правильном использовании категорий. Категория определяет, кто может создавать комнаты чата или присоединяться к ним. Прежде чем пытаться управлять комнатами чата, обязательно прочитайте категории сохраняемой беседы, комнаты чата и роли пользователей в Skype для бизнеса [Server 2015](../../plan-your-deployment/persistent-chat-server/categories-chat-rooms-and-user-roles.md) и управление категориями на сервере сохраняемой беседы в Skype для бизнеса [Server 2015.](categories.md)
  
> [!NOTE]
> Сохраняемая беседа доступна в Skype для бизнеса Server 2015, но больше не поддерживается в Skype для бизнеса Server 2019. Такие же функции доступны в Teams. Дополнительные сведения [см. в сведениях о том,](/microsoftteams/upgrade-start-here)как начать обновление Microsoft Teams. Если необходимо использовать сохраняемого чата, вы можете либо перенести пользователей, которым требуются эти функции, в Teams, либо продолжить использование Skype для бизнеса Server 2015. 

Вы можете настроить комнаты чата и управлять ими с помощью Windows PowerShell командной строки или клиента Skype для бизнеса, если вы входите в комнату чата. В этом разделе описывается, как управлять комнатами чата с Windows PowerShell интерфейса командной строки. Если вы хотите управлять комнатами чата с помощью клиента Skype для бизнеса, см. справку по клиенту. 
  
Комнаты чата могут иметь один из двух типов: обычный и аудитории. Обычная комната чата позволяет всем участникам размещать и читать сообщения. Аудитория — это тип комнаты чата, в которой только presenters могут размещать публикации, но все могут читать.
  
Доступ к комнатам чата и управление ими зависит от ролей пользователей следующим образом:
  
- Пользователи должны быть членами комнаты чата, чтобы иметь возможность размещать и читать сообщения.
    
- Presenters are allowed to post to Auditorium rooms.
    
- Администраторы могут удалить старое содержимое (например, содержимое, размещенное до определенной даты) из любой комнаты чата, чтобы не дать базе данных сильно увеличиться в размерах. Администраторы также могут удалять или заменять сообщения, которые считаются недопустимыми для определенной комнаты чата.
    
- Сами пользователи, включая авторов сообщений, не могут удалять содержимое комнаты чата.
    
- Менеджеры комнат чата могут вносить изменения во все свойства комнат чата, включая отключение комнат. Однако менеджеры не могут удалить комнату или изменить категорию комнаты. 
    
- Только администраторы могут удалить комнату чата после ее создания.
    
Настроить комнаты чата и управлять ими можно с помощью следующих Windows PowerShell:
  

|**Командлет**|**Описание**|
|:-----|:-----|
|New-CsPersistentChatRoom  <br/> |Создание комнаты чата  <br/> |
|Set-CsPersistentChatRoom  <br/> |Настройка параметров существующей комнаты; назначение пользователей и групп пользователей комнате  <br/> |
|Get-CsPersistentChatRoom  <br/> |Извлечение сведений о комнатах  <br/> |
|Clear-CsPersistentChatRoom  <br/> |Очистка комнаты или сообщений из комнаты  <br/> |
|Remove-CsPersistentChatRoom  <br/> |Удаление комнаты  <br/> |
|Remove-CsPersistentChatMessage  <br/> |Удаление сообщений из комнаты  <br/> |
   
С помощью **new-CsPersistentChatRoom** можно создавать комнаты чата, а **set-CsPersistentChatRoom** — для настройки существующей комнаты чата, включая добавление пользователей в комнату чата. Для комнат чата можно настроить следующие параметры:
  
- Отключено. Позволяет отключить или включить комнату чата. 
    
- Приглашения. Позволяет включить или отключить приглашения в комнаты чата, которые используются для уведомления пользователей о добавлении их в качестве участников комнаты чата. Параметр по умолчанию для приглашений в наследуется, что привело к тому, что комната чата приняла параметр приглашения, настроенный для категории, к которой она принадлежит. Настройка для параметра приглашений false на уровне комнаты чата позволяет переопределять параметр категории. 
    
- Конфиденциальность. Позволяет указать, является ли комната чата открытой, закрытой или секретной. Открытые комнаты могут искать и получать доступ любой. Закрытые комнаты могут искать все, но доступ к ним могут получить только участники. Поиск в секретных комнатах и доступ к ним могут получить только члены комнаты. По умолчанию каждая новая комната изначально настроена как закрытая.
    
- Тип. Позволяет указать, является ли комната чата обычной комнатой, которая принимает сообщения, которые опубликовал какой-либо член, или комнатой аудитории, которая принимает сообщения, которые были опубликованы только для presenter.
    
- Addin. Позволяет связать ранее настроенную надстройку с комнатой чата, что позволяет участникам просматривать содержимое URL-адреса во время участия.
    
В дополнение к перечисленным выше параметрам, с помощью cmdlet **Set-CsPersistentChatRoom** можно назначать пользователей комнате чата следующим образом:
  
- Участники. Настраивает членство для комнаты чата. С помощью одного или нескольких членов можно добавить или удалить отдельные члены, указав SIP-адрес пользователей. Чтобы разрешить массовое добавление пользователей, можно также у указывает подразделения или группы рассылки Active Directory.
    
- Менеджеры. Позволяет назначать менеджеров комнате чата. Менеджеры имеют разрешения на определение членства в комнате чата вместе с другими настройками.
    
- Presenters. Позволяет назначать presenters комнате чата аудитории. 
    
  Подробные сведения о синтаксисе, включая все параметры, см. в руководстве [по skype для бизнеса Server 2015 Management Shell.](../management-shell.md)
  
## <a name="create-a-new-room"></a>Создание комнаты

Вы можете создать новую комнату с помощью **cmdlet New-CsPersistentChatRoom.** Например, следующая команда создает новую комнату чата с именем ITChatRoom в пуле atl-cs-001.contoso.com. В этом примере комната чата добавляется в ИТ-категорию:
  
```PowerShell
New-CsPersistentChatRoom -Name "ITChatRoom" -PersistentChatPoolFqdn "atl-cs-001.contoso.com"-Category "IT"
```

**Примечание.** PersistentChatPoolFqdn не требуется, если имеется одно из следующих ва. 
  
- Существует только один пул серверов сохраняемой беседы.
    
- для категории указано полное доменное имя пула;
    
- для добавления комнаты указывается полное доменное имя пула.
    
## <a name="configure-an-existing-room"></a>Настройка существующей комнаты

Существующую комнату можно настроить с помощью **cmdlet Set-CsPersistentChatRoom.** Например, следующая команда назначает user1 в качестве участника и presenter, а пользователя user2 — в качестве руководителя комнаты аудитории testCat:
  
```PowerShell
Set-CsPersistentChatRoom -Identity testCat -Members @{Add="sip:user1@contoso.com", "CN=container,DC=contoso,DC=com"}
Set-CsPersistentChatRoom -Identity testCat -Presenters @{Add="sip:user1@contoso.com"}
Set-CsPersistentChatRoom -Identity testCat -Managers @{Add="sip:user2@contoso.com"}
```

 В следующем примере в комнату чата NorthAmerica добавляются все пользователи из OU NorthAmericaUsers в active Directory:
  
```PowerShell
Set-CsPersistentChatRoom -PersistentChatPoolFqdn "atl-cs-001.contoso.com\NorthAmerica" -Members @{Add="OU=NorthAmericaUsers,DC=contoso,DC=com"}
```

В следующем примере все члены группы рассылки Finance добавляются в ту же комнату чата:
  
```PowerShell
Set-CsPersistentChatRoom -PersistentChatPoolFqdn "atl-cs-001.contoso.com\NorthAmerica" -Members @{Add="CN=Finance,OU=ExternalUsers,DC=contoso,DC=com"}
```

## <a name="disable-or-enable-a-room"></a>Отключение или включит комнату

Если тема комнаты сохраняемого чата больше не актуальна, вы можете сделать комнату чата недоступной для пользователей, отключив ее. Когда чат отключен, все подключенные на данный момент участники отключаются от него. Пользователи не могут снова подключиться к чату или найти его через поиск после его отключения.
  
Если история комнаты чата сохраняется, содержимое сохраняется, когда комната чата отключена. Тем не менее, содержимое не будет отображаться в поиске, пока чат остается в отключенном состоянии. Если включить чат позднее, пользователи смогут находить сообщения, опубликованные до того, как чат был отключен. For information about configuring chat room history, see [Manage categories in Persistent Chat Server in Skype for Business Server 2015](categories.md). 
  
Если чат отключен, список его участников и другие параметры сохраняются. Как администратор вы можете включить отключенную комнату, и вам не нужно вручную повторно создавать параметры.
  
Вы можете отключить комнату с помощью cmdlet **Set-CsPersistentChatRoom** и установить для параметра Disabled true:
  
```PowerShell
Set-CsPersistentChatRoom -Identity "atl-cs-001.contoso.com\ITChatRoom" -Disabled $True
```

Чтобы включить комнату чата, установите для параметра Disabled параметр False:
  
```PowerShell
Set-CsPersistentChatRoom -Identity "atl-cs-001.contoso.com\ITChatRoom" -Disabled $False
```

## <a name="get-information-about-rooms"></a>Получить сведения о комнатах

Для получения сведений о комнатах, настроенных для использования в организации, можно использовать cmdlet **Get-CsPersistentChatRoom.**
  
Следующая команда возвращает сведения обо всех комнатах чата, настроенных для использования в организации:
  
```PowerShell
Get-CsPersistentChatRoom
```

## <a name="remove-all-content-from-a-room"></a>Удаление всего содержимого из комнаты

Удалить содержимое из комнаты можно с помощью **cmdlet Clear-CsPersistentChatRoom.** Например, следующая команда удаляет все содержимое из комнаты сохраняемой беседы ITChatRoom, которая была добавлена в комнату 1 марта 2015 г. или до 1 марта 2015 г.:
  
```PowerShell
Clear-CsPersistentChatRoom -Identity "atl-cs-001.contoso.com\ITChatRoom" -EndDate "3/1/2015"
```

## <a name="remove-a-message-from-a-room"></a>Удаление сообщения из комнаты

Можно удалить одно или несколько сообщений в базе данных сохраняемого чата и при необходимости заменить сообщение на сообщение по умолчанию или сообщение, предоставленное администратором, с помощью cmdlet **Remove-CsPersistentChatMessage.** Например, следующая команда удаляет все сообщения из чата ITChatRoom, которые были опубликованы пользователем kenmyer@contoso.com:
  
```PowerShell
Remove-CsPersistentChatMessage -Identity "atl-persistentchat-001.contoso.com\ITChatRoom" -UserUri "sip:kenmyer@contoso.com"
```

В следующем примере все удаленые сообщения заменяются примечанием о том, что сообщение больше не доступно:
  
```PowerShell
Remove-CsPersistentChatMessage -Identity "atl-persistentchat-001.contoso.com\ITChatRoom" -UserUri "sip:kenmyer@contoso.com" -ReplaceMessage "This message is no longer available."
```

## <a name="remove-a-room"></a>Удаление комнаты

Удалить комнату можно с помощью **cmdlet Remove-CsPersistentChatRoom.**
  
Например, следующая команда удаляет комнату чата RedmondChatRoom:
  
```PowerShell
Remove-CsPersistentChatRoom -Identity "atl-gc-001.contoso.com\RedmondChatRoom"
```

## <a name="move-a-room-from-one-category-to-another"></a>Перемещение комнаты из одной категории в другую

Если менеджер комнаты  чата имеет права создателя в другой категории, он может переместить комнату из одной категории в другую. Комната не удаляется и воссоздается. Это изменение связи с базой данных.
  
Изменение категории комнаты чата следует делать редко и с осторожностью. Категория определяет разрешенное членство в комнате чата, поэтому при перемещении комнаты чата в другую категорию все системные списки управления доступом (SACL), которые более не поддерживаются новой категорией, очищаются. Например, если пользователь был членом комнаты и больше не является разрешенным членом в новой категории, членство в комнате будет изменено, а пользователь будет удален из комнаты.
  

