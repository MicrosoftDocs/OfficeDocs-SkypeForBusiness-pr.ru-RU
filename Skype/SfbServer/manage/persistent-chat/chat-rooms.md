---
title: Управление комнатами чата на сервере сохраняемого чата в Skype для бизнеса Server 2015
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.date: 1/31/2018
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.assetid: 7b2e1302-280c-4efe-9ec8-787687b414da
description: 'Сводка: сведения о том, как управлять сохраняемыми комнатами чата на сервере в Skype для бизнеса Server 2015.'
ms.openlocfilehash: b19b230aa4b83e9bd1b84b6be50a27cf665de788
ms.sourcegitcommit: e64c50818cac37f3d6f0f96d0d4ff0f4bba24aef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2020
ms.locfileid: "41817285"
---
# <a name="manage-chat-rooms-in-persistent-chat-server-in-skype-for-business-server-2015"></a>Управление комнатами чата на сервере сохраняемого чата в Skype для бизнеса Server 2015
 
**Сводка:** Сведения о том, как управлять сохраняемыми комнатами чата в Skype для бизнеса Server 2015.
  
Создание комнат комнат чата и управление ими осуществляется значительно проще благодаря правильному использованию категорий. Категория определяет, кто может создавать комнаты чата или присоединяться к ним. Перед тем как приступить к управлению комнатами чата, не забудьте прочитать [категории сохраняемого чата, комнаты чата и роли пользователей в Skype для бизнеса server 2015](../../plan-your-deployment/persistent-chat-server/categories-chat-rooms-and-user-roles.md) и [Управляйте категориями на сервере сохраняемого чата в Skype для бизнеса Server 2015](categories.md).
  
> [!NOTE]
> Сохраняемый чат доступен в Skype для бизнеса Server 2015, но больше не поддерживается в Skype для бизнеса Server 2019. Такие же функции доступны в Teams. Дополнительные сведения см. в статье [Начало перехода на Microsoft Teams](/microsoftteams/upgrade-start-here). Если вам нужно использовать сохраняемый чат, то вы можете либо перенести пользователей, которым нужна эта функция, в Teams, либо продолжать использовать Skype для бизнеса Server 2015. 

Вы можете настраивать комнаты чата и управлять ими с помощью интерфейса командной строки Windows PowerShell или с помощью клиента Skype для бизнеса, если вы являетесь участником комнаты чата. В этом разделе описываются способы управления комнатами с помощью интерфейса командной строки. Если вы хотите управлять комнатами чата с помощью клиента Skype для бизнеса, ознакомьтесь со справкой клиента. 
  
Комнаты чата могут иметь один из двух типов: Normal и Аудиториум. В обычной комнате передавать и отправлять сообщения разрешается всем членам. В комнату-аудиторию могут отправлять сообщения только выступающие, а остальные пользователи могут их читать.
  
Возможность доступа и управления комнатами чата зависит от пользовательских ролей следующим образом:
  
- Чтобы отправлять и читать сообщения, пользователи должны быть членами комнаты чата.
    
- Выступающим разрешено передавать сообщения в комнаты-аудитории.
    
- Администраторы могут удалять старое содержимое (например, содержимое, размещенное до определенной даты) из любой комнаты чата, чтобы база данных сильно не увеличивалась в размерах. Кроме того, они могут удалить или заменить сообщения, которые кажутся несоответствующими данной комнате чата.
    
- Сами пользователи, включая авторов сообщений, не могут удалять содержимое комнаты чата.
    
- Диспетчеры комнат чата могут вносить изменения в любые свойства комнат (включая отключение комнат). Но диспетчер комнаты чата не может удалить комнату или изменить ее категорию. 
    
- Только администраторы могут удалить комнату чата после ее создания.
    
Настраивать комнаты чата и управлять ими можно с помощью следующих командлетов Windows PowerShell:
  

|**Командлет**|**Описание**|
|:-----|:-----|
|New-CsPersistentChatRoom  <br/> |Создание новой комнаты чата.  <br/> |
|Set-CsPersistentChatRoom  <br/> |Настройка параметров существующей комнаты; назначение пользователей и групп пользователей комнате  <br/> |
|Get-CsPersistentChatRoom  <br/> |Получение сведений о комнатах  <br/> |
|Clear-CsPersistentChatRoom  <br/> |Очистка комнаты или очистка сообщений в комнате  <br/> |
|Remove-CsPersistentChatRoom  <br/> |Удаление комнаты  <br/> |
|Remove-CsPersistentChatMessage  <br/> |Удаление сообщений из комнаты  <br/> |
   
Командлет **New-CsPersistentChatRoom** используется для создания комнат чата, а командлет **Set-CsPersistentChatRoom** — для настройки существующей комнаты чата, включая добавление к ней пользователей. Можно настроить следующие параметры комнаты чата:
  
- Disabled. Позволяет отключить или включить комнату чата. 
    
- Окон. Позволяет включать или отключать приглашения на комнату чата, которые используются для уведомления пользователей о том, что они были добавлены как участники комнаты чата. Настройка по умолчанию для приглашений наследовать, что приводит к тому, что комната чата применяет настройки приглашения, настроенные для категории, к которой он относится. Настройка "ложь" для параметра "приглашения" на уровне комнаты чата позволяет переопределить параметр Category. 
    
- Privacy. Позволяет указать, будет ли комната чата открытой, закрытой или секретной. Открытые комнаты могут отыскивать и использовать любые пользователи. Закрытые комнаты могут отыскивать любые пользователи, но доступны они только их членам. Секретные комнаты могут отыскивать и использовать только члены комнат. По умолчанию все новые комнаты исходно настроены как закрытые.
    
- Type. Позволяет указать, является ли комната чата обычной комнатой, которая принимает сообщения, опубликованные любым пользователем, или Аудиториум комнату, которая принимает сообщения, отправленные только выступающей.
    
- Addin. Позволяет связать ранее настроенную надстройку с комнатой чата, что позволяет членам комнаты, участвующим в беседе, просматривать содержимое по URL-адресам.
    
Помимо описанных выше параметров командлет **Set-ксперсистентчатрум** позволяет назначать пользователей в комнату чата следующим образом:
  
- Members. Задает членство для комнаты чата. Вы можете добавить или удалить одного или нескольких членов с помощью одного командлета, указав SIP-адрес пользователей. Чтобы разрешить добавление группы пользователей, можно также указать организационные подразделения или группы рассылки Active Directory.
    
- Managers. Позволяет назначать диспетчеров в комнату чата. Диспетчеры обладают полномочиями определять членство комнаты чата наряду с установкой других параметров.
    
- Presenters. Позволяет назначать выступающих комнате-аудитории чата. 
    
  Дополнительные сведения о синтаксисе, включая все параметры, см. в разделе [Skype for Business Server 2015 Management Shell](../management-shell.md).
  
## <a name="create-a-new-room"></a>Создание новой комнаты

Создать новую комнату можно с помощью командлета **New-CsPersistentChatRoom**. Например, следующая команда создаст новую комнату чата с именем ITChatRoom в пуле atl-cs-001.contoso.com. В данном примере комната чата добавлена в категорию IT:
  
```PowerShell
New-CsPersistentChatRoom -Name "ITChatRoom" -PersistentChatPoolFqdn "atl-cs-001.contoso.com"-Category "IT"
```

**Примечание.** Персистентчатпулфкдн не требуется, если выполняется одно из следующих условий: 
  
- Существует только один пул серверов сохраняемого чата.
    
- для категории указано полное доменное имя пула;
    
- для добавления комнаты указывается полное доменное имя пула.
    
## <a name="configure-an-existing-room"></a>Настройка существующей комнаты

Вы можете настроить существующую комнату с помощью командлета **Set-ксперсистентчатрум** . Например, с помощью следующей команды вы назначаете Пользователь1 в качестве участника и докладчика, а затем Пользователь2 в качестве руководителя в комнате Тесткат Аудиториум:
  
```PowerShell
Set-CsPersistentChatRoom -Identity testCat -Members @{Add="sip:user1@contoso.com", "CN=container,DC=contoso,DC=com"}
Set-CsPersistentChatRoom -Identity testCat -Presenters @{Add="sip:user1@contoso.com"}
Set-CsPersistentChatRoom -Identity testCat -Managers @{Add="sip:user2@contoso.com"}
```

 В следующем примере выполняется добавление в комнату чата NorthAmerica всех пользователей подразделения NorthAmericaUsers OU в Active Directory:
  
```PowerShell
Set-CsPersistentChatRoom -PersistentChatPoolFqdn "atl-cs-001.contoso.com\NorthAmerica" -Members @{Add="OU=NorthAmericaUsers,DC=contoso,DC=com"}
```

В следующем примере все участники группы рассылки Finance добавляются в ту же комнату чата:
  
```PowerShell
Set-CsPersistentChatRoom -PersistentChatPoolFqdn "atl-cs-001.contoso.com\NorthAmerica" -Members @{Add="CN=Finance,OU=ExternalUsers,DC=contoso,DC=com"}
```

## <a name="disable-or-enable-a-room"></a>Отключение или включение комнаты чата

Если тема сохраняемой комнаты чата больше не нужна, вы можете сделать ее недоступной для пользователей, отключив ее. Если комната чата отключена, все подключенные на данный момент участники отключаются от нее. Пользователи не могут снова подключиться к комнате чата или найти ее через поиск после ее отключения.
  
Если история комнаты чата сохраняется, содержимое сохраняется, когда комната чата отключена. Но содержимое не будет отображаться в поиске, пока комната чата остается в отключенном состоянии. Если включить ее позднее, пользователи смогут находить сообщения, опубликованные до того, как комната чата была отключена. Сведения о настройке журнала комнаты чата можно найти [в разделе Управление категориями на сервере сохраняемого чата в Skype для бизнеса Server 2015](categories.md). 
  
Если комната чата отключена, список ее членов и другие параметры сохраняются. При повторном включении вам, как администратору, не потребуется создавать их вручную повторно.
  
Вы можете отключить комнату с помощью командлета **Set-ксперсистентчатрум** и задать для параметра Disabled значение true.
  
```PowerShell
Set-CsPersistentChatRoom -Identity "atl-cs-001.contoso.com\ITChatRoom" -Disabled $True
```

Чтобы разрешить использование комнаты чата, задайте параметру Disabled значение False:
  
```PowerShell
Set-CsPersistentChatRoom -Identity "atl-cs-001.contoso.com\ITChatRoom" -Disabled $False
```

## <a name="get-information-about-rooms"></a>Получение сведений о комнатах

Получить сведения о комнатах, настроенных для использования в организации, можно с помощью командлета **Get-CsPersistentChatRoom**.
  
Следующая команда возвращает сведения обо всех настроенных в организации комнатах чата:
  
```PowerShell
Get-CsPersistentChatRoom
```

## <a name="remove-all-content-from-a-room"></a>Удаление всего содержимого из комнаты

Удалить содержимое из комнаты можно с помощью командлета **Clear-CsPersistentChatRoom**. Например, следующая команда удалит из комнаты сохраняемого чата все содержимое, добавленное в нее до 1 марта 2015 г. включительно:
  
```PowerShell
Clear-CsPersistentChatRoom -Identity "atl-cs-001.contoso.com\ITChatRoom" -EndDate "3/1/2015"
```

## <a name="remove-a-message-from-a-room"></a>Удаление сообщения из комнаты

Можно удалить одно или несколько сообщений из комнаты сохраняемого чата и при необходимости заменить какое-либо сообщение на стандартное или предоставленное администратором сообщение с помощью командлета **Remove-CsPersistentChatMessage**. Например, следующая команда удалит из комнаты чата ITChatRoom все сообщения, переданные пользователем kenmyer@contoso.com:
  
```PowerShell
Remove-CsPersistentChatMessage -Identity "atl-persistentchat-001.contoso.com\ITChatRoom" -UserUri "sip:kenmyer@contoso.com"
```

В следующем примере вместо удаленных сообщений отображается примечание о том, что сообщение уже не доступно:
  
```PowerShell
Remove-CsPersistentChatMessage -Identity "atl-persistentchat-001.contoso.com\ITChatRoom" -UserUri "sip:kenmyer@contoso.com" -ReplaceMessage "This message is no longer available."
```

## <a name="remove-a-room"></a>Удаление комнаты

Удалить комнату можно с помощью командлета **Remove-CsPersistentChatRoom**.
  
Например, следующая команда удалит комнату чата RedmondChatRoom:
  
```PowerShell
Remove-CsPersistentChatRoom -Identity "atl-gc-001.contoso.com\RedmondChatRoom"
```

## <a name="move-a-room-from-one-category-to-another"></a>Перемещение комнаты из одной категории в другую

Если диспетчер комнаты чата имеет привилегии **автора** в другой категории, то он может переместить комнату из одной категории в другую. Комната не удаляется и воссоздается. Это изменение связи с базой данных.
  
Изменение категории комнаты должно происходить редко и с осторожностью. Категория определяет разрешенное членство в комнате чата, поэтому при перемещении комнаты чата в другую категорию все системные списки управления доступом (SACL), которые более не поддерживаются новой категорией, очищаются. Например, если пользователь был членом комнаты и больше не относится к разрешенным участникам в новой категории, членство комнаты будет изменено, а пользователь будет удален из комнаты.
  

