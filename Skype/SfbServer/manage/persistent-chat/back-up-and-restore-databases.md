---
title: Резервное копирование и восстановление баз данных сохраняемого чата в Skype для бизнеса Server 2015
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.date: 3/28/2016
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.assetid: 4f2b689b-7f15-48dc-a069-da7bc8527def
description: Сводка. сведения о том, как архивировать и восстанавливать сохраняемые базы данных сервера чата в Skype для бизнеса Server 2015.
ms.openlocfilehash: 9da64a3ba6f6ad8053faebf0d536a610e02cce8f
ms.sourcegitcommit: e64c50818cac37f3d6f0f96d0d4ff0f4bba24aef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2020
ms.locfileid: "41817345"
---
# <a name="back-up-and-restore-persistent-chat-databases-in-skype-for-business-server-2015"></a>Резервное копирование и восстановление баз данных сохраняемого чата в Skype для бизнеса Server 2015
 
**Сводка:** Сведения о том, как архивировать и восстанавливать сохраняемые базы данных сервера чата в Skype для бизнеса Server 2015.
  
Для сервера сохраняемого чата требуется, чтобы программа базы данных SQL Server содержала данные комнаты чата, такие как журнал и содержимое, конфигурация, подготовка пользователей и другие необходимые метаданные. Кроме того, если в вашей организации есть нормативы, для которых требуется архивировать действия сохраняемого чата и включена служба соответствия требованиям, программное обеспечение баз данных SQL Server используется для хранения данных о соответствии требованиям, в том числе содержания и событий чата, например присоединение к комнатам и выход из нее. Содержимое комнаты чата хранится в базе данных сохраняемого чата (MGC). Данные о соответствии хранятся в базе данных соответствия (mgccomp). Необходимо регулярно создавать резервные копии этих критически важных для бизнеса данных. 
  
> [!NOTE]
> Сохраняемый чат доступен в Skype для бизнеса Server 2015, но больше не поддерживается в Skype для бизнеса Server 2019. Такие же функции доступны в Teams. Дополнительные сведения см. в статье [Начало перехода на Microsoft Teams](/microsoftteams/upgrade-start-here). Если вам нужно использовать сохраняемый чат, то вы можете либо перенести пользователей, которым нужна эта функция, в Teams, либо продолжать использовать Skype для бизнеса Server 2015. 

## <a name="back-up-the-databases"></a>Резервное копирование баз данных

Существует два способа резервного копирования данных сохраняемого чата. 
  
- Резервное копирование SQL Server
    
- Командлет **Export-ксперсистентчатдата** , который экспортирует сохраняемые данные чата в виде файла
    
Для данных, созданных с помощью резервного копирования SQL Server, требуется значительно больше места на диске (возможно, до 20 раз больше), чем для данных, созданных с помощью командлета **Export-CsPersistentChatData**, но ваше знакомство с процедурой резервного копирования SQL Server более вероятно.
  
Чтобы использовать процедуры резервного копирования SQL, см. подробнее в документации по SQL. 
  
Если планируется использовать командлет **Export-CsPersistentChatData**, данную команду можно указать следующим образом:
  
```PowerShell
Export-CsPersistentChatData [-FileName <String>] <COMMON PARAMETERS>
```

или
  
```PowerShell
Export-CsPersistentChatData [-AsBytes <SwitchParameter>] <COMMON PARAMETERS>
```

Например, приведенная ниже команда экспортирует данные сохраняемого чата из базы данных сохраняемого чата, расположенной на сервере atl-sql-001.contoso.com. Экспортируемые данные будут храниться в файле C:\Logs\PersistentChatData.zip. Поскольку параметр Level не задан, данная команда будет выполнять полный экспорт сведений о сохраняемом чате.
  
```PowerShell
Export-CsPersistentChatData -DBInstance "atl-sql-001.contoso.com\rtc" -FileName "C:\Logs\PersistentChatData.zip"
```

## <a name="restore-the-databases"></a>Восстановление баз данных

Способ восстановления сохраняемых данных чата зависит от того, какой метод вы использовали для архивации. Если были использованы процедуры резервного копирования SQL Server, необходимо использовать процедуры восстановления SQL Server. Если вы использовали командлет **Export-ксперсистентчатдата** для резервного копирования сохраненных данных чата, необходимо использовать командлет **Import-ксперсистентчатдата** для восстановления данных.
  
```PowerShell
Import-CsPersistentChatData -FileName <String> <COMMON PARAMETERS>
```

или
  
```PowerShell
Import-CsPersistentChatData -ByteInput <Byte > <COMMON PARAMETERS>
```
