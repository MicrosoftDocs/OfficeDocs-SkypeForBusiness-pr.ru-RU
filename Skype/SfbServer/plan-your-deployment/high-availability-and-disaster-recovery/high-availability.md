---
title: Высокая доступность и управление пулом переднего плана
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 965041b7-3136-49f2-89c1-8b30417cb8ea
description: Узнайте о внешнем интерфейсе управления пулом в Skype для бизнеса Server, включая Управление пулами, потерю кворума и особые действия для пулов с двумя серверами переднего плана.
ms.openlocfilehash: debc0700a142789f542e4b4357da4427ce74c050
ms.sourcegitcommit: ab47ff88f51a96aaf8bc99a6303e114d41ca5c2f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/20/2019
ms.locfileid: "34297472"
---
# <a name="front-end-pool-high-availability-and-management"></a>Высокая доступность и управление пулом переднего плана
 
Узнайте о внешнем интерфейсе управления пулом в Skype для бизнеса Server, включая Управление пулами, потерю кворума и особые действия для пулов с двумя серверами переднего плана.
  
В Skype для бизнеса Server архитектура пулов переднего плана использует модель распределенных систем, при этом данные каждого пользователя хранятся в пуле на три внешних сервера. Рекомендуется, чтобы все пулы переднего плана Enterprise Edition включали не менее трех серверов переднего плана. 
  
## <a name="planning-for-the-management-of-front-end-pools"></a>Планирование управления интерфейсными пулами

 В Skype для бизнеса Server используется модель распределенных систем, основанная на Windows Fabric. В этой модели важные данные для каждого пользователя и конференции хранятся на трех серверных серверах в пуле переднего плана. Эти три сервера, которые сохраняют определенный набор данных, калледрепликас.
  
С помощью распределенной модели для пулов интерфейсов с внешним интерфейсом должны быть запущены определенные числа серверов пула для работы пула. Существует два режима потерь для пула.
  
- Нехватка кворума на уровне группы маршрутизации, что вызвано недостаточным количеством серверов-реплик для определенной группы маршрутизации. Группа маршрутизации — это группа пользователей, размещенных в пуле. Каждая группа маршрутизации имеет три реплики в пуле: одна главная и две дополнительные.
    
- Нехватка кворума на уровне пула, что вызвано недостаточным количеством серверов инициализации в пуле. 
    
### <a name="routing-group-level-quorum-loss"></a>Нехватка кворума на уровне группы маршрутизации

При первом запуске нового интерфейсного пула необходимо, чтобы 85% серверов были установлены и запущены, как показано в следующей таблице. Если запущено меньшее количество серверов, службы могут зависнуть в состоянии запуска, а пул может вообще не запуститься.
  
|Общее количество серверов в пуле  <br/> |Количество запущенных серверов, которое требуется для первого запуска пула  <br/> |
|:-----|:-----|
|2  <br/> |1  <br/> |
|3  <br/> |3  <br/> |
|4  <br/> |3  <br/> |
|5  <br/> |4  <br/> |
|6  <br/> |5  <br/> |
|7  <br/> |5  <br/> |
|No8  <br/> |6  <br/> |
|@  <br/> |7  <br/> |
|5-10  <br/> |No8  <br/> |
|11  <br/> |@  <br/> |
|12  <br/> |5-10  <br/> |
   
При каждом последующем запуске пула 85% серверов должны быть запущены (как показано на таблице выше). Если количество серверов не может быть запущено (но может быть запущено достаточно свободного места на кворуме на уровне пула), вы можете использовать его `Reset-CsPoolRegistrarState -ResetType QuorumLossRecovery` , чтобы разрешить восстановление пула из-за потери кворума на уровне группы маршрутизации и выполнение. Дополнительные сведения о том, как использовать этот командлет, можно <link Reset-CsPoolRegistrarState>найти в разделе.
  
> [!NOTE]
> В пулах с одинаковым количеством серверов Skype для бизнеса Server использует основную базу данных SQL в качестве следящего сервера. В таком пуле, если будет закрыта основная база данных, выполнено переключение на зеркальную копию и отключено достаточно серверов переднего плана, перечисленных в таблице выше, то весь пул будет остановлен. Дополнительные сведения можно найти в разделе [следящий сервер зеркального отображения базы данных](https://go.microsoft.com/fwlink/?LinkId=393672). 
  
#### <a name="pool-level-quorum-loss"></a>Нехватка кворума на уровне пула

Для пула интерфейсов переднего плана не может быть потеря кворума на уровне пула. Если число работающих серверов становится ниже указанного в таблице функционального уровня, оставшиеся серверы в пуле остановят все службы Skype для бизнеса Server. Обратите внимание, что в приведенных ниже таблицах предполагается, что сервер в пуле запущен.
  
|Общее количество серверов переднего плана в пуле  <br/> |Число работающих серверов, требуемое для правильного функционирования пула  <br/> |
|:-----|:-----|
|2  <br/> |1  <br/> |
|3-4  <br/> |Любые 2  <br/> |
|5-6  <br/> |Любые 3  <br/> |
|7  <br/> |Любые 4  <br/> |
|8-9  <br/> |Любые 4 из первых 7 серверов  <br/> |
|10–12  <br/> |Любые 5 из первых 9 серверов  <br/> |
   
В предыдущей таблице "первые серверы" — это серверы, которые были первыми, в хронологическом порядке, при запуске пула в первый раз. Чтобы определить эти серверы, можно использовать `Get-CsComputer` командлет с ` -PoolFqdn` параметром. Этот командлет будет показывать серверы в том порядке, в котором они отображаются в топологии, а в верхней части списка — первые серверы.
  
#### <a name="additional-steps-to-ensure-pools-are-functional"></a>Дополнительные способы проверки работоспособности пулов

Для проверки функционирования пулов переднего плана требуется обратить внимание на еще несколько факторов.
  
- При первом перемещении пользователей в пул убедитесь, что запущены по крайней мере три сервера переднего плана.
    
- Если вы устанавливаете отношение связывания между данным пулом и другим пулом в целях обеспечения аварийного восстановления, то после этого вам следует убедиться, что данный пул имеет три одновременно работающих сервера переднего плана для правильной синхронизации данных с резервным пулом. Более подробную информацию о функциях связывания и аварийного восстановления пула можно найти [в разделе Планирование восстановления благодаря высокой доступности и аварийному восстановлению в Skype для бизнеса Server](high-availability-and-disaster-recovery.md). 
    
## <a name="front-end-pool-with-two-front-end-servers"></a>Интерфейсный пул с двумя серверами переднего плана

Мы не рекомендуем развертывать пул переднего плана, который включает только два сервера переднего плана. This small pool will not provide a robust high-availability solution like a larger pool would, and needs extra care in managing. Кроме того, если сервер, на котором работает пул из двух серверов, выйдет из-за того, что сам пул, скорее всего, скоро будет и все. Если вы хотите развернуть только один или два сервера, на которых установлен Skype для бизнеса Server, мы рекомендуем развернуть их в качестве серверов Standard Edition.
  
Если вы когда-либо хотите развернуть пул с двумя серверами переднего плана, следуйте этим рекомендациям:
  
- Если один из двух серверов переднего плана отключается, вы должны попытаться выполнить резервное копирование неисправного сервера по мере их появления. Аналогичным образом, в случае обновления одного из двух серверов его также необходимо вернуть в рабочее состояние как можно быстрее.
    
- Если по какой-либо причине требуется отключить оба сервера одновременно, после окончания простоя пула выполните следующие действия:
    
  - Рекомендуется перезапускать оба внешних сервера в одно и то же время. 
    
  - Если это невозможно, следует включать их в порядке, обратном порядку их отключения.
    
  - Если вы не можете выполнить резервное копирование в указанном порядке, перед тем как приступить к восстановлению пула, используйте следующий командлет:`Reset-CsPoolRegistrarState -ResetType QuorumLossRecovery -PoolFQDN <FQDN>`
    
## <a name="front-end-pool-configuration-failures-and-changes"></a>Сбои и изменения конфигурации пула переднего плана

Если сервер переднего плана ломается и будет заменен только через несколько дней или позднее, удалите этот сервер из топологии. Когда новый сервер переднего плана вновь станет доступен, добавьте его в топологию.
  
При внесении изменений в конфигурацию пула переднего плана, например при добавлении или удалении серверов, необходимо придерживаться следующих правил.
  
- После публикации новой топологии следует перезапустить каждый сервер переднего плана в пуле. Перезапускайте их по одному.
    
- Если во время изменения конфигурации весь пул был остановлен, после публикации новой топологии запустите следующий командлет:`Reset-CsPoolRegistrarState -PoolFQDN <PoolFQDN> -ResetType ServiceReset`
    

