---
title: Высокая доступность и управление пулом переднего плана
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 965041b7-3136-49f2-89c1-8b30417cb8ea
description: Сведения об управлении пула переднего плана в Скайп для Business Server, включая управление пулов, потери кворума и специальные действия для пулов из только два сервера переднего плана.
ms.openlocfilehash: bab9d4b40132665719a1e9d019b8f34e2d96622d
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/11/2019
ms.locfileid: "33910230"
---
# <a name="front-end-pool-high-availability-and-management"></a>Высокая доступность и управление пулом переднего плана
 
Сведения об управлении пула переднего плана в Скайп для Business Server, включая управление пулов, потери кворума и специальные действия для пулов из только два сервера переднего плана.
  
В Скайп для Business Server архитектура пулов переднего плана используется модель распределенных систем с данными каждого пользователя, хранимых на до трех серверов переднего плана в пуле. Рекомендуется включить всех пулов переднего плана Enterprise Edition по крайней мере три сервера переднего плана. 
  
## <a name="planning-for-the-management-of-front-end-pools"></a>Планирование управления интерфейсными пулами

 Скайп для Business Server использует модель распределенных систем, основанная на Windows Fabric. В этой модели важные данные для каждого пользователя и конференции хранятся на три сервера переднего плана в пуле переднего плана. Эти три сервера хранения набора данных, calledreplicas.
  
С помощью распределенной модели для пулов переднего плана определенного количества серверов пула должен работать под управлением для пула для функции. Существует два режима потери для пула.
  
- Нехватка кворума на уровне группы маршрутизации, что вызвано недостаточным количеством серверов-реплик для определенной группы маршрутизации. Группа маршрутизации — это группа пользователей, размещенных в пуле. Каждая группа маршрутизации имеет три реплики в пуле: одна главная и две дополнительные.
    
- Нехватка кворума на уровне пула, что вызвано недостаточным количеством серверов инициализации в пуле. 
    
### <a name="routing-group-level-quorum-loss"></a>Нехватка кворума на уровне группы маршрутизации

При первом запуске нового интерфейсного пула необходимо, чтобы 85% серверов были установлены и запущены, как показано в следующей таблице. Если запущено меньшее количество серверов, службы могут зависнуть в состоянии запуска, а пул может вообще не запуститься.
  
|Общее количество серверов в пуле  <br/> |Количество запущенных серверов, которое требуется для первого запуска пула  <br/> |
|:-----|:-----|
|2  <br/> |1  <br/> |
|3  <br/> |3  <br/> |
|4  <br/> |3  <br/> |
|5  <br/> |4  <br/> |
|6  <br/> |5  <br/> |
|7  <br/> |5  <br/> |
|8  <br/> |6  <br/> |
|9  <br/> |7  <br/> |
|10  <br/> |8  <br/> |
|11  <br/> |9  <br/> |
|12  <br/> |10  <br/> |
   
При каждом последующем запуске пула 85% серверов должны быть запущены (как показано на таблице выше). Если не удается запустить этот числа серверов (но недостаточно серверов можно запустить, чтобы не является потери кворума уровне пула), можно использовать `Reset-CsPoolRegistrarState -ResetType QuorumLossRecovery` используется для включения в пул для восстановления из этой маршрутизации потери уровня кворума группы и хода выполнения. Дополнительные сведения о том, как с помощью этого командлета можно <link Reset-CsPoolRegistrarState>.
  
> [!NOTE]
> В пулах с одинаковым количеством серверов Skype для бизнеса Server использует основную базу данных SQL в качестве следящего сервера. В таком пуле, если будет закрыта основная база данных, выполнено переключение на зеркальную копию и отключено достаточно серверов переднего плана, перечисленных в таблице выше, то весь пул будет остановлен. Для получения дополнительных сведений см [Следящий сервер зеркального отображения базы данных](https://go.microsoft.com/fwlink/?LinkId=393672). 
  
#### <a name="pool-level-quorum-loss"></a>Нехватка кворума на уровне пула

Для пула переднего плана функционировать оно не может быть потери кворума уровне пула. Если число работающих серверов становится ниже указанного в таблице функционального уровня, оставшиеся серверы в пуле остановят все службы Skype для бизнеса Server. Обратите внимание, что номера в следующей таблице предполагается, что выполняется внутренними серверами в пуле.
  
|Общее число серверов переднего плана в пуле  <br/> |Число работающих серверов, требуемое для правильного функционирования пула  <br/> |
|:-----|:-----|
|2  <br/> |1  <br/> |
|3-4  <br/> |Любые 2  <br/> |
|5-6  <br/> |Любые 3  <br/> |
|7  <br/> |Любые 4  <br/> |
|8-9  <br/> |Любые 4 из первых 7 серверов  <br/> |
|10–12  <br/> |Любые 5 из первых 9 серверов  <br/> |
   
В приведенной выше таблице «первого серверы», серверы, которые были загружены копирование сначала, хронологически, при запуске пула в первый раз. Чтобы определить этих серверов, можно использовать `Get-CsComputer` командлет с ` -PoolFqdn` вариант. Этот командлет покажут серверов, в том порядке, в котором они отображаются в топологии, а из них в верхней части списка находятся на первом серверах.
  
#### <a name="additional-steps-to-ensure-pools-are-functional"></a>Дополнительные способы проверки работоспособности пулов

Для проверки функционирования пулов переднего плана требуется обратить внимание на еще несколько факторов.
  
- При перемещении пользователей в пул в первый раз убедитесь, по крайней мере три сервера переднего плана запущены.
    
- Если вы устанавливаете отношение связывания между данным пулом и другим пулом в целях обеспечения аварийного восстановления, то после этого вам следует убедиться, что данный пул имеет три одновременно работающих сервера переднего плана для правильной синхронизации данных с резервным пулом. Дополнительные сведения о функции пула связывания и аварийного восстановления в разделе [Планирование высокой доступности и аварийного восстановления в Скайп для Business Server](high-availability-and-disaster-recovery.md). 
    
## <a name="front-end-pool-with-two-front-end-servers"></a>Интерфейсный пул с двумя серверами переднего плана

Не рекомендуется развертывание интерфейсного пула, который содержит только два сервера переднего плана. This small pool will not provide a robust high-availability solution like a larger pool would, and needs extra care in managing. Кроме того Если отключения фоновый сервер из пула двумя серверами весь пул будет скорее всего вскоре перейти также. Если вы хотите развернуть только одного или двух серверах с Скайп для сервера, мы рекомендуем развернуть их как серверы Standard Edition.
  
Если когда-либо необходимо развернуть в пул с двумя серверами переднего плана, придерживайтесь следующих рекомендаций.
  
- Если один из двух серверов переднего плана отключается, попробуйте свести отказавший сервер резервного копирования, как только вы можете. Аналогичным образом, в случае обновления одного из двух серверов его также необходимо вернуть в рабочее состояние как можно быстрее.
    
- Если по какой-либо причине требуется отключить оба сервера одновременно, после окончания простоя пула выполните следующие действия:
    
  - Рекомендуется перезагрузить оба сервера переднего плана в то же время. 
    
  - Если это невозможно, следует включать их в порядке, обратном порядку их отключения.
    
  - Если вы не может включать их в указанном порядке, затем используйте следующий командлет перед вызовом пула:`Reset-CsPoolRegistrarState -ResetType QuorumLossRecovery -PoolFQDN <FQDN>`
    
## <a name="front-end-pool-configuration-failures-and-changes"></a>Сбои и изменения конфигурации пула переднего плана

Если сервер переднего плана ломается и будет заменен только через несколько дней или позднее, удалите этот сервер из топологии. Когда новый сервер переднего плана вновь станет доступен, добавьте его в топологию.
  
При внесении изменений в конфигурацию пула переднего плана, например при добавлении или удалении серверов, необходимо придерживаться следующих правил.
  
- После публикации новой топологии следует перезапустить каждый сервер переднего плана в пуле. Перезапускайте их по одному.
    
- Если весь пул был отключен во время изменения конфигурации, выполните следующий командлет, после публикации новой топологии:`Reset-CsPoolRegistrarState -PoolFQDN <PoolFQDN> -ResetType ServiceReset`
    

