---
title: Высокая доступность серверов в Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: c559aacb-4e1d-4e78-9582-41f966ad418d
description: Learn about the Back End Server high availability options supported in Skype for Business Server, including AlwaysOn Availability Groups, AlwaysOn Failover Cluster Instances, database mirroring, and SQL failover clustering.
ms.openlocfilehash: bbb55ded0d5ce1127f5dcab829907c533cc6316e
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/12/2021
ms.locfileid: "49802929"
---
# <a name="back-end-server-high-availability-in-skype-for-business-server"></a>Высокая доступность серверов в Skype для бизнеса Server
 
Learn about the Back End Server high availability options supported in Skype for Business Server, including AlwaysOn Availability Groups, AlwaysOn Failover Cluster Instances, database mirroring, and SQL failover clustering.
  
Для повышения высокой доступности для тыловые серверы доступны четыре варианта:
  
- Зеркальное отображение базы данных
    
- группы доступности AlwaysOn;
    
- Экземпляры кластера для отокрутки AlwaysOn (FCI)
    
- SQL отбойной кластерии
    
Использование одного из этих решений является необязательным, но рекомендуется для поддержания непрерывности бизнеса организации. В противном случае при отопадении одного сервера базы данных может привести к потере важных данных Skype для бизнеса Server. 
  
Зеркальное отражение баз данных можно настроить только с помощью построитель топологий. Для групп доступности AlwaysOn, экземпляров failover Cluster AlwaysOn или кластеров SQL для создания решения высокой доступности используется SQL Server, а затем с помощью построитель топологий можно связать его с пулом переднего уровня.
  
Если для аварийного восстановления используется высокий уровень доступности тыловой части сервера в пуле переднего сервера, сопряженном с другим пулом переднего сервера, следует использовать одно и то же решение для высокой доступности в обоих пулах. 
  
## <a name="database-mirroring"></a>Зеркальное отображение базы данных

Skype для бизнеса Server поддерживает зеркальное отражение с помощью следующего программного обеспечения базы данных:
  
- SQL Server 2019 г. и Enterprise Edition, и Standard Edition

- SQL Server 2017, Enterprise Edition и Standard Edition

- SQL Server 2016, Enterprise Edition и Standard Edition

- SQL Server 2014 enterprise Edition и Standard Edition
    
- SQL Server 2012 с sp2 и CU2, Enterprise Edition и Standard Edition
    

> [!NOTE]
> SQL зеркальное отражение доступно в Skype для бизнеса Server 2015, но больше не поддерживается в Skype для бизнеса Server 2019. В Skype для бизнеса Server 2019 поддерживаются только группы доступности AlwaysOn, экземпляры кластера для отстройки AlwaysOn и методы SQL кластеров.
    
Асинхронное зеркальное зеркальное отражение базы данных не поддерживается для высокой доступности серверов в Skype для бизнеса Server. В остальной части этого документа зеркальное отражение базы данных означает синхронное зеркальное отражение базы данных, если не указано иное явным образом. 
  
При развертывании зеркального отражания баз данных в пуле переднего сервера зеркально отражаются все базы данных Skype для бизнеса Server в пуле, включая центральное хранилище управления, если оно расположено в этом пуле, а также база данных приложения группы ответа и база данных приложения парковки вызовов, если эти приложения работают в пуле. 
  
При зеркальном отражающих базах данных не требуется использовать общее хранилище для серверов. Каждый сервер хранит свою копию баз данных в локальном хранилище. 
  
Можно развернуть зеркальное отражение базы данных с помощью свидетеля или без него. Рекомендуется использовать следящий сервер, поскольку он обеспечивает автоматическую отработку отказа внутренним сервером. В противном случае администратор должен запускать отработку отказа вручную. Обратите внимание, что даже если следящий сервер развернут, администратор все равно при необходимости может запустить отработку отказа внутренним сервером вручную.
  
Одни следящий сервер можно использовать для нескольких пар внутренних серверов. Строгого взаимно-однозначного соответствия между следящими серверами и парами внутренних серверов нет. Развертывания с одним следящим сервером для нескольких пар внутренних серверов менее отказоустойчивы, чем топологии с отдельным следящим сервером для каждой пары внутренних серверов. 
  
### <a name="guidelines-for-planning-back-end-server-mirroring"></a>Рекомендации по планированию зеркального зеркального отражания серверов

В целом, для настройки зеркального отображения SQL между двумя внутренними серверами с ресурсом-свидетелем требуется следующее:
  
- Версия сервера-SQL Server должна поддерживать SQL зеркальное отражение.
    
- На основном ресурсе, зеркальном ресурсе и ресурсе-свидетеле (если развертывается) должна быть установлена одна и та же версия SQL Server. 
    
- На основном и зеркальном ресурсах должен быть установлен один и тот же выпуск SQL Server. На ресурсе-свидетеле может быть установлен другой выпуск.
    
Чтобы SQL с точки зрения того, какие SQL версий поддерживаются для роли свидетеля, см. в подмесье  ["Свидетель](https://go.microsoft.com/fwlink/p/?LinkId=247345) зеркального библиотека MSDN.
  
Прежде чем настраивать зеркальное отражение сервера, необходимо правильно SQL базы данных. Подробные сведения см. в подстройки "Настройка учетных записей входа для зеркального управления базами данных или групп [доступности AlwaysOn (SQL Server)".](https://go.microsoft.com/fwlink/p/?LinkId=268454)
  
При использовании зеркального отображения SQL режим восстановления базы данных всегда задан как **Полный**, т. е. вы должны регулярно внимательно следить за размером журнала транзакций и журналов транзакций резервного копирования, чтобы предотвратить нехватку места на диске на фоновых серверах. Частота резервного копирования журналов транзакций зависит от скорости роста журналов, которая в свою очередь зависит от транзакций баз данных в результате действий пользователей в пуле переднего плана. Рекомендуется определить ожидаемую скорость роста журналов для полезной нагрузки развертывания Lync, чтобы вы могли правильно провести планирование. В следующих статьях представлены дополнительные сведения об управлении резервным копированием и журналами SQL:
  
> [!IMPORTANT]
> Использование построитель топологий или cmdlets для SQL зеркального SQL поддерживается только в том случае, если основной, зеркальный и свидетельный (при желании) серверы принадлежат одному домену. Если необходимо настроить зеркальное отображение SQL для серверов в других доменах, см. документацию по SQL Server. 

> [!NOTE]
> SQL зеркальное отражение доступно в Skype для бизнеса Server 2015, но больше не поддерживается в Skype для бизнеса Server 2019. В Skype для бизнеса Server 2019 предпочтительнее использовать группы доступности AlwaysOn, экземпляры кластера для отстройки AlwaysOn и SQL кластеров.
  
### <a name="recovery-time-for-automatic-back-end-server-failover-with-database-mirroring"></a>Время восстановления для автоматической отключки тыл сервера с зеркальным отражением базы данных

Для автоматической отладки тылов с зеркальным отражением базы данных целевое время восстановления (RTO) составляет 5 минут. Из-за синхронного зеркального отражания базы данных мы не ожидаем потери данных во время сбоев тыловой части сервера, за исключением редких случаев одновременного отказа серверов переднего и заднего серверов во время передачи данных между серверами. Проектная целевая точка восстановления (RPO) составляет 5 минут.
  
### <a name="user-experience-during-back-end-server-failure-with-database-mirroring"></a>Пользовательский интерфейс при сбое тыловом сервере с зеркальным зеркальным отражением базы данных

То, каким образом отказ отразится на пользователе, зависит от природы отказа и топологии.
  
Если вы используете зеркальное отражение базы данных и настроили свидетель и основной сервер завершится сбой, отключка на тыловом сервере происходит автоматически и быстро. Активные пользователи не должны заметить особых пауз в своих текущих сеансах.
  
Если следящий сервер на настроен, администратору потребуется некоторое время для проведения отработки отказа вручную. В этот период активные пользователи могут заметить последствия. Они продолжат свои сеансы как обычно в течение 30 минут. Если основной сервер по-прежнему не восстановлен или администратор не переключился на резервную копию, пользователи переключаются в режим устойчивости, что означает, что они не могут выполнять задачи, которые требуют постоянного изменения в Lync Server (например, добавление контакта).
  
При отказе и главного, и внутреннего зеркальных серверов или при отказе одного из них и следящего сервера внутренний сервер становится недоступным (даже если это основной сервер, продолжающий работать). В этом случае активные пользователи переключаются в режим устойчивости через некоторое время.
  
## <a name="alwayson-availability-groups-and-alwayson-failover-cluster-instances"></a>Группы доступности AlwaysOn и экземпляры кластера для отстройки AlwaysOn

Skype для бизнеса Server поддерживает группы доступности AlwaysOn только как активные, так и пассивные, а не активные. 
  
Чтобы использовать группы доступности AlwaysOn или экземпляры отбойного кластера AlwaysOn, сначала необходимо использовать SQL Server для настройки решения высокой доступности. Затем можно использовать построитель топологий, чтобы связать его с пулом переднего входа.

Skype для бизнеса Server поддерживает AlwaysOn с помощью следующего программного обеспечения базы данных:

- SQL Server 2019 Enterprise Edition

- SQL Server 2019 Standard Edition с ограничениями см. примечание ниже

- SQL Server 2017 Enterprise Edition

- SQL Server 2017 Standard Edition с ограничениями см. примечание ниже

- SQL Server 2016 Enterprise Edition

- SQL Server 2016 Standard Edition с ограничениями см. примечание ниже

- SQL Server 2014 Enterprise Edition
    
- SQL Server 2012 с sp2 и CU2 Enterprise Edition

> [!NOTE]
> SQL Server Версии 2019, 2017 и 2016 поддерживаются в Skype для бизнеса Server 2019.

> [!NOTE]
> Группы доступности Always  On не поддерживаются в выпусках SQL 2016, 2017 и 2019 Standard Edition, но можно использовать экземпляры кластера Always On. Дополнительные см. в выпусках и [поддерживаемых SQL Server 2016.](https://docs.microsoft.com/sql/sql-server/editions-and-components-of-sql-server-2016?view=sql-server-2017)
  
> [!IMPORTANT]
> Имена экземпляров для нескольких экземпляров группы доступности AlwaysOn должны быть одинаковыми. 
  
Действия по развертыванию групп доступности AlwaysOn см. в подгруппе "Развертывание группы доступности [AlwaysOn"](../../deploy/deploy-high-availability-and-disaster-recovery/alwayson-availability-group.md)на тыловом сервере в Skype для бизнеса Server.
  
## <a name="sql-server-failover-clustering"></a>SQL Server отбойной кластерии

Skype для бизнеса Server поддерживает SQL Server кластеров с помощью следующего программного обеспечения базы данных:
  
- SQL Server 2019 г. и Enterprise Edition, и Standard Edition

- SQL Server 2017, Enterprise Edition и Standard Edition

- SQL Server 2016, Enterprise Edition и Standard Edition

- SQL Server 2014 enterprise Edition и Standard Edition
    
- SQL Server 2012 с sp2 и CU2, Enterprise Edition и Standard Edition

Чтобы использовать SQL кластеров, необходимо сначала настроить и настроить кластер SQL Server перед развертыванием пула переднего входа. Практические инструкции и инструкции по настройке для отстающих кластеров в SQL Server 2012 см. в . [https://technet.microsoft.com/library/hh231721.aspx](https://technet.microsoft.com/library/hh231721.aspx)

> [!NOTE]
> SQL Server 2019, 2017 и SQL Server 2016 — единственные версии, поддерживаемые Skype для бизнеса Server 2019.
    
Чтобы использовать SQL кластеров, необходимо сначала настроить и настроить кластер SQL Server перед развертыванием пула переднего входа. Практические инструкции и инструкции по настройке для отстающих кластеров в SQL Server 2014 и 2016 годах см. в . [https://technet.microsoft.com/library/hh231721.aspx](https://technet.microsoft.com/library/hh231721.aspx) О кластере от сбойов в SQL Server 2008 см. в [https://technet.microsoft.com/library/ms189134(v=sql.105).aspx](https://technet.microsoft.com/library/ms189134%28v=sql.105%29.aspx) .
  
При установке SQL Server следует установить SQL Server Management Studio для управления расположениями баз данных и файлов журналов. SQL Server Management Studio устанавливается в качестве дополнительного компонента при установке SQL Server.
  
