---
title: Назад высокой доступности внутреннего сервера в Скайп для Business Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: c559aacb-4e1d-4e78-9582-41f966ad418d
description: Сведения о способах обеспечения высокой доступности Тыловой сервер, поддерживаемые в Скайп для Business Server, включая группы обеспечения доступности AlwaysOn, экземпляры отказоустойчивого кластера AlwaysOn, зеркальное отображение базы данных и кластер отработки отказа SQL.
ms.openlocfilehash: d40ceb237ff52434074de29363704fdb1de5b78c
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/11/2019
ms.locfileid: "33916560"
---
# <a name="back-end-server-high-availability-in-skype-for-business-server"></a>Назад высокой доступности внутреннего сервера в Скайп для Business Server
 
Сведения о способах обеспечения высокой доступности Тыловой сервер, поддерживаемые в Скайп для Business Server, включая группы обеспечения доступности AlwaysOn, экземпляры отказоустойчивого кластера AlwaysOn, зеркальное отображение базы данных и кластер отработки отказа SQL.
  
Предусмотрено четыре способа повышения уровня доступности внутренних серверов.
  
- Зеркальное отображение баз данных
    
- Группы доступности AlwaysOn
    
- Экземпляры отказоустойчивого кластера AlwaysOn (FCI)
    
- Отказоустойчивая кластеризация SQL
    
Пользоваться каким-либо из этих способов не обязательно, но настоятельно рекомендуется для обеспечения бесперебойной работы предприятия. В противном случае переход вниз на одну базу данных сервера может привести к потере значительные Скайп для данных Business Server. 
  
Можно настроить зеркальное отображение базы данных с помощью только построителя топологий. Для группы обеспечения доступности AlwaysOn, экземпляры отказоустойчивого кластера AlwaysOn или SQL отказоустойчивого кластера использование SQL Server для создания решения высокой доступности, а затем Topology Builder можно использовать для связи с пулом переднего плана.
  
Если вы используете высокой доступности Тыловой сервер в пуле переднего плана, который сопоставляется с другой пул переднего плана для аварийного восстановления, следует использовать же решения высокой доступности внутреннего в обоих пулах. 
  
## <a name="database-mirroring"></a>Зеркальное отображение баз данных

Скайп для Business Server поддерживает зеркальное отображение с помощью следующих программ базы данных:
  
- SQL Server 2016, Enterprise Edition и Standard Edition

- SQL Server 2014 г., Enterprise Edition и Standard Edition
    
- Пакет обновления 2 для SQL Server 2012 и накопительным пакетом обновления 2, Enterprise Edition и Standard Edition
    

> [!NOTE]
> Зеркальное отображение SQL доступна в Скайп для Business Server 2015, но в Скайп Business Server 2019 больше не поддерживается. Методы кластеризации отработки отказа группы обеспечения доступности AlwaysOn, экземпляры кластера AlwaysOn отработки отказа (FCI) и SQL, являются предпочтительными с Скайп для Business Server 2019.
    
Зеркальное отображение базы данных асинхронный не поддерживается для обеспечения высокой доступности Тыловой сервер в Скайп для Business Server. Далее в этом документе под зеркальным отображением баз данных всегда понимается синхронное отображение, если явно не указано иное. 
  
При развертывании зеркального отображения баз данных в пуле переднего плана, дублируются все Скайп для сервера баз данных в пуле, включая центрального хранилища управления, если он расположен в этот пул, а также в базе данных приложения группы ответа и парковка вызовов База данных приложения, если эти приложения работают в пуле. 
  
При зеркальном отображении баз данных для серверов не требуется общее хранилище. На каждом сервере копия баз данных хранится в локальном хранилище. 
  
Развернуть зеркальное копирование баз данных можно со следящим сервером или без него. Наличие следящего сервера является предпочтительным, поскольку обеспечивает автоматическую отработку отказа внутреннего сервера. В противном случае администратор должен запускать отработку отказа вручную. Обратите внимание на то, что даже в случае развертывания следящего сервера администратор может при необходимости запустить отработку отказа внутреннего сервера вручную.
  
Одни следящий сервер можно использовать для нескольких пар внутренних серверов. Строгого взаимно-однозначного соответствия между следящими серверами и парами внутренних серверов нет. Развертывания с одним следящим сервером для нескольких пар внутренних серверов менее отказоустойчивы, чем топологии с отдельным следящим сервером для каждой пары внутренних серверов. 
  
### <a name="guidelines-for-planning-back-end-server-mirroring"></a>Рекомендации по планированию зеркального отображения внутренних серверов

В целом, для настройки зеркального отображения SQL между двумя внутренними серверами с ресурсом-свидетелем требуется следующее:
  
- Версия SQL Server основного сервера должна поддерживать зеркальное отображение SQL.
    
- На основном ресурсе, зеркальном ресурсе и ресурсе-свидетеле (если развертывается) должна быть установлена одна и та же версия SQL Server. 
    
- На основном и зеркальном ресурсах должен быть установлен один и тот же выпуск SQL Server. На ресурсе-свидетеле может быть установлен другой выпуск.
    
Рекомендации по SQL в виде версии SQL которых поддерживается для роли следящего сервера в разделе [«следящий сервер зеркального отображения базы данных»](https://go.microsoft.com/fwlink/p/?LinkId=247345) в библиотеке MSDN.
  
Прежде чем настраивать зеркальное отображение сервера, необходимо правильно настроить разрешения базы данных SQL. Дополнительные сведения см [«Настройка учетных записей для зеркального отображения базы данных или группы обеспечения доступности AlwaysOn (SQL Server)»](https://go.microsoft.com/fwlink/p/?LinkId=268454).
  
При использовании зеркального отображения SQL режим восстановления базы данных всегда задан как**Полный**, т. е. вы должны регулярно внимательно следить за размером журнала транзакций и журналов транзакций резервного копирования, чтобы предотвратить нехватку места на диске на внутренних серверах. Частота резервного копирования журналов транзакций зависит от скорости роста журналов, которая в свою очередь зависит от транзакций баз данных в результате действий пользователей в интерфейсном пуле. Рекомендуется определить ожидаемую скорость роста журналов для полезной нагрузки развертывания Lync, чтобы вы могли правильно провести планирование. В следующих статьях представлены дополнительные сведения об управлении резервным копированием и журналами SQL.
  
> [!IMPORTANT]
> С помощью построителя топологий или командлетов для установки и удаления SQL зеркальное отображение поддерживается только в том случае, если основной, зеркальный и следящий сервер (при желании) серверы принадлежат к тому же домену. If you want to set up SQL mirroring among servers in different domains, see your SQL Server documentation. 

> [!NOTE]
> Зеркальное отображение SQL доступна в Скайп для Business Server 2015, но в Скайп Business Server 2019 больше не поддерживается. Методы кластеризации отработки отказа группы обеспечения доступности AlwaysOn, экземпляры кластера AlwaysOn отработки отказа (FCI) и SQL, являются предпочтительными с Скайп для Business Server 2019.
  
### <a name="recovery-time-for-automatic-back-end-server-failover-with-database-mirroring"></a>Время восстановления при автоматической отработке отказа внутреннего сервера с помощью зеркального отображения баз данных

При автоматической отработке отказа внутренним сервером с помощью зеркального отображения баз данных техническое плановое значение целевого времени восстановления (RTO) составляет 5 минут. Синхронное зеркальное отображение баз данных позволяет предотвращать потери данных при отказе внутреннего сервера, за исключением редких случаев одновременного отказа внешних серверов и внутреннего сервера в процессе передачи данных между ними. Техническое плановое значение целевого срока восстановления (RPO) составляет 5 минут.
  
### <a name="user-experience-during-back-end-server-failure-with-database-mirroring"></a>Взаимодействие с пользователями при отработке отказа внутреннего сервера с помощью зеркального отображения баз данных

То, каким образом отказ отразится на пользователе, зависит от природы отказа и топологии.
  
Если настроено зеркальное отображение баз данных со следящим сервером, в случае сбоя основного ресурса отработка отказа внутреннего сервера выполняется автоматически в кратчайшие сроки. Активные пользователи не должны заметить существенного прерывания текущих сеансов.
  
Если следящий сервер не настроен, администратору потребуется некоторое время для проведения отработки отказа вручную. В этот период активные пользователи могут заметить последствия. Они продолжат свои сеансы как обычно в течение 30 минут. Если основной нельзя восстановить или администратор не имеет отработка отказа для резервной копии, затем пользователи переключаются в режиме устойчивости, что означает, что они не смогут выполнять задачи, требующие сохраняемых изменений на Lync Server (например, Добавление контакта).
  
При отказе и главного, и внутреннего зеркальных серверов или при отказе одного из них и следящего сервера внутренний сервер становится недоступным (даже если это основной сервер, продолжающий работать). В этом случае активные пользователи переключаются в режим устойчивости через некоторое время.
  
## <a name="alwayson-availability-groups-and-alwayson-failover-cluster-instances"></a>Группы доступности AlwaysOn и экземпляры отказоустойчивого кластера AlwaysOn

Группы обеспечения доступности AlwaysOn и экземпляры отказоустойчивого кластера AlwaysOn поддерживаются только в SQL Server 2014 Enterprise Edition и SQL Server 2012 Enterprise Edition. Скайп для Business Server поддерживает группы доступности AlwaysOn только как активный/пассивный, активный/активный. 
  
Чтобы использовать группы обеспечения доступности AlwaysOn или экземпляры отказоустойчивого кластера AlwaysOn, сначала использовать SQL Server для установки и настройки решения высокой доступности. Затем можно использовать построитель топологий для связи с пулом переднего плана.
  
> [!IMPORTANT]
> Имена экземпляров для нескольких экземпляров группы обеспечения доступности AlwaysOn должны быть одинаковыми. 
  
Действия для развертывания группы обеспечения доступности AlwaysOn в разделе [Deploy группы обеспечения доступности AlwaysOn на Тыловой сервер в Скайп для Business Server](../../deploy/deploy-high-availability-and-disaster-recovery/alwayson-availability-group.md).
  
## <a name="sql-server-failover-clustering"></a>Отказоустойчивая кластеризация SQL Server

Скайп для Business Server поддерживает отказоустойчивость кластеров с помощью следующих программ базы данных SQL Server:
  
- SQL Server 2017, Enterprise Edition и Standard Edition

- SQL Server 2016, Enterprise Edition и Standard Edition

- SQL Server 2014 г., Enterprise Edition и Standard Edition
    
- Пакет обновления 2 для SQL Server 2012 и накопительным пакетом обновления 2, Enterprise Edition и Standard Edition

Чтобы использовать кластер отработки отказа SQL, необходимо сначала настроить и настроить кластер SQL Server перед развертыванием интерфейсный пул. Рекомендации и инструкции по установке для отказоустойчивого кластера SQL Server 2012, в разделе [https://technet.microsoft.com/en-us/library/hh231721.aspx](https://technet.microsoft.com/en-us/library/hh231721.aspx).

> [!NOTE]
> SQL Server 2017 и SQL Server 2016 — это единственный версий, поддерживаемых Скайп для Business Server 2019.
    
Чтобы использовать кластер отработки отказа SQL, необходимо сначала настроить и настроить кластер SQL Server перед развертыванием интерфейсный пул. Рекомендации и инструкции по установке для отказоустойчивого кластера SQL Server 2014 и 2016, в разделе [https://technet.microsoft.com/en-us/library/hh231721.aspx](https://technet.microsoft.com/en-us/library/hh231721.aspx). Отказоустойчивая кластеризация SQL Server 2008, в разделе [https://technet.microsoft.com/en-us/library/ms189134(v=sql.105).aspx](https://technet.microsoft.com/en-us/library/ms189134%28v=sql.105%29.aspx).
  
При установке SQL Server следует также установить SQL Server Management Studio для управления расположениями базы данных и файлов журнала. SQL Server Management Studio устанавливается с SQL Server как необязательный компонент.
  

