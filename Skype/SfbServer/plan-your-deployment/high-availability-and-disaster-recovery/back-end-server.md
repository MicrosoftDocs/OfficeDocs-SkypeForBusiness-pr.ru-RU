---
title: Высокий доступ к серверу в Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: c559aacb-4e1d-4e78-9582-41f966ad418d
description: Узнайте о параметрах высокой доступности сервера, которые поддерживаются в Skype для бизнеса Server, в том числе о группах доступности AlwaysOn, экземплярах отказоустойчивого кластера AlwaysOn, зеркальном отображении базы данных и отказоустойчивом кластере SQL.
ms.openlocfilehash: a0aeb53aea0ee2eab25875de0fddbfd0fc26d90a
ms.sourcegitcommit: e64c50818cac37f3d6f0f96d0d4ff0f4bba24aef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2020
ms.locfileid: "41815957"
---
# <a name="back-end-server-high-availability-in-skype-for-business-server"></a>Высокий доступ к серверу в Skype для бизнеса Server
 
Узнайте о параметрах высокой доступности сервера, которые поддерживаются в Skype для бизнеса Server, в том числе о группах доступности AlwaysOn, экземплярах отказоустойчивого кластера AlwaysOn, зеркальном отображении базы данных и отказоустойчивом кластере SQL.
  
Предусмотрено четыре способа повышения уровня доступности внутренних серверов.
  
- Зеркальное отображение баз данных
    
- Группы доступности AlwaysOn
    
- Экземпляры отказоустойчивых кластеров AlwaysOn (FCI)
    
- Отказоустойчивая кластеризация SQL
    
Пользоваться каким-либо из этих способов не обязательно, но настоятельно рекомендуется для обеспечения бесперебойной работы предприятия. В противном случае, если переход на один сервер базы данных может привести к потере важной информации в Skype для бизнеса Server. 
  
Вы можете настроить зеркальное отображение базы данных только с помощью построителя топологии. Для групп доступности AlwaysOn, экземпляров отказоустойчивых кластеров AlwaysOn или отказоустойчивой кластеризации SQL вы используете SQL Server для создания решения высокой доступности, затем вы можете использовать Topology Builder, чтобы связать его с пулом переднего плана.
  
Если вы используете сервер переднего плана высокой доступности в пуле интерфейсов, который связан с другим пулом переднего плана для аварийного восстановления, вы должны использовать одно и то же решение с высокой доступностью для обоих пулов. 
  
## <a name="database-mirroring"></a>Зеркальное отображение баз данных

Сервер Skype для бизнеса поддерживает зеркалирование с помощью следующего программного обеспечения баз данных:
  
- SQL Server 2019, выпуск Enterprise Edition и стандартный выпуск

- SQL Server 2017, выпуск Enterprise Edition и стандартный выпуск

- SQL Server 2016, выпуск Enterprise Edition и стандартный выпуск

- SQL Server 2014, выпуск Enterprise Edition и стандартный выпуск
    
- SQL Server 2012 с пакетом обновления 2 (SP2) и CU2 (Enterprise Edition и Standard Edition)
    

> [!NOTE]
> Зеркальное отображение SQL доступно в Skype для бизнеса Server 2015, но больше не поддерживается в Skype для бизнеса Server 2019. В Skype для бизнеса Server 2019 рекомендуется использовать группы доступности AlwaysOn, экземпляры отказоустойчивых кластеров AlwaysOn (FCI), и методы отказоустойчивой кластеризации SQL.
    
Асинхронное зеркальное отображение базы данных не поддерживается для обеспечения высокой доступности серверной части в Skype для бизнеса Server. Далее в этом документе под зеркальным отображением баз данных всегда понимается синхронное отображение, если явно не указано иное. 
  
При развертывании зеркального отображения базы данных в пуле переднего плана все базы данных Skype для бизнеса Server в пуле будут зеркально отображены, в том числе в этом пуле, а также в базе данных приложения группы ответа и на приостановке звонков. база данных приложения, если эти приложения работают в пуле. 
  
При зеркальном отображении баз данных для серверов не требуется общее хранилище. На каждом сервере копия баз данных хранится в локальном хранилище. 
  
Развернуть зеркальное копирование баз данных можно со следящим сервером или без него. Наличие следящего сервера является предпочтительным, поскольку обеспечивает автоматическую отработку отказа внутреннего сервера. В противном случае администратор должен запускать отработку отказа вручную. Обратите внимание на то, что даже в случае развертывания следящего сервера администратор может при необходимости запустить отработку отказа внутреннего сервера вручную.
  
Одни следящий сервер можно использовать для нескольких пар внутренних серверов. Строгого взаимно-однозначного соответствия между следящими серверами и парами внутренних серверов нет. Развертывания с одним следящим сервером для нескольких пар внутренних серверов менее отказоустойчивы, чем топологии с отдельным следящим сервером для каждой пары внутренних серверов. 
  
### <a name="guidelines-for-planning-back-end-server-mirroring"></a>Рекомендации по планированию зеркального отображения внутренних серверов

В целом, для настройки зеркального отображения SQL между двумя внутренними серверами с ресурсом-свидетелем требуется следующее:
  
- Версия SQL Server основного сервера должна поддерживать зеркальное отображение SQL.
    
- На основном ресурсе, зеркальном ресурсе и ресурсе-свидетеле (если развертывается) должна быть установлена одна и та же версия SQL Server. 
    
- На основном и зеркальном ресурсах должен быть установлен один и тот же выпуск SQL Server. На ресурсе-свидетеле может быть установлен другой выпуск.
    
Рекомендации по использованию SQL в отношении того, какие версии SQL поддерживаются для роли следящего сервера, описаны в разделе ["следящий сервер зеркального отображения базы данных"](https://go.microsoft.com/fwlink/p/?LinkId=247345) в библиотеке MSDN.
  
Прежде чем настраивать зеркальное отображение сервера, необходимо правильно настроить разрешения базы данных SQL. Подробные сведения можно найти в разделе [Настройка учетных записей входа для зеркального отображения или групп доступности AlwaysOn (SQL Server)](https://go.microsoft.com/fwlink/p/?LinkId=268454).
  
При использовании зеркального отображения SQL режим восстановления базы данных всегда задан как**Полный**, т. е. вы должны регулярно внимательно следить за размером журнала транзакций и журналов транзакций резервного копирования, чтобы предотвратить нехватку места на диске на внутренних серверах. Частота резервного копирования журналов транзакций зависит от скорости роста журналов, которая в свою очередь зависит от транзакций баз данных в результате действий пользователей в интерфейсном пуле. Рекомендуется определить ожидаемую скорость роста журналов для полезной нагрузки развертывания Lync, чтобы вы могли правильно провести планирование. В следующих статьях представлены дополнительные сведения об управлении резервным копированием и журналами SQL.
  
> [!IMPORTANT]
> Использование построителя топологии или командлетов для настройки и удаления зеркального отображения SQL поддерживается только в том случае, если все серверы, которые являются основными, зеркальными и следящими (при необходимости), принадлежат одному домену. If you want to set up SQL mirroring among servers in different domains, see your SQL Server documentation. 

> [!NOTE]
> Зеркальное отображение SQL доступно в Skype для бизнеса Server 2015, но больше не поддерживается в Skype для бизнеса Server 2019. В Skype для бизнеса Server 2019 рекомендуется использовать группы доступности AlwaysOn, экземпляры отказоустойчивых кластеров AlwaysOn (FCI), и методы отказоустойчивой кластеризации SQL.
  
### <a name="recovery-time-for-automatic-back-end-server-failover-with-database-mirroring"></a>Время восстановления при автоматической отработке отказа внутреннего сервера с помощью зеркального отображения баз данных

При автоматической отработке отказа внутренним сервером с помощью зеркального отображения баз данных техническое плановое значение целевого времени восстановления (RTO) составляет 5 минут. Синхронное зеркальное отображение баз данных позволяет предотвращать потери данных при отказе внутреннего сервера, за исключением редких случаев одновременного отказа внешних серверов и внутреннего сервера в процессе передачи данных между ними. Техническое плановое значение целевого срока восстановления (RPO) составляет 5 минут.
  
### <a name="user-experience-during-back-end-server-failure-with-database-mirroring"></a>Взаимодействие с пользователями при отработке отказа внутреннего сервера с помощью зеркального отображения баз данных

То, каким образом отказ отразится на пользователе, зависит от природы отказа и топологии.
  
Если настроено зеркальное отображение баз данных со следящим сервером, в случае сбоя основного ресурса отработка отказа внутреннего сервера выполняется автоматически в кратчайшие сроки. Активные пользователи не должны заметить существенного прерывания текущих сеансов.
  
Если следящий сервер не настроен, администратору потребуется некоторое время для проведения отработки отказа вручную. В этот период активные пользователи могут заметить последствия. Они продолжат свои сеансы как обычно в течение 30 минут. Если основной сервер по-прежнему не восстановлен или не прошел резервное копирование, пользователи переключаются в режим устойчивости, то есть не могут выполнять задачи, требующие постоянного изменения на Lync Server (например, Добавление контакта).
  
При отказе и главного, и внутреннего зеркальных серверов или при отказе одного из них и следящего сервера внутренний сервер становится недоступным (даже если это основной сервер, продолжающий работать). В этом случае активные пользователи переключаются в режим устойчивости через некоторое время.
  
## <a name="alwayson-availability-groups-and-alwayson-failover-cluster-instances"></a>Группы доступности AlwaysOn и экземпляры отказоустойчивого кластера AlwaysOn

Skype для бизнеса Server поддерживает группы доступности AlwaysOn только как активные и пассивные, но не активные и активные. 
  
Для использования групп доступности AlwaysOn или экземпляров отказоустойчивого кластера AlwaysOn сначала используйте SQL Server для настройки и настройки решения о высокой доступности. Затем вы можете использовать Topology Builder, чтобы связать его с пулом переднего плана.

Skype для бизнеса Server поддерживает AlwaysOn с помощью следующего программного обеспечения баз данных:

- SQL Server 2019 Enterprise Edition

- SQL Server 2019 Standard Edition с ограничениями см. Примечание ниже

- SQL Server 2017 Enterprise Edition

- SQL Server 2017 Standard Edition с ограничениями см. Примечание ниже

- SQL Server 2016 Enterprise Edition

- SQL Server 2016 Standard Edition с ограничениями см. Примечание ниже

- SQL Server 2014 Enterprise Edition
    
- SQL Server 2012 с пакетом обновления 2 (SP2) и CU2 Enterprise Edition

> [!NOTE]
> SQL Server 2019, 2017 и 2016 — это единственные версии, которые поддерживаются в Skype для бизнеса Server 2019.

> [!NOTE]
> Группы доступности Always On **не** поддерживаются в стандартных выпусках SQL 2016, 2017 и 2019, но вы можете использовать всегда для экземпляров отказоустойчивых кластеров. Дополнительные сведения можно найти в статье [выпуски и поддерживаемые функции SQL server 2016](https://docs.microsoft.com/sql/sql-server/editions-and-components-of-sql-server-2016?view=sql-server-2017) .
  
> [!IMPORTANT]
> Имена экземпляров для нескольких экземпляров групп доступности AlwaysOn должны быть одинаковыми. 
  
Инструкции по развертыванию групп доступности AlwaysOn можно найти [в статье Развертывание группы доступности AlwaysOn на внутреннем сервере в Skype для бизнеса Server](../../deploy/deploy-high-availability-and-disaster-recovery/alwayson-availability-group.md).
  
## <a name="sql-server-failover-clustering"></a>Отказоустойчивая кластеризация SQL Server

В Skype для бизнеса Server поддерживается отказоустойчивая кластеризация SQL Server с помощью следующего программного обеспечения баз данных:
  
- SQL Server 2019, выпуск Enterprise Edition и стандартный выпуск

- SQL Server 2017, выпуск Enterprise Edition и стандартный выпуск

- SQL Server 2016, выпуск Enterprise Edition и стандартный выпуск

- SQL Server 2014, выпуск Enterprise Edition и стандартный выпуск
    
- SQL Server 2012 с пакетом обновления 2 (SP2) и CU2 (Enterprise Edition и Standard Edition)

Для использования отказоустойчивой кластеризации SQL сначала необходимо настроить и настроить кластер SQL Server перед развертыванием пула переднего плана. Рекомендации и инструкции по настройке отказоустойчивой кластеризации в SQL Server 2012 можно найти в [https://technet.microsoft.com/library/hh231721.aspx](https://technet.microsoft.com/library/hh231721.aspx)разделе.

> [!NOTE]
> SQL Server 2019, 2017 и SQL Server 2016 — это единственные версии, которые поддерживаются в Skype для бизнеса Server 2019.
    
Для использования отказоустойчивой кластеризации SQL сначала необходимо настроить и настроить кластер SQL Server перед развертыванием пула переднего плана. Рекомендации и инструкции по настройке отказоустойчивой кластеризации в SQL Server 2014 и 2016 приведены в разделе [https://technet.microsoft.com/library/hh231721.aspx](https://technet.microsoft.com/library/hh231721.aspx). Сведения об отказоустойчивой кластеризации в SQL Server 2008 [https://technet.microsoft.com/library/ms189134(v=sql.105).aspx](https://technet.microsoft.com/library/ms189134%28v=sql.105%29.aspx)можно найти в разделе.
  
При установке SQL Server следует также установить SQL Server Management Studio для управления расположениями базы данных и файлов журнала. SQL Server Management Studio устанавливается с SQL Server как необязательный компонент.
  
