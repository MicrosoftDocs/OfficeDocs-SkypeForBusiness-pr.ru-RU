---
title: Высокая доступность back End Server в Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: c559aacb-4e1d-4e78-9582-41f966ad418d
description: Узнайте о вариантах высокой доступности back end Server, поддерживаемых в Skype для бизнеса Server, включая группы доступности AlwaysOn, экземпляры кластера failover AlwaysOn, зеркальное зеркальное отражение баз данных и кластеризация SQL неудачной работы.
ms.openlocfilehash: 31ec37d898bd1f04c07142de1849928656f3238e
ms.sourcegitcommit: 01087be29daa3abce7d3b03a55ba5ef8db4ca161
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "51119378"
---
# <a name="back-end-server-high-availability-in-skype-for-business-server"></a>Высокая доступность back End Server в Skype для бизнеса Server
 
Узнайте о вариантах высокой доступности back end Server, поддерживаемых в Skype для бизнеса Server, включая группы доступности AlwaysOn, экземпляры кластера failover AlwaysOn, зеркальное зеркальное отражение баз данных и кластеризация SQL неудачной работы.
  
Чтобы повысить доступность серверов back end, у вас есть четыре варианта:
  
- Зеркальное отображение базы данных
    
- группы доступности AlwaysOn;
    
- Экземпляры кластера неудачной остановки AlwaysOn (FCI)
    
- SQL кластеризация сбойных сбойов
    
Использование одного из этих решений является необязательным, но рекомендуется поддерживать непрерывность бизнеса вашей организации. В противном случае при сбитом сервере базы данных может привести к потере значительных данных Skype для бизнес-сервера. 
  
Зеркальное зеркальное отражение базы данных можно настроить только с помощью Topology Builder. Для групп доступности AlwaysOn, экземпляров кластера неудачной передачи alwaysOn или SQL кластеров неудачной передачи данных для создания решения с высокой доступностью SQL Server для создания решения с высокой доступностью можно использовать Topology Builder, чтобы связать его с пулом переднего конца.
  
Если для восстановления аварийного восстановления используется высокий уровень доступности back End Server в пуле переднего конца, который в паре с другим пулом переднего конца, необходимо использовать одно и то же решение с высокой доступностью в обоих пулах. 
  
## <a name="database-mirroring"></a>Зеркальное отображение базы данных

Skype для бизнеса Server поддерживает зеркальное отражение с помощью следующего программного обеспечения базы данных:
  
- SQL Server 2019 г. и Enterprise Edition, и Standard Edition

- SQL Server 2017 г. и Enterprise Edition, и Standard Edition

- SQL Server 2016 г. и Enterprise Edition, и Standard Edition

- SQL Server 2014 г. и Enterprise Edition, и Standard Edition
    
- SQL Server 2012 г. SP2 и CU2, как Корпоративный выпуск, так и Standard Edition
    

> [!NOTE]
> SQL зеркальное отражение доступно в Skype для бизнеса Server 2015, но больше не поддерживается в Skype для бизнеса Server 2019. Только поддерживаемые параметры в Skype для бизнеса Server 2019 — это группы доступности AlwaysOn, экземпляры кластеров неудачной работы AlwaysOn и SQL кластеры неудачной работы.
    
Асинхронное зеркальное зеркальное отражение базы данных не поддерживается для высокой доступности back End Server в Skype для бизнеса Server. В остальной части этого документа зеркальное отражение баз данных означает синхронное зеркальное отражение базы данных, если не указано иное. 
  
При развертывании зеркального зеркального зеркала баз данных в пуле передней части все базы данных Skype для бизнес-сервера в пуле зеркально отражаются, включая центральный магазин управления, если он расположен в этом пуле, а также базу данных приложений группы реагирования и базу данных приложений Call Park, если эти приложения работают в пуле. 
  
При зеркальном зеркальном использовании баз данных для серверов не требуется использовать общее хранилище. Каждый сервер хранит свою копию баз данных в локальном хранилище. 
  
Вы можете развернуть зеркальное отражение базы данных со свидетелем или без него. Рекомендуется использовать следящий сервер, поскольку он обеспечивает автоматическую отработку отказа внутренним сервером. В противном случае администратор должен запускать отработку отказа вручную. Обратите внимание, что даже если следящий сервер развернут, администратор все равно при необходимости может запустить отработку отказа внутренним сервером вручную.
  
Одни следящий сервер можно использовать для нескольких пар внутренних серверов. Строгого взаимно-однозначного соответствия между следящими серверами и парами внутренних серверов нет. Развертывания с одним следящим сервером для нескольких пар внутренних серверов менее отказоустойчивы, чем топологии с отдельным следящим сервером для каждой пары внутренних серверов. 
  
### <a name="guidelines-for-planning-back-end-server-mirroring"></a>Рекомендации по планированию зеркального сервера back End Server

В целом, для настройки зеркального отображения SQL между двумя внутренними серверами с ресурсом-свидетелем требуется следующее:
  
- Версия сервера основного сервера должна SQL Server для SQL зеркального зеркального обеспечения.
    
- На основном ресурсе, зеркальном ресурсе и ресурсе-свидетеле (если развертывается) должна быть установлена одна и та же версия SQL Server. 
    
- На основном и зеркальном ресурсах должен быть установлен один и тот же выпуск SQL Server. На ресурсе-свидетеле может быть установлен другой выпуск.
    
Для SQL с точки зрения того, какие SQL версии поддерживаются для роли [](/sql/database-engine/database-mirroring/database-mirroring-witness) свидетеля, см. в библиотека MSDN.
  
Перед настройкой зеркального зеркального сервера сначала необходимо правильно настроить SQL базы данных. Подробные сведения см. в материале "Настройка учетных записей входа для зеркального зеркального учета баз данных или [групп доступности AlwaysOn (SQL Server)".](/sql/database-engine/database-mirroring/set-up-login-accounts-database-mirroring-always-on-availability)
  
При использовании зеркального отображения SQL режим восстановления базы данных всегда задан как **Полный**, т. е. вы должны регулярно внимательно следить за размером журнала транзакций и журналов транзакций резервного копирования, чтобы предотвратить нехватку места на диске на фоновых серверах. Частота резервного копирования журналов транзакций зависит от скорости роста журналов, которая в свою очередь зависит от транзакций баз данных в результате действий пользователей в пуле переднего плана. Рекомендуется определить ожидаемую скорость роста журналов для полезной нагрузки развертывания Lync, чтобы вы могли правильно провести планирование. В следующих статьях представлены дополнительные сведения об управлении резервным копированием и журналами SQL:
  
> [!IMPORTANT]
> Использование topology Builder или cmdlets для SQL зеркального зеркала поддерживается только в том случае, если первичные, зеркальные и свидетельские (при желании) серверы относятся к одному домену. Если необходимо настроить зеркальное отображение SQL для серверов в других доменах, см. документацию по SQL Server. 

> [!NOTE]
> SQL зеркальное отражение доступно в Skype для бизнеса Server 2015, но больше не поддерживается в Skype для бизнеса Server 2019. В Skype для бизнеса Server 2019 предпочтительны группы доступности AlwaysOn, экземпляры кластеров неудачной передачи данных AlwaysOn и SQL кластеризация неудачи.
  
### <a name="recovery-time-for-automatic-back-end-server-failover-with-database-mirroring"></a>Время восстановления при автоматическом сбойе back End Server с зеркальным отражением базы данных

Для автоматической неудачи back End с зеркальным отражением баз данных цель инженерного обеспечения для цели времени восстановления (RTO) — 5 минут. Из-за синхронного зеркального зеркального взаимодействия с базой данных мы не ожидаем потери данных во время сбоев back End Server, за исключением редких случаев, когда одновременно с серверами одновременно сдаются как передние, так и серверы заднего конечного сервера во время передачи данных между серверами. Проектная целевая точка восстановления (RPO) составляет 5 минут.
  
### <a name="user-experience-during-back-end-server-failure-with-database-mirroring"></a>Пользовательский опыт во время сбоя back End Server с зеркальным отражением базы данных

То, каким образом отказ отразится на пользователе, зависит от природы отказа и топологии.
  
Если вы используете зеркальное отражение базы данных и настроен свидетель, а основной не удается, сбой back End Server происходит автоматически и быстро. Активные пользователи не должны заметить особых пауз в своих текущих сеансах.
  
Если следящий сервер на настроен, администратору потребуется некоторое время для проведения отработки отказа вручную. В этот период активные пользователи могут заметить последствия. Они продолжат свои сеансы как обычно в течение 30 минут. Если основная не восстановлена или администратор не справился с резервной копией, пользователи переключаются на режим устойчивости, что означает, что они не могут выполнять задачи, которые требуют постоянных изменений на сервере Lync Server (например, добавление контакта).
  
При отказе и главного, и внутреннего зеркальных серверов или при отказе одного из них и следящего сервера внутренний сервер становится недоступным (даже если это основной сервер, продолжающий работать). В этом случае активные пользователи переключаются в режим устойчивости через некоторое время.
  
## <a name="alwayson-availability-groups-and-alwayson-failover-cluster-instances"></a>Группы доступности AlwaysOn и экземпляры кластера неудачной остановки AlwaysOn

Skype для бизнеса Server поддерживает группы доступности AlwaysOn только в качестве активных/пассивных, а не активных и активных. 
  
Чтобы использовать группы доступности AlwaysOn или экземпляры кластера неудачной остановки AlwaysOn, сначала SQL Server для настройки и настройки решения высокой доступности. Затем можно использовать Topology Builder, чтобы связать его с пулом переднего конца.

Skype для бизнеса Server поддерживает AlwaysOn с помощью следующего программного обеспечения базы данных:

- SQL Server 2019 Корпоративный выпуск

- SQL Server 2019 Standard Edition с ограничениями см. в заметке ниже

- SQL Server 2017 Корпоративный выпуск

- SQL Server 2017 Standard Edition с ограничениями см. в заметке ниже

- SQL Server 2016 корпоративный выпуск

- SQL Server 2016 Standard Edition с ограничениями см. в заметке ниже

- SQL Server 2014 корпоративный выпуск
    
- SQL Server 2012 sp2 и CU2 Enterprise Edition

> [!NOTE]
> SQL Server 2019, 2017 и 2016 годов — это единственные версии, поддерживаемые Skype для бизнеса Server 2019.

> [!NOTE]
> Always On Availability  Groups не поддерживается в SQL 2016, 2017 и 2019 стандартных выпусках, но можно использовать экземпляры кластера Always On Failover. Дополнительные новости см. в выпуске [Editions и поддерживаемых SQL Server 2016.](/sql/sql-server/editions-and-components-of-sql-server-2016?view=sql-server-2017)
  
> [!IMPORTANT]
> Имена экземпляров для нескольких экземпляров группы доступности AlwaysOn должны быть одинаковыми. 
  
Действия по развертыванию групп доступности AlwaysOn см. в примере [Развертывание группы доступности AlwaysOn](../../deploy/deploy-high-availability-and-disaster-recovery/alwayson-availability-group.md)на сервере back end server в Skype для бизнеса Server.
  
## <a name="sql-server-failover-clustering"></a>SQL Server кластеризация failover

Skype для бизнеса Server поддерживает SQL Server кластеризация с помощью следующего программного обеспечения базы данных:
  
- SQL Server 2019 г. и Enterprise Edition, и Standard Edition

- SQL Server 2017 г. и Enterprise Edition, и Standard Edition

- SQL Server 2016 г. и Enterprise Edition, и Standard Edition

- SQL Server 2014 г. и Enterprise Edition, и Standard Edition
    
- SQL Server 2012 г. SP2 и CU2, как Корпоративный выпуск, так и Standard Edition

Чтобы использовать SQL кластеров, необходимо сначала настроить и настроить кластер SQL Server перед развертыванием пула переднего конца. В 2012 г. см. инструкции по настройке кластеров для неудачной работы SQL Server 2012 [https://technet.microsoft.com/library/hh231721.aspx](/sql/sql-server/failover-clusters/install/sql-server-failover-cluster-installation) г. .

> [!NOTE]
> SQL Server 2019, 2017 и SQL Server 2016 являются единственными версиями, поддерживаемыми Skype для бизнеса Server 2019.
    
Чтобы использовать SQL кластеров, необходимо сначала настроить и настроить кластер SQL Server перед развертыванием пула переднего конца. В 2014 и 2016 годах см. SQL Server инструкции по настройке кластеров для неудачной [https://technet.microsoft.com/library/hh231721.aspx](/sql/sql-server/failover-clusters/install/sql-server-failover-cluster-installation) работы. Кластеризация неудачи в SQL Server 2008 г. [https://technet.microsoft.com/library/ms189134(v=sql.105).aspx](/previous-versions/sql/sql-server-2008-r2/ms189134(v=sql.105)) см. в .
  
При установке SQL Server следует установить SQL Server Management Studio для управления расположениями баз данных и файлов журналов. SQL Server при установке SQL Server.
