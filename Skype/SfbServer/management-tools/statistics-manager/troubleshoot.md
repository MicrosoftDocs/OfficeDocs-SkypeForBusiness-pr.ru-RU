---
title: Устранение проблем диспетчера статистики в Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
ms.localizationpriority: medium
ms.collection: IT_Skype16
ms.assetid: 946189fa-521f-455c-9762-904e7e41b791
description: Сводка. Ознакомьтесь с этой темой, чтобы устранить неполадки при развертывании диспетчера статистики для Skype для бизнеса Server.
ms.openlocfilehash: 622e3fdecc9cbe0def1f87a623692cb93889bb00
ms.sourcegitcommit: 556fffc96729150efcc04cd5d6069c402012421e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2021
ms.locfileid: "58612058"
---
# <a name="troubleshoot-statistics-manager-for-skype-for-business-server"></a>Устранение проблем диспетчера статистики в Skype для бизнеса Server
 
**Сводка:** Ознакомьтесь с этой темой, чтобы устранить неполадки при развертывании диспетчера статистики для Skype для бизнеса Server.
  
В этом разделе описывается, как устранить неполадки в развертывании диспетчера статистики, охарактеризовав события, которые вы можете увидеть в журнале событий приложения, и соответствующие действия, которые можно принять для устранения события. В этом разделе содержатся следующие разделы:
  
- [События агента](troubleshoot.md#BKMK_Agent)
    
- [События для слушателей](troubleshoot.md#BKMK_Listener)
    
- [Проблемы с веб-сайтом](troubleshoot.md#BKMK_Website)
    
## <a name="agent-events"></a>События агента
<a name="BKMK_Agent"> </a>

- **1000** — Невозможно настроить ограничителер процессора (Объект задания) — Неизвестная причина
    
- **1001** — ограничение процесса не допускается в процессе (возможно, уже внутри объекта Задания)
    
    Агент выполняется внутри объекта Windows, чтобы автоматически ограничить его след памяти. Если агент не запустится и эти записи событий присутствуют в журнале событий, объект Job не может быть моментально на сервере. Чтобы обойти это, верхний предел памяти можно удалить, изменив значение в файле config:
    
  ```console
  C:\Program Files\Skype for Business Server StatsMan Agent\PerfAgent.exe.config
  ```

    Поиск "MaxProcessMemoryMB" и изменение значения на "0", как показано:
    
  ```xml
  <setting name="MaxProcessMemoryMB" serializeAs="String"> <value>300</value> </setting>
  ```

    > [!NOTE]
    > Если это изменение будет сделано, агент, как правило, по-прежнему будет потреблять 100 МБ памяти, однако он не будет принудительно ограничен \< 300 МБ, как это по умолчанию. Если это изменение сделано, рекомендуется внимательно следить за использованием памяти, чтобы агент не потреблял большое количество памяти на хост-машине. 
  
- **2000 —** сбой инициализации клиента
    
- **2001 г.** Подключение к службе на любом источнике IP не возможно.
    
    Если агент не может подключиться к компьютеру прослушиватель, проверьте следующее:
    
    1. Убедитесь, что служба listener запущена на компьютере listener. Если нет, убедитесь, что Redis работает на этом сервере, а затем перезапустите службу listener.
        
        Проверьте журнал событий Диспетчер статистики на компьютере прослушиватель, чтобы убедиться, что нет проблем с самой службой прослушивания диспетчера статистики.
        
    2. Используйте средство подключения, например telnet, для проверки подключения с компьютера Agent к прослушивательу в правильном порту.
        
        Если нет, убедитесь, что правило входящих брандмауэров включено на компьютере Listener для сетевого типа, к который подключен компьютер listener (private/public/domain). Если компьютер прослушиватель не присоединяется к домену, сеть может быть указана как общедоступный, и в этом случае правила брандмауэра, установленные с диспетчером статистики, не будут применяться по умолчанию.
    
- **4000** — невыполнение загрузки данных сервера из listener (неизвестная причина)
    
  - **4001** — сервер, не найденный в топологии слушателей
    
    Эта ошибка произойдет, если сервер успешно подключается к прослушиватель, но сервер не был добавлен в топологию кэша слушателя. Параметры разрешения:
    
  - Убедитесь, что вы следовали инструкциям по импорту топологии. См. [в этой ленте](deploy.md#BKMK_ImportTopology)Импорт топологии . 
    
  - Если агент находится на сервере, который не указан в топологии (например, узлы в кластере SQL AlwaysOn), необходимо добавить агента вручную, следуя инструкциям в [Импорт](deploy.md#BKMK_ImportTopology)топологии .
    
  - **4002** — недействительный пароль слушателя
    
    Зашифрованный пароль, который пытается использовать агент, не совпадает с паролем службы в самом прослушивателье. Удалить агент и повторно установить его с помощью правильного пароля службы.
    
  - **4003** — несоответствие отпечатков пальцев сертификата
    
    Отпечаток сертификата, отданный агенту во время установки, не совпадает с отпечатком пальца в сертификате, который в настоящее время используется слушателем, и поэтому подключение будет отказано. Удалить агент и повторно установить его с помощью правильного отпечатка пальца сертификата.
    
  - **4004** — недействительный ответ или httpStatusCode
    
    Слушатель не отвечает с ожидаемым состоянием. 
    
  - Если подключение подключено, проверьте конфигурацию прокси.
    
  - Проверьте журнал StatsMan компьютера-прослушиватель для проверки проблем с его конфигурацией.
    
  - **4005** — невозможно десериализировать XML
    
    Сведения о сервере на сервере прослушиватель повреждены или может возникнуть несоответствие версии между компьютерами агента и слушателя. Убедитесь, что версии совпадают, и проверьте журнал событий listener для проблем.
    
## <a name="listener-events"></a>События для слушателей
<a name="BKMK_Listener"> </a>

- **10000** — неизвестная причина отказа при запуске (они невозвратны, и в результате служба остановится или сбой)
    
  - **10001** — проблема конфигурации
    
    Обычно это произойдет, когда файл [listener_install_location]\PerfAgentListener.exe.config был изменен вручную и не может быть прочитан приложением.
    
  - **10002** — ошибка инициализации http listener
    
    Это событие обычно регистрируется, если URL-адрес ACL не был установлен должным образом во время установки или сертификат SSL является недействительным. Убедитесь, что сертификат в конфигурации действителен. Если это так, переустановка прослушиватель в соответствии с инструкциями в [диспетчере развертывания статистики](deploy.md#BKMK_Deploy).
    
  - **10003** — сбой Redis
    
  - **10004** — сбой инфраструктуры кэшинга
    
  - **10007** — Параметры (хранится в redis)
    
    Слушатель не мог связаться с Redis или получить хорошо сформированные данные из кэша и не мог запустить. Убедитесь, что служба Redis запущена и настроена правильно на сервере.
    
  - **10005** — ирисовка и разрисовка данных сервера
    
    Сведения топологии в кэше Redis недействительны. Сначала попытайтесь перезапустить Redis и listener. Если ошибка сохраняется, [см. в этой](deploy.md#BKMK_ImportTopology) ленте Импорт топологии для воссоздания данных топологии.
    
- **10100** — отключение PING Redis
    
  - **10101** — Продолжающееся отключение Redis PING (каждые 60 секунд)
    
  - **30100** — восстановлено отключение PING Redis
    
    Они будут внесены в журнал, если слушатель не может подключиться к Redis. Убедитесь, что redis запущен, и подключение к сети между прослушиватель и Redis доступно.
    
- **10200** — отключение записи Redis
    
  - **10201** — продолжалось отключение записи Redis (каждые 60 секунд)
    
  - **30100** — устранено отключение записи Redis
    
    Они будут внесены в журнал, когда слушатель не может написать в кэш Redis. Убедитесь, что redis запущен, и подключение к сети между прослушиватель и Redis доступно.
    
- **30000** — успешно запущен
    
    Регистрируется каждый раз, когда прослушиватель запущен.
    
- **22000** — инициализация агента диспетчера статистики успешно.
    
- **23000** — инициализация EventLogQueryManager успешно (первый раз или после сбоя)
    
- **24000** — инициализация serverinfo успешно (первый раз или после сбоя)
    
- **25000** — слушатель возвращается в интернет после отказа от публикации (или первого успешного сообщения)
    
- **5000** — запуск автономного прослушивания для размещения данных
    
- **5001** — прослушиватель по-прежнему отключен в течение длительного периода
    
    Эти события могут быть полезны для мониторинга/оповещений и очистки.
    
## <a name="website-issues"></a>Проблемы с веб-сайтом
<a name="BKMK_Website"> </a>

- Повторяющиеся запросы входа в Chrome — это ошибка, которая была устранена в версии 1.1. Убедитесь, что вы обновили последнюю версию диспетчера статистики, если в браузере Chrome вы видите повторные запросы входа. Чтобы проверить версию запущенного веб-сайта:
    
  - В Проводнике файлов откройте (каталог по умолчанию)
    
  - Щелкните правой кнопкой мыши StatsManHubWebSite.dll и просмотреть его свойства.
    
  - Если компьютер не может быть найден в представлении ландшафта KHI или представлении Counter Details, убедитесь, что он является членом сайта и пула. Если это не так, он не будет отображаться в этих представлениях. Сведения об определении сайта и пула для сервера в топологии см. в сайте [Import the topology.](deploy.md#BKMK_ImportTopology)
    
  - Версия продукта будет показана в подробностях Описание.
    
## <a name="for-more-information"></a>Дополнительные сведения
<a name="BKMK_Website"> </a>

Дополнительные сведения см. в указанных ниже статьях.
  
- [Планирование диспетчера статистики в Skype для бизнеса Server](plan.md)
    
- [Развертывание диспетчера статистики в Skype для бизнеса Server](deploy.md)
    
- [Обновление диспетчера статистики в Skype для бизнеса Server](upgrade.md)
