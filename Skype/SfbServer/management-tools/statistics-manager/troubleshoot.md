---
title: Устранение проблем диспетчера статистики в Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 946189fa-521f-455c-9762-904e7e41b791
description: Сводка. Ознакомьтесь с этой темой, чтобы устранить неполадки при развертывании диспетчера статистики в Skype для бизнеса Server.
ms.openlocfilehash: ea3d6f66003841e893ebe2dcc5d3fe02d0da125b
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/12/2021
ms.locfileid: "49821779"
---
# <a name="troubleshoot-statistics-manager-for-skype-for-business-server"></a>Устранение проблем диспетчера статистики в Skype для бизнеса Server
 
**Сводка:** Прочитайте этот раздел, чтобы устранить неполадки развертывания диспетчера статистики в Skype для бизнеса Server.
  
В этом разделе описывается, как устранить неполадки в развертывании диспетчера статистики, описывая события, которые можно увидеть в журнале событий приложений, а также соответствующие действия, которые можно принять для устранения этого события. В этом разделе содержатся следующие разделы:
  
- [События агента](troubleshoot.md#BKMK_Agent)
    
- [События прослушиватель](troubleshoot.md#BKMK_Listener)
    
- [Проблемы с веб-сайтом](troubleshoot.md#BKMK_Website)
    
## <a name="agent-events"></a>События агента
<a name="BKMK_Agent"> </a>

- **1000** — не удается настроить обработчик (объект задания) — неизвестная причина
    
- **1001** — ограничение процесса не разрешено для процесса (возможно, уже внутри объекта задания)
    
    Агент выполняется внутри объекта задания Windows, чтобы автоматически ограничить объем памяти. Если агент не запустится и эти записи событий присутствуют в журнале событий, объект задания не может быть сгенелен на сервере. Чтобы обойти эту возможность, верхний предел памяти можно удалить, изменив значение в файле config:
    
  ```console
  C:\Program Files\Skype for Business Server StatsMan Agent\PerfAgent.exe.config
  ```

    Найди "MaxProcessMemoryMB" и измените значение на "0", как показано ниже:
    
  ```xml
  <setting name="MaxProcessMemoryMB" serializeAs="String"> <value>300</value> </setting>
  ```

    > [!NOTE]
    > Если это изменение внося, агент по-прежнему будет потреблять 100 МБ памяти, но не будет принудительно ограничен \< до 300 МБ, как по умолчанию. При изменении рекомендуется внимательно следить за использованием памяти, чтобы агент не потреблял большой объем памяти на хост-компьютере. 
  
- **2000** — сбой инициализации клиента
    
- **2001**— подключение к службе на любом из исходных IP-адресов не может быть выполнено
    
    Если агенту не удается подключиться к компьютеру прослушиватель, проверьте следующее:
    
    1. Убедитесь, что служба прослушиватель запущена на компьютере прослушиватель. В этом случае убедитесь, что Redis запущен на этом сервере, а затем перезапустите службу прослушиватель.
        
        Проверьте журнал событий диспетчера статистики на компьютере прослушиватель, чтобы убедиться, что нет проблем с самой службой прослушиватель диспетчера статистики.
        
    2. Используйте средство подключения, например telnet, для проверки подключения компьютера агента к прослушивательу на правильном порте.
        
        Если нет, убедитесь, что на компьютере прослушиватель включено правило входящих брандмауэров для сетевого типа, к который подключен компьютер прослушиватель (частный,общедоступный/домен). Если компьютер прослушиватель не присоединяется к домену, сеть может быть указана как общедоступный, и в этом случае правила брандмауэра, установленные с помощью диспетчера статистики, не будут применяться по умолчанию.
    
- **4000** — сбой загрузки данных сервера из прослушиватель (неизвестная причина)
    
  - **4001** — сервер не найден в топологии прослушиватель
    
    Эта ошибка возникает, если сервер успешно подключается к прослушивательу, но сервер не был добавлен в топологию в кэше прослушиватель. Варианты разрешения:
    
  - Убедитесь, что вы следовали инструкциям по импорту топологии. См. ["Импорт топологии".](deploy.md#BKMK_ImportTopology) 
    
  - Если агент находится на сервере, который не указан в топологии (например, узлы в кластере SQL AlwaysOn), вам потребуется добавить [](deploy.md#BKMK_ImportTopology)агент вручную, следуя инструкциям в импорте топологии.
    
  - **4002** — недопустимый пароль прослушиватель
    
    Зашифрованный пароль, который пытается использовать агент, не совпадает с паролем службы в самом прослушивателье. Удалить агент и повторно установить его с использованием правильного пароля службы.
    
  - **4003** — несоответствие отпечатков сертификатов
    
    Отпечаток сертификата, заданный агенту во время установки, не совпадает с отпечатком сертификата, используемом прослушивачиком, поэтому от подключения будет отказано. Удалить агент и повторно установить его с использованием правильного отпечатка сертификата.
    
  - **4004** — недопустимый ответ или HttpStatusCode
    
    Прослушиватель не отвечает ожидаемым состоянием. 
    
  - Если подключение подключено к прокси-серверу, проверьте конфигурацию прокси-сервера.
    
  - Проверьте журнал StatsMan компьютера прослушиватель на проблемы с его конфигурацией.
    
  - **4005** — не удалось десериализировать XML
    
    Сведения о сервере на сервере прослушиватель повреждены или могут быть несоответствия версий между агентом и компьютерами прослушиватель. Убедитесь, что версии совпадают, и проверьте журнал событий прослушиватель на проблемы.
    
## <a name="listener-events"></a>События прослушиватель
<a name="BKMK_Listener"> </a>

- **10000** — неизвестная причина сбоя при запуске (они невозмежны, и служба остановится или сбой в результате)
    
  - **10001** — проблема конфигурации
    
    Обычно это происходит, когда файл [listener_install_location]\PerfAgentListener.exe.config изменен вручную и не может быть прочитан приложением.
    
  - **10002** — ошибка инициализации HTTP-прослушиватель
    
    Как правило, это событие регистрируется, если ACL URL-адреса неправильно заданной во время установки или если сертификат SSL недействителен. Убедитесь, что сертификат в конфигурации действителен. В этом случае переустановите прослушиватель в соответствии с инструкциями в [диспетчере статистики.](deploy.md#BKMK_Deploy)
    
  - **10003** — сбой Redis
    
  - **10004** — сбой инфраструктуры кэшинга
    
  - **10007** — параметры (сохраненные в redis)
    
    Прослушиватель не смог связаться с Redis или получить сформированные данные из кэша и не мог запуститься. Убедитесь, что служба Redis запущена и настроена правильно на сервере.
    
  - **10005** — итеряль и разбиение информации о сервере
    
    Недопустимые сведения о топологии в кэше Redis. Сначала перезапустите Redis и прослушиватель. Если ошибка сохраняется, см. ["Импорт топологии для](deploy.md#BKMK_ImportTopology) воссоздания данных топологии".
    
- **10100** — отключение Redis PING
    
  - **10101** — постоянное отключение Redis PING (каждые 60 секунд)
    
  - **30100** — восстановлено отключение PING Redis
    
    Они будут регистрироваться, если прослушиватель не может подключиться к Redis. Убедитесь, что redis запущен, и доступно сетевое подключение между прослушивательом и Redis.
    
- **10200** — с отключение записи Redis
    
  - **10201** — продолжающееся отключение записи Redis (каждые 60 секунд)
    
  - **30100** — устранено отключение записи Redis
    
    Они будут записываться в журнал, если прослушиватель не сможет записать данные в кэш Redis. Убедитесь, что redis запущен, и доступно сетевое подключение между прослушивательом и Redis.
    
- **30000** — успешно запущено
    
    Регистрируется каждый раз, когда прослушиватель запущен.
    
- **22000** — успешно инициализация агента диспетчера статистики.
    
- **23000** — инициализация EventLogQueryManager успешно (в первый раз или после сбоя)
    
- **24000** — инициализация serverinfo успешно (в первый раз или после сбоя)
    
- **25000** — прослушиватель снова в сети после сбоя публикации (или первой успешной публикации)
    
- **5000** — запуск прослушиватель в автономном режиме для публикации данных
    
- **5001** — прослушиватель остается в автономном режиме в течение длительного периода времени
    
    Эти события могут быть полезны при отслеживании, оповещении и очистке проблем.
    
## <a name="website-issues"></a>Проблемы с веб-сайтом
<a name="BKMK_Website"> </a>

- Повторяющиеся запросы входа в Chrome — это ошибка, которая была устранена в версии 1.1. Убедитесь, что вы обновили до последней версии диспетчера статистики, если в браузере Chrome вы видите повторяемую подсказку для входа. Чтобы проверить версию веб-сайта, вы работаете:
    
  - В проводнике откройте (каталог по умолчанию)
    
  - Щелкните правой кнопкой мыши StatsManHubWebSite.dll и просмотрете его свойства.
    
  - Если компьютер не может быть найден в представлении "Альбомная" или "Сведения счетчика", убедитесь, что он является членом сайта и пула. Если это не так, он не будет отображаться в этих представлениях. Сведения об определении сайта и пула для сервера в топологии см. в под вопросе "Импорт [топологии".](deploy.md#BKMK_ImportTopology)
    
  - Версия продукта будет показана в описании.
    
## <a name="for-more-information"></a>Дополнительные сведения
<a name="BKMK_Website"> </a>

Дополнительные сведения см. в указанных ниже статьях.
  
- [Планирование диспетчера статистики в Skype для бизнеса Server](plan.md)
    
- [Развертывание диспетчера статистики в Skype для бизнеса Server](deploy.md)
    
- [Обновление диспетчера статистики в Skype для бизнеса Server](upgrade.md)
