---
title: Устранение проблем диспетчера статистики в Skype для бизнеса Server
ms.reviewer: ''
ms.author: serdars
author: SerdarSoysal
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
ms.localizationpriority: medium
ms.collection: IT_Skype16
ms.assetid: 946189fa-521f-455c-9762-904e7e41b791
description: Сводка. Ознакомьтесь с этой статьей, чтобы устранить неполадки при развертывании диспетчера статистики для Skype для бизнеса Server.
ms.openlocfilehash: a7604b15826ee55e127cd24447b0557b24b78548
ms.sourcegitcommit: 296862e02b548f0212c9c70504e65b467d459cc3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/25/2022
ms.locfileid: "65675281"
---
# <a name="troubleshoot-statistics-manager-for-skype-for-business-server"></a>Устранение проблем диспетчера статистики в Skype для бизнеса Server

**Сводка:** Ознакомьтесь с этой статьей, чтобы устранить неполадки при развертывании диспетчера статистики для Skype для бизнеса Server.

В этом разделе описывается, как устранять неполадки развертывания Диспетчера статистики, описывая события, которые могут отображаться в журнале событий приложения, и соответствующие действия, которые можно выполнить для устранения события. Этот раздел содержит следующие разделы:

- [События агента](troubleshoot.md#BKMK_Agent)

- [События прослушивателя](troubleshoot.md#BKMK_Listener)

- [Проблемы с веб-сайтом](troubleshoot.md#BKMK_Website)

## <a name="agent-events"></a>События агента
<a name="BKMK_Agent"> </a>

- **1000** — не удалось настроить ограничитель процессора (объект задания) — неизвестная причина

- **1001** — ограничение процесса не разрешено в процессе (возможно, уже внутри объекта задания)

    Агент выполняется внутри объекта Windows задания, чтобы автоматически ограничить занимаемую память. Если агент не запускается и эти записи событий присутствуют в журнале событий, объект задания не может быть создан на сервере. Чтобы обойти эту проблему, верхний предел памяти можно удалить, изменив значение в файле конфигурации:

  ```console
  C:\Program Files\Skype for Business Server StatsMan Agent\PerfAgent.exe.config
  ```

    Найдите "MaxProcessMemoryMB" и измените значение на "0", как показано ниже:

  ```xml
  <setting name="MaxProcessMemoryMB" serializeAs="String"> <value>300</value> </setting>
  ```

    > [!NOTE]
    > Если это изменение внесено, \< агент по-прежнему будет потреблять 100 МБ памяти, однако он не будет принудительно ограничен 300 МБ, как по умолчанию. Если это изменение внесено, рекомендуется внимательно отслеживать использование памяти, чтобы агент не потреблял большой объем памяти на своем хост-компьютере.

- **2000 —** сбой инициализации клиента

- **2001**. Не удалось установить подключение к службе по любому исходному IP-адресу

  Если агенту не удается подключиться к компьютеру прослушивателя, проверьте следующее:

  1. Убедитесь, что служба прослушивателя запущена на компьютере прослушивателя. В противном случае убедитесь, что Redis запущен на этом сервере, а затем перезапустите службу прослушивателя.

     Проверьте журнал событий диспетчера статистики на компьютере прослушивателя, чтобы убедиться в отсутствии проблем со службой прослушивателя диспетчера статистики.

  2. Используйте средство подключения, например telnet, для проверки подключения с компьютера агента к прослушивателю на правильном порте.

     В противном случае убедитесь, что на компьютере прослушивателя включено правило входящего брандмауэра для типа сети, к котором подключен компьютер прослушивателя (частный, общедоступный или домен). Если компьютер прослушивателя не присоединен к домену, сеть может быть указана как общедоступная, и в этом случае правила брандмауэра, установленные с помощью диспетчера статистики, не будут применяться по умолчанию.

- **4000** — сбой загрузки сведений о сервере из прослушивателя (неизвестная причина)

  - **4001** — сервер не найден в топологии прослушивателя

    Эта ошибка возникает, если сервер успешно подключается к прослушивателю, но сервер не был добавлен в топологию в кэше прослушивателя. Параметры разрешения:

  - Убедитесь, что вы выполнили инструкции по импорту топологии. См [. раздел "Импорт топологии"](deploy.md#BKMK_ImportTopology).

  - Если агент находится на сервере, который не указан в топологии (например, узлы в кластере SQL AlwaysOn), необходимо добавить агент вручную, следуя инструкциям в разделе "Импорт топологии[".](deploy.md#BKMK_ImportTopology)

  - **4002** — недопустимый пароль прослушивателя

    Зашифрованный пароль, который пытается использовать агент, не совпадает с паролем службы в самом прослушивателе. Удалите агент и повторно установите его, используя правильный пароль службы.

  - **4003** — несоответствие отпечатка сертификата

    Отпечаток сертификата, заданный агенту во время установки, не соответствует отпечатку сертификата, который прослушиватель использует в настоящее время, поэтому подключение будет отклонено. Удалите агент и повторно установите его, используя правильный отпечаток сертификата.

  - **4004** — недопустимый ответ или HttpStatusCode

    Прослушиватель не отвечает с ожидаемым состоянием.

  - Если подключение является прокси-сервером, проверьте конфигурацию прокси-сервера.

  - Проверьте журнал StatsMan компьютера прослушивателя на наличие проблем с его конфигурацией.

  - **4005** — не удалось десериализировать XML

    Данные сервера на сервере прослушивателя повреждены или может возникнуть несоответствие версий между агентом и компьютерами прослушивателя. Убедитесь, что версии совпадают, и проверьте журнал событий прослушивателя на наличие проблем.

## <a name="listener-events"></a>События прослушивателя
<a name="BKMK_Listener"> </a>

- **10000** — неизвестная причина сбоя при запуске (они не могут быть восстановлены, и в результате служба остановится или аварийно завершит работу).

  - **10001** — проблема с конфигурацией

    Обычно это происходит, когда [listener_install_location]\PerfAgentListener.exe.config файл был изменен вручную и не может быть прочитано приложением.

  - **10002** — ошибка инициализации прослушивателя HTTP

    Обычно это событие регистрируется, если ACL URL-адресов неправильно задан во время установки или сертификат SSL недопустим. Убедитесь, что сертификат в конфигурации действителен. Если это так, переустановите прослушиватель в соответствии с инструкциями в [разделе "Развертывание диспетчера статистики"](deploy.md#BKMK_Deploy).

  - **10003** — сбой Redis

  - **10004** — сбой инфраструктуры кэширования

  - **10007** — Параметры (хранится в Redis)

    Прослушивателю не удалось связаться с Redis или получить данные правильного формата из кэша и запустить его. Убедитесь, что служба Redis запущена и настроена правильно на сервере.

  - **10005** — извлечение и анализ сведений о сервере

    Недопустимые сведения о топологии в кэше Redis. Сначала попытайтесь перезапустить Redis и прослушиватель. Если ошибка сохраняется, см [. раздел "Импорт топологии](deploy.md#BKMK_ImportTopology) " для повторного создания данных топологии.

- **10100** — сбой проверки связи Redis

  - **10101** — redis PING продолжает сбой (каждые 60 секунд)

  - **30100** — восстановлен сбой проверки связи Redis

    Они будут регистрироваться, если прослушивателю не удается подключиться к Redis. Убедитесь, что Redis запущен и сетевое подключение между прослушивателем и Redis доступно.

- **10200 —** сбой записи Redis

  - **10201** — сбой записи Redis продолжается (каждые 60 секунд)

  - **30100** — устранен сбой записи Redis

    Они записываются в журнал, если прослушиватель не может выполнить запись в кэш Redis. Убедитесь, что Redis запущен и сетевое подключение между прослушивателем и Redis доступно.

- **30 000** — успешно запущено

    Регистрируется при каждом запуске прослушивателя.

- **22000 —** инициализация агента диспетчера статистики выполнена успешно.

- **23000** — инициализация EventLogQueryManager выполнена успешно (в первый раз или после сбоя).

- **24000** — инициализация serverinfo выполнена успешно (в первый раз или после сбоя)

- **25000** — прослушиватель снова находится в сети после сбоя публикации (или первой успешной публикации)

- **5000** — запуск прослушивателя в автономном режиме для публикации данных

- **5001** — прослушиватель по-прежнему находится в автономном режиме в течение продолжительного периода

    Эти события могут быть полезны для мониторинга, оповещений и устранения проблем.

## <a name="website-issues"></a>Проблемы с веб-сайтом
<a name="BKMK_Website"> </a>

- Повторяющиеся запросы на вход в Chrome — это ошибка, которая была устранена в версии 1.1. Убедитесь, что вы обновили диспетчер статистики до последней версии, если в браузере Chrome отображаются повторяющиеся запросы на вход. Чтобы проверить версию веб-сайта, выполнив следующие действия:

  - В проводник откройте (каталог по умолчанию)

  - Щелкните правой кнопкой мыши StatsManHubWebSite.dll и просмотрите его свойства.

  - Если компьютер не удается найти в представлении "Ландшафт KHI" или "Сведения о счетчике", убедитесь, что он является членом сайта и пула. В противном случае он не будет отображаться в этих представлениях. Сведения об определении сайта и пула для сервера в топологии см. в разделе "Импорт [топологии"](deploy.md#BKMK_ImportTopology).

  - Версия продукта будет отображаться в описании.

## <a name="for-more-information"></a>Дополнительные сведения
<a name="BKMK_Website"> </a>

Дополнительные сведения см. в указанных ниже статьях.

- [Планирование диспетчера статистики в Skype для бизнеса Server](plan.md)

- [Развертывание диспетчера статистики в Skype для бизнеса Server](deploy.md)

- [Обновление диспетчера статистики в Skype для бизнеса Server](upgrade.md)
