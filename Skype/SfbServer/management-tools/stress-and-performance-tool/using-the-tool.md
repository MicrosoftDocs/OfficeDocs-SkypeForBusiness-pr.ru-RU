---
title: Использование средства "стресс и производительность" в Skype для бизнеса Server 2015
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
ms.date: 2/13/2018
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 93f42230-24a2-418d-9770-bf4670a9d78f
description: Для работы с утилитой нагрузки и производительности Skype для бизнеса Server 2015 необходимо иметь возможность управлять пользователями, контактами и профилями пользователей, настраивать средство для запуска, а затем просматривать результаты и результатов, созданные этим инструментом.
ms.openlocfilehash: af4d0dcb1cc4196f98941799c61dcf29510ba795
ms.sourcegitcommit: 2cc98fcecd753e6e8374fc1b5a78b8e3d61e0cf7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2020
ms.locfileid: "40992486"
---
# <a name="using-the-skype-for-business-server-2015-stress-and-performance-tool"></a>Использование средства "стресс и производительность" в Skype для бизнеса Server 2015
 
Для работы с утилитой нагрузки и производительности Skype для бизнеса Server 2015 необходимо иметь возможность управлять пользователями, контактами и профилями пользователей, настраивать средство для запуска, а затем просматривать результаты и результатов, созданные этим инструментом.
  
Для работы с утилитой нагрузки и производительности Skype для бизнеса Server 2015 используются четыре области (исполняемый файл — Линкперфтул. exe).
  
- [Создание пользователей и контактов](using-the-tool.md#BKMK_CreateUsersAndContacts)
    
- [Настройка профиля пользователя](using-the-tool.md#BKMK_UserProfile)
    
- [Запуск Линкперфтул](using-the-tool.md#BKMK_RunTool)
    
- [Интерпретация результатов](using-the-tool.md#BKMK_Interpret)
    
## <a name="create-users-and-contacts"></a>Создание пользователей и контактов
<a name="BKMK_CreateUsersAndContacts"> </a>

Для создания пользователей и контактов для тестирования нагрузки и производительности вы должны использовать средство подготовки пользователей Skype для бизнеса Server 2015 (SB 2015) (Усерпровисионингтул. exe).
  
Ниже приведен список полезных терминов, которые могут быть полезны при чтении разделов.
  
- **Организационное подразделение** — организационное подразделение доменных служб Active Directory (AD DS) (OU).
    
- **Федеративные и перекрестный пулы** — пользователи, которые могут общаться с пользователями из других служб обмена мгновенными сообщениями (IM).
    
- **Списки рассылки** или рассылки. Это объекты доменных служб Active Directory, которые содержат список пользователей доменных служб Active Directory. Они используются для облегчения взаимодействия между группами людей.
    
- **Служба сведений о расположении** — служба Skype для бизнеса Server 2015, которая, когда она включена и настроена на телефоне, позволяет получить физическое расположение для расширенных служб 911 (E911).
    
- **Номера телефонов в США** — номера телефонов, назначенные пользователю, в дополнение к URI SIP, который используется для маршрутизации входящих и исходящих вызовов в обратном поиске по номеру (рнл).
    
### <a name="create-users-and-contacts-by-using-userprovisioningtoolexe"></a>Создание пользователей и контактов с помощью Усерпровисионингтул. exe

> [!NOTE]
> Прежде чем начать, убедитесь, что вы вошли в систему как член группы безопасности администраторов домена, чтобы запустить эту программу. Это необходимо сделать, так как вы собираетесь создавать пользователей Active Directory. 
  
Для создания пользователей и контактов для моделирования нагрузки необходимо использовать средство подготовки пользователей Skype для бизнеса Server.
  
**Средство подготовки пользователей в Skype для бизнеса Server** устанавливается вместе с пакетом **средств для установки и оценки производительности в Skype для бизнеса Server** . Убедитесь, что установщик пакетов (КапаЦитипланнингтул. msi) запущен на сервере переднего плана или на сервере Standard Edition, который вы планируете протестировать.
  
Вы можете запустить средство подготовки пользователей Skype для бизнеса Server, запустив файл Усерпровисионингтул. exe (расположенный по адресу% Инсталледдиректори% Линкстрессандперфтул \ Линкстресс) на сервере переднего плана или на сервере Standard Edition.
  
> [!IMPORTANT]
> Когда вы создадите большое количество пользователей (например, 10 000 или более), запустите Усерпровисионингтул. exe. Это необходимо сделать, так как средство будет создавать и настраивать *новых* пользователей рекламы.
  
Когда откроется средство подготовки пользователей, нажмите кнопку Конфигурация и выберите пункт Загрузка конфигурации. 
  
Чтобы приступить к настройке пользователей и контактов, загрузите файл по умолчанию, который входит в пакет, именуемый "Сампледата. XML". Это приведет к предзаполнению полей образцами данных, которые необходимо изменить, чтобы сделать их более подходящими для вашего развертывания.
  
Если у вас есть предварительно настроенный XML-файл, который уже содержит настроенные параметры, вы можете загрузить его. Заполните поля в средстве подготовки пользователей, как описано в разделах ниже.
  
### <a name="to-configure-server-options"></a>Чтобы настроить параметры сервера, выполните указанные ниже действия.

1. В поле полные доменные имена в **пуле переднего плана** введите полное доменное имя (FQDN) сервера Standard Edition или пул переднего плана, в котором вы хотите разместить пользователей.
    
2. В поле " **префикс имени пользователя** " введите префикс, который будет использоваться для Буст имен пользователей в целях тестирования (например, "TestUser").
    
3. В поле **Password (пароль** ) введите пароль, который будет использоваться для всех тестовых учетных записей пользователей.
    
4. В поле **domain Account (домен учетной записи** ) введите доменное имя текущего домена доменных имен (в котором вы хотите создать тестовых пользователей).
    
5. В поле " **подразделение** " введите имя домена доменных имен, в котором вы хотите создать данные тестовых пользователей. (Если подразделение уже не существует, оно будет создано для вас).
    
6. В поле **телефонный код города** введите код города с тремя цифрами, который будет использоваться во всех тестовых учетных записях пользователей. Убедитесь в том, что выбранный код города не конфликтует с кодами областей других пользователей в РЕКЛАМе.
    
7. Установите флажок **включить голосовую** связь, если вы хотите включить тестовых пользователей для корпоративного голосовой связи.
    
8. В поле **количество пользователей** укажите общее количество тестовых пользователей, которых вы хотите создать.
    
9. В поле **Начало индекса** введите начальный номер, который будет использоваться в качестве суффикса к префиксу имени пользователя (например, префикс "TestUser"), а имя будет заканчиваться на "0" в примере ниже.
    
     ![Средство подготовки пользователей с открытой вкладкой User Creation (Создание пользователя).](../../media/591d8280-8979-4a8c-83bc-af126e87bf29.png)
  
#### <a name="create-users-button"></a>Кнопка "создать пользователей"

При нажатии кнопки " **создать пользователей** " будут проверены введенные входные параметры. Если обнаружены ошибки проверки подлинности, вам будет предложено исправить их. Если все значения указаны правильно, пользователи будут отображаться в AD (в любом указанном вами подразделении). В нижней части средства появится индикатор выполнения. Не закрывайте приложение, пока активен индикатор выполнения.
  
Создание пользователей занимает время, поэтому следует планировать соответствующим образом. Этот процесс может занять от нескольких минут до небольшого количества пользователей, в течение нескольких часов.
  
Если у вас нет доступа к контроллеру домена Active Directory в тестовой среде, вы можете проверить создание пользователя, войдя в систему в качестве одного из пользователей в диапазоне, который вы указали для создания. Не забудьте использовать префикс и суффикс вместе с @sipDomain в качестве имени пользователя. Пример: <em>TestUser20@contoso.net</em> .
  
> [!NOTE]
> Если пользователи уже существуют, при нажатии кнопки "создать пользователей" они будут обновляться с учетом всех изменений в конфигурации. 
  
#### <a name="delete-users-button"></a>Кнопка "удалить пользователей"

При нажатии кнопки " **удалить пользователей** " входные параметры вкладки будут проверены. Если обнаружены ошибки проверки подлинности, вам будет предложено исправить их и, если введенные значения верны, указанные тестовые пользователи будут отключены и удалены из Active Directory. Появляется индикатор выполнения в нижней части вкладки, и вы не сможете закрыть приложение, пока активен индикатор выполнения.
  
> [!NOTE]
> Поддерживаются только телефонные номера в формате "США". Номера телефонов назначаются пользователям, и все пользователи, созданные Усерпровисионингтул. exe, по умолчанию включены в корпоративную голосовую почту. В любых сценариях, использующих номер телефона (например, автосекретарь конференц-связи или телефонные номера PSTN – КТСОП), используйте этот телефонный номер для правильного направления звонков. По этой причине у *каждого пользователя* должен быть *уникальный номер телефона* .
  
> [!NOTE]
> **Если вы хотите дважды создавать пользователей, команда завершится сбоем, если не используется другой код города или если предыдущие пользователи отключены с помощью командлета Disable-CsUser.**
  
> [!IMPORTANT]
> Прежде чем создавать контакты, необходимо завершить репликацию пользователей (это можно сделать на вкладке "Пользователи"). 
  
> [!IMPORTANT]
> Если вы только что создали пользователей, вам потребуется подождать, пока репликация в Skype для бизнеса Server не будет завершена и будет заполнены учетные записи пользователей в базе данных. **Если репликация пользователей еще не завершилась, появится сообщение об ошибке.** Вы узнаете, когда пользователи закончат репликацию при запуске службы интерфейса Skype для Business Server 2015 или успешно завершили командлет Get-CsUser для последнего пользователя указанного вами общего номера.
  
#### <a name="contacts-creation-tab"></a>Вкладка "Создание контактов"

На этой вкладке вы можете предоставить сведения о контактах пользователей для вашего тестирования.
  
![Средство подготовки пользователей с открытой вкладкой Contacts Creation (Создание контактов).](../../media/dfb7fdf1-fb97-4e8e-8608-c4995f95dd5b.png)
  
### <a name="to-configure-users-contacts-do-the-following"></a>Чтобы настроить контакты пользователей, выполните указанные ниже действия.

1. В поле **Среднее число контактов на пользователя** введите среднее количество контактов, которые нужно заполнить в списках контактов для каждого пользователя.
    
2. Установите флажок " **фиксированный** ", если вы хотите создать одинаковое количество контактов для каждого пользователя. Если вы хотите изменить число контактов, созданных для пользователей, снимите этот флажок.
    
3. В поле **Среднее число групп контактов на пользователя** введите количество групп контактов для каждого пользователя. Это значение должно быть меньше среднего количества **контактов на пользователя**.
    
4. В поле " **межплатформенные и Межкластерные процентные контакты** " введите число от 0 до 100. Этот процент контактов будет создан для федеративных пользователей.
    
5. В поле « **префикс пользователя для федеративного и междоменного пула** » введите имя пользователя для федеративных пользователей, которые будут добавлены в список контактов локальных пользователей.
    
6. В поле **домен SIP для федеративного и межплатформенного пула** введите имя домена SIP для федеративных пользователей.
    
7. Убедитесь, что на вкладке **Создание пользователя** указаны правильные данные. Контакты будут создаваться на вкладке "Создание пользователей" в разделе "Параметры".
    
8. Нажмите кнопку **создать контакты** , чтобы начать создание контакта. Этот процесс может занять несколько минут. После завершения работы появится диалоговое окно с сообщением "операция выполнена успешно". Вы можете проверить контакты, созданные при входе в систему в качестве пользователя, который был создан на вкладке Создание пользователей.
    
> [!NOTE]
> После создания контактов это средство перезапускает все серверы переднего плана в целевом пуле. Для начала работы сервера переднего плана может потребоваться больше времени (до 2 часов) в зависимости от того, сколько контактов было создано в этой операции. 
  
#### <a name="distribution-list"></a>Список рассылки

Средство "стресс и производительность" Skype для бизнеса Server 2015 может имитировать функцию расширения списка рассылки (DL) в клиенте Skype для бизнеса 2015. Вы можете пропустить этот шаг, если вы не хотите включать расширение DL в средстве подготовки пользователей.
  
![Средство подготовки пользователей с открытой вкладкой Distribution List Creation (Создание списка рассылки).](../../media/4b689306-70c4-4569-9842-15c73f038eb6.png)
  
На вкладке Список рассылки можно создавать списки, которые будут использоваться с помощью инструмента "нагрузка и производительность" для расширения списка рассылки. Перед созданием списков рассылки необходимо развернуть Skype для бизнеса Server 2015, в том числе запускать программу ForestPrep. Если это не так, атрибуты DL не будут существовать в схеме рекламы, поэтому средство не сможет создавать списки рассылки.
  
### <a name="to-configure-distribution-lists"></a>Чтобы настроить списки рассылки, выполните указанные ниже действия.

1. В поле **количество списков рассылки** укажите общее количество документов, которые вы хотите создать (рекомендуемая здесь рекомендация заключается в том, что вы начинаете использовать значение, которое удваивает количество пользователей).
    
2. В поле " **префикс списка рассылки** " введите префикс, который будет содержать все созданные списки рассылки, например *тестдл* . Это означает, что в 100 рассылки имена списков рассылки будут выглядеть так: testDL0, testDL1 и testDL99.
    
3. В поле **минимальное количество пользователей в файле Redist. List** введите минимальное значение, которое будет помещено в каждый из списков рассылки.
    
4. В поле **максимум участников в файле Redist. List** введите максимальное число пользователей, которых нужно добавить в каждый список рассылки.
    
#### <a name="create-distribution-lists-button"></a>Кнопка создания списков рассылки

При нажатии кнопки "создать списки рассылки" средство запрашивает Active Directory о том, есть ли списки рассылки, соответствующие префиксу и номерам. Это средство создает все списки, которые еще не существуют. При добавлении участников в созданные списки рассылки выбираются пользователи из диапазона, указанного на вкладке Создание пользователей.
  
#### <a name="location-info-service-config-tab"></a>Вкладка "Настройка службы сведений о расположении"

Средство "стресс и производительность" в Skype для бизнеса Server 2015 также может создавать фиктивные файлы конфигурации для службы сведений о расположении. Обратите внимание на то, что служба сведений о расположениях обычно не повлияет на серверы. 
  
![Средство подготовки пользователей с открытой вкладкой Location Info Service Config (Конфигурация сервиса данных о местоположении).](../../media/227662a2-e0c3-4e34-ab54-5f1459344f30.png)
  
Если вы решите протестировать эту функцию, заполните значения в форме и нажмите кнопку Создать файлы конфигурации LIS, которая будет создана. CSV-файлы с именем:
  
- LIS_Subnet. CSV
    
- LIS_Switches. CSV
    
- LIS_Ports. CSV
    
- LIS_WAP. CSV
    
Чтобы импортировать эти файлы в базу данных LIS, используйте следующие командлеты PowerShell:
  
- Set-CsLisSubnet
    
- Set-CsLisSwitch
    
- Set-CsLisPort
    
- Set-Ксвирелессакцесспоинт
    
## <a name="configure-user-profile"></a>Настройка профиля пользователя
<a name="BKMK_UserProfile"> </a>

После создания пользователей (с помощью средства создания пользователей) вы можете настроить профили пользователей с помощью средства настройки загрузки Skype для Business Server 2015 (Усерпрофилеженератор. exe).
  
### <a name="running-the-skype-for-business-server-2015-load-configuration-tool"></a>Запуск средства настройки загрузки для Skype для бизнеса Server 2015

Запустите средство настройки загрузки (Усерпрофилеженератор. exe) и заполните вкладки. Это средство создает каталог для каждого клиентского компьютера, на котором необходимо выполнить эмуляцию. Каждый клиентский каталог сопровождается сценарием для запуска средства нагрузки и производительности Skype для бизнеса Server 2015 (Линкперфтул. exe). В приведенных ниже разделах приведены примеры заполнения полей на каждой вкладке средства настройки загрузки в Skype для бизнеса Server 2015.
  
> [!IMPORTANT]
> Пользовательские значения, используемые в средстве настройки нагрузки (Усерпрофилеженератор. exe), должны соответствовать значениям, указанным в средстве создания пользователей Skype для Business Server 2015 (Усерпровисионингтул. exe) для пула. 
  
#### <a name="common-configuration-tab"></a>Вкладка "Общие параметры"

Вкладка " **Общие параметры** " в средстве загрузки конфигурации приведена ниже. Заполните поля на вкладке Общая конфигурация, как описано ниже.
  
![Вкладка User Provisioning (Подготовка пользователей) с открытой вкладкой Common Configuration (Общая конфигурация).](../../media/c25df343-3550-47fb-88e0-29194338fee2.png)
  
1. В поле **количество доступных компьютеров** введите число компьютеров, на которых вы хотите использовать средство для работы с нагрузкой и производительностью (линкперфтул. exe). Мы рекомендуем использовать один компьютер для каждого пользователя 4500, который вы будете моделировать, но это число может меняться в зависимости от уровня загрузки, а также использовать только подмножество доступных функциональных возможностей средства (уровни нагрузки задаются на вкладке Общие сценарии).
    
2. В поле **prefix for User Names (префиксы пользователей** ) введите префикс для поля User Name (имя пользователя) для всех пользователей. Для входа в учетную запись универсального кода ресурса (URI) будет: *усерпрефикс [start index... (Число пользователей-1)] @User Domain* (например, myUser009@Contoso.com).
    
3. В поле **Password for All Users (пароль для всех пользователей** ) введите пароль, используемый при создании пользователей. Если оставить это поле пустым, имя пользователя будет задано как пароль.
    
4. В поле **start index (пользователь** ) введите индекс первого пользователя, который нужно настроить. Вы можете настроить различные диапазоны для разных типов или уровней нагрузки, но необходимо запустить средство конфигурации загрузки (Усерпрофилеженератор. exe) один раз в диапазон, который вы хотите настроить.
    
5. В поле **количество пользователей** введите общее количество пользователей, которых вы собираетесь настроить.
    
6. В поле **user domain (домен пользователя** ) введите домен, используемый для URI SIP. Используется для создания универсального кода ресурса (URI) SIP для каждого пользователя, чтобы войти на сервер переднего плана Skype для бизнеса Server 2015 или Standard Edition, и может отличаться от домена учетной записи.
    
7. В поле **domain Account (домен учетной записи** ) введите имя домена доменных служб Active Directory.
    
8. В поле **процент МПОП** (доля времени присутствия) укажите процент пользователей, которые вошли в систему на нескольких компьютерах или устройствах, например на 10 процентов.
    
9. Введите максимальное количество одновременных конечных точек в поле **Вход в секунду (на экземпляр)** . Это максимальное количество входных модулей для пользователей, а рекомендация имеет частоту менее/равной 2 в секунду (<= 2).
    
10. В поле **прокси-сервер или доменное имя пула доступа** введите полное доменное имя (FQDN) сервера, к которому должны подключаться клиенты. Если пользователи работают на внешней странице, вам нужно будет ввести прокси-сервер доступа. Если пользователи являются внутренними, предоставьте полное доменное имя своего корпоративного пула или сервера Standard Edition.
    
11. В поле **Port (порт** ) введите порт, который будут использовать пользователи для SIP (значение по умолчанию — 5061).
    
12. В поле **Параметры внешнего сетевого сервера** назначьте прокси-сервер доступа или полное доменное имя пула и **порт**. Эти параметры используются только для моделирования нагрузки внешних конечных точек.
    
#### <a name="general-scenarios-tab"></a>Вкладка "Общие сценарии"

![Вкладка General Scenarios (Общие сценарии) средства конфигурации нагрузки.](../../media/45792e57-4322-4c20-956f-fe480b0de1a7.png)
  
Вы можете настроить уровни нагрузки и параметры для каждого из общих сценариев, предоставляемых, определяя, какие действия нужно выполнить или оставить отключенными. Вот ваши общие параметры:
  
> [!NOTE]
> Загрузка значений для всех полей, но локальные информационные службы **отключены**, **низкие**, **средние**, **высокие**или **пользовательские**. Если выбрать любой параметр, но отключить его, для каждого клиента будут созданы конфигурации. Высокие результаты в максимально поддерживаемой нагрузке на сервер; средний — 60% от высокой нагрузки; низкий уровень: 30%. 
  
- Обмен **мгновенными сообщениями –** Сюда относятся одноранговые и конференц-связь; Выберите соответствующее значение для уровня загрузки.
    
- **Звуковые конференции –** Выберите уровень загрузки для *голосовой конференции.* Одноранговые вызовы будут немного понижены в разделе **сценарии для голосовой связи** . Открытие вкладки " **Дополнительно** " для включения многорежимического просмотра.
    
- **Общий доступ к приложениям** Выберите уровень загрузки для совместного использования приложений.
    
- **Совместная работа с данными** Выберите уровень загрузки для совместной работы с данными, который включает Конференц-связь с данными.
    
- **Развертывание списка рассылки —** Нажмите кнопку " **Дополнительно** " и введите в поле те же значения, настроенные на вкладке "DL" средства для создания пользователей (усерпровисионингтул. exe). Выберите уровень нагрузки.
    
- **Веб-запрос адресной книги —** Это служба просмотра адресных книг, а не Загрузка файла адресной книги. Если вы хотите включить эту функцию для скачивания файлов из адресной книги, нажмите кнопку " **Дополнительно** " и установите для **енаблеабсдовнлоад** значение true. Задайте значение для уровня загрузки.
    
- **Служба группы ответа** Нажмите кнопку " **Дополнительно** " и укажите URI групп ответов, которые вы уже создали при подготовке агентов службы группы ответа. Необходимо выбрать хотя бы одну группу ответа. Чтобы использовать больше, разделяйте группы ответа точками с запятой. Обновите **ргсурисуффиксстартиндекс** и **ргсурисуффиксендиндекс** до реальных значений. Выберите уровень нагрузки.
    
- **Службы сведений о расположении —** Выберите один из доступных или отключенных уровней нагрузки.
    
> [!NOTE]
> У каждого сценария есть кнопка "Дополнительно" рядом с ней, а также набор флажков, которые позволяют использовать варианты по умолчанию. 
  
- Выбор *одноранговых* элементов позволит средству создать имитацию конференций, которые будут создаваться в течение часа.
    
- Выбор пункта *крупный CONF* означает, что вы будете моделировать большой сценарий конференции.
    
-  *Внешний* указывает на то, что средство также предназначено для имитации внешних пользователей.
    
Эти кнопки и флажки представляют собой дополнительные значения, специфичные для каждого сценария, и изменяют поведение инструмента "нагрузка и производительность" и делают возможным настройку.
  
Для каждого сценария на вкладке "Общие сценарии" (кроме информационных служб расположения), если значение уровня загрузки — **Custom**, частота беседы будет рассчитывается с использованием соответствующего поля в диалоговом окне Дополнительно. Имя поля может различаться в зависимости от сценария, но его описание — *Примечание: Обратите внимание, что этот номер будет использоваться только в том случае, если* в раскрывающемся меню выбран пункт "настраиваемый".
  
Значения " **высокий**", " **средний**" и " **низкий**" будут изменять тарифы на беседу в строке с помощью пользовательской модели, которая является балансом по всем сценариям. Если необходимо изменить уровень загрузки для каждого модального элемента из-за разницы в ожидаемом использовании, используйте настраиваемое значение частоты разговоров.
  
#### <a name="voice-scenarios-tab"></a>Вкладка "речевые сценарии"

На этой вкладке можно настроить все сценарии, связанные с голосовыми сообщениями.
  
![Вкладка Voice Scenarios (Голосовые сценарии) средства конфигурации нагрузки.](../../media/042e406f-5156-4095-a4eb-6298f24bb51f.png)
  
Доступны следующие варианты:
  
- **VoIP-** Нажмите кнопку " **Дополнительно** " и добавьте значения для полей Фонеареакоде и локатионпрофиле (абонентская группа). Вы также получите значение для уровня загрузки. Если вы выбрали параметр уровня загрузки для VoIP или UC/КТСОП, для имитации внешних звонков будет создан файл конфигурации общедоступной телефонной сети (КТСОП) для универсальной связи.
    
- **Шлюз UC/КТСОП-** Необходимо выбрать значение уровня загрузки, а при выборе любого значения, кроме Disabled, вы также можете указать значение кода города PSTN, нажав кнопку **Дополнительно** . Нажмите кнопку **Добавить** под сервером ИСПРАВЛЕНИЙ и КТСОП. Убедитесь, что у вас настроен маршрут для кода города.
    
    > [!TIP]
    > Для проверки конфигурации голосовых маршрутов можно использовать панель управления Skype для бизнеса или консоль управления Skype для бизнеса. 
  
- **Помощник по конференциям —** Укажите значение для уровня загрузки. Любое значение, отличное от Disabled, включит поле " **телефонный номер** ". Введите номер телефона автосекретаря, который вы хотите использовать. Нажмите кнопку **Дополнительно** и введите значение в поле **локатионпрофиле** .
    
- **Служба парковки звонков-** Укажите уровень нагрузки.
    
- **Сервер-посредник и PSTN-** Каждый сервер исправлений, который вы хотите использовать, нуждается в собственном симуляторе PSTN. После того как вы определили, какой клиент вы собираетесь использовать для имитатора, настроите свой сервер, чтобы перенаправлять звонки на этот компьютер в настроенном симуляторе PSTN. Нажмите кнопку **Добавить** , чтобы настроить значение для сервера-посредника.
    
    > [!NOTE]
    > Рядом с каждым сценарием расположена кнопка "Дополнительно". Дополнительные диалоговые окна содержат параметры, специфические для каждого сценария, которые изменяют поведение средства "нагрузка и производительность" и включают настройку. > для каждого сценария на вкладке "сценарии голосовой связи", если значение уровня загрузки — **Custom**, то частота беседы будет вычислена с помощью соответствующего поля в диалоговом окне Дополнительно. Имя поля может различаться в зависимости от сценария, но его описание — *Примечание: Обратите внимание, что этот номер будет использоваться только в том случае, если* в раскрывающемся меню выбран пункт "настраиваемый".
  
#### <a name="web-app-tab"></a>Вкладка "веб-приложение"

![Вкладка Web App средства конфигурации нагрузки.](../../media/505b54ef-8140-4dec-a43e-08091f592b34.png)
  
Веб-приложение поддерживает сценарии конференций с помощью веб-интерфейса единой системы обмена сообщениями (УКВА), который установлен на сервере переднего плана. Используйте вкладку веб-приложения, чтобы настроить все сценарии, связанные с веб-приложениями. Возможные варианты:
  
- **Общие параметры веб-приложения** Нажмите кнопку **Дополнительные параметры** и установите **реачтаржетсерверурл** в качестве виртуального IP-адреса пула каталогов (VIP) для пула виртуальных интерфейсов.
    
- **Общий доступ к приложениям** Выберите значение уровня загрузки.
    
- **Совместная работа с данными** Выберите значение уровня загрузки.
    
- Обмен **мгновенными сообщениями –** Выберите значение уровня загрузки.
    
- **Голосовые конференции –** Выберите значение уровня загрузки.
    
> [!NOTE]
> Рядом с каждым сценарием расположена кнопка " **Дополнительно** ". Дополнительные диалоговые окна содержат значения, специфичные для каждого сценария, которые изменяют поведение средства "нагрузка и производительность" и включают настройку. > для каждого сценария веб-приложения, если уровень нагрузки — **Custom**, вместо значения по умолчанию используется значение, указанное в поле **конверсатионсперхаур** .
  
#### <a name="mobility-tab"></a>Вкладка "мобильность"

На этой вкладке можно настроить все сценарии, связанные с мобильными решениями.
  
![Вкладка Mobility (Мобильность) средства конфигурации нагрузки.](../../media/30af39c2-50ea-476a-8a56-ce2ddf08517e.png)
  
Ниже указаны параметры.
  
- **Общие параметры мобильности —** Щелкните **Дополнительные параметры** и задайте для поля укватаржетсерверурл виртуальный IP-адрес пула (VIP) или серверный VIP пула.
    
- Обмен **мгновенными сообщениями и голосовой почтой для присутствия и P2P-** Выберите значение уровня нагрузки, чтобы включить имитацию мобильных устройств.
    
> [!NOTE]
> Рядом с каждым сценарием расположена кнопка " **Дополнительно** ". Дополнительные диалоговые окна содержат значения, специфичные для каждого сценария, которые изменяют поведение инструмента "нагрузка и производительность" и включают настройку. > для каждого из сценариев мобильности, если уровень нагрузки — **Custom**, вместо значения по умолчанию используется значение, указанное в поле **конверсатионсперхаур** .
  
#### <a name="summary-tab"></a>Вкладка "Сводка"

Вкладка "Сводка" показывает, какие пользователи используются для каждого из сценариев.
  
![Вкладка Summary (Сводка) средства конфигурации нагрузки.](../../media/436fb3f2-d73e-402d-bc6e-e8a6740819d2.png)
  
Вкладка "Сводка" показывает, какие пользователи используются для каждого из сценариев. 
  
Вы можете вручную настроить диапазоны номеров пользователей, установив флажок **включить настраиваемое создание диапазона пользователей** , а затем дважды щелкнуть сценарий в таблице, для которой вы хотите настроить пользовательский диапазон.
  
Проверка **(рунклиент. bat) добавьте задержку входа при запуске** , чтобы включить в созданные пакетные файлы задержки, соответствующие частоте входа. Это полезно для предотвращения перегрузки сервера при входе в большое количество пользователей.
  
Нажмите кнопку **создать файлы** и выберите папку, в которой вы хотите создать конфигурацию. Когда файлы будут успешно созданы, появится диалоговое окно.
  
![Окно сообщения "Файлы конфигурации нагрузки". Нажмите кнопку "ОК".](../../media/c3c1d4a0-cb44-4837-8124-03354f5d9d8c.png)
  
## <a name="run-lyncperftool"></a>Запуск Линкперфтул
<a name="BKMK_RunTool"> </a>

Вам потребуется создать пользователей, контакты и сценарии, прежде чем запускать утилиту нагрузки и производительности Skype для бизнеса Server 2015 (Линкперфтул. exe). Дополнительные сведения об использовании этих действий можно найти в разделе [Создание пользователей и контактов](using-the-tool.md#BKMK_CreateUsersAndContacts) и [Настройка профиля пользователя](using-the-tool.md#BKMK_UserProfile) , ранее описанного в этой статье. Выполнение этих средств также приведет к формированию файла, который будет работать с инструментом «нагрузка и производительность», в составе пакетного файла, в котором будут включены необходимые параметры.
  
### <a name="running-the-skype-for-business-server-2015-stress-and-performance-tool"></a>Работа с инструментом "подсистема нагрузки и производительности" в Skype для бизнеса Server 2015

Средство конфигурации загрузки (Усерпрофилеженератор. exe) создает пакетный файл, который позволяет запускать средство нагрузки и производительности (Линкперфтул. exe), регистрируя счетчики производительности и загружая XML-файл конфигурации. Пакетный файл запускает один экземпляр Линкперфтул. exe на каждый файл конфигурации. Чтобы запустить пакетный файл, выполните указанные ниже действия.
  
### <a name="run-the-stress-and-performance-test"></a>Выполнение теста нагрузки и производительности

1. Скопируйте папку с папками конфигурации и файлами в каталог с Линкперфтул. exe на каждом клиентском компьютере. (Например, если вы создали файлы конфигурации в папке с именем 1.28 _ 13.16.16, скопируйте ее в папку с Линкперфтул. exe. Выполните эти действия на каждом клиенте.)
    
2. Перейдите в папку клиента и запустите пакетный сценарий **рунклиент** . Вы можете дважды щелкнуть пакетный файл в проводнике, и он будет выполнять все файлы конфигурации для этого клиента. Вы также можете запустить сценарий из клиентской папки, используя следующий синтаксис:
    
   ```PowerShell
   RunClient0.bat "C:\Program Files\Skype for Business Server 2015\LyncStressAndPerfTool\LyncStress" 
   ```

Для непосредственного запуска средства "нагрузка и производительность" Откройте командную строку и введите в командной строке следующую команду (и при первом выполнении этой команды обязательно Зарегистрируйте счетчики `regsvr32 /i /n /s LyncPerfToolPerf.dll`производительности, как показано в заметке ниже).
  
```console
LyncPerfTool.exe /file:IM_client0.xml
```

Чтобы средство отображало значения в файле конфигурации, включите `/displayfile` параметр в описанную выше команду, чтобы он выглядел следующим образом:
  
```console
LyncPerfTool.exe /file:IM_client0.xml /displayfile
```

Чтобы *завершить* процесс, нажмите клавиши CTRL + C.
  
> [!NOTE]
> Перед тем как запускать средство "расгрузка и производительность" напрямую, вы должны зарегистрировать счетчики производительности с помощью следующей команды:`regsvr32 /i /n /s LyncPerfToolPerf.dll`
  
> [!NOTE]
> После того как вы начнете входить в свою учетную запись пользователей, каждый из них начнет сразу же приступить к входу в приложение, как правило, для одного пользователя в секунду. 
  
Пиковая частота входов пользователей для пула составляет около 12 в секунду. Это означает, что вы не должны запускать более 12 экземпляров Линкперфтул. exe одновременно, пока пользователи не подписываются. 1000. чтобы полностью войти в Skype, пользователям потребуется около 20 минут.
  
## <a name="interpreting-the-results"></a>Интерпретация результатов
<a name="BKMK_Interpret"> </a>

В средстве "стресс и производительность" в Skype для бизнеса Server 2015 имеется много счетчиков, которые помогут вам понять, что делает клиент, и возникнут ли проблемы.
  
### <a name="client-counters"></a>Счетчики клиента

Для каждого экземпляра Линкперфтул. exe используется отдельный экземпляр счетчиков. Каждый экземпляр именуется ИДЕНТИФИКАТОРом процесса. Если клиенты перегружаются, могут возникать другие проблемы. Чтобы предотвратить эти проблемы, выполните указанные ниже действия.
  
- Отслеживайте использование ЦП и памяти на клиентских компьютерах. Если ЦП постоянно превышает 90%, сократите количество пользователей.
    
- При высоком объеме памяти может возникнуть проблема, если файл на странице начинает запустить место. Убедитесь, что зарядка фиксации не достигнута на компьютере. Если вы используете ограничения памяти, уменьшите размер файла подкачки или уменьшите количество пользователей.
    
Ниже приведен список ключевых счетчиков производительности.
  
**Общие сведения**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Время, потраченное на минуты  <br/> |Время, потраченное с момента запуска процесса.  <br/> |
|Активные конечные точки  <br/> |Количество конечных точек, которые в настоящее время подключены к серверу.  <br/> |
|Неудачные попытки входа  <br/> |Общее количество ошибок входа в конечную точку.  <br/> |
|Попытки входа  <br/> |Общее количество попыток входа в конечную точку.  <br/> |
|Конечные точки отключены  <br/> |Общее количество отключенных конечных точек.  <br/> |
   
**Сведения о присутствии**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Звонки Сетпресенце  <br/> |Общее количество попыток изменения присутствия. Сведения о различных типах изменений присутствия можно найти в разделе Сетпресенце (тип присутствия), который вызывает счетчик производительности.  <br/> |
|NNN ответов для Сетпресенце  <br/> |Общее количество кодов ответов NNN, полученных с сервера.  <br/> |
|Вызовы при присутствии  <br/> |Общее количество попыток получения запросов на присутствие.  <br/> |
|NNN ответов для воздля присутствия  <br/> |Общее количество кодов ответов NNN, полученных с сервера.  <br/> |
   
**Сведения о службе адресной книги**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Попытка скачивания файлов с полными и дельта-файлами (ABS)  <br/> |Общее количество попыток полных или Дельта запросов на скачивание файлов.  <br/> |
|Успешное скачивание полных и дельта-файлов в формате ABS  <br/> |Общее количество попыток полных или Дельта запросов на скачивание файлов.  <br/> |
|Счетчики, связанные со службами веб-запросов в адресной книге  <br/> |Счетчики, связанные с загрузкой файлов в адресной книге.  <br/> |
|Попытка обращения к службе ABS  <br/> |Общее количество попыток запросов службы веб-запросов в адресную книгу.  <br/> |
|Успешные вызовы ABS WS  <br/> |Общее количество запросов на веб-службу адресной книги, которые возвращали успешный код ответа.  <br/> |
|Сбой вызовов ABS WS  <br/> |Общее количество запросов на веб-службу адресной книги, которые возвращали код ответа об ошибке.  <br/> |
   
> [!NOTE]
> В этой категории содержатся счетчики, которые используются для отслеживания файлов и запросов службы веб-книги (ABS) и запроса на обслуживание адресной книги. 
  
**Сведения о списке рассылки (DL)**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Попытки звонков  <br/> |Общее количество предпроизведенных запросов на веб-службу расширения списка рассылки (ДЛКС).  <br/> |
|Успешные звонки  <br/> |Общее количество запросов веб-службы ДЛКС, которые возвращали успешный код ответа.  <br/> |
|Не удалось выполнить звонки  <br/> |Общее количество запросов веб-службы ДЛКС, которые возвращали код ответа об ошибке.  <br/> |
   

  
> [!NOTE]
> Счетчики производительности, указанные ниже, указаны в разделе "номера отчетов" для всех звонков по протоколу голосовой связи (VoIP), в том числе для звонков на сервер-посредник, сервер конференции, пограничный сервер, приложение группы ответа и автосекретарь конференции, если эти сценарии включены. 
  
**Основные сведения о VoIP**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Активных звонков  <br/> |Общее количество текущих и входящих и исходящих голосовых вызовов.  <br/> |
|Прерванные звонки  <br/> |Общее количество входящих и исходящих голосовых вызовов, которые уже были прерваны.  <br/> |
|Отклоненные звонки  <br/> |Общее количество отклоненных входящих голосовых вызовов.  <br/> |
|Попыток входящих и исходящих звонков  <br/> |Общее количество попыток входящих и исходящих голосовых вызовов.  <br/> |
|Входящие и исходящие вызовы установлены  <br/> |Общее количество установленных входящих и исходящих голосовых вызовов.  <br/> |
|Получено звонков NNN  <br/> |Общее количество кодов ответов NNN, полученных с сервера.  <br/> |
|Доля успешных похождения в VoIP (%)  <br/> |Общее количество попыток установленного/общего количества звонков.  <br/> |
   
**Сведения о вызове службы группы ответа**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Активных звонков  <br/> |Общее количество активных звонков в приложение группы ответа.  <br/> |
|Попытки звонков  <br/> |Общее количество попыток звонков.  <br/> |
   
**Информация о звонках в мгновенных сообщениях**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Активных звонков  <br/> |Общее количество текущих входящих и исходящих звонков с мгновенными сообщениями.  <br/> |
|Прерванные звонки  <br/> |Общее количество уже прерванных входящих и исходящих вызовов мгновенных сообщений.  <br/> |
|Получено звонков NNN  <br/> |Общее количество кодов ответов NNN, полученных с сервера.  <br/> |
|Полученные и отправленные МГНОВЕНные сообщения  <br/> |Общее количество сообщений, полученных или отправленных для всех сеансов.  <br/> |
|Попыток входящих и исходящих звонков  <br/> |Общее количество попыток входящих и исходящих вызовов мгновенных сообщений.  <br/> |
|Входящие и исходящие вызовы установлены  <br/> |Общее количество установленных звонков для входящих и исходящих мгновенных сообщений.  <br/> |
   
**Сведения о вызовах для общего использования приложений**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Активных звонков  <br/> |Общее количество текущих входящих и исходящих вызовов для общего использования приложений.  <br/> |
|Прерванные звонки  <br/> |Общее количество входящих и исходящих вызовов для общего использования приложений, которые уже завершены.  <br/> |
|Получено звонков NNN  <br/> |Общее количество кодов ответов NNN, полученных с сервера.  <br/> |
|Попыток входящих и исходящих звонков  <br/> |Общее количество попыток входящих и исходящих вызовов для общего использования приложений.  <br/> |
|Входящие и исходящие вызовы установлены  <br/> |Общее количество установленных звонков входящих и исходящих приложений.  <br/> |
   
**Информация о звонке Каа**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Активных звонков  <br/> |Общее количество входящих и исходящих телефонных сетей с открытым коммутируемым подключением (PSTN), в настоящее время используемых вами звонков.  <br/> |
|Прерванные звонки  <br/> |Общее количество входящих и исходящих вызовов КТСОП, которые уже были прерваны.  <br/> |
|Попыток входящих и исходящих звонков  <br/> |Общее количество попыток входящих и исходящих звонков по КТСОП.  <br/> |
|Входящие и исходящие вызовы установлены  <br/> |Общее количество установленных входящих и исходящих звонков по КТСОП.  <br/> |
   
**Сведения о Конференции**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Активные конференции для обмена мгновенными сообщениями  <br/> |Общее количество текущих конференций с обменом мгновенными сообщениями.  <br/> |
|Активные аудио-и видеоконференции  <br/> |Общее количество текущих голосовых и видеоконференций (A/V).  <br/> |
|Активные конференции для совместного использования приложений  <br/> |Общее количество текущих конференций общего обмена приложениями.  <br/> |
|Количество участников  <br/> |Общее количество участников, которые в настоящее время подключены к конференциям.  <br/> |
|Сбой расписания Конференции  <br/> |Общее количество сбоев при попытке запланировать конференцию.  <br/> |
|Присоединиться к Конференции с ошибкой  <br/> |Общее количество сбоев при попытке подключиться к Конференции.  <br/> |
   
**Счетчики клиента УКВА**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Общее количество успешных объединений ИММКУ  <br/> |Общее количество Объединенных конференций с мгновенными сообщениями.  <br/> |
|Общее количество успешных объединений ДМКУ  <br/> |Общее количество Объединенных конференций/V.  <br/> |
   

