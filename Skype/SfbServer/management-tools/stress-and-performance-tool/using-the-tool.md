---
title: Использование средства Skype для бизнеса Server нагрузки и производительности 2015
ms.reviewer: ''
ms.author: serdars
author: SerdarSoysal
ms.date: 2/13/2018
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
ms.localizationpriority: medium
ms.collection: IT_Skype16
ms.assetid: 93f42230-24a2-418d-9770-bf4670a9d78f
description: Чтобы запустить средство Skype для бизнеса Server 2015 Stress and Performance Tool, необходимо иметь возможность управлять пользователями, контактами и профилями пользователей, настраивать средство для запуска, а затем просматривать выходные данные или результаты, полученные с помощью этого средства.
ms.openlocfilehash: 300da4109ddbdbf06f6dcfbe241cc45c83ec82ca
ms.sourcegitcommit: 296862e02b548f0212c9c70504e65b467d459cc3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/25/2022
ms.locfileid: "65675731"
---
# <a name="using-the-skype-for-business-server-2015-stress-and-performance-tool"></a>Использование средства Skype для бизнеса Server нагрузки и производительности 2015
 
Чтобы запустить средство Skype для бизнеса Server 2015 Stress and Performance Tool, необходимо иметь возможность управлять пользователями, контактами и профилями пользователей, настраивать средство для запуска, а затем просматривать выходные данные или результаты, полученные с помощью этого средства.
  
Существует четыре области, связанные с запуском средства Skype для бизнеса Server нагрузки и производительности 2015 (исполняемый файл LyncPerfTool.exe):
  
- [Создание пользователей и контактов](using-the-tool.md#BKMK_CreateUsersAndContacts)
    
- [Настройка профиля пользователя](using-the-tool.md#BKMK_UserProfile)
    
- [Запуск LyncPerfTool](using-the-tool.md#BKMK_RunTool)
    
- [Интерпретация результатов](using-the-tool.md#BKMK_Interpret)
    
## <a name="create-users-and-contacts"></a>Создание пользователей и контактов
<a name="BKMK_CreateUsersAndContacts"> </a>

Для создания пользователей и контактов для тестирования нагрузки и производительности необходимо использовать средство подготовки пользователей Skype для бизнеса Server 2015 (SB 2015) (UserProvisioningTool.exe).
  
Ниже приведен список полезных терминов, которые могут оказаться полезными при прочтите разделы.
  
- **Подразделение —** подразделение доменные службы Active Directory (AD DS).
    
- **Федеративный или перекрестный пул** — пользователи, которые могут взаимодействовать с пользователями из других служб обмена мгновенными сообщениями.
    
- **Списки рассылки** — или библиотеки DLL. Это объекты в доменных службах Active Directory, содержащие список пользователей AD DS. Они используются для упрощения обмена данными между группами людей.
    
- **Служба** сведений о расположении — служба Skype для бизнеса Server 2015, которая, если она включена и настроена для каждого телефона, позволяет получить физическое расположение для служб Enhanced 911 (E911).
    
-  Номера Телефон США — Телефон, назначенные пользователю в дополнение к URI SIP, который используется для маршрутизации входящих и исходящих вызовов в обратном поиске номеров (RNL).
    
### <a name="create-users-and-contacts-by-using-userprovisioningtoolexe"></a>Создание пользователей и контактов с помощью UserProvisioningTool.exe

> [!NOTE]
> Прежде чем начать, убедитесь, что вы вошли в систему как член группы безопасности "Администраторы домена", чтобы запустить это средство. Это необходимо сделать, так как вы собираетесь создавать пользователей Active Directory. 
  
Для создания пользователей и контактов для моделирования нагрузки необходимо использовать Skype для бизнеса Server подготовки пользователей.
  
Средство **Skype для бизнеса Server подготовки** пользователей устанавливается вместе с пакетом **Skype для бизнеса Server Stress and Performance Tool**. Убедитесь, что установщик пакетов (CapacityPlanningTool.msi) был запущен на сервере переднего плана или выпуск Standard сервере, который планируется протестировать.
  
Средство подготовки пользователей Skype для бизнеса Server можно запустить, запустив файл UserProvisioningTool.exe (расположенный в папке %InstalledDirectory%LyncStressAndPerfTool\LyncStress) на сервере переднего плана или на сервере выпуск Standard.
  
> [!IMPORTANT]
> При создании большого количества пользователей (например, 10 000 или более) запустите UserProvisioningTool.exe. Это необходимо сделать, так как средство будет создавать и настраивать  *новых*  пользователей AD.
  
Когда откроется средство подготовки пользователей, щелкните "Конфигурация" и выберите конфигурацию загрузки. 
  
Чтобы начать настройку пользователей и контактов, загрузите файл по умолчанию, включенный в пакет, с именем "SampleData.xml". Это приведет к предварительному заполнению полей примерами данных, которые необходимо изменить, чтобы сделать их релевантным для развертывания.
  
Если у вас есть предварительно настроенный XML-файл, который уже содержит настроенные параметры, его можно загрузить. Заполните поля в средстве подготовки пользователей, как описано в разделах ниже.
  
### <a name="to-configure-server-options"></a>Чтобы настроить параметры сервера:

1. В поле **полного** доменного имени пула переднего плана введите полное доменное имя (FQDN) сервера выпуск Standard или пула переднего плана, в котором вы хотите разместить пользователей.
    
2. В поле **"** Префикс имени пользователя" введите префикс, который вы хотите использовать для проверки имен пользователей (например, TestUser).
    
3. В поле **"Пароль** " введите пароль, который будет использоваться во всех тестовых учетных записях пользователей.
    
4. В поле **"Домен** учетной записи" введите доменное имя текущего домена AD (в котором вы хотите создать тестовых пользователей).
    
5. В поле **"Подразделение** " введите имя домена AD, в котором вы хотите создать тестовых пользователей. (Если подразделение еще не существует, оно будет создано автоматически.
    
6. В поле **Телефон кода** области введите трехзначный код области, который будет использоваться во всех тестовых учетных записях пользователей. Убедитесь, что выбранный код области не конфликтует с кодами других пользователей в AD.
    
7. Установите флажок **"Включена** голосовая связь", если вы хотите включить тестовых пользователей для Корпоративная голосовая связь.
    
8. В поле **"Число пользователей** " укажите общее количество тестовых пользователей, которых вы хотите создать.
    
9. В поле  "Начальный индекс" присвойте начальному номеру, который будет использоваться в качестве суффикса префикса имени пользователя (например, префикс "TestUser", а имя в следующем примере будет иметь значение "0".)
    
     ![Средство подготовки пользователей, отображающее вкладку создания пользователя.](../../media/591d8280-8979-4a8c-83bc-af126e87bf29.png)
  
#### <a name="create-users-button"></a>Кнопка "Создать пользователей"

При нажатии кнопки **"** Создать пользователей" введенные входные параметры проверяются. При наличии ошибок проверки вам будет предложено исправить их. Или, если все значения верны, пользователи будут отображаться в AD (в любом указанном подразделении). Вы увидите индикатор выполнения в нижней части инструмента при его запуске. Не закрывайте приложение, пока индикатор выполнения активен.
  
Создание пользователя занимает некоторое время, поэтому спланируйте его соответствующим образом. Этот процесс может занять от нескольких минут до нескольких часов для большого числа пользователей.
  
Если у вас нет доступа к контроллеру домена AD в тестовой среде, вы по-прежнему можете проверить создание пользователя, войдите как один из пользователей в диапазоне пользователей, которые вы указали для создания. Не забудьте использовать префикс и суффикс вместе с @sipDomain в качестве имени пользователя. Ниже приведен пример:  <em>TestUser20@contoso.net</em>  .
  
> [!NOTE]
> Если пользователи уже существуют, при нажатии кнопки "Создать пользователей" они будут обновлены с учетом любых изменений конфигурации. 
  
#### <a name="delete-users-button"></a>Кнопка "Удалить пользователей"

При нажатии кнопки **"** Удалить пользователей" входные параметры вкладки будут проверены. При возникновении ошибок проверки вам будет предложено исправить их, а если входные значения верны, указанные тестовые пользователи будут отключены и удалены из Active Directory. В нижней части этой вкладки снова появится индикатор выполнения, и не следует закрывать приложение, пока индикатор выполнения активен.
  
> [!NOTE]
> Поддерживаются только номера телефонов в формате США. Телефон номера всегда назначаются пользователям, а все пользователи, созданные UserProvisioningTool.exe, по умолчанию Корпоративная голосовая связь для пользователей. Все сценарии, использующие номер телефона, например автосекретарь конференций или вызовы UC-PSTN, используют этот номер телефона для правильной маршрутизации звонков. По этой причине  *каждый пользователь*  должен иметь *уникальный номер телефона*  .
  
> [!NOTE]
> **Если вам нужно создать пользователей дважды, команда завершится ошибкой, если вы не используете другой код области или если предыдущие пользователи были отключены с помощью Disable-CsUser командлета.**
  
> [!IMPORTANT]
> Перед созданием контактов сначала необходимо выполнить репликацию пользователей (которая выполняется на вкладке "Пользователи"). 
  
> [!IMPORTANT]
> Если вы только что создали пользователей, необходимо подождать, пока репликация Skype для бизнеса Server завершится и не заполнит учетные записи пользователей в базе данных. **Если пользователи еще не завершили репликацию, вы увидите ошибку.** Вы узнаете, когда пользователи завершат репликацию, если служба интерфейса Skype для бизнеса Server 2015 запущена, или успешно запустив командлет Get-CsUser для последнего пользователя из указанного вами общего числа.
  
#### <a name="contacts-creation-tab"></a>Вкладка "Создание контактов"

Эта вкладка позволяет предоставить сведения о контактах пользователей для тестирования.
  
![Средство подготовки пользователей, отображающее вкладку "Создание содержимого".](../../media/dfb7fdf1-fb97-4e8e-8608-c4995f95dd5b.png)
  
### <a name="to-configure-users-contacts-do-the-following"></a>Чтобы настроить контакты пользователей, выполните следующие действия.

1. В поле **"Среднее число контактов на** пользователя" введите среднее число контактов, которые нужно заполнить в списках контактов для каждого пользователя.
    
2. Установите **фиксированный** флажок, если вы хотите создать одинаковое количество контактов для каждого пользователя. Если вы хотите изменить количество контактов, созданных для пользователей, снимите этот флажок.
    
3. В поле **"Среднее число контактов на пользователя** " введите количество групп контактов на пользователя. Это число должно быть меньше среднего числа **контактов на пользователя**.
    
4. В поле **"Процент федеративных и** межбайтовых контактов" укажите число от 0 до 100. Этот процент контактов будет создан с федеративными пользователями.
    
5. В поле **"Федеративный/** префикс пользователя в нескольких пулах" укажите имя пользователя для федеративных пользователей, которое будет добавлено в списки контактов локальных пользователей.
    
6. В поле **"Федеративный или** межбайтовый пользовательский домен SIP" укажите доменное имя SIP федеративных пользователей.
    
7. На **вкладке "** Создание пользователя" убедитесь, что сведения указаны правильно. Контакты будут созданы на основе значений на вкладке "Создание пользователя".
    
8. Нажмите **кнопку "Создать контакты** ", чтобы начать создание контакта. Этот процесс может занять несколько минут. После завершения работы появится диалоговое окно с сообщением "Операция успешно завершена". Вы можете проверить контакты, созданные путем входа в систему от имени пользователя, созданного на вкладке "Создание пользователя".
    
    > [!NOTE]
    > После создания контактов это средство перезапустит все серверы переднего плана в целевом пуле. Запуск серверов переднего плана может занять больше времени (до 2 часов) в зависимости от количества контактов, созданных этой операцией. 
  
#### <a name="distribution-list"></a>Список рассылки

Средство Skype для бизнеса Server нагрузки и производительности 2015 может имитировать функцию расширения списка рассылки (DL) в клиенте Skype для бизнеса 2015. Этот шаг можно пропустить, если вы не планируете включать расширение DL в средстве подготовки пользователей.
  
![Средство подготовки пользователей с вкладкой "Создание списка рассылки".](../../media/4b689306-70c4-4569-9842-15c73f038eb6.png)
  
На вкладке "Список рассылки" можно создавать библиотеки DLL, которые средство "Нагрузка и производительность" будет использовать для расширения списка рассылки. Перед созданием библиотек DLL необходимо развернуть Skype для бизнеса Server 2015, включая запуск ForestPrep. Если этого не сделать, атрибуты DL не будут существовать в схеме AD, поэтому средство не сможет создавать библиотеки DLL.
  
### <a name="to-configure-distribution-lists"></a>Чтобы настроить списки рассылки:

1. В поле **"** Число списков рассылки" укажите общее число библиотек DLL, которые вы хотите создать (рекомендуем начать со значения, которое в два раза больше числа пользователей).
    
2. В поле **префикса** списка рассылки введите префикс, который будет иметься во всех созданных библиотеках *DLL, например testDL*  . Это означает, что при 100 библиотеках DLL имена DL будут выглядеть следующим образом: testDL0, testDL1, до testDL99.
    
3. В поле **"Минимальные элементы в списке** " введите минимальное число пользователей, помещаемое в каждый DL.
    
4. В поле **"Максимальное число участников в списке** " введите максимальное число пользователей, добавляемое в каждый DL.
    
#### <a name="create-distribution-lists-button"></a>Кнопка "Создать списки рассылки"

При нажатии кнопки "Создать списки рассылки" средство запрашивает у Active Directory сведения о том, существуют ли списки рассылки, соответствующие префиксу и числам. Средство создает все библиотеки DLL, которые еще не существуют. При добавлении участников в вновь созданные списки рассылки он выбирает пользователей из диапазона, указанного на вкладке "Создание пользователя".
  
#### <a name="location-info-service-config-tab"></a>Вкладка "Конфигурация службы сведений о расположении"

Средство Skype для бизнеса Server нагрузки и производительности 2015 также может создавать фиктивные файлы конфигурации для службы сведений о расположении. Обратите внимание, что служба сведений о расположении обычно не оказывает существенного влияния на производительность серверов. 
  
![Средство подготовки пользователей с вкладкой "Конфигурация службы сведений о расположении".](../../media/227662a2-e0c3-4e34-ab54-5f1459344f30.png)
  
Если вы решили протестировать эту функцию, заполните значения в форме и нажмите кнопку "Создать файлы конфигурации LIS", которая создаст .CSV файлы:
  
- LIS_Subnet.csv
    
- LIS_Switches.csv
    
- LIS_Ports.csv
    
- LIS_WAP.csv
    
Чтобы импортировать эти файлы в базу данных LIS, используйте следующие командлеты PowerShell:
  
- Set-CsLisSubnet
    
- Set-CsLisSwitch
    
- Set-CsLisPort
    
- Set-CsWirelessAccessPoint
    
## <a name="configure-user-profile"></a>Настройка профиля пользователя
<a name="BKMK_UserProfile"> </a>

После создания пользователей (с помощью средства создания пользователей) можно настроить профили пользователей с помощью Skype для бизнеса Server 2015 Load Configuration (UserProfileGenerator.exe).
  
### <a name="running-the-skype-for-business-server-2015-load-configuration-tool"></a>Запуск средства настройки Skype для бизнеса Server 2015 г.

Запустите средство настройки загрузки (UserProfileGenerator.exe) и заполните вкладки. Это средство создает каталог для каждого клиентского компьютера, который потребуется для выполнения имитаций. В каждом клиентском каталоге есть сценарий для запуска Skype для бизнеса Server 2015 г. "Нагрузка и производительность" (LyncPerfTool.exe). В следующих разделах приведены примеры заполнения полей на каждой вкладке средства настройки нагрузки Skype для бизнеса Server 2015.
  
> [!IMPORTANT]
> Пользовательские значения, используемые в средстве настройки нагрузки (UserProfileGenerator.exe), должны соответствовать значениям, указанным в средстве создания пользователей Skype для бизнеса Server 2015 (UserProvisioningTool.exe) для пула. 
  
#### <a name="common-configuration-tab"></a>Вкладка "Общая конфигурация"

Ниже **показана вкладка** "Общая конфигурация" средства настройки нагрузки. Заполните поля вкладки "Общая конфигурация", как описано в следующих шагах.
  
![Вкладка "Подготовка пользователей" с вкладкой "Общая конфигурация".](../../media/c25df343-3550-47fb-88e0-29194338fee2.png)
  
1. В поле **"Число доступных** компьютеров" введите количество компьютеров, которые вы хотите использовать для запуска средства "Нагрузка и производительность" (LyncPerfTool.exe). Мы рекомендуем использовать один компьютер для каждого 4500 пользователей, которые вы будете имитируть, но это число может отличаться при снижении уровня нагрузки или использовании только подмножества доступных функций средства (уровни нагрузки задается на вкладке "Общие сценарии").
    
2. В поле **"Префикс имен** пользователей" введите префикс для поля имени пользователя всех пользователей. Для входа в универсальный код ресурса (URI) выполните следующее: *UserPrefix[Начальный индекс пользователя... (Число пользователей-1)] @User домена*  , например myUser009@Contoso.com.
    
3. В поле **"Пароль для всех пользователей** " введите пароль, используемый при создании пользователей. Если оставить это поле пустым, в качестве пароля будет задано имя пользователя.
    
4. В поле **"Начальный индекс пользователя** " введите индекс первого настраиваемого пользователя. Вы можете настроить разные диапазоны для разных типов или уровней нагрузки, но для каждого из них необходимо запустить средство настройки нагрузки (UserProfileGenerator.exe) один раз.
    
5. В поле **"Число пользователей** " введите общее число пользователей, которые вы собираетесь настроить.
    
6. В поле **"Домен пользователя** " введите домен, используемый для URI SIP. Он используется для создания URI SIP каждого пользователя для входа на сервер переднего плана Skype для бизнеса Server 2015 или выпуск Standard server и может отличаться от домена учетной записи.
    
7. В поле **"Домен учетной записи** " введите имя входа домена AD DS.
    
8. В поле **MPOP Percentage** (Multiple Point of Presence percentage) (Процент использования нескольких точек присутствия) укажите значение для процента пользователей, которые вошли в систему с нескольких компьютеров или устройств, например 10 %.
    
9. Введите максимальное число одновременных конечных точек в поле **"Вход в секунду (на экземпляр** )". Это максимальное число входов в систему для пользователей, а рекомендация — скорость меньше/равной 2 в секунду (<=2).
    
10. В поле **"Прокси-сервер** доступа" или "Полное доменное имя пула" введите полное доменное имя сервера, к которому должны подключаться клиенты. Если пользователи выполняют вход извне, необходимо ввести прокси-сервер доступа. Если пользователи являются внутренними, укажите полное доменное имя Enterprise пула или выпуск Standard сервера.
    
11. В поле **"Порт** " введите порт, который пользователи должны использовать для SIP (значение по умолчанию — 5061).
    
12. Для поля **"Сервер внешней Параметры**" укажите полное доменное имя прокси-сервера или пула доступа и, опять же, **порт**. Эти параметры используются только для имитации загрузки внешних конечных точек.
    
#### <a name="general-scenarios-tab"></a>Вкладка "Общие сценарии"

![Средство настройки загрузки, отображающее вкладку "Общие сценарии".](../../media/45792e57-4322-4c20-956f-fe480b0de1a7.png)
  
Вы можете настроить уровни нагрузки и параметры для каждого из общих сценариев, определив, что нужно запустить или оставить отключенным. Ниже приведены общие параметры.
  
> [!NOTE]
> Значения уровня нагрузки для всех полей, но локальные информационные службы **отключены****, низкие**, **средние**, **высокие** или **пользовательские**. Если выбрать какой-либо параметр, но отключен, то для каждого клиента будут созданы конфигурации. Высокая производительности приводит к максимальной поддерживаемой нагрузке на сервер; средний — 60 % от высокой нагрузки; низкий — 30 %. 
  
- **Обмен мгновенными сообщениями —** К ним относятся одноранговые подключения и конференц-связи. Выберите соответствующее значение для уровня нагрузки.
    
- **Аудиоконференции.** Выберите уровень нагрузки только для аудиоконференций. Одноранговые вызовы будут решаться немного позже в разделе **"Сценарии голосовой связи** ". Откройте **вкладку "Дополнительно** ", чтобы включить MultiView.
    
- **Общий доступ к приложениям —** Выберите уровень нагрузки для общего доступа к приложениям.
    
- **Совместная работа с данными —** Выберите уровень нагрузки для совместной работы с данными, который включает в себя конференц-связь с данными.
    
- **Расширение списка рассылки —** Нажмите **кнопку "** Дополнительно" и заполните поле значениями, настроенными на вкладке DL средства создания пользователей (UserProvisioningTool.exe). Выберите уровень нагрузки.
    
- **Веб-запрос адресной книги —** Это служба поиска адресной книги, а не скачивание файла адресной книги. Если вы хотите включить эту функцию для скачивания файлов адресной книги, нажмите кнопку **"** Дополнительно" и задайте **для Параметра EnableABSDownload** значение True. Присвойте значение для уровня нагрузки.
    
- **Служба группы ответа —** Нажмите **кнопку "Дополнительно** " и укажите URI групп ответов, созданных при подготовке агентов службы группы ответа. Необходимо выбрать по крайней мере одну группу ответов. Чтобы использовать больше, разделите группы ответов точкой с запятой. **Обновите RGSUriSuffixStartIndex** и **RGSUriSuffixEndIndex** до фактических значений. Выберите уровень нагрузки.
    
- **Location Information Services —** Выберите уровень нагрузки "Включено" или "Отключено".
    
> [!NOTE]
> В каждом из сценариев рядом с ним находится кнопка "Дополнительно" и набор флажков, позволяющих изменить параметр по умолчанию. 
  
- Выбор  *нерегламентированного*  выбора позволит средству создавать имитацию конференций, которые будут создаваться в течение часа.
    
- Выбор  *большого конференц-связи*  означает, что будет имитирован сценарий большой конференции.
    
-  *External*  указывает средству также имитировать внешних пользователей.
    
Эти кнопки и флажки — это дополнительные значения, относящиеся к каждому сценарию, которые изменяют поведение средства "Нагрузка и производительность" и делают возможным настройку.
  
Для каждого сценария на вкладке "Общие сценарии" (за исключением служб Сведений о расположении), если значение уровня нагрузки — **Custom**, то скорость диалога будет вычисляться с помощью соответствующего поля в диалоговом окне "Дополнительно". Имя поля может отличаться в зависимости от сценария, но в описании поля будет отображаться следующее: ПРИМЕЧАНИЕ. Этот номер будет использоваться только в том случае, если в раскрывающемся меню выбран параметр  *Custom*  .
  
Значения " **Высокий"**, **"** Средний" и "Низкий" изменяют скорость диалога на модальное поведение в соответствии с пользовательской моделью **, которая** является балансом всех сценариев. Если необходимо изменить уровень нагрузки на модальность из-за разницы в ожидаемом использовании, используйте пользовательскую скорость общения.
  
#### <a name="voice-scenarios-tab"></a>Вкладка "Сценарии голосовой связи"

Это вкладка для настройки всех сценариев, связанных с голосовой связью.
  
![Вкладка "Сценарии голосовой связи" средства "Конфигурация загрузки".](../../media/042e406f-5156-4095-a4eb-6298f24bb51f.png)
  
Доступны следующие параметры:
  
- **VoIP —** Нажмите **кнопку "Дополнительно** " и добавьте значения для полей PhoneAreaCode и LocationProfile (абонентской группы). Вы также предоставите значение для уровня нагрузки. Если выбран уровень нагрузки для включенного шлюза VoIP или UC/PSTN, для имитации внешних вызовов будет создан файл конфигурации телефонной сети с общедоступным коммутатором (ТСОП) в файл конфигурации УНОП.
    
- **Шлюз UC/PSTN —** Необходимо выбрать значение уровня нагрузки, и при выборе чего-либо, кроме отключенного, необходимо также указать значение для кода области ТСОП, нажав кнопку "**Дополнительно".** Нажмите **кнопку "** Добавить" под сервером-посредником и ТСОП. Убедитесь, что для кода области настроен маршрут.
    
    > [!TIP]
    > Для проверки конфигурации голосового маршрута можно использовать Skype для бизнеса панель управления или Skype для бизнеса Management Shell. 
  
- **помощник по конференц-связи —** укажите значение для уровня нагрузки. Любое значение, отличное от "Отключено", включает **поле "Номер телефона** ". Введите номер телефона автосекретаря, который вы хотите использовать. Нажмите **кнопку "Дополнительно** " и присвойте значение **полю LocationProfile** .
    
- **Служба парковки вызовов —** Здесь укажите уровень нагрузки.
    
- **Сервер-посредник и ТСОП —** Каждый сервер-посредник, который вы хотите использовать, должен иметь собственный симулятор ТСОП. После того как вы определили, какой клиент вы собираетесь использовать для симулятора, настройте сервер-посредник для маршрутизации вызовов на этот компьютер в настроенном симуляторе ТСОП. Нажмите **кнопку "** Добавить", чтобы настроить значение для сервера-посредника.
    
    > [!NOTE]
    > Рядом с каждым сценарием находится кнопка "Дополнительно". Расширенные диалоговые окна содержат параметры, относящиеся к каждому сценарию, которые изменяют поведение средства "Нагрузка и производительность" и обеспечивают настройку. > для каждого сценария на вкладке "Сценарии голосовой связи", если значение уровня нагрузки — **Custom, то** скорость диалога будет вычисляться с помощью соответствующего поля в диалоговом окне "Дополнительно". Имя поля может отличаться в зависимости от сценария, но в описании поля будет отображаться следующее: ПРИМЕЧАНИЕ. Этот номер будет использоваться только в том случае, если в раскрывающемся меню выбран параметр  *Custom*  .
  
#### <a name="web-app-tab"></a>Вкладка "Веб-приложение"

![Средство "Конфигурация загрузки", вкладка "Веб-приложение".](../../media/505b54ef-8140-4dec-a43e-08091f592b34.png)
  
Веб-приложение поддерживает сценарии конференц-связи с помощью сервера UCWA, установленного на сервере переднего плана. Используйте вкладку "Веб-приложение" для настройки всех сценариев, связанных с веб-приложением. Доступные варианты:
  
- **Общие веб-приложения** Параметры. Нажмите кнопку **"** Дополнительные Параметры" и задайте для **ReachTargetServerUrl** виртуальный IP-адрес пула каталогов (VIP) виртуального IP-адреса пула переднего плана.
    
- **Общий доступ к приложениям —** Выберите значение для уровня нагрузки.
    
- **Совместная работа с данными —** Выберите значение для уровня нагрузки.
    
- **Обмен мгновенными сообщениями —** Выберите значение для уровня нагрузки.
    
- **Голосовая конференц-связь —** Выберите значение для уровня нагрузки.
    
> [!NOTE]
> Рядом с каждым сценарием **находится** кнопка "Дополнительно". Расширенные диалоги содержат значения, относящиеся к каждому сценарию, которые изменяют поведение средства "Нагрузка и производительность" и позволяют настроить.> Для каждого из сценариев веб-приложения, если уровень нагрузки является пользовательским **, то** вместо значения по умолчанию используется значение, указанное в поле **ConversationsPerHour** .
  
#### <a name="mobility-tab"></a>Вкладка "Мобильность"

Эта вкладка используется для настройки всех сценариев, связанных с мобильностью.
  
![Вкладка "Мобильность" средства "Загрузка конфигурации".](../../media/30af39c2-50ea-476a-8a56-ce2ddf08517e.png)
  
Ниже приведены следующие параметры.
  
- **General Mobility Параметры —** щелкните **Параметры** и задайте для поля UcwaTargetServerUrl виртуальный IP-адрес пула директоров или виртуальный IP-адрес пула переднего плана.
    
- **Присутствие и обмен мгновенными сообщениями типа "точка — сеть" и "звук" —** Выберите значение уровня нагрузки, чтобы включить моделирование mobility.
    
> [!NOTE]
> Рядом с каждым сценарием **находится** кнопка "Дополнительно". Расширенные диалоги содержат значения, относящиеся к каждому сценарию, которые изменяют поведение средства "Нагрузка и производительность" и обеспечивают настройку.> Для каждого из сценариев мобильности, если уровень нагрузки является пользовательским **, то** вместо значения по умолчанию используется значение, указанное в поле **ConversationsPerHour** .
  
#### <a name="summary-tab"></a>Вкладка "Сводка"

На вкладке "Сводка" указано, какие пользователи следует использовать для каждого из сценариев.
  
![Вкладка "Сводка" средства "Конфигурация загрузки".](../../media/436fb3f2-d73e-402d-bc6e-e8a6740819d2.png)
  
На вкладке "Сводка" указано, какие пользователи следует использовать для каждого из сценариев. 
  
Вы можете вручную настроить диапазоны номеров пользователей, установите флажок "Включить  создание настраиваемого диапазона пользователей", а затем дважды щелкните сценарий в таблице с диапазоном пользователей, который требуется настроить.
  
Проверьте **(RunClient.bat)** Добавьте задержку входа при запуске, чтобы включить задержки в созданные пакетные файлы в соответствии с частотой входа. Это полезно для предотвращения перегрузки сервера при входе большого количества пользователей.
  
**Щелкните "Создать файлы**" и выберите папку, в которой нужно создать конфигурацию. После успешного создания файлов появится диалоговое окно.
  
![Окно сообщения "Загрузка файлов конфигурации, созданных успешно". Просто нажмите кнопку "ОК".](../../media/c3c1d4a0-cb44-4837-8124-03354f5d9d8c.png)
  
## <a name="run-lyncperftool"></a>Запуск LyncPerfTool
<a name="BKMK_RunTool"> </a>

Необходимо создать пользователей, контакты и сценарии перед запуском средства Skype для бизнеса Server 2015 г. (LyncPerfTool.exe). Дополнительные сведения об использовании средств для выполнения этих действий см. в разделе ["](using-the-tool.md#BKMK_CreateUsersAndContacts)Создание пользователей [](using-the-tool.md#BKMK_UserProfile) и контактов и настройка профиля пользователя" выше в этой статье. При выполнении этих средств также будет создан файл, который будет выполняться с помощью средства "Нагрузка и производительность" в составе пакетного файла с включенными необходимыми параметрами.
  
### <a name="running-the-skype-for-business-server-2015-stress-and-performance-tool"></a>Запуск средства Skype для бизнеса Server нагрузки и производительности в 2015 г.

Средство настройки нагрузки (UserProfileGenerator.exe) создает пакетный файл, который позволяет запускать средство "Нагрузка и производительность" (LyncPerfTool.exe) путем регистрации счетчиков производительности и загрузки XML-файла конфигурации. Пакетный файл запускает один экземпляр LyncPerfTool.exe для каждого файла конфигурации. Чтобы запустить пакетный файл, выполните следующие действия.
  
### <a name="run-the-stress-and-performance-test"></a>Запуск теста нагрузки и производительности

1. Скопируйте папку с папками конфигурации и файлами в каталог, LyncPerfTool.exe на каждом клиентском компьютере. (Например, если вы создали файлы конфигурации в папке с именем 1.28_13.16.16, скопируйте эту папку в папку с LyncPerfTool.exe в ней. Сделайте это на каждом клиенте.)
    
2. Перейдите в папку клиента и запустите **пакетный скрипт RunClient** . Пакетный файл можно дважды щелкнуть в Windows Explorer, и он запустит все файлы конфигурации для этого клиента. Скрипт также можно запустить из папки клиента, используя следующий синтаксис:
    
   ```console
   RunClient0.bat "C:\Program Files\Skype for Business Server 2015\LyncStressAndPerfTool\LyncStress" 
   ```

Чтобы запустить средство "Нагрузка и производительность" напрямую, откройте командную строку и введите следующую команду в командной строке (  `regsvr32 /i /n /s LyncPerfToolPerf.dll`и при первом выполнении этого действия обязательно зарегистрируйте счетчики производительности, как показано в примечании далее в этом разделе):
  
```console
LyncPerfTool.exe /file:IM_client0.xml
```

Чтобы средство отображает значения в файле конфигурации,  `/displayfile` включите параметр в приведенную выше команду, чтобы он выглядел следующим образом:
  
```console
LyncPerfTool.exe /file:IM_client0.xml /displayfile
```

Чтобы  *завершить*  процесс, нажмите клавиши CTRL+C.
  
> [!NOTE]
> Прежде чем запускать средство "Нагрузка и производительность" напрямую, необходимо зарегистрировать счетчики производительности с помощью следующей команды:  `regsvr32 /i /n /s LyncPerfToolPerf.dll`
  
> [!NOTE]
> Каждый экземпляр средства "Нагрузка и производительность", который вы запускаете, немедленно начнет вводить пользователей, обычно со скоростью одного пользователя в секунду. 
  
Пиковая скорость входа пользователей в пул — около 12 в секунду. Это означает, что не следует запускать более 12 экземпляров LyncPerfTool.exe одновременно, пока пользователи по-прежнему выполняют вход. Для полного входа в систему в секунду одной тысяче пользователей потребуется около 20 минут.
  
## <a name="interpreting-the-results"></a>Интерпретация результатов
<a name="BKMK_Interpret"> </a>

Средство Skype для бизнеса Server нагрузки и производительности 2015 имеет множество счетчиков, которые помогут понять, что делает клиент и возникают ли проблемы.
  
### <a name="client-counters"></a>Счетчики клиентов

Каждый экземпляр LyncPerfTool.exe имеет отдельный экземпляр счетчиков. Каждый экземпляр именуется по его идентификатору процесса. Если клиенты перегружены, могут возникнуть другие проблемы. Чтобы избежать этих проблем, сделайте следующее:
  
- Мониторинг использования ЦП и памяти на клиентских компьютерах. Если загрузка ЦП постоянно превышает 90 процентов, уменьшите число пользователей.
    
- При высоком занимаемом памяти могут возникнуть проблемы, если в файле страницы начинается нехватка места. Убедитесь, что плата за фиксацию не достигает предела на компьютере. Если вы используете ограничения памяти, попробуйте увеличить размер файла страницы или уменьшить число пользователей.
    
Ниже приведен список ключевых счетчиков производительности.
  
**Общие сведения**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Время, затраченное в минутах  <br/> |Время, затраченное с момента запуска процесса.  <br/> |
|Активные конечные точки  <br/> |Количество конечных точек, подключенных к серверу.  <br/> |
|Неудачные входы в систему  <br/> |Общее количество сбоев при входе в конечную точку.  <br/> |
|Попытки входа в систему  <br/> |Общее количество попыток входа в конечную точку.  <br/> |
|Конечные точки отключены  <br/> |Общее количество отключенных конечных точек.  <br/> |
   
**Сведения о присутствии**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Вызовы SetPresence  <br/> |Общее количество попыток изменения присутствия. Сведения о различных типах изменений присутствия см. в разделе "Счетчик производительности вызовов SetPresence (Тип присутствия)".  <br/> |
|Ответы NNN для SetPresence  <br/> |Общее число кодов ответов nnn, полученных с сервера.  <br/> |
|Вызовы GetPresence  <br/> |Общее количество попыток получения запросов на присутствие.  <br/> |
|Ответы NNN для GetPresence  <br/> |Общее число кодов ответов nnn, полученных с сервера.  <br/> |
   
**Сведения о службе адресной книги**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Попытка загрузки полных и разностных файлов ABS  <br/> |Общее количество попыток скачивания полных или разностных файлов.  <br/> |
|Полная или разностная загрузка файлов ABS выполнена успешно  <br/> |Общее количество попыток скачивания полных или разностных файлов.  <br/> |
|Счетчики, связанные со службой веб-запросов адресной книги  <br/> |Счетчики скачивания файлов адресной книги.  <br/> |
|Предпринята попытка вызова ABS WS  <br/> |Общее число попыток отправки запросов к службе веб-запросов адресной книги.  <br/> |
|Вызовы ABS WS выполнены успешно  <br/> |Общее количество запросов службы веб-запросов адресной книги, которые вернули код успешного ответа.  <br/> |
|Сбой вызовов ABS WS  <br/> |Общее количество запросов службы веб-запросов адресной книги, которые вернули код ответа об ошибке.  <br/> |
   
> [!NOTE]
> Эта категория включает счетчики, используемые для отслеживания скачивания файлов службы адресной книги (ABS) и запросов службы веб-запросов адресной книги. 
  
**Сведения о списке рассылки (DL)**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Предпринята попытка вызова  <br/> |Общее число попыток расширения списка рассылки (DLX).  <br/> |
|Вызовы выполнены успешно  <br/> |Общее количество запросов веб-службы DLX, которые вернули код успешного ответа.  <br/> |
|Сбой вызовов  <br/> |Общее количество запросов веб-службы DLX, которые вернули код ответа на ошибку.  <br/> |
   

  
> [!NOTE]
> Счетчики производительности, перечисленные ниже, отображают номера всех вызовов голосовой связи по IP-адресу (VoIP), включая вызовы к серверу-посреднику, серверу конференц-связи A/V, пограничному серверу, приложению группы ответа и автосекретарю конференций, если эти сценарии включены. 
  
**Основные сведения о VoIP**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Активные вызовы  <br/> |Общее количество входящих и исходящих голосовых вызовов, выполняемых в настоящее время.  <br/> |
|Вызовы завершены  <br/> |Общее количество входящих и исходящих голосовых вызовов, которые уже завершены.  <br/> |
|Вызовы отклонены  <br/> |Общее число входящих голосовых звонков отклонено.  <br/> |
|Предпринята попытка входящих и исходящих вызовов  <br/> |Общее число попыток входящих и исходящих голосовых вызовов.  <br/> |
|Входящие и исходящие вызовы установлены  <br/> |Общее количество установленных входящих и исходящих голосовых вызовов.  <br/> |
|Полученные вызовы NNN  <br/> |Общее число кодов ответов nnn, полученных с сервера.  <br/> |
|Частота передачи VoIP (%)  <br/> |Общее количество установленных вызовов или всего попыток.  <br/> |
   
**Сведения о вызове службы группы ответа**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Активные вызовы  <br/> |Общее количество активных вызовов приложения группы ответа.  <br/> |
|Предпринята попытка вызова  <br/> |Общее число попыток вызова.  <br/> |
   
**Сведения о звонках для обмена мгновенными сообщениями**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Активные вызовы  <br/> |Общее количество текущих входящих и исходящих вызовов мгновенных сообщений.  <br/> |
|Вызовы завершены  <br/> |Общее количество входящих и исходящих вызовов мгновенных сообщений, которые уже завершены.  <br/> |
|Полученные вызовы NNN  <br/> |Общее число кодов ответов nnn, полученных с сервера.  <br/> |
|Полученные и отправленные мгновенные сообщения  <br/> |Общее количество сообщений, полученных или отправленных для всех сеансов.  <br/> |
|Предпринята попытка входящих и исходящих вызовов  <br/> |Общее число попыток входящих и исходящих вызовов мгновенных сообщений.  <br/> |
|Входящие и исходящие вызовы установлены  <br/> |Общее количество установленных входящих и исходящих вызовов мгновенных сообщений.  <br/> |
   
**Сведения о звонках для общего доступа к приложениям**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Активные вызовы  <br/> |Общее количество текущих входящих и исходящих вызовов общего доступа к приложениям.  <br/> |
|Вызовы завершены  <br/> |Общее количество входящих и исходящих вызовов общего доступа к приложениям, которые уже завершены.  <br/> |
|Полученные вызовы NNN  <br/> |Общее число кодов ответов nnn, полученных с сервера.  <br/> |
|Предпринята попытка входящих и исходящих вызовов  <br/> |Общее число попыток входящих и исходящих вызовов общего доступа к приложениям.  <br/> |
|Входящие и исходящие вызовы установлены  <br/> |Общее количество установленных входящих и исходящих вызовов общего доступа к приложениям.  <br/> |
   
**Сведения о вызове CAA**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Активные вызовы  <br/> |Общее количество входящих и исходящих вызовов телефонной сети общего пользования (ТСОП) в настоящее время.  <br/> |
|Вызовы завершены  <br/> |Общее количество входящих и исходящих вызовов ТСОП, которые уже завершены.  <br/> |
|Предпринята попытка входящих и исходящих вызовов  <br/> |Общее число попыток входящих и исходящих вызовов ТСОП.  <br/> |
|Входящие и исходящие вызовы установлены  <br/> |Общее количество установленных входящих и исходящих вызовов ТСОП.  <br/> |
   
**Сведения о конференции**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Активные конференции по обмену мгновенными сообщениями  <br/> |Общее количество текущих конференций по обмену мгновенными сообщениями.  <br/> |
|Активные аудио- и видеоконференции  <br/> |Общее количество текущих аудио- и видеоконференции (A/V).  <br/> |
|Активные конференции общего доступа к приложениям  <br/> |Общее количество текущих конференций общего доступа к приложениям.  <br/> |
|Количество участников  <br/> |Общее количество участников, подключенных к конференциям в настоящее время.  <br/> |
|Сбой расписания конференции  <br/> |Общее количество сбоев при попытке запланировать конференцию.  <br/> |
|Сбой присоединения к конференции  <br/> |Общее количество сбоев при попытке подключения к конференции.  <br/> |
   
**Счетчики клиентов UCWA**

|**Счетчик производительности**|**Описание**|
|:-----|:-----|
|Общее число успешно выполненных соединений IMMCU  <br/> |Общее число присоединенных конференций по обмену мгновенными сообщениями.  <br/> |
|Общее число успешно выполненных соединений DMCU  <br/> |Общее число присоединенных конференций A/V.  <br/> |
   

