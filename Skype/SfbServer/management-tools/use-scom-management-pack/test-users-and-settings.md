---
title: Настройка тестовых пользователей и параметров узла-наблюдателя
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.date: 2/13/2018
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: ab2e0d93-cf52-4a4e-b5a4-fd545df7a1a9
description: Сводка. Настройка тестовых учетных записей пользователей и параметров узла-наблюдателя для искусственных транзакций Skype для бизнеса Server.
ms.openlocfilehash: 8b586cf4c1d003bb54afa050469a10eee8d113e3
ms.sourcegitcommit: 88a16c09dd91229e1a8c156445eb3c360c942978
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2020
ms.locfileid: "42005954"
---
# <a name="configure-watcher-node-test-users-and-settings"></a>Настройка тестовых пользователей и параметров узла-наблюдателя
 
**Сводка:** Настройка тестовых учетных записей пользователей и параметров узла-наблюдателя для искусственных транзакций Skype для бизнеса Server.
  
Настроив компьютер, который будет выступать в качестве узла-наблюдателя, выполните следующие действия.
  
1. [Настройка тестовых учетных записей пользователей](test-users-and-settings.md#testuser) для использования этими узлами-наблюдателями. Если вы используете проверку подлинности согласованием, вам также необходимо выполнить командлет **Set-CsTestUserCredential**, чтобы разрешить использование этих учетных записей узлом-наблюдателем.
    
2. Обновите параметры конфигурации узла-наблюдателя.
    
## <a name="configure-test-user-accounts"></a>Настройка тестовых учетных записей пользователей
<a name="testuser"> </a>

Тестовые учетные записи не должны представлять реальных людей, но они должны быть действительными учетными записями Active Directory. Кроме того, эти учетные записи должны быть включены в Skype для бизнеса Server, они должны иметь действительные адреса SIP, а также должны быть включены для корпоративной голосовой связи (для использования искусственной транзакции test-CsPstnPeerToPeerCall). 
  
При использовании метода проверки подлинности TrustedServer все, что нужно сделать, — убедиться, что эти учетные записи существуют, и настроить их так, как указано. Необходимо назначить по крайней мере двух тестовых пользователей для каждого пула, который необходимо протестировать. При использовании метода проверки подлинности Negotiate также необходимо использовать командлет Set-CsTestUserCredential и командную консоль Skype для бизнеса Server, чтобы включить эти тестовые учетные записи для работы с искусственными транзакциями. Для этого выполните следующую команду (в этих командах предполагается, что созданы две учетные записи пользователей Active Directory и для них включены Skype для бизнеса Server):
  
```PowerShell
Set-CsTestUserCredential -SipAddress "sip:watcher1@litwareinc.com" -UserName "litwareinc\watcher1" -Password "P@ssw0rd"
Set-CsTestUserCredential -SipAddress "sip:watcher2@litwareinc.com" -UserName "litwareinc\watcher2" -Password "P@ssw0rd"
```

Необходимо указать не только SIP адрес, но и имя пользователя и пароль. Если вы не включите пароль, командлет Set – CsTestUserCredential предложит ввести эту информацию. Имя пользователя можно указать с помощью формата имени домена наме\усер, показанного в предыдущем блоке кода.
  
Чтобы убедиться, что учетные данные тестового пользователя были созданы, выполните следующие команды в командной консоли Skype для бизнеса Server:
  
```PowerShell
Get-CsTestUserCredential -SipAddress "sip:watcher1@litwareinc.com"
Get-CsTestUserCredential -SipAddress "sip:watcher2@litwareinc.com"
```

Для каждого пользователя будет возвращена информация, подобная этой:
  
|**UserName**|**Password**|
|:-----|:-----|
|Litwareinc\watcher1  <br/> |System. Security. SecureString  <br/> |
   
### <a name="configure-a-basic-watcher-node-with-the-default-synthetic-transactions"></a>Настройка базового узла-наблюдателя с искусственными транзакциями по умолчанию

После создания тестовых пользователей можно создать узел-наблюдатель с помощью следующей команды:
  
```PowerShell
New-CsWatcherNodeConfiguration -TargetFqdn "atl-cs-001.litwareinc.com" -PortNumber 5061 -TestUsers @{Add= "sip:watcher1@litwareinc.com","sip:watcher2@litwareinc.com"}
```

Эта команда создает узел-наблюдатель с параметрами по умолчанию, который выполняет набор искусственных транзакций по умолчанию. На новом узле-наблюдателе также используются тестовые пользователи watcher1@litwareinc.com и watcher2@litwareinc.com. Если узел-наблюдатель использует проверку подлинности TrustedServer, две тестовые учетные записи могут быть любыми допустимыми учетными записями пользователей, включенными для Active Directory и Skype для бизнеса Server. Если узел-наблюдатель использует метод проверки подлинности Negotiate, эти учетные записи пользователей также должны быть включены для узла-наблюдателя с помощью командлета Set-CsTestUserCredential.
  
Чтобы проверить, правильно ли настроено автоматическое обнаружение конечного пула, а не нацеливание на пул напрямую, выполните указанные ниже действия.
  
```PowerShell
New-CsWatcherNodeConfiguration -UseAutoDiscovery $true -TargetFqdn "atl-cs-001.litwareinc.com" -PortNumber 5061 -TestUsers @{Add= "sip:watcher1@litwareinc.com","sip:watcher2@litwareinc.com"}
```

### <a name="configuring-extended-tests"></a>Настройка расширенных тестов

Если вы хотите включить тест PSTN, который проверяет связь с телефонной сетью общего пользования, вам потребуется дополнительная настройка узла-наблюдателя. Для начала необходимо связать тестовых пользователей с типом проверки PSTN, выполнив следующую команду в командной консоли Skype для бизнеса Server:
  
```PowerShell
$pstnTest = New-CsExtendedTest -TestUsers "sip:watcher1@litwareinc.com", "sip:watcher2@litwareinc.com" -Name "Contoso Provider Test" -TestType PSTN
```

> [!NOTE]
> Результаты этой команды должны храниться в переменной. В этом примере переменной присвоено имя $pstnTest. 
  
Затем можно использовать командлет **New-CsWatcherNodeConfiguration** , чтобы связать тип теста (хранящийся в переменной $pstnTest) с пулом Skype для бизнеса Server. Например, следующая команда создает новую конфигурацию узла-наблюдателя для пула atl-cs-001.litwareinc.com, добавляя двух тестовых пользователей, созданных ранее, и добавляя тип проверки PSTN:
  
```PowerShell
New-CsWatcherNodeConfiguration -TargetFqdn "atl-cs-001.litwareinc.com" -PortNumber 5061 -TestUsers @{Add= "sip:watcher1@litwareinc.com","sip:watcher2@litwareinc.com"} -ExtendedTests @{Add=$pstnTest}
```

Предыдущая команда завершится с ошибками, если на компьютере узла-наблюдателя не установлены основные файлы Skype для бизнеса Server и база данных RTCLocal. 
  
Чтобы протестировать несколько политик голосовой связи, можно создать расширенный тест для каждой политики с помощью командлета **New-CsExtendedTest** . Предоставленные пользователи должны быть настроены с использованием требуемых политик голосовой связи. Расширенные тесты передаются в командлет **New – CsWatcherNodeConfiguration** с помощью разделителей запятыми, таких как:
  
— Екстендедтестс @ {Add = $pstnTest 1, $pstnTest 2, $pstnTest 3}
  
Так как командлет **New-CsWatcherNodeConfiguration** был вызван без параметра Tests, для нового узла-наблюдателя будут включены только синтетические транзакции по умолчанию (и указанная Расширенная искусственная транзакция). Таким образом, узел-наблюдатель будет тестировать следующие компоненты:
  
- Зарегистрировал
    
- "IM" (Обмен мгновенными сообщениями);
    
- граупим
    
- P2PAV (одноранговые аудио- и видеосеансы)
    
- AvConference (аудио- и видеоконференции)
    
- Присутствие
    
- ABS (служба адресной книги)
    
- ABWQ (веб-служба адресной книги)
    
Следующие компоненты не будут тестироваться по умолчанию:
  
- асконференце
    
- аведжеконнективити
    
- DataConference
    
- диалинконференЦинг
    
- ExumConnectivity (единая система обмена сообщениями Exchange)
    
- жоинлаунчер
    
- MCXP2PIM (устаревшие обмен мгновенными сообщениями для мобильных устройств)
    
- P2PVideoInteropServerSipTrunkAV
    
- персистентчатмессаже
    
- PSTN (звонки шлюза PSTN, которые задаются в качестве расширенного теста)
    
- укваконференце
    
- унифиедконтактсторе
    
- ксмппим
    
### <a name="adding-and-removing-synthetic-transactions"></a>Добавление и удаление искусственных транзакций

После настройки узла-наблюдателя вы можете добавлять искусственные транзакции на узел-наблюдатель или удалять их с узла-наблюдателя с помощью командлета Set-CsWatcherNodeConfiguration. Например, чтобы добавить тест PersistentChatMessage на узел-наблюдатель, используйте следующую команду с методом Add.
  
```PowerShell
Set-CsWatcherNodeConfiguration -Identity "atl-cs-001.litwareinc.com" -Tests @{Add="PersistentChatMessage"}
```

При указании нескольких тестов используйте запятые. Пример:
  
```PowerShell
Set-CsWatcherNodeConfiguration -Identity "atl-cs-001.litwareinc.com" -Tests @{Add="PersistentChatMessage","DataConference","UnifiedContactStore"}
```

Если в узле-наблюдателе уже были включены какие-либо из этих тестов (например, для конференц-связи), произойдет ошибка. В этом случае вы получите следующее сообщение.
  
Set-CsWatcherNodeConfiguration: существует повторяющаяся последовательность ключей ' Conference ' для ' urn: schema: Microsoft. RTC. Management. Settings. WatcherNode. 2010: Тестнаме ' key или UNIQUE Identity Constraint.
  
Если произошла эта ошибка, изменения не применяются. Эту команду необходимо выполнить повторно с удалением тестового дубликата.
  
Чтобы удалить искусственную транзакцию из узла-наблюдателя, используйте метод Remove. Например, следующая команда удаляет тест ABWQ с узла-наблюдателя.
  
```PowerShell
Set-CsWatcherNodeConfiguration -Identity "atl-cs-001.litwareinc.com" -Tests @{Remove="ABWQ"}
```

Метод Replace можно использовать для замены всех включенных в данный момент тестов на один или несколько новых тестов. Например, если вы хотите, чтобы узел-наблюдатель выполнял проверку IM, вы можете настроить его с помощью следующей команды:
  
```PowerShell
Set-CsWatcherNodeConfiguration -Identity "atl-cs-001.litwareinc.com" -Tests @{Replace="IM"}
```

При выполнении этой команды все искусственные транзакции на заданном узле-наблюдателе будут отключены, кроме IM.
  
### <a name="viewing-and-testing-the-watcher-node-configuration"></a>Просмотр и тестирование конфигурации узла-наблюдателя

Чтобы просмотреть тесты, назначенные узлу-наблюдателю, используйте следующую команду.
  
```PowerShell
Get-CsWatcherNodeConfiguration -Identity "atl-cs-001.litwareinc.com" | Select-Object -ExpandProperty Tests
```

Эта команда возвращает такие сведения, как, в зависимости от искусственных транзакций, назначенных узлу:
  
Регистрация IM Граупим P2PAV Авконференце сведения о присутствии Персистентчатмессаже-Конференция
> [!TIP]
> Чтобы просмотреть искусственные транзакции в алфавитном порядке, используйте следующую команду. 
  
```PowerShell
Get-CsWatcherNodeConfiguration -Identity "atl-cs-001.litwareinc.com" | Select-Object -ExpandProperty Tests | Sort-Object
```

Чтобы проверить, был ли создан узел-наблюдатель, введите в командной консоли Skype для бизнеса Server следующую команду:
  
```PowerShell
Get-CsWatcherNodeConfiguration
```

Будет выведена информация, похожая на приведенную ниже.
  
Identity: atl-cs-001.litwareinc.com <br/>
Тестусерс: {sip:watcher1@litwareinc.com, sip:watcher2@litwareinc.com...}<br/>
Екстендедтестс: {Тестусерс = IList<System. String>; Name = PSTN-тест; TE...}<br/>
TargetFqdn: atl-cs-001.litwareinc.com<br/>
Номер_порта: 5061<br/>

Чтобы убедиться в правильности настройки узла-наблюдателя, введите следующую команду в командной консоли Skype для бизнеса Server:
  
```PowerShell
Test-CsWatcherNodeConfiguration
```

Эта команда проверяет каждый узел-наблюдатель в развертывании и проверяет, выполняются ли следующие действия:
  
- Установлена необходимая роль регистратора.
    
- Создается необходимый раздел реестра (завершается при выполнении командлета Set-CsWatcherNodeConfiguration).
    
- На ваших серверах работает правильная версия Skype для бизнеса Server.
    
- Порты настроены правильно.
    
- имеются ли у назначенных тестовых пользователей требуемые учетные данные.
    
## <a name="managing-watcher-nodes"></a>Управление узлами-наблюдателями
<a name="testuser"> </a>

В дополнение к изменению искусственных транзакций, выполняемых на узле-наблюдателе, можно также использовать командлет **Set-CsWatcherNodeConfiguration** для выполнения двух других важных задач: Включение и отключение узла-наблюдателя, а также настройка узла-наблюдателя для использования внутренних URL-адресов или внешних веб-URL-адресов при выполнении тестов.
  
По умолчанию узлы-наблюдатели периодически запускают все включенные искусственные транзакции. Однако иногда может потребоваться приостановить эти транзакции. Например, если узел-наблюдатель временно отключился от сети, у него больше нет причин запускать искусственные транзакции. Без подключения к сети эти транзакции завершатся с ошибками. Чтобы временно отключить узел-наблюдатель, выполните следующую команду в командной консоли Skype для бизнеса Server:
  
```PowerShell
Set-CsWatcherNodeConfiguration -Identity "atl-watcher-001.litwareinc.com" -Enabled $False
```

Эта команда отключит выполнение искусственных транзакций на узле-наблюдателе ATL-наблюдателя 001.litwareinc.com. Чтобы возобновить выполнение искусственных транзакций, снова задайте для свойства Enabled значение True ($True):
  
```PowerShell
Set-CsWatcherNodeConfiguration -Identity "atl-watcher-001.litwareinc.com" -Enabled $True
```

> [!NOTE]
> Свойство Enabled может использоваться для включения или отключения узлов-наблюдателей. Если нет необходимости временно удалять узел-наблюдатель, используйте командлет **Remove-CsWatcherNodeConfiguration**:
  
```PowerShell
Remove-CsWatcherNodeConfiguration -Identity "atl-watcher-001.litwareinc.com"
```

Эта команда удаляет все параметры конфигурации узла-наблюдателя с указанного компьютера, что запрещает этому компьютеру автоматически запускать синтетические транзакции. Однако команда не удаляет файлы агента System Center или файлы системы Skype для бизнеса Server.
  
По умолчанию узлы-наблюдатели при проведении тестов используют внешние URL-адреса в Организации. Однако узлы-наблюдатели также можно настроить на использование внутренних URL-адресов организации. Это позволит администраторам проверить доступ к URL-адресам тех пользователей, которые находятся внутри сети периметра. Чтобы настроить узел-наблюдатель для использования внутренних URL-адресов вместо внешних URL-адресов, задайте для свойства Усеинтерналвебурлс значение true ($True):
  
```PowerShell
Set-CsWatcherNodeConfiguration -Identity "atl-watcher-001.litwareinc.com" -UseInternalWebUrls $True
```

Сброс этого свойства к значению по умолчанию "false" ($False) приведет к тому, что наблюдатель снова будет использовать внешние URL-адреса:
  
```PowerShell
Set-CsWatcherNodeConfiguration -Identity "atl-watcher-001.litwareinc.com" -UseInternalWebUrls $False
```

## <a name="special-setup-instructions-for-synthetic-transactions"></a>Специальные инструкции по установке для искусственных транзакций
<a name="special_synthetictrans"> </a>

Большинство искусственных транзакций могут выполняться на узле-наблюдателе как есть. В большинстве случаев, как только искусственная транзакция добавляется в параметры конфигурации узла-наблюдателя, узел-наблюдатель может начать использовать эту искусственную транзакцию во время тестовых этапов. Однако некоторые искусственные транзакции требуют специальных инструкций по настройке, как описано в следующих разделах.
  
### <a name="data-conferencing-synthetic-transaction"></a>Искусственная транзакция конференц-связи с данными

Если компьютер узла-наблюдателя находится вне сети периметра, то, возможно, не удастся запустить искусственную транзакцию конференц-связи с данными, пока не будет предварительно отключена Windows Internet Explorer® прокси-сервера браузера Internet Explorer для сети. Учетную запись службы, выполнив следующие действия:
  
1. На компьютере узла-наблюдателя нажмите кнопку **Пуск**, выберите **все программы**, **стандартные**, щелкните правой кнопкой мыши **Командная строка**и выберите пункт **Запуск от имени администратора**.
    
2. В окне консоли введите следующую команду и нажмите клавишу ВВОД. 
    
    ```console
    bitsadmin /util /SetIEProxy NetworkService NO_PROXY
    ```

    В окне командной строки отобразится следующее сообщение:

    ```console
    BITSAdmin is deprecated and is not guaranteed to be available in future versions of Windows. Administration tools for the BITS service are now provided by BITS PowerShell cmdlets.
  
    Internet proxy settings for account NetworkService set to NO_PROXY. 
      
    (connection = default)
    ```
      
    Это сообщение указывает на то, что вы отключили параметры прокси-сервера Internet Explorer для учетной записи сетевой службы.
  
### <a name="exchange-unified-messaging-synthetic-transaction"></a>Искусственная транзакция единой системы обмена сообщениями Exchange

Искусственная транзакция единой системы обмена сообщениями Exchange удостоверяется в том, что тестовые пользователи могут подключаться к учетным записям голосовой почты, размещенным в Exchange.
  
Тестовые пользователи должны быть предварительно настроены с помощью учетных записей голосовой почты. 
  
### <a name="persistent-chat-synthetic-transaction"></a>Искусственная транзакция сохраняемого чата

Чтобы использовать искусственную транзакцию сохраняемого чата, необходимо сначала создать канал и предоставить тестовым пользователям разрешения на его использование.
  
Для настройки этого канала можно использовать искусственную транзакцию сохраняемого чата: 
  
```powershell
$cred1 = Get-Credential "contoso\testUser1"
$cred2 = Get-Credential "contoso\testUser2"

Test-CsPersistentChatMessage -TargetFqdn pool0.contoso.com -SenderSipAddress sip:testUser1@contoso.com -SenderCredential $cred1 -ReceiverSipAddress sip:testUser2@contoso.com -ReceiverCredential $cred2 -TestUser1SipAddress sip:testUser1@contoso.com -TestUser2SipAddress sip:testUser2@contoso.com -Setup $true
```

Эту задачу установки необходимо запускать на предприятии, находящегося на предприятии:
  
- При запуске с компьютера, не являющегося сервером, пользователь, который выполняет командлет, должен быть членом роли Ксперсистентчатадминистраторс для управления доступом на основе ролей (RBAC).
    
- При запуске с самого сервера пользователь, который выполняет командлет, должен быть членом группы RTCUniversalServerAdmins.
    
### <a name="pstn-peer-to-peer-call-synthetic-transaction"></a>Искусственная транзакция однорангового вызова PSTN

Искусственная транзакция Test-CsPstnPeerToPeerCall проверяет возможность размещения и получения вызовов через коммутируемую телефонную сеть общего пользования (PSTN).
  
Чтобы выполнить эту искусственную транзакцию, необходимо настроить следующие параметры:
  
- Два тестовых пользователя с включенной поддержкой UC (вызывающий абонент и получатель).
    
- Прямые входные номера для каждой учетной записи пользователя.
    
- Политики VoIP и маршруты голосовой связи, которые позволяют звонить на номер приемника для подключения к шлюзу PSTN.
    
- Шлюз PSTN, который принимает вызовы и носители, которые будут перенаправлять вызовы обратно в пул домашнего пула получателя в соответствии с набираемым номером.
    
### <a name="unified-contact-store-synthetic-transaction"></a>Искусственная транзакция в едином хранилище контактов

Искусственная транзакция в едином хранилище контактов проверяет способность Skype для бизнеса Server получать контакты от имени пользователя из Exchange.
  
Чтобы использовать эту искусственную транзакцию, следует выполнить следующие условия:
  
- Lyss — необходимо настроить проверку подлинности Exchange Server на сервере.
    
- Тестовые пользователи должны иметь действительный почтовый ящик Exchange.
    
После выполнения этих условий можно выполнить следующий командлет Windows PowerShell для переноса списков контактов тестовых пользователей в Exchange:
  
```PowerShell
Test-CsUnifiedContactStore -TargetFqdn pool0.contoso.com -UserSipAddress sip:testUser1@contoso.com -RegistrarPort 5061 -Authentication TrustedServer -Setup
```

Для переноса списков контактов пользователей в Exchange может потребоваться некоторое время. Чтобы отслеживать ход миграции, можно выполнить ту же командную строку без флага – Setup:
  
```PowerShell
Test-CsUnifiedContactStore -TargetFqdn pool0.contoso.com -UserSipAddress sip:testUser1@contoso.com -RegistrarPort 5061 -Authentication TrustedServer
```

После завершения миграции эта командная строка будет выполнена успешно.
  
### <a name="xmpp-synthetic-transaction"></a>Искусственная транзакция XMPP

Для искусственной транзакции обмена мгновенными сообщениями по протоколу XMPP необходимо настроить функцию XMPP с одним или несколькими федеративными доменами.
  
Чтобы включить искусственную транзакцию XMPP, необходимо указать параметр Ксмпптестрецеивермаиладдресс с учетной записью пользователя в поднаправляемом домене XMPP. Пример:
  
```PowerShell
Set-CsWatcherNodeConfiguration -Identity pool0.contoso.com -Tests @{Add="XmppIM"} -XmppTestReceiverMailAddress user1@litwareinc.com
```

В этом примере должно существовать правило Skype для бизнеса Server для маршрутизации сообщений litwareinc.com на шлюз XMPP.

> [!NOTE]
> Шлюзы и прокси-серверы XMPP доступны в Skype для бизнеса Server 2015, но больше не поддерживаются в Skype для бизнеса Server 2019. Дополнительные сведения приведены в статье [Миграция Федерации XMPP](../../../SfBServer2019/migration/migrating-xmpp-federation.md) . 
  
### <a name="video-interop-server-vis-synthetic-transaction"></a>Искусственная транзакция сервера видеовзаимодействия (VIS)

Для искусственной транзакции сервера видеовзаимодействия (VIS) необходимо скачать и установить файлы поддержки искусственной транзакции ([VISSTSupportPackage. msi](https://www.microsoft.com/download/details.aspx?id=46921)). 
  
Чтобы установить VISSTSupportPackage. msi, убедитесь, что зависимости (в разделе Требования к системе) для MSI уже установлены. Запустите VISSTSupportPackage. msi, чтобы выполнить простую установку. MSI устанавливает все файлы по следующему пути: "пакет поддержки искусственной транзакции%Програмфилес%\вис".
  
Для получения дополнительных сведений о запуске искусственной транзакции VIS обратитесь к документации по командлету [Test-CsP2PVideoInteropServerSipTrunkAV](https://technet.microsoft.com/library/dn985894.aspx) .
  
## <a name="changing-the-run-frequency-for-synthetic-transactions"></a>Изменение частоты запуска для искусственных транзакций
<a name="special_synthetictrans"> </a>

По умолчанию искусственные транзакции будут выполняться с настроенными пользователями каждые 15 минут. Искусственные транзакции выполняются последовательно в наборе пользователей, чтобы избежать конфликтов между двумя искусственными транзакциями. Более длительный интервал необходим для предоставления времени для завершения всех искусственных транзакций.
  
Если требуется более часто запускать искусственные транзакции, необходимо уменьшить количество искусственных транзакций, выполняемых с определенным набором пользователей, чтобы тесты могли завершиться в требуемом диапазоне времени с некоторым буфером для задержки в сети. Если требуется выполнение дополнительных искусственных транзакций, создайте дополнительные наборы пользователей для запуска дополнительных искусственных транзакций.
  
Чтобы изменить частоту выполнения искусственных транзакций, выполните указанные ниже действия.
  
1. Откройте System Center Operations Manager. Щелкните раздел Разработка. Щелкните раздел правила (в разделе Разработка).
    
2. В разделе правила найдите правило с именем "правило сбора производительности для основного искусственного выполнения транзакций".
    
3. Щелкните правило правой кнопкой мыши и выберите пункт переопределения, выберите переопределение правила, а затем выберите "для всех объектов класса:" наблюдатель пула ".
    
4. В окне Переопределение свойств выберите имя параметра "частота" и задайте для свойства override нужное значение.
    
5. В том же окне выберите пакет управления, к которому необходимо применить это переопределение.
    
## <a name="using-rich-logging-for-synthetic-transactions"></a>Использование подробного журнала для искусственных транзакций
<a name="special_synthetictrans"> </a>

Искусственные транзакции очень удобно использовать для выявления проблем с системой. Например, командлет Test-CsRegistration может предупредить администраторов о том, что пользователи столкнулись с проблемами при регистрации в Skype для бизнеса Server. Тем не менее, для определения фактической причины сбоя могут потребоваться дополнительные сведения.
  
По этой причине искусственные транзакции предоставляют широкие возможности ведения журнала. С помощью расширенного ведения журнала для каждого действия, которое потребует искусственной транзакции, записываются следующие сведения:
  
- Время начала действия.
    
- Время завершения действия.
    
- Выполняемое действие (например, создание, присоединение или выход из конференции; вход в Skype для бизнеса Server; Отправка мгновенного сообщения).
    
- Сообщения, подробные уведомления, предупреждения и сообщения об ошибках, возникающие при выполнении действия.
    
- Сообщения о регистрации SIP.
    
- Записи об исключениях или диагностические коды, созданные при выполнении действия.
    
- Общий результат выполнения действия.
    
Эти сведения автоматически создаются при каждом запуске искусственной транзакции, но не отображаются и не записываются в файл журнала автоматически. Если вы вручную выполняете искусственную транзакцию, можно использовать параметр OutLoggerVariable, чтобы указать переменную Windows PowerShell, в которой будут храниться данные. Вы можете использовать один из двух методов для сохранения сообщений об ошибках в формате XML или HTML или просмотра сообщений об ошибках в расширенном журнале. 
  
Чтобы получить сведения об устранении неполадок, укажите параметр OutLoggerVariable, а затем имя переменной, которую вы выбираете:
  
```PowerShell
Test-CsRegistration -TargetFqdn atl-cs-001.litwareinc.com -OutLoggerVariable RegistrationTest
```

> [!NOTE]
> Имени переменной не должен предшествовать символ $. Используйте имя переменной, например RegistrationTest (не $RegistrationTest). 
  
При выполнении этой команды отобразятся выходные данные, аналогичные приведенным ниже.
  
Целевое полное доменное имя: atl-cs-001.litwareinc.com result: задержка сбоя: 00:00:00 сообщение об ошибке: на этом компьютере нет назначенных сертификатов. Диагностика: вы можете получить доступ к гораздо более подробным сведениям об этой ошибке, чем просто сообщение об ошибке, показанное здесь.

Чтобы получить доступ к этой информации в формате HTML, используйте команду, аналогичную приведенной ниже, чтобы сохранить данные, хранящиеся в переменной RegistrationTest, в HTML-файл:
  
```PowerShell
$RegistrationTest.ToHTML() | Out-File C:\Logs\Registration.html
```

Можно также использовать метод ToXML() для сохранения данных в файл XML:
  
```PowerShell
$RegistrationTest.ToXML() | Out-File C:\Logs\Registration.xml
```

Эти файлы можно просмотреть с помощью Windows Internet Explorer, Microsoft Visual Studio или любого другого приложения, поддерживающего файлы HTML/XML.
  
Искусственные транзакции, выполняемые из System Center Operations Manager, будут автоматически создавать эти файлы журналов для сбоев. Эти журналы не будут создаваться в случае сбоя выполнения до того, как Skype для бизнеса Server PowerShell сможет загрузить и запустить искусственную транзакцию. 
  
> [!IMPORTANT]
> По умолчанию Skype для бизнеса Server сохраняет файлы журнала в папку, к которой не предоставлен общий доступ. Чтобы сделать эти журналы общедоступными, необходимо поделиться этой папкой. Пример: \\ATL-наблюдатель-001. litwareinc. ком\ватчерноде. 
