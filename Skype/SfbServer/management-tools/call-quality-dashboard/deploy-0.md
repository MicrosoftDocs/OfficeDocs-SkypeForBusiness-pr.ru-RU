---
title: Развертывание панели мониторинга качества звонков для Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 287f64f5-0f8a-455a-8979-7b34bf0217bb
description: Сводка. сведения о процессе развертывания для панели мониторинга качества звонков. Панель мониторинга качества вызовов — это средство Skype для бизнеса Server.
ms.openlocfilehash: d42d735ab5a60ec02ad2e1f4f696908996457c0b
ms.sourcegitcommit: 88a16c09dd91229e1a8c156445eb3c360c942978
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/15/2020
ms.locfileid: "42042266"
---
# <a name="deploy-call-quality-dashboard-for-skype-for-business-server"></a>Развертывание панели мониторинга качества звонков для Skype для бизнеса Server
 
**Сводка:** Сведения о процессе развертывания для панели мониторинга качества звонков. Панель мониторинга качества вызовов — это средство Skype для бизнеса Server.
  
## <a name="deployment-overview"></a>Обзор развертывания

Панель мониторинга качества звонков (CQD) состоит из трех основных компонентов:
  
- **Архивная база данных**, в которой реплицируются и хранятся данные качества взаимодействия (QoE).
    
- **Куб**, где данные из архивной базы данных QoE объединяются для оптимизации и быстрого доступа.
    
- **Портал**, где пользователи могут легко запрашивать и визуализировать данные QoE.
    
![Компоненты CQD](../../media/ef3359b1-c98b-4cc5-a549-c84c6e03c011.png)
  
Процесс установки для архива QoE включает создание архивной базы данных QoE, развертывание хранимой процедуры SQL Server, которая переместит данные из исходной базы данных метрик QoE в архивную базу данных QoE и настройку задания агента SQL Server для выполнения хранимых для процедуры с регулярным интервалом. 
  
Развертывание Куба получает сведения от пользователя, на котором размещается Архив QoE, развертывает куб и устанавливает регулярное задание агента SQL Server, которое будет обновлять куб через заданные промежутки времени.
  
Установка портала создает базу данных репозитория, в которой хранится сопоставление пользователей CQD с отчетами и запросами каждого пользователя. Затем настраивается веб-приложение IIS, представляющее собой панель мониторинга, в которой пользователи могут просматривать заранее определенный набор отчетов, а также настраивать и создавать собственные запросы для отображения данных из куба. При установке портала создаются два дополнительных веб-приложения, которые предоставляют API для программного доступа к репозиторию и Кубу. (Эти API также используются внутри панели мониторинга).
  

|**Этап**|**Действия**|**Роли и членство в группах**|**Документация**|
|:-----|:-----|:-----|:-----|
|Установите необходимое оборудование и программное обеспечение.  <br/> |Решите конфигурацию CQD и выберите сервер SQL Server, с которого будет выполняться установка.  <br/> |Пользователь домена, являющийся членом локальной группы администраторов.  <br/> |Раздел "Предварительная установка требований" в документации по развертыванию.  <br/> |
|Установите CQD.  <br/> |Запустите MSI, следуя документу о развертывании.  <br/> |Чтобы выполнить установку, учетная запись установки должна быть пользователем домена, который является членом локальной группы администраторов и иметь доступ на чтение к базе данных метрик QoE на сервере мониторинга.  <br/> |Разделы, посвященные учетным записям и этапам развертывания, в документации по развертыванию.  <br/> |
|Предоставление пользователю доступа.  <br/> |Для управления авторизацией пользователей на портале рекомендуется использовать авторизацию URL-адресов, которая появилась в IIS 7,0. Дополнительные сведения см. в статье [Общие сведения об авторизации URL-адресов IIS 7,0](https://www.iis.net/learn/manage/configuring-security/understanding-iis-url-authorization).  <br/> |Пользователь домена, являющийся членом локальной группы администраторов.  <br/> |Управление доступом пользователей к разделу портал в документации по развертыванию.  <br/> |
|Необязательно: предоставление сведений о сопоставлении подсети.  <br/> |Заполнение сети и создание таблиц сопоставлений в архивной базе данных QoE.  <br/> |Учетная запись, доступная для записи в архивную базу данных QoE.  <br/> |Раздел "предоставление сведений о подсети" в пользовательской документации.  <br/> |
   


Развертывание панели мониторинга качества звонков включает настройку инфраструктуры и установку программного обеспечения. В следующей процедуре описывается процесс.
  
## <a name="deployment-steps"></a>Действия по развертыванию

1. Скопируйте Каллкуалитидашбоард. msi на компьютер с установленным компонентом архивной базы данных CQD (это компьютер, на котором установлен SQL Server). 
    
2. Выполните MSI (Windows выведет запрос на запуск с правами администратора). 
    
3. Примите условия лицензионного соглашения.
    
4. Выберите папку назначения, в которой будут размещаться файлы, связанные с компонентами панели мониторинга качества звонков, или оставьте расположение по умолчанию.
    
5. Выберите все компоненты.
    
6. На странице Конфигурация архива QoE введите следующие сведения.
    
   - **QoE метрики SQL Server:** Имя экземпляра SQL Server, где расположена база данных метрик QoE (это будет источник данных).
    
   - **Имя архива SQL Server QoE:** Это поле предназначено только для чтения и исправлено до полного доменного имени локального компьютера. Архивная база данных может быть установлена только на локальном компьютере.
    
   - **QoE архивный экземпляр SQL Server:** Имя локального экземпляра SQL Server, в котором будет создана архивная база данных. Чтобы использовать экземпляр SQL Server по умолчанию, оставьте это поле пустым. Чтобы использовать именованный экземпляр SQL Server, укажите имя экземпляра (например, имя после "\").
    
   - **Архивная база данных QoE:** По умолчанию этот параметр имеет значение "создать новую базу данных". Так как архивная база данных не поддерживается, единственные ситуации, в которых можно использовать параметр "использовать существующую базу данных", могут быть только в том случае, если существующая архивная база данных имеет ту же схему, что и сборка, которую необходимо установить.
    
   - **Каталог файлов базы данных:** Путь к месту размещения файлов базы данных (MDF и LDF) для архивной базы данных. Это должно быть на диске (HDD2 в разделе Рекомендуемая конфигурация оборудования), отдельном от операционной системы. Обратите внимание, что поскольку имена файлов фиксируются в установке, чтобы избежать потенциальных конфликтов, рекомендуется использовать пустой каталог без файлов.
    
   - **Использование нескольких разделов:** По умолчанию задано значение "несколько разделов", для которого требуется выпуск SQL Server бизнес-аналитики Edition или Enterprise Edition. В качестве выпуска Standard Edition выберите параметр "один раздел". Обратите внимание на то, что производительность обработки куба может быть снижена при использовании одного раздела.
    
     > [!NOTE]
     > Параметр выбор для нескольких разделов невозможно изменить после завершения установки. Чтобы изменить его, необходимо сначала удалить компонент Куба, а затем переустановить его с помощью параметра "Изменить" на панели управления. 
  
   - **Каталог файлов разделов:** Путь, по которому следует поместить разделы для архивной базы данных QoE. Это должно быть на диске (HDD3 в разделе Рекомендуемая конфигурация оборудования) отдельно от диска ОС и файлов журнала базы данных SQL. Обратите внимание, что поскольку имена файлов фиксируются в установке, чтобы избежать потенциальных конфликтов, рекомендуется использовать пустой каталог без файлов.
    
   - **Задание агента SQL user — &amp; пароль пользователя:** Имя и пароль учетной записи службы домена (маскировка), которые будут использоваться для выполнения этапа "QoE Archive Data" задания агента SQL Server (которое запускает хранимую процедуру для получения данных из базы данных QoE метрик в архивную базу данных, поэтому эта учетная запись должна иметь доступ на чтение к базе данных QoE метрик, как указано в разделе Accounts. Эта учетная запись также должна иметь имя входа в архивном экземпляре SQL Server QoE.
    
     > [!NOTE]
     > Учетная запись, под которой выполняется экземпляр SQL Server, например NT СЕРВИЦЕ\МССКЛСЕРВЕР, должна иметь доступ к каталогам, указанным выше, для успешного завершения установки. Дополнительные сведения см. в статье [Настройка разрешений файловой системы для доступа к ядру СУБД](https://msdn.microsoft.com/library/jj219062%28v=sql.110%29.aspx)
  
7. После нажатия кнопки Далее Установщик выполняет Предварительные проверки и сообщает о наличии проблем. После выполнения всех предварительных проверок установщик перейдет на страницу конфигурации куба. 
    
    > [!NOTE]
    > Если в установщике отображается предупреждение о том, что служба агента SQL Server для архивного экземпляра SQL Server в настоящее время не работает, установка может быть продолжена, но после установки убедитесь, что служба агента SQL Server запущена, и установите для параметра Тип запуска значение Автоматическое выполнение запланированного задания. 
  
8. На странице Конфигурация куба укажите следующие сведения:
    
   - **Имя архива SQL Server QoE:** Это поле предназначено только для чтения и исправлено до полного доменного имени локального компьютера. Куб можно установить только с компьютера, на котором имеется архивная база данных QoE (Примечание. Сам куб можно установить на удаленном компьютере. См. ниже)
    
   - **QoE архивный экземпляр SQL Server:** Имя экземпляра SQL Server, где расположена архивная база данных QoE. Чтобы указать экземпляр SQL Server по умолчанию, оставьте это поле пустым. Чтобы указать именованный экземпляр SQL Server, введите имя экземпляра (например, имя после "\"). Если для установки выбран компонент архива QoE, это поле будет предварительно заполнено значением, указанным на странице Конфигурация архива QoE.
    
   - **Сервер анализа Куба:** Имя экземпляра службы SQL Server Analysis Service для места создания куба. Это может быть другой компьютер, но пользователь, выполняющий установку, должен быть членом группы администраторов целевого экземпляра службы SQL Server Analysis Service.
    
     > [!NOTE]
     >  Дополнительные сведения о настройке разрешений администратора сервера служб Analysis Services содержатся в разделе [предоставление разрешений администратора сервера (службы Analysis Services)](https://msdn.microsoft.com/library/ms174561.aspx)
  
   - **Использование нескольких разделов:** По умолчанию задано значение "несколько разделов", для которого требуется выпуск SQL Server бизнес-аналитики Edition или Enterprise Edition. В качестве выпуска Standard Edition выберите параметр "один раздел". Обратите внимание на то, что производительность обработки куба может быть снижена при использовании одного раздела.
    
     > [!NOTE]
     >  Параметр выбор для нескольких разделов невозможно изменить после завершения установки. Чтобы изменить его, необходимо сначала удалить компонент Куба, а затем переустановить его с помощью параметра "Изменить" на панели управления.
  
   - Пароль пользователя Куба: ** &amp; ** Имя и пароль учетной записи службы домена (маскированный), который будет инициировать обработку куба. Если для установки выбран компонент архива QoE, это поле будет предварительно заполнено значением, указанным на странице Конфигурация архива для пользователя задания агента SQL, но мы рекомендуем указать другую учетную запись службы домена, чтобы программа установки могла предоставить минимальные требуемые права для него.
    
9. При нажатии кнопки Далее будет выполнен другой цикл проверки, и появится сообщение о проблемах. После успешного завершения проверки установщик перейдет на страницу конфигурации портала. 
    
10. На странице Конфигурация портала укажите следующие сведения:
    
    - **Архивный SQL Server QoE:** Имя экземпляра SQL Server, где расположена архивная база данных QoE. Обратите внимание, что в отличие от страницы Конфигурация архива QoE и страницы Конфигурация куба, имя компьютера не зафиксировано и должно быть указано. Если для установки выбран компонент архива QoE, это поле будет предварительно заполнено значением, указанным на странице Конфигурация архива QoE.
    
    - **Сервер анализа Куба:** Имя экземпляра службы SQL Server Analysis Service для места, где расположен куб. Если для установки выбран компонент Куба, в это поле будет предварительно заполнено значение, указанное на странице конфигурации куба.
    
    - **SQL Server репозитория:** Имя экземпляра SQL Server, на котором будет создана база данных репозитория. Если имя экземпляра SQL Server, где расположена архивная база данных QoE, было предоставлено ранее в настройке (в других компонентах), это поле будет предварительно заполнено именем экземпляра SQL Server для архивной базы данных QoE. Это может быть любой экземпляр SQL Server.
    
    - **База данных репозитория:** По умолчанию параметру присвоено значение "создать новую базу данных". Так как обновление базы данных репозитория не поддерживается, единственные ситуации, в которых можно использовать параметр "использовать существующую базу данных", могут быть только в том случае, если существующая база данных репозитория имеет ту же схему, что и устанавливаемая сборка.
    
    - **Пользователь пула приложений IIS — пароль имени &amp; пользователя:** Учетная запись, под которой должен выполняться пул приложений IIS. Поля "имя пользователя" и "пароль" будут недоступны, если выбраны встроенные системные учетные записи. Эти поля будут включены только в том случае, если в раскрывающемся списке выбран параметр "другое", чтобы пользователь мог ввести сведения об учетной записи службы домена.
    
11. При нажатии кнопки Далее будет выполнен полный круг проверки, чтобы обеспечить доступ к экземплярам SQL Server с помощью предоставленных учетных данных и доступности служб IIS на компьютере. После успешного завершения проверки Установщик продолжит установку. 
    
По завершении работы программы установки, скорее всего, будет выполняться задание агента SQL Server, в результате чего выполняется начальная загрузка данных QoE и обработка куба. В зависимости от объема данных в QoE портал не сможет получить доступ к данным для просмотра. Чтобы проверить состояние загрузки данных и обработки куба, перейдите на `http://<machinename>/CQD/#/Health`страницу. 
> [!NOTE]
> Обратите внимание, что URL-адрес для проверки состояния загрузки Куба задается с учетом регистра. Если ввести "работоспособность", URL-адрес не будет работать. Необходимо ввести "работоспособность" в конце URL-адреса с прописной буквы H. 
  
Подробные сообщения журнала будут отображаться, если включен режим отладки. Чтобы включить режим отладки, перейдите на страницу **%Системдриве%\програм Files\Skype для бизнеса 2015 ккд\коедатасервице\веб.конфиг**и обновите следующую строку, чтобы присвоить параметру значение **true**:

```xml
<add key="QoEDataLib.DebugMode" value="True" /> 
```

Доступ к главной странице портала предоставляется через `http://<machinename>/CQD`. 
## <a name="managing-user-access-for-the-portal"></a>Управление доступом пользователей к порталу

Для управления авторизацией пользователей на портале рекомендуется использовать авторизацию URL-адресов, которая появилась в IIS 7,0. Более подробную информацию о безопасности IIS можно узнать в статье [сведения об авторизации URL-адресов iis 7,0](https://www.iis.net/learn/manage/configuring-security/understanding-iis-url-authorization).
  
Любой веб-сайт или веб-приложение наследуют авторизацию URL-адреса по умолчанию, настроенную для всей службы IIS, обычно это "разрешить всем пользователям". Если доступ к порталу должен быть более четким, администраторы могут предоставлять доступ только определенной группе пользователей, редактируя "правила авторизации".
  
![Развертывание правил авторизации качества вызова в IIS](../../media/0da80c28-58fe-4aca-94b4-db684389468c.png)
  
> [!NOTE]
> Значок "правила авторизации" не следует путать с параметром "авторизация .NET" в разделе ASP.NET, который является другим механизмом проверки подлинности. 
  
Сначала администраторы должны удалить унаследованное правило "разрешить все пользователи". Это предотвращает доступ к порталу для всех неавторизованных пользователей.
  
![Развертывание CQD](../../media/fa17ad19-d303-40f8-8324-d13fd67936ab.png)
  
Затем администраторы должны добавить новые правила разрешения и предоставить определенным пользователям разрешение на доступ к порталу. Для управления пользователями рекомендуется создавать локальную группу под названием "Ккдпорталусерс".
  
![Развертывание панели мониторинга качества вызовов](../../media/8cfdc141-ec89-4552-921b-53196f497cbf.png)
  
Сведения о конфигурации хранятся в файле Web. config, расположенном в физическом каталоге портала.
  
```xml
<?xml version="1.0" encoding="UTF-8"?> <configuration> <system.webServer> <security> <authorization> <remove users="*" roles="" verbs="" /> <add accessType="Allow" roles="CQDPortalUsers" /> </authorization> </security> </system.webServer> </configuration> 
```

Следующий шаг — настройка панели мониторинга для CQD. После того как пользователи проходят проверку подлинности службами IIS, они должны иметь разрешения на доступ к каталогу CQD для доступа к контенту веб-портала. Можно изменить списки управления доступом на вкладке Безопасность в свойствах каталога CQD, чтобы добавить отдельных пользователей или группы; Однако рекомендуемый подход — оставить разрешения на доступ к файлам без изменений. Вместо этого измените параметр IIS так, чтобы он использовал рабочий процесс IIS для доступа к каталогу CQD, независимо от того, какой пользователь прошел проверку подлинности. 
  
> [!IMPORTANT]
> Важно изменить этот параметр только для приложения CQD, а не для двух приложений API: Коедатасервице и Коерепоситорисервице. 
  
## <a name="configuring-file-access-for-the-cqd-dashboard"></a>Настройка доступа к файлам для CQD (панель мониторинга)

1. Откройте редактор конфигурации для CQD.
    
     ![Развертывание панели мониторинга качества вызовов](../../media/544056eb-3090-434e-bae6-321c984029fa.png)
  
2. В разделе Раздел выберите **System. Server/serverRuntime**.
    
     ![Развертывание панели мониторинга качества вызовов](../../media/b0af0e56-21b0-45dd-b610-5381b39319d3.png)
  
3. Измените значение Аусентикатедусероверриде на **усеворкерпроцессусер**.
    
     ![Развертывание панели мониторинга качества вызовов — редактор конфигураций](../../media/a7c127f5-9a90-4710-afba-1d1e588efb37.png)
  
4. Нажмите кнопку **Применить** в правой части страницы.
    
## <a name="known-issues"></a>Известные проблемы

### <a name="the-cqd-shows-no-data-after-deployment"></a>CQD не показывает данные после развертывания

Может появиться следующее сообщение об ошибке:

*Не удалось выполнить запрос во время его выполнения в Кубе. С помощью редактора запросов измените запрос и устраните все неполадки. Кроме того, убедитесь, что куб доступен.*

Это означает, что куб должен быть обработан в службах SQL Server Analysis Services до использования в CQD. Для устранения этой проблемы выполните следующие действия.

1. Откройте SQL Management Studio и выберите **службы Analysis Services**.

2. Разверните объект **коекубе** , выберите **QoE метрика**, щелкните правой кнопкой мыши и выберите **Browse (обзор**). 

    Если этот параметр возвращает пустой браузер, куб еще не был выполнен.

3. Щелкните правой кнопкой мыши **QoE метрика** ангаин и выберите пункт **процесс**.

4. По завершении обработки щелкните объект правой кнопкой мыши и выберите пункт **Обзор** , чтобы убедиться, что страница браузера теперь отображает данные. 


### <a name="users-have-trouble-logging-in-because-installer-fails-to-create-the-correct-settings-in-iis"></a>У пользователей возникают проблемы с входом в систему, так как установщик не создает правильные параметры в службах IIS.

В редких случаях установщик не создает правильные параметры в службах IIS. Для предоставления пользователям возможности входа в CQD требуется ручное изменение. Если у пользователей возникают проблемы с входом в систему, выполните следующие действия:
  
1. Откройте диспетчер IIS и перейдите на веб-сайт по умолчанию.
    
     ![Развертывание панели мониторинга качества вызовов](../../media/dc6007aa-870b-4d70-867d-32ffd937063b.png)
  
2. Щелкните "Проверка подлинности". Если "Анонимная проверка подлинности", "олицетворение" ASP.NET "," Проверка подлинности формы "и" Проверка подлинности Windows "не совпадают с указанными ниже параметрами, вручную измените их в соответствии с приведенными ниже параметрами. Все остальные механизмы проверки подлинности должны быть отключены.
    
     ![Развертывание панели мониторинга качества вызовов](../../media/5d9e38fb-8a50-41a2-a423-3ce983a83d0c.png)
  
3. В разделе "Проверка подлинности Windows" щелкните Дополнительные параметры справа.
    
     ![Развертывание панели мониторинга качества вызовов](../../media/cad29486-df40-4cc9-82f3-bbdaca52d9ca.png)
  
4. Установите флажок "Расширенная защита", чтобы принять и установить флажок "включить проверку подлинности в режиме ядра".
    
     ![Развертывание панели мониторинга качества вызовов](../../media/0ab2dda1-0001-4747-8cfc-072e9368b6cb.png)
  
5. Повторите указанные выше действия для каждой из записей "CQD", "Коедатасервице" и "Коерепоситорисервице" ниже "Default Web Site".
    
Для привязок портов HTTP и HTTPS Установщик создаст привязки портов для номеров портов по умолчанию (порт 80 для HTTP и порт 443 для HTTPS). Если на компьютере, на котором используются эти привязки, имеется другой веб-сайт, произойдет конфликт, и поведение IIS не будет предсказуемо. Лучший способ избежать этой проблемы — убедиться в отсутствии других веб-сайтов, сопоставленных с портами 80 и 443, прежде чем устанавливать CQD. 
  
Включение протокола SSL/TLS в IIS и принудительное подключение пользователей через безопасный протокол HTTPS, а не HTTP:
  
1. Configure Secure Sockets Layer в службах IIS: [Настройка протокола Secure Sockets в службах IIS 7](https://technet.microsoft.com/library/cc771438%28v=ws.10%29.aspx). После завершения замените `http` на `https`.
    
2. Инструкции по включению протокола TLS в подключениях SQL Server приведены [в статье как включить шифрование SSL для экземпляра SQL Server с помощью консоли управления (MMC](https://support.microsoft.com/kb/316898/)).
    
## <a name="cube-sync-fails"></a>Сбой синхронизации Куба

В QoEMetrics могут содержаться некоторые недопустимые записи на основе часов конечных пользователей. Если отклонение по времени превышает 60 ИРС, импорт Куба завершится с ошибками.
  
 Проверьте минимальное и максимальное значение StartTime/EndTime, используя параметры, указанные ниже. Искать и удалять записи в крайних прошлых и очень удаленных возможностях, они могут быть продолжены и добиваться процессов синхронизации.
  
- Выберите MIN (StartTime) (время начала) из Ккдпартитионедстреамвиев
    
- Выберите максимальное (StartTime) из Ккдпартитионедстреамвиев
    
- Выберите MIN (EndTime) из Ккдпартитионедстреамвиев
    
- Выберите максимальное (EndTime) из Ккдпартитионедстреамвиев
    
## <a name="post-install-tasks"></a>Задачи, выполняемые после установки

### <a name="importing-buildings-and-networks"></a>Импорт зданий и сетей

После установки CQD выполните следующие задачи по настройке:
  
1. Определение типов здания (рекомендуется)
    
2. Определение типов владения для здания (рекомендуется)
    
3. Определение типов сети (настоятельно рекомендуется)
    
4. Импорт зданий (рекомендуется)
    
5. Импорт подсетей (рекомендуется)
    
### <a name="define-building-types"></a>Определение типов построений

Типы построений используются для описания различных определений или типов зданий в Организации. 
  
> [!NOTE]
> Этот шаг является необязательным, но рекомендуется. 
  
Примеры
  
- Главный офис
    
- Удаленный Office
    
- Совместное размещение
    
  **Пример синтаксиса SQL**
  
```SQL
INSERT INTO
[dbo].[CqdBuildingType]
([BuildingTypeId],
[BuildingTypeDesc])
VALUES
(1, 
'Headquarters')   
```

Параметры Буилдингтипеид и Буилдингтипедеск являются обязательными.
  
### <a name="define-building-ownership-types"></a>Определение типов владения для здания

Типы владения используются для различения собственных активов и арендованных активов.
  
> [!NOTE]
> Этот шаг является необязательным, но рекомендуется. 
  
Примеры
  
- Аренда в аренду без ПОВТОРЕНИЯ&amp;
    
- Аренда в аренду&amp;(Contoso)
    
- Владелец contoso
    
- Арендованный дочерний
    
  **Пример синтаксиса SQL**
  
```SQL
INSERT INTO
[dbo].[CqdBuildingOwnershipType]
([OwnershipTypeId],
[OwnershipTypeDesc]
)

VALUES
(1,
'Contoso Owned'
)
```

Параметры Овнершиптипеид и Овнершиптипедеск являются обязательными. 
  
### <a name="define-network-names"></a>Определение сетевых имен

Типы сети используются для описания различных типов сетей в Организации. Это дает возможность фильтровать (или отфильтровывать) определенные типы сетей.
  
> [!NOTE]
> Настоятельно рекомендуется определить сетевые имена, но это необязательно. Если вы решили не определять сетевые имена, убедитесь, что для каждой записи Ккднетворк задано значение Буилдингид 0. 
  
Примеры
  
- VPN
    
- Labs
    
  **Пример синтаксиса SQL**
  
```SQL
INSERT INTO [dbo].[CqdNetworkName] 
( [NetworkName]
,[NetworkType]
 ) 
VALUES
('VPN','VPN') 
```

Параметры Нетворкнамеид и Нетворкнаме являются обязательными, параметр Нетворктипе является необязательным, но рекомендуется.
  
### <a name="import-buildings"></a>Импорт зданий

При импорте зданий вы можете создавать конкретные аналитические сведения (некачественные вызовы для каждого здания на WiFi/Wired и т. д.). 
  
> [!NOTE]
> Этот шаг является необязательным, но рекомендуется. 
  
Перед импортом нового здания уже должно быть определено предопределенное Буилдингкэй. Для этого выполните команду SQL "SELECT MAX (Буилдингкэй) FROM CqdBuilding", чтобы определить текущее значение, и добавьте 1 к результату.
  
 **Пример синтаксиса SQL**
  
```SQL
INSERT INTO [dbo].[CqdBuilding] 
( [BuildingKey]
,[BuildingName]
,[BuildingShortName]
,[OwnershipTypeId],
[BuildingTypeId]
)
VALUES
(2, 'Ann Arbor', 'AA', 0, 0)
```

Параметры Буилдингкэй, Буилдингнаме, Буилдингшортнаме, Овнершиптипеид, Буилдингтипеид являются обязательными, другие параметры являются необязательными.
  
### <a name="import-subnets"></a>Импорт подсетей

При импорте зданий вы можете создавать конкретные аналитические сведения (некачественные вызовы для каждого здания на WiFi/Wired и т. д.). 
  
> [!NOTE]
> Этот шаг является необязательным, но рекомендуется. 
  
Импортируйте подсети и сопоставьте их с зданиями, импортированными на последнем этапе. Если вы решили не заполнять Нетворкнаме, убедитесь, что каждая запись в этой таблице использует Нетворкнамеид 0.
  
 **Пример синтаксиса SQL**
  
```SQL
INSERT INTO [dbo].[CqdNetwork] 
([Network]
,[NetworkNameID]
,[BuildingKey]
,[UpdatedDate]
)

VALUES
 ('172.16.254.0',0,1,'2015-11-11')
```

Параметры Network и Упдатеддате являются обязательными, другие параметры являются необязательными.
  
### <a name="optional-bssid"></a>Необязательно: BSSID

Заполнение BSSID Information предоставляет дополнительную корреляцию потоков WiFi по контроллеру или радио. Это дополнение к фильтрации по сборке или подсети. 
  
 **Пример синтаксиса SQL**
  
```SQL
INSERT INTO [dbo].[CqdBssid]
([Ap],
[Bss],
[Building],
[ess],
[phy]
)
VALUES
('AP1','00-00-00-00-00-00','Aruba AP 1','Controller1','bgn')
```

**Сведения о Ккдбссидтабле**

|**Как показано в CQD**|**Таблица Ккдбссид**|**Примеры входных данных**|
|:-----|:-----|:-----|
|Ннаме AP  <br/> |ТОЧКУ  <br/> |AP1  <br/> |
|ббссид  <br/> |BSS  <br/> |00-00-00-00-00-00 (необходимо использовать фформат с разделителями)  <br/> |
|Контроллер  <br/> |Создания  <br/> |Аруба AP 7  <br/> |
|Device  <br/> |Рес  <br/> |Controller1  <br/> |
|Сети  <br/> |физического  <br/> |бгн  <br/> |
   
### <a name="processing-the-imported-data"></a>Обработка импортированных данных

По умолчанию после импорта данных здания и сети он будет применяться только к записям, созданным после этого момента времени. 
  
Чтобы отметить все предыдущие записи новыми данными, необходимо запустить хранимую процедуру Ккдупдатебуилдинг, как показано ниже: 
  
Присвойте ей дату первой записи (с помощью команды SELECT MIN (StartTime) FROM Ккдпартитионедстреамвиев SQL), EndDate завтрашнего дня, а затем значение NULL для последних двух значений.
  
После того как данные сопоставлены с данными потока, куб служб SSIS должен повторно обработать все записи. Это также применимо при массовом добавлении данных BSSID/ISP. Убедитесь, что выбран пункт "процесс полон".
  

