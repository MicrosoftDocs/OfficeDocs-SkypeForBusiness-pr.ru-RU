---
title: Планирование панели мониторинга качества звонков для Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: cc2fbf41-a7e0-4ef8-a939-47bc42da5529
description: Сводка. Сведения о том, что следует учитывать при планировании панели мониторинга качества вызовов.
ms.openlocfilehash: 6a1fc39dd26f6c4e9e455babcecb124888629179
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/12/2021
ms.locfileid: "49803179"
---
# <a name="plan-for-call-quality-dashboard-for-skype-for-business-server"></a>Планирование панели мониторинга качества звонков для Skype для бизнеса Server 
 
**Сводка:** Узнайте о том, что следует учитывать при планировании панели мониторинга качества вызовов.
  
## <a name="overview-of-the-skype-for-business-server-call-quality-dashboard"></a>Обзор панели мониторинга качества звонков Skype для бизнеса Server

Панель мониторинга качества звонков Skype для бизнеса Server ( CQD) — это уровень отчетов на основе базы данных качества работы на сервере мониторинга в Skype для бизнеса Server. CQD использует Microsoft SQL Server analysis Services для предоставления сводных сведений об использовании и качестве вызовов, а также для фильтрации и сводки по набору данных. К функциям CQD относятся:
  
- **Архивное хранение данных о QoE через компонент QoE Archive CQD.** Компонент архива качества работы может хранить данные о качестве качества работы гораздо дольше, чем сервер мониторинга. Это позволяет одновременно создавать тенденции и создавать отчеты за период до семи месяцев с возможностью отката окна отчетов до тех пор, пока существуют данные.
- **Отчетность и анализ с использованием мощности и скорости Microsoft SQL Server analysis Services.** CQD использует службы Microsoft SQL Analysis Services для обеспечения быстрой сводки, фильтрации и сводки для обеспечения работы панели мониторинга с помощью куба анализа. Отчетность о скорости выполнения и возможности пробора данных может значительно сократить время анализа.
- **Новая схема данных, оптимизированная для отчетов о качестве вызовов.** Куб имеет схему, разработанную для отчетов о качестве голосовой почты и расследований. Пользователи портала могут сосредоточиться на задачах отчетности вместо того, чтобы выяснить, как схема базы данных метрик качества работы сопоируется с нужными представлениями. Сочетание архива QoE и куба обеспечивает абстракцию, которая снижает сложность отчетности и анализа с помощью CQD. Схема базы данных архива качества связи также содержит таблицы, которые можно заполнить данными, характерными для развертывания, для повышения общего значения данных.
- **Встроенный конструктор отчетов и редактирование отчетов на месте.** Компонент портала поставляется с несколькими встроенными отчетами, смоделными после методологии качества вызовов. Пользователи портала могут изменять отчеты и создавать новые отчеты с помощью функций редактирования портала.
- **Доступ к структуре отчетов и данным куба анализа веб-API.** Структура отчетов панели мониторинга — не единственный способ отображения данных из куба. CQD предоставляет несколько примеров использования HTML и JavaScript для получения данных из веб-API CQD и отображения данных в пользовательском формате. Сочетание редактора отчетов и веб-API CQD обеспечивает быстрое оформление отчетов и настраиваемого макета отчетов.

> [!NOTE]
> Теперь администратор может управлять Skype для бизнеса Server 2019 с помощью [CQD](https://cqd.teams.microsoft.com) версии 3 (войдите с помощью учетных данных администратора). Для этого требуется гибридная реализация и использование соединители данных вызовов (CDC). Дополнительные [сведения](/SkypeForBusiness/hybrid/plan-call-data-connector) о включении CDC см. в подключении соединители данных о вызовах. Дополнительные сведения о CQD [](/MicrosoftTeams/turning-on-and-using-call-quality-dashboard) версии 3 см. в документации по CQD версии 3.

## <a name="cqd-design-goals"></a>Цели разработки CQD

CQD позволяет ИТ-специалисты использовать сводные данные для определения областей фокуса в своей среде, в которых возникли проблемы с качеством мультимедиа. Она позволяет ИТ-пользователям сравнивать статистику для различных групп пользователей и определять тенденции и шаблоны. Она ориентирована не на решение отдельных проблем с вызовами, а на выявление проблем и решений, которые будут применяться к многим пользователям в данной среде. 
  
## <a name="call-quality-dashboard-components"></a>Компоненты панели мониторинга качества вызовов

Панель мониторинга качества вызовов состоит из нескольких баз данных, заданий агента Microsoft SQL, процессов и веб-приложений. Задания агента Microsoft SQL периодически копируют данные из базы данных метрик качества связи в архивную базу данных качества и обрабатывает куб с данными в архивной базе данных качества.. В базе данных репозитория хранится определения отчетов, которые заполуют портал. Портал предоставляет доступ к данным куба в браузере. 
  
Компоненты CQD, включая архив QoE, куб и базы данных репозитория, могут быть установлены на сервере мониторинга, установлены на собственном сервере или на нескольких серверах. Конкретный метод установки зависит от требований ККЗ к производительности, а также от влияния на другие процессы на тех же серверах. Дополнительные сведения можно найти в разделе "Компоненты и topologies for CQD" далее в этой статье.
  
### <a name="architectural-overview"></a>Обзор архитектуры

Подводя итог, для CQD требуются следующие элементы:
  
- Две базы данных: архивная база данных и база данных репозитория.
    
- Один куб SSAS, визуализирующий агрегированные данные 
    
- В IIS размещен веб-портал CQD
    
![Компоненты CQD](../../media/ef3359b1-c98b-4cc5-a549-c84c6e03c011.png)
  
Такая же архитектура CQD поддерживает Lync Server 2013 и Skype для бизнеса. 
  
### <a name="cqd-and-skype-for-business-vs-lync-2013"></a>CQD и Skype для бизнеса и Lync 2013

 Только в среде Skype для бизнеса доступны следующие возможности:
  
- Wi-Fi отчеты о сигнале "Сила сигнала"
    
- Wi-Fi отчетов о драйверах для микросхем
    
- Rate my Call data 
    
## <a name="information-available-through-cqd"></a>Сведения, доступные в CQD

CQD can show Skype for Business Server audio, video, and application sharing stream counts and count of good versus bad calls as well as ratios of bad to good calls. Представления можно срезать и отфильтровать по различным измерениям. CQD рисует данные из базы данных метрик качества качества на сервере мониторинга. Затем данные объединяются с данными, предоставленными клиентом, такими как сопоставление подсети и здания, чтобы сделать возможными такие отчеты, как "Качество вызовов на здания". 
  
CQD также абстрагирует многие внутренние коды данных О КАЧЕСТВЕ, такие как "caller" и "callee", так что пользователь может сосредоточиться на создании представлений отчетов вокруг "server" и "client". В соответствии с методологией качества звонков CQD оптимизирован для определения условий, общих для неудовлетворительных звонков — одного из принципов повышения качества звонков.
  
## <a name="viewing-data-in-cqd"></a>Просмотр данных в CQD

Данные CQD можно просмотреть на портале CQD и получить доступ с помощью вызовов REST API.
  
### <a name="cqd-portal"></a>Портал CQD

Портал — это самый быстрый способ просмотра данных в кубе. Портал поставляется с несколькими встроенными отчетами, которые можно сразу же применять. Встроенные отчеты связываются структурированным образом, чтобы пользователь последовательно срезал и нарезал фрагменты данных вызова. Встроенные отчеты также выделяют различные способы, которыми могут быть показаны данные, демонстрируя сочетание диаграмм и таблиц с различными с помощью севозов, фильтров и мер. Каждый пользователь, который получает доступ к порталу, может иметь собственный набор отчетов, которые он может изменять и делиться ими. Дополнительные сведения об использовании веб-портала CQD см. в этой [теме.](use.md)
  
Поддерживаемые операционные системы для портала CQD: Windows 8.1, Windows 8, Windows Server 2012 R2, Windows Server 2012 и Windows Server 2016 (только skype для бизнеса Server 2019 CQD).
  
Поддерживаемые браузеры для портала CQD: Internet Explorer 11, Internet Explorer 10 и Internet Explorer 9.
  
### <a name="rest-apis"></a>REST API

Доступ к данным куба также можно получить с помощью вызовов REST API. Данные, полученные с помощью вызовов REST API, можно отрисовки с помощью HTML-страниц. Пользователи могут воспользоваться скоростью запросов и высокоуровневой схемой CQD, создавая настраиваемые отчеты, подходящие для своих бизнес-потребностей. Дополнительные сведения об API и примерах см. в подразделе "Разработка панели мониторинга качества звонков [для Skype для бизнеса Server".](develop.md) 
  
## <a name="defining-your-organizations-requirements-for-cqd"></a>Определение требований организации к CQD

CQD обеспечивает архивировать данные о качестве обслуживания, а также быстрый и глубокий анализ данных о качестве вызовов. Следующее руководство поможет вам решить, когда и зачем развертывать CQD.
  
### <a name="when-to-deploy-cqd"></a>Время развертывания CQD

 **CQD можно развернуть для установления базового измерения качества вызовов, даже если в организации нет проблем с качеством вызовов.** Важно определить базовые показатели качества вызовов, так как в каждой организации имеется разное сочетание Wi-Fi и проводных и удаленных сотрудников. Когда возникают проблемы с качеством вызовов, последние показатели качества вызовов можно сравнить с предыдущими интервалами времени. Функции CQD позволяют легко выявлять изменения качества вызовов с течением времени.
  
 **CQD можно развернуть для упреждающего поиска проблемных областей, которые могут повлиять на качество вызовов.** Даже если среднее качество звонка в организации может соответствовать целевым показателям, установленным организацией, могут быть скрытые за средними метриками проблемы с качеством вызовов. CQD позволяет метрики качества вызовов по многим измерениям в базе данных QoEMetrics с помощью таблицы pivot. Обнаружение щипцов в одноранговых группах — это быстрый способ упреждающего поиска проблем с качеством вызовов.
  
 **При проблемах с качеством вызовов в организации следует развернуть CQD, чтобы сократить время, необходимое для устранения неполадок.** CQD может упростить существующие исследования качества вызовов, предлагая быстрые отчеты о производительности и динамические возможности сверки. CQD предназначен для многих видов рабочего процесса при проверке качества вызовов при восстановлении среды.
  
### <a name="why-deploy-cqd"></a>Зачем развертывать CQD

 **Необходимо развернуть CQD, если отчеты о QoE должны происходить более чем за 3 месяца с данными.** Отчеты базы данных QoEMetrics и сервера мониторинга предназначены для хранения небольшого набора данных и их отчетов. База данных метрик качества связи оптимизирована для быстрой вставки, поэтому производительность отчетов может быть затруднена из-за большого количества вызовов или конкурирующих отчетов о доступе к базе данных. Архивная база данных качества связи CQD предоставляет вторую копию данных метрик качества связи с гораздо более длительными возможностями хранения. Портал также оптимизирован для одновременного показа данных за 7 месяцев и может при необходимости сообщать о всех данных в архиве QoE.
  
 **При необходимости настраиваемые отчеты о QoE следует развернуть.** На портале есть функция редактора отчетов для быстрого и простого создания и создания отчетов. Кроме того, он делает доступными API REST для программного доступа к данным куба, позволяя настраиваемой презентации с помощью HTML/JavaScript или многих других платформ. Больше не требуется создавать новые запросы SQL для создания настраиваемого представления данных для создания отчетов.
  
 **CQD следует развертывать, если существующие функции отчетов о QoE не соответствуют скорости или глубине, требуемой для организации.** CQD поставляется со множеством встроенных отчетов. Отчеты сразу же полезны и демонстрируют, как постепенное развявление данных может дать дополнительную информацию на каждом уровне. Иерархия отчетов также помогает логически управлять множеством отчетов и способствует созданию большего количество отчетов, которые легко доступны и понятны. CQD не только обеспечивает скорость и гибкость, но и оптимизирован для рабочего процесса, разработанного методологией качества вызовов.
  
## <a name="components-and-topologies-for-cqd"></a>Компоненты и topologies для CQD

CQD поставляется с несколькими компонентами и помогает понять требования каждого компонента и их связи друг с другом, чтобы получить простейшее и наиболее быстрое развертывание средства. В следующей таблице описываются зависимые компоненты для каждого компонента CQD.
  

|**Имя компонента**|**Зависимый компонент**|
|:-----|:-----|
|Архив QoE  <br/> |Microsoft SQL Server  <br/> |
|Куб  <br/> |Microsoft SQL Server Analysis Services  <br/> |
|Портал  <br/> |Microsoft Information Services  <br/> |
|Служба репозитория (часть установки портала)  <br/> |Microsoft SQL Server  <br/> |
   
> [!NOTE]
> Для архива QoE и куба для определенных вариантов развертывания требуются выпуски business intelligence или Enterprise Microsoft SQL Server. Дополнительные сведения см. в разделе "Требования к [инфраструктуре для CQD"](plan.md#Infrastructure_Req) ниже.
  
![Компоненты CQD](../../media/a52f2e6c-a4dd-4de3-879c-47295d2366c3.png)
  
### <a name="single-server-configuration"></a>Конфигурация с одним сервером

Все компоненты CQD и зависимые компоненты можно установить на один компьютер. Конфигурация с одним полем — это простейшая конфигурация, которая позволяет сделать CQD автономным. Для CQD нужен только доступ к базе данных метрик качества качества на сервере мониторинга. CQD Server может быть автономным компьютером, виртуальной машиной или даже сервером мониторинга в зависимости от доступных ресурсов хост-компьютера и требований к производительности. 
  
Во время установки пользователю, который выполняет установку, необходимо просто предоставить экземпляры Microsoft SQL Server и Microsoft SQL Server Analysis Services, которые ранее были настроены на компьютере, на котором устанавливается CQD. Дополнительные сведения можно найти в панели мониторинга качества звонков [Skype](deploy-0.md) для бизнеса Server.
  
### <a name="multiserver-configuration"></a>Конфигурация с несколькимисерверами

В конфигурации с несколькимисерверами архив QoE, куб и портал могут быть на разных компьютерах. Существует два основных использования конфигурации с несколькимисерверами:
  
- Размещение веб-портала CQD и куба CQD на разных серверах.
    
- Размещение портала разработки отдельно от "производственного" портала. 
    
  **Размещение веб-портала CQD и куба CQD на разных компьютерах.** Организации, которые могут потребовать отделить портал CQD от установки SQL Server или которые могут захохать смешивать и соблюсти выпуски SQL Server для экземпляра SQL Server и экземпляра служб аналитики SQL Server, могут выбрать установку портала CQD и куба CQD на разных компьютерах. Компонент "Архив QoE" также может быть единственным компонентом CQD, который устанавливается, если организация просто хочет иметь устойчивый метод архивировать данные качества работы без достижения ограничений производительности на сервере мониторинга.
  
![Одно серверный CQD](../../media/f65be6f3-6bba-4c3d-b3ae-c05e03551b5b.png)
  
 **Размещение портала разработки отдельно от портала "production".** Организациям, которые разрабатывают собственные настраиваемые отчеты (через REST API), может потребоваться развернуть дополнительные экземпляры портала (CQD) наряду с производственным порталом, к который обычные пользователи имеют доступ для мониторинга качества вызовов или расследований. Портал разработки может изолировать любые изменения портала от производственной среды. Дополнительные веб-порталы можно развернуть на разных компьютерах (показано ниже) или развернуть в разных веб-каталогах на одном компьютере (не показано). Для этого дополнительный веб-портал CQD необходимо скопировать на производственный компьютер вручную, так как процесс настройки CQD всегда развертывает веб-портал CQD на веб-сайте по умолчанию с предопределными именами веб-приложений.
  
![Планирование CQD Multi Server](../../media/2326e61e-b485-43e6-9f82-145237ba89cf.png)
  
### <a name="supported-topologies"></a>Поддерживаемые топологии

CQD не объединяет данные из нескольких баз данных QoEMetrics, как в случае с несколькими томами Skype для бизнеса Server, каждая из которых имеет собственный сервер мониторинга. Каждый экземпляр CQD должен указать одну базу данных QoEMetrics. Однако так как CQD переместит большую часть рабочей нагрузки отчетов с сервера мониторинга, крупным организациям, для развертывания одного сервера мониторинга в топологии Skype для бизнеса Server, следует рассмотреть возможность использования одного сервера мониторинга для всех топологий.
  
## <a name="infrastructure-requirements-for-cqd"></a>Требования к инфраструктуре для CQD
<a name="Infrastructure_Req"> </a>

CQD, включая все его компоненты и зависимые компоненты, можно развернуть на виртуальной машине, на одной машине или на нескольких компьютерах. Ниже перечислены минимальные требования к программному обеспечению и оборудованию. Доступность данных и производительность запросов могут варьироваться в зависимости от количества активных пользователей Skype для бизнеса Server, оборудования и конфигурации, поэтому некоторые показатели производительности приведены ниже.
  
|||
|:-----|:-----|
|Для CQD 2015 <br/> |  <br/> |
|Поддерживаемые операционные системы   <br/> |Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2  <br/> |
|Поддерживаемые SQL Server  <br/> |SQL Server 2012, SQL Server 2014, SQL Server 2016  <br/> |

|||
|:-----|:-----|
|Для CQD 2019 <br/> |  <br/> |
|Поддерживаемые операционные системы   <br/> |Windows Server 2016, Windows Server 2019  <br/> |
|Поддерживаемые SQL Server  <br/> |SQL Server 2017, SQL Server 2019  <br/> |
   
В CQD используются Microsoft SQL Server, Microsoft SQL Server analysis Services и Microsoft IIS поэтому минимальные требования ККД к оборудованию и программному обеспечению практически такие же, как и к этим зависимым компонентам. Однако в зависимости от требований организации, предъявляемых к свежести данных (отчасти это зависит от объема данных о качестве работы, генерируемого организацией) и затрат на развертывание, следует принять дополнительные меры по развертыванию.
  
Обработка данных в CQD разделена на два основных этапа: 
  
- Процесс архивации QoE
    
- Обработка куба CQD
    
  **Обработка архива QoE.** Задача обработки архива QoE копирует данные из базы данных метрик качества и производительности на сервере мониторинга в архивную базу данных качества. Существует две ситуации, в которых время обработки задачи будет иметь существенно разные характеристики производительности. Первый этап — после начальной установки CQD. При первом запуске задачи после новой установки задача обработки архива качества и качества работы скопирует все данные из базы данных метрик качества в архивную базу данных качества.. Второй — это периодическая обработка после этого начального круга. Задача обработки архива QoE будет запускаться каждые 15 минут и обрабатывать все новые записи QoE, которые находятся в базе данных метрик качества.. Как правило, время первоначальной обработки не является проблемой, так как оно будет запускаться только в первый раз при установке CQD. Однако если сервер CQD серьезно недоумевал, эта задача может занять несколько часов. Примеры времени обработки архива QoE см. в таблице ниже.
  
  **Обработка куба CQD.** Задача обработки куба собирает данные из архивной базы данных QoE в куб. Начальное и последующее время обработки куба определяются выпуском служб аналитики SQL Server, используемым для куба CQD. Если используется выпуск Standard, разница между начальным временем обработки куба и последующим временем обработки куба не существует, так как при каждом обновлении данных куба всегда будет полная обработка всех доступных данных. (Это означает, что время обработки куба увеличивается по мере увеличения объема данных в архивной базе данных QoE.) Так как выпуски Business Intelligence Edition и Enterprise Edition SQL Server поддерживают разделы, если используется один из выпусков, только при первоначальном запуске будут обрабатываться все данные в базе данных архива QoE. При последующих запусках, когда задача запускается каждые 15 минут, задача будет обрабатывать только новые записи, добавленные в базу данных архива QoE с момента последнего запуска задачи. Один раз в день также будет происходить полная обработка раздела, который содержит данные текущего месяца.
  
Характеристики физического компьютера могут влиять на производительность CQD, а также на программные функции, доступные SQL Server компонентов. Компонент архива QoE будет более интенсивным по сравнению с другими компонентами, тогда как компонент кубов будет больше ресурсов ЦП и памяти. Все эти факторы влияют на общее время обработки данных в CQD, что напрямую влияет на свежесть и доступность данных. Организации должны принимать решения по оборудованию и программному обеспечению в зависимости от индивидуальных потребностей организации. 
  
### <a name="tested-hardware-configurations"></a>Тестовые конфигурации оборудования

В этом разделе делается допущение, что в среде существует одна DB QoEMetrics. 
  
**Профили компьютеров**

|**Компьютер**|**Ядра ЦП**|**ОЗУ**|**Архив QoE и куб на одном диске**|**Архив QoE и SQL temp DB на одном диске**|
|:-----|:-----|:-----|:-----|:-----|
|Виртуальная машина  <br/> |4   <br/> |7 ГБ  <br/> |Да  <br/> |Да  <br/> |
|4 ядра  <br/> |4   <br/> |20 ГБ  <br/> |Да  <br/> |Нет  <br/> |
|8 ядер  <br/> |8   <br/> |32 ГБ  <br/> |Да  <br/> |Нет  <br/> |
|16 ядер  <br/> |16   <br/> |128 ГБ  <br/> |Нет  <br/> |Нет  <br/> |
   
**Результаты производительности**

|**Компьютер**|**Размер DB метрик качества качества**|**SQL разделы**|**Тип диска**|**Число потоков**|**Начальный процесс архивации**|**Начальный процесс куба**|**Последующий процесс архивации**|**Последующий процесс куба**|
|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|
|Виртуальная машина  <br/> |900 МБ  <br/> |Одинарное  <br/> |VHD (переменный размер)  <br/> |0,5 М  <br/> |30 м  <br/> |2 м  <br/> |30 с  <br/> |1 м  <br/> |
|Виртуальная машина  <br/> |9 ГБ  <br/> |Одинарное  <br/> |VHD (переменный размер)  <br/> |5 М  <br/> |4 ч  <br/> |15 м  <br/> |1 м  <br/> |5 м  <br/> |
|Виртуальная машина  <br/> |9 ГБ  <br/> |Одинарное  <br/> |VHD (фиксированный размер)  <br/> |5 М  <br/> |2 ч  <br/> |5 м  <br/> |1 м  <br/> |5 м  <br/> |
|Виртуальная машина  <br/> |30+ ГБ  <br/> |Одинарное  <br/> |VHD (фиксированный размер)  <br/> |10 M  <br/> |15 ч  <br/> |20 м  <br/> |2 м  <br/> |45 м  <br/> |
|8 ядер  <br/> |9 ГБ  <br/> |Одинарное  <br/> |Несколько дисков  <br/> |5 М  <br/> |2 ч  <br/> |5 м  <br/> |25 с  <br/> |5 м  <br/> |
|8 ядер  <br/> |9 ГБ  <br/> |Несколько  <br/> |Несколько дисков  <br/> |5 М  <br/> |2 ч  <br/> |15 м  <br/> |35 с  <br/> |2 м  <br/> |
|8 ядер  <br/> |30+ ГБ  <br/> |Одинарное  <br/> |Несколько дисков  <br/> |20 M  <br/> |9 ч  <br/> |20 м  <br/> |1 м  <br/> |20 м  <br/> |
|8 ядер  <br/> |30+ ГБ  <br/> |Несколько  <br/> |Несколько дисков  <br/> |20 M  <br/> |9 ч  <br/> |30 м  <br/> |2 м  <br/> |2 м  <br/> |
|4 ядра  <br/> |200 ГБ  <br/> |Одинарное  <br/> |Несколько дисков  <br/> |125 M  <br/> |6 и более дней  <br/> |7 ч  <br/> |2 м  <br/> |6 ч  <br/> |
|16 ядер  <br/> |500 ГБ  <br/> |Несколько  <br/> |Несколько шпиндлей  <br/> |250 M  <br/> |8 дней  <br/> |2 ч  <br/> |2 м  <br/> |10 м  <br/> |
   
\*В реальных развертываниях они не встречаются, так как база данных метрик качества связи должна иметь данные за 9 и 18 месяцев соответственно, но они предоставляются здесь для полноты.
  
### <a name="service-account-requirements"></a>Требования к учетной записи службы

Вам потребуется учетная запись (с доступом на чтение к QoEMetrics), которую агент SQL на сервере CQD Server может использовать для импорта данных в QoEArchiveDB.
  
Также может потребоваться настроить отдельную учетную запись для задания SSAS, чтобы извлекались данные из QoEArchiveDB (это необязательный процесс).
  
Службы IIS чаще всего используют сетевую службу в качестве удостоверения пула приложений, но их можно настроить для учетной записи службы.
  
### <a name="portal-access-control"></a>Управление доступом на портале

По умолчанию доступ есть у любого пользователя, подлинность на который есть. Это можно изменить с помощью правил авторизации IIS для ограничения определенной группы.
  
### <a name="pre-install-requirements"></a>Требования перед установкой

В этих инструкциях предполагается, что база данных метрик качества образования уже установлена и работает где-либо в топологии Skype для бизнеса Server.
  
#### <a name="hardware-requirements"></a>Требования к оборудованию

В CQD используются Microsoft SQL Server, Microsoft SQL Analysis Server и Microsoft Internet Information Server, поэтому минимальные требования ККД к оборудованию и программному обеспечению практически такие же, как и к этим зависимым компонентам. Однако в зависимости от требований организации, предъявляемых к свежести данных (отчасти это зависит от объема данных о качестве работы, генерируемого организацией) и затрат на развертывание, следует принять дополнительные меры по развертыванию.
  
#### <a name="software-requirements"></a>Требования к программному обеспечению

Для CQD необходимы следующие операционные системы:
  
- Windows Server 2008 R2 с IIS 7.5
    
- Windows Server 2012 с IIS 8.0
    
- Windows Server 2012 R2 с IIS 8.5

- Windows Server 2016 с IIS 10.0 (только для Skype для бизнеса Server 2019)

- Windows Server 2019 (только для Skype для бизнеса Server 2019)
    
Ниже порядок необходимых служб ролей IIS (в иерархической структуре):
  
- Веб-сервер
    
  - Основные возможности HTTP
    
  - Статическое содержимое
    
  - Документ по умолчанию
    
  - Разработка приложений
    
  - ASP.NET
    
  - Фильтры ISAPI
    
  - Диагностика &amp; состояния
    
  - ведение журнала HTTP;
    
  - Безопасность
    
  - Авторизация URL-адресов
    
  - Проверка подлинности Windows
    
  - Средства управления
    
  - Консоль управления IIS
    
> [!NOTE]
>  Обратите внимание на следующие требования: > 3.5 и 4.5 доступны версии .Net Framework. Оба типа являются обязательной (в частности, требуется 3.5 SP1).> В некоторых системах, если ASP.NET настроен перед установкой IIS, то ASP.NET могут не быть зарегистрированы в IIS. Проблема возникает из-за отсутствия пулов приложений для соответствующей версии .Net и отсутствия версии .NET CLR в конфигурации пула приложений. Чтобы устранить эту проблему на Windows Server 2008 R2, выполните `%systemroot%\Microsoft.NET\Framework64\4.0.30319\aspnet_regiis.exe -iru` . Выполните в Windows Server 2012 и Windows Server 2012 R2 модуль ServiceModel из веб-сайта по умолчанию в средстве управления IIS Manager.> необязательный, но  `dism /online /enable-Feature /all /FeatureName:WCF-HTTP-Activation45` рекомендуемый.
  
Чтобы установить эти требования с помощью PowerShell, запустите следующее:
  
```PowerShell
import-module servermanager
```

```PowerShell
add-windowsfeature Web-Server, Web-Static-Content, Web-Default-Doc, Web-Asp-Net, Web-Asp-Net45, Web-Net-Ext, Web-Net-Ext45, Web-ISAPI-Ext, Web-ISAPI-Filter, Web-Http-Logging, Web-Url-Auth, Web-Windows-Auth, Web-Mgmt-Console
```

Поддерживаются следующие версии SQL Server:
  
|||
|:-----|:-----|
| CQD 2015 <br/> |  SQL Server 2012, SQL Server 2014, SQL Server 2016  |
|CQD 2019 <br/> |  SQL Server 2017, SQL Server 2019  |
    
Из соображений производительности рекомендуется использовать корпоративную аналитику или корпоративный выпуск. Эти выпуски позволяют использовать несколько файлов разделов, которые можно обрабатывать параллельно, что полезно для обработки данных, охватывающих несколько месяцев или более. 
  
Хотя это и не рекомендуется, выпуск Standard также поддерживается. Обработка будет ограничена одним разделом (который необходимо настроить во время установки). 
  
Во всех случаях должны быть установлены службы database Engine Services и Analysis Services. Рекомендуется, но не обязательно также устанавливать функцию "Средства управления — завершено", которая добавляет поддержку SQL Server Management Studio для Службы Analysis Services. Экран выбора функций должен выглядеть, как на рисунке.
  
![SQL Server функций](../../media/37f2f64b-49c8-4620-94ba-f6d1ae9abf83.png)
  
При настройке SSAS в конфигурации служб аналитики установите для "Режима сервера" режим многомерного и майнинга данных. 
  
Дополнительные сведения об установке и настройке SQL Server бизнес-аналитики см. в сведениях об установке служб аналитики в многомерном режиме и режиме [майнинга данных.](https://msdn.microsoft.com/library/ms143708%28v=sql.110%29.aspx)
  
#### <a name="account-requirements"></a>Требования к учетной записи

По принципу наименьших привилегий рекомендуется использовать три учетные записи доменных служб: 
  
- Один из них уже имеет как учетную запись для базы данных метрик качества (с привилегией db_datareader), так и одного из них в экземпляре QoE Archive SQL Server (необходимо для создания объекта Linked Server во время установки). Эта учетная запись будет использоваться для запуска шага "Архивные данные QoE" SQL Server агента.
    
    > [!NOTE]
    > Если вы работаете в сильно заблокированной среде, необходимо проверить, действительно ли этой учетной записи службы предоставлены права "Вход в качестве пакетного задания" и "Разрешить локальный вход" в базе данных мониторинга показателей качества SQL Server и в архиве качества SQL Server.
    
- Один из них будет использоваться для запуска шага "Обработка куба" SQL Server агента. Установка создаст участника безопасности входа в базу данных архива QoE (с привилегией чтения и записи), а также создаст участника роли качества качества связи (с полными привилегиями) для куба.
    
- Один из них будет использоваться для запуска рабочего процесса IIS для веб-порталов и веб-API. При установке создается участник безопасности входа в базу данных архива QoE (с привилегией чтения), участник безопасности входа в базу данных репозитория (с привилегией чтения и записи) и участник QoERole (с полным доступом) для куба. 
    
    > [!NOTE]
    > Если база данных архива QoE и база данных репозитория находятся в одном SQL Server, создается только один из них с двумя сопоставлениями пользователей. 
  
Первые две учетные записи можно логически рассматривать как "учетные записи тыловой службы", а последнюю — как "учетную запись службы переднего входа". Хотя это и не рекомендуется, во всех случаях можно использовать одну учетную запись.
  
> [!NOTE]
> Учетная запись пользователя, иници которой была инициирована установка, также должна иметь доступ на чтение к DB метрик качества работы (помимо прав администратора компьютера на сервере базы данных архива качества связи, на котором должна быть установка). 
  
## <a name="capacity-planning"></a>Планирование емкости
<a name="Infrastructure_Req"> </a>

CQD предназначен для минимального влияния на QoEMetrics: код оптимизирован для запрета блокировки данных, а задания импорта не могут.
  
Тип используемого оборудования зависит от требований к быстрому запуску синхронизации. Размер диска:
  
- QoEArchive в ~1,5x больше, чем изначально QoEMetrics DB
    
- Куб SSIS сжимает данные почти в 10 раз по сравнению с базой данных
    
- Данные секционются ежемесячно; разделы можно удалить
    

