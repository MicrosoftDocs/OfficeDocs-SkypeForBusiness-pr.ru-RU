---
title: Планирование панели мониторинга качества звонков для Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: cc2fbf41-a7e0-4ef8-a939-47bc42da5529
description: Сводка. сведения о том, что следует учитывать при планировании панели мониторинга качества звонков.
ms.openlocfilehash: 25342998332a596abce9ecd02e63e153be6e6d94
ms.sourcegitcommit: 88a16c09dd91229e1a8c156445eb3c360c942978
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/15/2020
ms.locfileid: "42029420"
---
# <a name="plan-for-call-quality-dashboard-for-skype-for-business-server"></a>Планирование панели мониторинга качества звонков для Skype для бизнеса Server 
 
**Сводка:** Сведения о том, что следует учитывать при планировании панели мониторинга качества звонков.
  
## <a name="overview-of-the-skype-for-business-server-call-quality-dashboard"></a>Обзор панели мониторинга качества звонков в Skype для бизнеса Server

Панель мониторинга качества звонков в Skype для бизнеса Server (CQD) — это уровень отчетности на основе базы данных качества взаимодействия на сервере мониторинга в Skype для бизнеса Server. CQD использует службы Microsoft SQL Server Analysis Services для предоставления общих сведений об использовании и качества вызовов, а также для фильтрации и свертывания данных в наборе данных. К функциям CQD относятся:
  
- **Архивный объем данных QoE с помощью компонента архива QoE CQD.** Компонент архива QoE может хранить данные QoE в течение более длительного времени, чем сервер мониторинга. Это позволяет обменяться и создавать отчеты за семь месяцев данных за раз, с помощью которых можно пропустить окно отчетов до тех пор, пока данные не изменяются.
- **Составление отчетов и анализ с учетом мощности и скорости служб аналитики Microsoft SQL Server.** CQD использует службы Microsoft SQL Analysis Services для создания кратких сводок, фильтров и возможностей сводных данных для управления панелью мониторинга с помощью Куба анализа. Скорость выполнения отчетов и возможность детального анализа данных позволяет значительно уменьшить время анализа.
- **Новая схема данных, оптимизированная для отчета по качеству вызовов.** Куб содержит схему, предназначенную для обработки и исследования качества голосовой связи. Пользователи портала могут сосредоточиться на задачах создания отчетов вместо того, чтобы понять, как схема базы данных QoE метрики сопоставляется с представлениями, которые им необходимы. Сочетание архива QoE и Куба предоставляет абстракцию, которая сокращает сложность отчетов и анализа с помощью CQD. Схема архивной базы данных QoE также содержит таблицы, которые можно заполнить данными, зависящими от развертывания, чтобы улучшить общее значение данных.
- **Встроенный конструктор отчетов и редактирование отчета на месте.** Компонент портала поставляется с несколькими встроенными отчетами, смоделированными после методологии качества вызовов. Пользователи портала могут изменять отчеты и создавать новые отчеты с помощью функции редактирования портала.
- **Доступ веб-API к данным структуры отчета и Куба анализа.** Структура отчетов панели мониторинга — не единственный способ отображения данных из куба. В CQD представлено несколько примеров использования HTML и JavaScript для получения данных из веб-API CQD и отображения данных в пользовательском формате. Сочетание редактора отчетов и веб-интерфейсов API CQD позволяет быстро создавать прототипы отчетов и пользовательских макетов отчетов.

> [!NOTE]
> Администратор теперь может управлять Skype для бизнеса Server 2019 с помощью [CQD версии 3](https://cqd.teams.microsoft.com) (вход с использованием учетных данных администратора). Для этого требуется Гибридная реализация и использование соединителя данных вызовов (CDC). Дополнительную информацию о включении CDC можно узнать в статье [Plan Call Connector Data Connector](/SkypeForBusiness/hybrid/plan-call-data-connector) . Документация по CQD версии 3 приведена [в статье Включение и использование панели мониторинга качества звонков для Microsoft Teams и Skype для бизнеса Online](/MicrosoftTeams/turning-on-and-using-call-quality-dashboard) для получения дополнительных сведений о CQD версии 3.

## <a name="cqd-design-goals"></a>Цели конструирования CQD

CQD позволяет ИТ-специалистам использовать статистические данные для определения областей фокуса в среде, где возникают проблемы с качеством мультимедиа. Он позволяет ИТ-специалистам сравнивать статистику для разных групп пользователей и определять тенденции и закономерности. Он не фокусируется на решении отдельных проблем, но при выявлении проблем и решений, которые будут применяться к большинству пользователей в определенной среде. 
  
## <a name="call-quality-dashboard-components"></a>Компоненты панели мониторинга качества звонков

Панель мониторинга качества звонков состоит из нескольких баз данных, заданий агента Microsoft SQL, процессов и веб-приложений. Задания агента Microsoft SQL периодически копируют данные из базы данных метрик QoE в архивную базу данных QoE и обрабатывают куб с данными в архивной базе данных QoE. В базе данных репозитория хранятся определения отчетов, которые помещаются на портал. Портал предоставляет доступ к данным куба через браузер. 
  
Компоненты CQD, в том числе базы данных архивов, Куба и репозитория QoE, могут быть установлены на сервере мониторинга, установленном на отдельном сервере или на нескольких серверах. Определенный способ установки зависит от требований к производительности CQD, а также от влияния на другие процессы на тех же серверах. Для получения дополнительных сведений обратитесь к разделу "компоненты и топологии для CQD" Далее в этой статье.
  
### <a name="architectural-overview"></a>Обзор архитектуры

Для подведения итогов в CQD требуются следующие элементы:
  
- Две базы данных: архивная база данных и база данных репозитория.
    
- Один куб SSAS — визуализация собранных данных 
    
- Веб-портал CQD приложений IIS
    
![Компоненты CQD](../../media/ef3359b1-c98b-4cc5-a549-c84c6e03c011.png)
  
Одна и та же архитектура CQD поддерживает Lync Server 2013 и Skype для бизнеса. 
  
### <a name="cqd-and-skype-for-business-vs-lync-2013"></a>CQD и Skype для бизнеса и Lync 2013

 В среде Skype для бизнеса доступны следующие возможности:
  
- Отчеты Wi/Fi о степени силы сигнала
    
- Создание отчетов Wi/Fi для драйверов набора микросхем
    
- Оцените данные моего звонка 
    
## <a name="information-available-through-cqd"></a>Информация, доступная через CQD

CQD могут показывать количество потоков обмена аудио-и видеоданных Skype для бизнеса Server, а также количество хороших и неудачных вызовов, а также соотношение плохого и неудачных вызовов. Представления можно разрезать и фильтровать по множеству различных измерений. CQD рисует данные из базы данных метрик QoE на сервере мониторинга. После этого данные объединяются с любыми данными, предоставляемыми клиентами, например с сопоставлением подсети для создания отчетов, таких как "качество звонков на построение". 
  
CQD также абстрагирует многие внутренние несовместимости данных QoE, такие как "Caller" и "вызываемый абонент", например, что пользователь может сосредоточиться на построении представлений отчета на "Server" и "Client". Следуя методологии качества вызовов, CQD упрощает определение условий, которые имеют карманах о неудовлетворительных вызовах — один из принципов, позволяющих улучшить качество звонков.
  
## <a name="viewing-data-in-cqd"></a>Просмотр данных в CQD

Данные CQD можно просматривать с помощью портала CQD и получать доступ через вызовы REST API.
  
### <a name="cqd-portal"></a>Портал CQD

Портал является самым быстрым способом просмотра данных в Кубе. Портал поставляется с несколькими встроенными отчетами, которые можно использовать сразу. Встроенные отчеты связываются структурированным способом, чтобы помочь пользователю быстро уменьшить и уменьшить количество фрагментов данных вызова. В встроенных отчетах также выделяются различные способы отображения данных путем демонстрации сочетания диаграмм и таблиц с разными сводиями, фильтрами и мерами. Каждый пользователь, имеющий доступ к порталу, может иметь собственный набор отчетов, которые он может изменить и предоставить к нему общий доступ. Более подробную информацию об использовании веб-портала CQD можно узнать в статье [Использование панели мониторинга качества звонков для Skype для бизнеса Server](use.md).
  
Поддерживаемые операционные системы для CQD Portal: Windows 8,1, Windows 8, Windows Server 2012 R2, Windows Server 2012 и Windows Server 2016 (только Skype для бизнеса Server 2019 CQD).
  
Поддерживаемые браузеры для CQD Portal: Internet Explorer 11, Internet Explorer 10 и Internet Explorer 9.
  
### <a name="rest-apis"></a>REST API

Доступ к данным Куба также можно получить с помощью вызовов REST API. Данные, полученные с помощью вызовов REST API, можно отобразить с помощью HTML-страниц. Пользователи могут использовать преимущества скорости запроса и схемы высокого уровня CQD, создавая настраиваемые отчеты, соответствующие потребностям их бизнеса. Дополнительную информацию об API и примерах можно узнать в статье [Разработка панели мониторинга качества звонков для Skype для бизнеса Server](develop.md). 
  
## <a name="defining-your-organizations-requirements-for-cqd"></a>Определение требований Организации к CQD

CQD обеспечивает архивацию данных QoE и быстрый и глубокий анализ данных качества звонка. Следующее руководство поможет вам определить, когда и зачем следует развертывать CQD.
  
### <a name="when-to-deploy-cqd"></a>Когда следует развертывать CQD

 **CQD можно развернуть, чтобы установить измерение качества основного вызова, даже если Организация не будет испытывать проблемы с качеством звонков.** Установка измерения качества основного вызова важна, так как каждая организация имеет разный набор сетей Wi-Fi, а не проводных и удаленных сотрудников и сотрудников Office. При возникновении проблем с качеством вызовов последние измерения качества звонков можно сравнивать с предыдущими интервалами времени. Функции тренда CQD позволяют легко обнаруживать изменения качества звонка с течением времени.
  
 **CQD можно развернуть для профилактического обнаружения проблемных областей, которые могут повлиять на качество звонков.** Даже если среднее качество звонков в Организации может соответствовать целевым целям, установленным в Организации, могут быть карманах проблемы с качеством звонков, которые скрыты за средними показателями. CQD позволяет выполнять сводную таблицу с разбивкой метрик качества звонков по многим измерениям в базе данных QoEMetrics. Обнаружение выбросов в одноранговых группах позволяет быстро нахождение проблем с качеством звонков.
  
 **CQD следует развертывать, если в организации возникают проблемы с качеством звонков, чтобы сократить время, необходимое для устранения неполадок.** CQD может упростить анализ качества звонков, предоставляя быструю отчетность и динамическую детализацию. CQD предназначено для многих видов рабочих процессов при проверке качества связи при восстановлении в среде.
  
### <a name="why-deploy-cqd"></a>Зачем развертывать CQD

 **CQD следует развертывать в тех случаях, когда отчеты о QoE должны быть сопоставлены более 3 месяцам данных.** Отчеты сервера базы данных и мониторинга QoEMetrics предназначены для хранения и составления отчетов по небольшому набору данных. База данных метрик QoE оптимизирована для быстрых вставок, поэтому создание отчетов может быть снижено при большом объеме звонков или конкурирующих отчетах доступ к базе данных. Архивная база данных QoE CQD предоставляет вторую копию данных метрик QoE с большим количеством возможностей хранения. Портал также оптимизирован для отображения данных в течение 7 месяцев и может сообщать обо всех данных в архиве QoE по мере необходимости.
  
 **CQD следует развертывать, если требуются пользовательские отчеты QoE.** На портале предусмотрена функция редактора отчетов для быстрого и простого создания отчетов и создания прототипов. Кроме того, он делает доступными REST API для программного доступа к данным куба, позволяя использовать пользовательскую презентацию с помощью HTML/JavaScript или многих других платформ. Больше не требуется создавать новые SQL-запросы для создания настраиваемых представлений данных для создания отчетов.
  
 **CQD следует развертывать, если существующая функциональная возможность отчетности QoE не соответствует скорости или глубине, требуемой Организацией.** CQD поставляется с множеством встроенных отчетов. Отчеты сразу покажут, как пошаговое детализация данных может предоставить дополнительную аналитику на каждом уровне. Иерархия отчетов также помогает управлять множеством отчетов логическим способом и способствует созданию большого числа отчетов, которые легко доступны и понятны. CQD не только предоставляет скорость и гибкость, но и оптимизирована для рабочих процессов, разработанных методологией качества звонка.
  
## <a name="components-and-topologies-for-cqd"></a>Компоненты и топологии для CQD

CQD поставляется с несколькими компонентами и помогает определить требования каждого компонента и их связи друг с другом, чтобы получить простое и лучшее развертывание средства. В следующей таблице описывается зависимый компонент для каждого компонента CQD.
  

|**Имя компонента**|**Зависимый компонент**|
|:-----|:-----|
|Архив QoE  <br/> |Microsoft SQL Server  <br/> |
|Куба  <br/> |Службы аналитики Microsoft SQL Server  <br/> |
|Узла  <br/> |Microsoft Information Services  <br/> |
|Служба репозитория (часть установки портала)  <br/> |Microsoft SQL Server  <br/> |
   
> [!NOTE]
> Для архива и Куба QoE для некоторых вариантов развертывания требуются Microsoft SQL Server для бизнес-аналитики или Enterprise Editions. Для получения дополнительных сведений обратитесь к разделу [требования к инфраструктуре для CQD](plan.md#Infrastructure_Req) ниже.
  
![Компоненты CQD](../../media/a52f2e6c-a4dd-4de3-879c-47295d2366c3.png)
  
### <a name="single-server-configuration"></a>Конфигурация с одним сервером

Все компоненты CQD и зависимые компоненты можно установить на один компьютер. Конфигурация с одним полем является простейшей конфигурацией и обеспечивает автономность CQD. Для CQD потребуется только доступ к базе данных метрик QoE на сервере мониторинга. Сервером CQD может быть отдельный компьютер, виртуальная машина или даже сервер мониторинга, в зависимости от доступных ресурсов хоста и требований к производительности. 
  
Во время установки пользователь, выполняющий установку, просто должен предоставить экземпляры Microsoft SQL Server и Microsoft SQL Server Analysis Services, ранее настроенные на компьютере, на котором устанавливается CQD. Для получения дополнительных сведений обратитесь к разделу [развертывание панели мониторинга качества звонков для Skype для бизнеса Server](deploy-0.md) .
  
### <a name="multiserver-configuration"></a>Конфигурация с многосерверной конфигурацией

В многосерверной конфигурации Архив, куб и портал QoE могут находиться на разных компьютерах. Существует два основных использования многосерверной конфигурации:
  
- Размещение веб-портала CQD и Куба CQD на разных серверах.
    
- Размещение портала "Разработка" отдельно от "производственного" портала. 
    
  **Размещение веб-портала CQD и Куба CQD на разных компьютерах.** Организации, которые могут иметь требования отделить CQD Portal от установки SQL Server или которые могут использовать выпуски SQL Server для экземпляра SQL Server и экземпляра служб SQL Server Analysis Services, могут выбрать установку портала CQD и Куб CQD на разных компьютерах. Кроме того, компонент архива QoE может быть единственным компонентом CQD, установленным, если в Организации просто требуется устойчивый метод для архивации данных QoE без достижения предельной производительности на сервере мониторинга.
  
![Один сервер CQD](../../media/f65be6f3-6bba-4c3d-b3ae-c05e03551b5b.png)
  
 **Размещение портала "Разработка" отдельно от "производственного" портала.** Организации, которые разрабатывают собственные настраиваемые отчеты (через REST API), могут предпочесть развернуть дополнительные экземпляры портала (CQD) рядом с производственным порталом, к которому пользователи обычно обращаются по мониторингу качества звонков или расследованию. Портал разработки может изолировать любые изменения на портале из рабочей среды. Дополнительные веб-порталы можно развертывать на разных компьютерах (показанные ниже) или развертывать на разных веб-каталогах на одном компьютере (не показан). Чтобы выполнить Последнее, дополнительный веб-портал CQD должен быть скопирован на рабочий компьютер вручную, так как процесс установки CQD всегда развертывает веб-портал CQD на веб-сайте по умолчанию с предопределенными именами веб-приложений.
  
![Планирование нескольких серверов CQD](../../media/2326e61e-b485-43e6-9f82-145237ba89cf.png)
  
### <a name="supported-topologies"></a>Поддерживаемые топологии

CQD не объединяет данные из нескольких баз данных QoEMetrics, в том случае, когда существует несколько топологий Skype для бизнеса Server, каждый из которых имеет свой сервер мониторинга. Каждый экземпляр CQD должен указать на одну базу данных QoEMetrics. Однако из-за того, что CQD переместит большую часть подготовки отчетов из сервера мониторинга, крупные организации, которые требовали развертывания одного сервера мониторинга на основе топологии Skype для бизнеса Server, должны рассмотреть возможность использования одного сервера мониторинга для всех топологий.
  
## <a name="infrastructure-requirements-for-cqd"></a>Требования к инфраструктуре для CQD
<a name="Infrastructure_Req"> </a>

CQD, в том числе все компоненты и зависимые компоненты, можно развертывать на виртуальной машине, на одной машине или на нескольких компьютерах. Ниже приведены минимальные требования к программному обеспечению и оборудованию. Доступность данных и производительность запросов могут различаться в течение нескольких часов, в зависимости от количества активных пользователей и конфигурации сервера Skype для бизнеса Server, поэтому некоторые измерения производительности приведены ниже.
  
|||
|:-----|:-----|
|Для CQD 2015 <br/> |  <br/> |
|Поддерживаемые операционные системы   <br/> |Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2  <br/> |
|Поддерживаемые SQL Server  <br/> |SQL Server 2012, SQL Server 2014, SQL Server 2016  <br/> |

|||
|:-----|:-----|
|Для CQD 2019 <br/> |  <br/> |
|Поддерживаемые операционные системы   <br/> |Windows Server 2016, Windows Server 2019  <br/> |
|Поддерживаемые SQL Server  <br/> |SQL Server 2017, SQL Server 2019  <br/> |
   
CQD использует Microsoft SQL Server, службы аналитики Microsoft SQL Server и службы IIS, поэтому CQD минимальные требования к оборудованию и программному обеспечению в основном совпадают с этими зависимыми компонентами. Однако в зависимости от требований Организации к актуальности данных (которые будут зависеть от объема данных QoE, создаваемого организацией) и стоимости развертывания, следует выполнить дополнительные рекомендации по развертыванию.
  
Обработка данных в CQD разделяется на два основных этапа: 
  
- Процесс архивации QoE
    
- Обработка куба CQD
    
  **Обработка архива QoE.** Задача обработки архива QoE копирует данные из базы данных метрик QoE на сервере мониторинга в архивную базу данных QoE. Существует две ситуации, в которых время обработки задачи будет иметь принципиально отличающиеся характеристики производительности. Первый — после первоначальной установки CQD. При первом запуске задачи после новой установки задача обработки архива QoE скопирует все данные, которые находятся в базе данных метрик QoE, в базу данных архивов QoE. Вторая — это периодическая обработка после этого начального цикла. Задача обработки архива QoE запускается каждые 15 минут и обрабатывает все новые записи QoE, находящиеся в базе данных QoE метрики. Как правило, начальное время обработки не является проблемой, так как оно выполняется только в первый раз при установке CQD. Тем не менее, если сервер CQD является строго подготовным, эта задача может занять несколько часов. В таблице ниже приведен пример начального времени обработки архива QoE.
  
  **Обработка куба CQD.** Задача по обработке куба собирает данные из архивной базы данных QoE в куб. Время обработки исходного куба и время обработки последующего Куба определяются в выпуске SQL Server Analysis Services, используемом для куба CQD. Если используется стандартный выпуск, разница между временем обработки исходного куба и временем обработки последующего Куба не различается, так как при каждом обновлении данных Куба всегда будет полностью обрабатывать все доступные данные. (Это означает, что время обработки куба увеличивается по мере увеличения объема данных в архивной базе данных QoE.) Так как на сервере бизнес-аналитики выпуск и выпуск Enterprise Edition включена поддержка секций (при использовании любого выпуска), все данные в архивной базе данных будут обработаны только при первом запуске. При последующих запусках при запуске задания каждые 15 минут задача будет обрабатывать только новые записи, добавленные в архивную базу данных QoE с момента последнего запуска задачи. Один раз в день, Кроме того, будет выполняться полная обработка раздела, содержащего данные текущего месяца.
  
Характеристики физических компьютеров могут влиять на производительность CQD, а также на программное обеспечение, доступное из компонентов SQL Server. Компонент архива QoE будет работать по сравнению с другими компонентами, в то время как компонент Куба будет больше ресурсов ЦП и памяти. Все эти факторы влияют на общее время обработки данных CQD, которое напрямую влияет на актуальность и доступность данных. Организации должны принимать решения на оборудование и программное обеспечение на основе индивидуальных потребностей Организации. 
  
### <a name="tested-hardware-configurations"></a>Протестированные конфигурации оборудования

В этом разделе предполагается, что в среде используется одна база данных QoEMetrics. 
  
**Профили компьютера**

|**Компьютер**|**Ядра ЦП**|**ОЗУ**|**Архив и куб QoE на том же диске**|**QoE Архив и базу данных SQL Temp на одном диске**|
|:-----|:-----|:-----|:-----|:-----|
|Виртуальная машина  <br/> |4   <br/> |7 ГБ  <br/> |Да  <br/> |Да  <br/> |
|4 ядра  <br/> |4   <br/> |20 ГБ  <br/> |Да  <br/> |Нет  <br/> |
|8 ядер  <br/> |8   <br/> |32 ГБ  <br/> |Да  <br/> |Нет  <br/> |
|16 основных компонентов  <br/> |16   <br/> |128 ГБ  <br/> |Нет  <br/> |Нет  <br/> |
   
**Результаты производительности**

|**Компьютер**|**Размер базы данных метрик QoE**|**Разделы SQL**|**Тип диска**|**Количество потоков**|**Процесс начального архива**|**Процесс начального куба**|**Последующий процесс архивации**|**Последующий процесс Куба**|
|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|
|Виртуальная машина  <br/> |900 МБ  <br/> |Одинарное  <br/> |VHD (переменный размер)  <br/> |.5 M  <br/> |30 м  <br/> |2 м  <br/> |30 s  <br/> |1 м  <br/> |
|Виртуальная машина  <br/> |9 ГБ  <br/> |Одинарное  <br/> |VHD (переменный размер)  <br/> |5 м  <br/> |4 h  <br/> |15 м  <br/> |1 м  <br/> |5 м  <br/> |
|Виртуальная машина  <br/> |9 ГБ  <br/> |Одинарное  <br/> |VHD (фиксированный размер)  <br/> |5 м  <br/> |2 h  <br/> |5 м  <br/> |1 м  <br/> |5 м  <br/> |
|Виртуальная машина  <br/> |30 + ГБ  <br/> |Одинарное  <br/> |VHD (фиксированный размер)  <br/> |10 м  <br/> |15 h  <br/> |20 м  <br/> |2 м  <br/> |45 м  <br/> |
|8 ядер  <br/> |9 ГБ  <br/> |Одинарное  <br/> |Несколько дисков  <br/> |5 м  <br/> |2 h  <br/> |5 м  <br/> |25 s  <br/> |5 м  <br/> |
|8 ядер  <br/> |9 ГБ  <br/> |Несколько  <br/> |Несколько дисков  <br/> |5 м  <br/> |2 h  <br/> |15 м  <br/> |35 s  <br/> |2 м  <br/> |
|8 ядер  <br/> |30 + ГБ  <br/> |Одинарное  <br/> |Несколько дисков  <br/> |20 м  <br/> |9 h  <br/> |20 м  <br/> |1 м  <br/> |20 м  <br/> |
|8 ядер  <br/> |30 + ГБ  <br/> |Несколько  <br/> |Несколько дисков  <br/> |20 м  <br/> |9 h  <br/> |30 м  <br/> |2 м  <br/> |2 м  <br/> |
|4 ядра  <br/> |200 ГБ  <br/> |Одинарное  <br/> |Несколько дисков  <br/> |125 м  <br/> |6 дней  <br/> |7 h  <br/> |2 м  <br/> |6 h  <br/> |
|16 основных компонентов  <br/> |500 ГБ  <br/> |Несколько  <br/> |Несколько шпинделей  <br/> |250 м  <br/> |8 дней  <br/> |2 h  <br/> |2 м  <br/> |10 м  <br/> |
   
\*Они не ожидаются в реальных развертываниях, так как база данных метрик QoE должна иметь 9 и 18 месяцев данных, соответственно, но они предоставляются для полноты.
  
### <a name="service-account-requirements"></a>Требования к учетным записям служб

Вам потребуется учетная запись (с доступом для чтения к QoEMetrics), которую агент SQL Server на сервере CQD может использовать для импорта данных в Коеарчиведб.
  
Кроме того, вам может потребоваться настроить отдельную учетную запись для задания SSAS, чтобы получить данные из Коеарчиведб (это необязательный процесс).
  
IIS чаще всего использует сетевую службу как удостоверение пула приложений, но ее можно настроить для учетной записи службы.
  
### <a name="portal-access-control"></a>Управление доступом к порталу

По умолчанию любой пользователь, прошедший проверку подлинности, имеет доступ. Это можно изменить с помощью правил авторизации IIS, чтобы ограничить определенную группу.
  
### <a name="pre-install-requirements"></a>Предварительная установка требований

В этих инструкциях предполагается, что база данных метрик QoE уже установлена и работает где-то в топологии Skype для бизнеса Server.
  
#### <a name="hardware-requirements"></a>Требования к оборудованию

CQD использует Microsoft SQL Server, Microsoft SQL Analysis Server и Microsoft Internet Information Server, поэтому CQD минимальные требования к оборудованию и программному обеспечению в основном совпадают с этими зависимыми компонентами. Однако в зависимости от требований Организации к актуальности данных (которые будут зависеть от объема данных QoE, создаваемого организацией) и стоимости развертывания, следует выполнить дополнительные рекомендации по развертыванию.
  
#### <a name="software-requirements"></a>Требования к программному обеспечению

Для CQD требуются следующие операционные системы:
  
- Windows Server 2008 R2 с IIS 7,5
    
- Windows Server 2012 с IIS 8,0
    
- Windows Server 2012 R2 с IIS 8,5

- Windows Server 2016 с IIS 10,0 (только Skype для бизнеса Server 2019 только в CQD)

- Windows Server 2019 (только Skype для бизнеса Server 2019 только для CQD)
    
Ниже приведены необходимые службы ролей IIS (в иерархическом порядке).
  
- Веб-сервер
    
  - Основные возможности HTTP
    
  - Статическое содержимое
    
  - Документ по умолчанию
    
  - Разработка приложений
    
  - ASP.NET
    
  - Фильтры ISAPI
    
  - Диагностика &amp; работоспособности
    
  - ведение журнала HTTP;
    
  - Безопасность
    
  - Авторизация URL-адресов
    
  - Проверка подлинности Windows
    
  - Средства управления
    
  - Консоль управления IIS
    
> [!NOTE]
>  Обратите внимание на следующие требования: доступны версии > 3,5 и 4,5 платформы .NET Framework. Требуются оба варианта (точнее, требуется 3,5 SP1). > в некоторых системах, если ASP.NET настроен до установки служб IIS, то ASP.NET может быть не зарегистрирован в службах IIS. Проблема проявляется при отсутствии пулов приложений для соответствующей версии .NET, а также отсутствия версии CLR .NET в конфигурации пула приложений. Чтобы устранить эту ошибку в Windows Server 2008 R2, выполните `%systemroot%\Microsoft.NET\Framework64\4.0.30319\aspnet_regiis.exe -iru`команду. В Windows Server 2012 и Windows Server 2012 R2 выполните `dism /online /enable-Feature /all /FeatureName:WCF-HTTP-Activation45` , удалив модуль "ServiceModel" с веб-сайта по умолчанию в диспетчере служб IIS. средства управления > необязательные, но рекомендуется.
  
Чтобы установить эти требования с помощью PowerShell, выполните следующую команду:
  
```PowerShell
import-module servermanager
```

```PowerShell
add-windowsfeature Web-Server, Web-Static-Content, Web-Default-Doc, Web-Asp-Net, Web-Asp-Net45, Web-Net-Ext, Web-Net-Ext45, Web-ISAPI-Ext, Web-ISAPI-Filter, Web-Http-Logging, Web-Url-Auth, Web-Windows-Auth, Web-Mgmt-Console
```

Поддерживаются следующие версии SQL Server:
  
- SQL Server 2012
    
- SQL Server 2014

- SQL Server 2016

- SQL Server 2017

- SQL Server 2019 (только Skype для бизнеса Server 2019 CQD)
    
Для повышения производительности рекомендуется использовать бизнес-аналитику или выпуск Enterprise Edition. Эти выпуски позволяют использовать несколько файлов разделов, которые могут обрабатываться параллельно, что полезно для обработки данных, охватывающих несколько месяцев или более длинные. 
  
Хотя это и не рекомендуется, также поддерживается Standard Edition. Обработка будет ограничена одним разделом (который необходимо настроить во время установки). 
  
Во всех случаях необходимо установить "службы ядра баз данных" и "службы аналитики". Рекомендуется, Кроме того, не обязательно устанавливать функцию "средства управления-Complete", которая добавляет поддержку служб аналитики в SQL Server Management Studio. Экран выбора компонентов должен выглядеть, как на рисунке.
  
![Требования к компонентам SQL Server](../../media/37f2f64b-49c8-4620-94ba-f6d1ae9abf83.png)
  
При настройке программы установки SSAS в конфигурации служб Analysis Services установите для параметра "режим сервера" режим многомерных данных и режим интеллектуального анализа данных. 
  
Дополнительные сведения об установке и настройке функций бизнес-аналитики SQL Server приведены [в статье Установка служб Analysis Services в режиме многомерных данных и интеллектуального анализа данных](https://msdn.microsoft.com/library/ms143708%28v=sql.110%29.aspx).
  
#### <a name="account-requirements"></a>Требования к учетным записям

В принципе минимальных привилегий рекомендуется использовать три учетных записи службы доменов: 
  
- У вас уже есть субъект безопасности имени входа для базы данных метрики QoE (с привилегией db_datareader) и участник безопасности входа в архивный экземпляр SQL Server (необходимый для создания объекта связанного сервера во время установки). Эта учетная запись будет использоваться для выполнения этапа "QoE Archive Data" задания агента SQL Server.
    
- Один, который будет использоваться для выполнения шага "Process Cube" задания агента SQL Server. Программа установки создаст участника безопасности входа для QoE архивной базы данных (с правами на чтение и запись), а также создать участника в роли QoE (с правами полного доступа) для куба.
    
- Один, который будет использоваться для запуска рабочего процесса IIS для веб-порталов и веб-API. Программа установки создаст участника безопасности входа для QoE архивной базы данных (с правами на чтение), участником безопасности входа в базу данных репозитория (с правами на чтение и запись) и членом в Коероле (с правами полного доступа) для куба. 
    
    > [!NOTE]
    > Если база данных архива и база данных репозитория QoE размещаются на одном сервере SQL Server, создается только один участник безопасности входа с двумя сопоставлениями пользователей. 
  
Первые два учетных записей могут логически рассматриваться как "внутренние учетные записи службы", а последняя учетная запись — "интерфейсная учетная запись службы". Хотя это и не рекомендуется, во всех случаях можно использовать одну учетную запись.
  
> [!NOTE]
> Учетная запись пользователя, запускающего установку, должна иметь доступ на чтение к базе данных QoE метрики (Кроме того, чтобы иметь права администратора компьютера на сервере архивной базы данных QoE, на котором должна выполняться установка). 
  
## <a name="capacity-planning"></a>Планирование мощности
<a name="Infrastructure_Req"> </a>

CQD предназначено для минимального воздействия на QoEMetrics: код оптимизирован для блокировки данных и задания импорта настроены.
  
Тип используемого оборудования зависит от требований, которые необходимо выполнить для ускорения синхронизации. Размер диска выглядит следующим образом:
  
- Коеарчиве ~ 1,5 x больше, чем QoEMetrics DB
    
- Куб служб SSIS сжимает данные почти 10x по сравнению с DB
    
- Данные разбиты на разделы ежемесячно; разделы можно удалять
    

