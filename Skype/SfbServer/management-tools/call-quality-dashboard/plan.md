---
title: Планирование панели мониторинга качества звонков в Skype для бизнеса Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: cc2fbf41-a7e0-4ef8-a939-47bc42da5529
description: 'Сводка: сведения о том, что нужно знать при планировании панели мониторинга качества звонков.'
ms.openlocfilehash: 3a0982f565495740887b6da07dd802de1205dcf8
ms.sourcegitcommit: 2cc98fcecd753e6e8374fc1b5a78b8e3d61e0cf7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2020
ms.locfileid: "40991414"
---
# <a name="plan-for-call-quality-dashboard-for-skype-for-business-server"></a>Планирование панели мониторинга качества звонков в Skype для бизнеса Server 
 
**Сводка:** Узнайте о том, что нужно знать при планировании панели мониторинга качества связи.
  
## <a name="overview-of-the-skype-for-business-server-call-quality-dashboard"></a>Общие сведения о панели мониторинга качества связи в Skype для бизнеса Server

Панель мониторинга качества связи в Skype для бизнеса Server (CQD) — это слой отчетности на основе базы данных качества обслуживания на сервере мониторинга в Skype для бизнеса Server. CQD использует службы Microsoft SQL Server Analysis Services для предоставления обобщенных сведений об использовании и данных качества связи, а также для фильтрации и свертывания в наборе данных. Ниже перечислены функции CQD.
  
- **Архивированное хранилище данных QoE с помощью компонента архивации QoE CQD.** Компонент архивации QoE может хранить данные QoE в течение длительного времени, чем на сервере мониторинга. Это позволяет обменяться тенденциями и отчетами за семь месяцев данных за один раз, с помощью которых можно пропустить окно отчета, как и в случае с данными.
- **Отчеты и анализ с учетом возможностей и скорости служб Microsoft SQL Server Analysis Services.** CQD использует службы Microsoft SQL Analysis Services для обеспечения быстрой сводки, фильтрации и свертывания возможностей на панели мониторинга с помощью Куба анализа. Создание отчетов о скорости выполнения и возможность детализации данных может значительно уменьшить интервалы анализа.
- **Новая схема данных, оптимизированная для составления отчетов о качествах звонков.** Куб имеет схему, разработанную для создания отчетов и исследований качества голосовой связи. Пользователи портала могут сосредоточиться на задачах создания отчетов, а не о том, как схема базы данных QoE метрики сопоставляется с нужными представлениями. Сочетание QoE архива и Куба обеспечивает абстракцию, которая сокращает сложность создания отчетов и анализа с помощью CQD. Схема архивной базы данных QoE также включает таблицы, которые можно заполнять данными, специфичными для развертывания, чтобы улучшить общее значение данных.
- **Встроенный конструктор отчетов и редактирование отчета на месте.** Компонент портала поставляется с несколькими встроенными отчетами, которые моделируются после методологии качества связи. Пользователи портала могут изменять отчеты и создавать новые отчеты с помощью функций редактирования портала.
- **Доступ к данным о структуре отчета и аналитических кубах через веб-API.** Платформа отчетов на панели мониторинга — это не единственный способ отобразить данные из куба. CQD предоставляет несколько примеров использования HTML и JavaScript для получения данных из веб-API CQD и отрисовки данных в настраиваемом формате. Сочетание редактора отчетов и веб-API CQD позволяет быстро создавать собственные прототипы отчетов и настраиваемого макета отчета.

> [!NOTE]
> Администратор теперь может управлять Skype для бизнеса Server 2019 с помощью [CQD версии 3](https://cqd.teams.microsoft.com) (вход с учетными данными администратора). Для этого требуется Гибридная реализация и использование соединителя данных звонка (CDC). Дополнительные сведения о включении CDC см. в [соединителе данных о вызовах планов](/SkypeForBusiness/hybrid/plan-call-data-connector) . Для CQD версии 3 Ознакомьтесь со статьей [Включение и использование панели мониторинга качества звонков для Microsoft Teams и Skype для бизнеса Online,](/MicrosoftTeams/turning-on-and-using-call-quality-dashboard) чтобы получить дополнительные сведения о CQD версии 3.

## <a name="cqd-design-goals"></a>Цели проектирования CQD

Панель мониторинга качества звонков (CQD) позволяет ИТ-специалистам использовать сводные данные, чтобы выяснить, на что необходимо обратить внимание в рабочей среде, где есть проблемы с качеством медиаданных. Эта панель позволяет ИТ-специалистам сравнивать статистические данные различных групп пользователей и выявлять тенденции и закономерности. Это средство призвано устранять не отдельные проблемы со звонками, а выявлять проблемы и находить решения, которые будут применяться для большого числа пользователей в этой рабочей среде. 
  
## <a name="call-quality-dashboard-components"></a>Компоненты панели мониторинга качества звонков

Панель мониторинга качества звонка состоит из нескольких баз данных, заданий агента Microsoft SQL, процессов и веб-приложений. Задания агента Microsoft SQL периодически копируют данные из базы данных метрик QoE в архивную базу данных QoE и обрабатывают куб с данными из архивной базы данных QoE. База данных репозитория хранит определения отчетов, которые помещаются на портале. Портал предоставляет доступ к данным куба в браузере. 
  
Компоненты CQD, в том числе базы данных архивации, Куба и репозитория QoE, можно установить на сервере мониторинга, установленном на отдельном сервере или установленном на нескольких серверах. Конкретный метод установки зависит от требований производительности CQD, а также от того, как повлиять на работу других процессов на том же сервере. Дополнительные сведения можно найти в разделе "компоненты и топологии для CQD" ниже в этой статье.
  
### <a name="architectural-overview"></a>Общие сведения об архитектуре

Для подведения итогов CQD необходимы следующие элементы:
  
- Две базы данных: архивная база данных и база данных репозитория.
    
- Один куб служб SSAS, который визуализирует Объединенные данные 
    
- Веб-портал CQD hosts IIS
    
![Компоненты CQD](../../media/ef3359b1-c98b-4cc5-a549-c84c6e03c011.png)
  
Одна и та же архитектура CQD поддерживает Lync Server 2013 и Skype для бизнеса. 
  
### <a name="cqd-and-skype-for-business-vs-lync-2013"></a>CQD и Skype для бизнеса и Lync 2013

 В среде Skype для бизнеса доступны указанные ниже возможности.
  
- Отчет о мощности сигнала Wi-Fi
    
- Создание отчетов Wi-Fi для драйверов набора микросхем
    
- Оценка данных звонка 
    
## <a name="information-available-through-cqd"></a>Информация, доступная через CQD

CQD может показывать в Skype для бизнеса Server звуковые и видеопотоки, а также подсчитать количество успешных и неудачных звонков и соотношение между плохим количеством успешных звонков. Представления можно разрезать и отфильтровать по различным измерениям. CQD рисует данные из базы данных метрик QoE на сервере мониторинга. После этого данные объединяются с любыми данными, предоставленными клиентом, например с сопоставлением подсети для создания отчетов, таких как "качество связи на здании". 
  
CQD также абстрагирует множество внутренних неQoEных данных, таких как "вызывающий" и "вызываемый абонент", например, если пользователь может сосредоточиться на построении представлений отчета вокруг "сервер" и "клиент". Следуя методологии качества связи, CQD упрощает определение условий, которые являются общими для небольшие слабых звонков — одного из принципов для повышения качества связи.
  
## <a name="viewing-data-in-cqd"></a>Просмотр данных в CQD

Данные CQD можно просматривать на портале CQD и получать доступ через вызовы API RESTFUL.
  
### <a name="cqd-portal"></a>Портал CQD

Портал — это самый быстрый способ просмотреть данные куба. Портал поставляется с несколькими встроенными отчетами, которые можно использовать прямо сейчас. Встроенные отчеты связаны структурированным образом, чтобы попытаться пользователю быстро уменьшить и уменьшить сегменты данных вызова. В встроенных отчетах также выделяются различные способы отображения данных путем демонстрации комбинации диаграмм и таблиц с разными сводными таблицами, фильтрами и мерами. Каждый пользователь, который получает доступ к порталу, может иметь собственный набор отчетов, который он может изменить и поделиться. Дополнительные сведения об использовании веб-портала CQD можно найти в разделе [Использование панели мониторинга качества вызовов в Skype для бизнеса Server](use.md).
  
Поддерживаемые операционные системы для CQD Portal: Windows 8,1, Windows 8, Windows Server 2012 R2, Windows Server 2012 и Windows Server 2016 (только Skype для бизнеса Server 2019 CQD).
  
Поддерживаемые браузеры для CQD Portal: Internet Explorer 11, Internet Explorer 10 и Internet Explorer 9.
  
### <a name="rest-apis"></a>Интерфейсы API для RESTFUL

Доступ к данным Куба также можно получить с помощью вызовов API RESTFUL. Данные, полученные с помощью вызовов API RESTFUL, могут обрабатываться с помощью HTML-страниц. Пользователи могут использовать преимущества скорости запроса и схемы высокого уровня CQD, тем не менее создавая пользовательские отчеты, соответствующие их деловым потребностям. Дополнительные сведения об API и примерах можно найти в разделе [Разработка панели мониторинга качества звонков для Skype для бизнеса Server](develop.md). 
  
## <a name="defining-your-organizations-requirements-for-cqd"></a>Определение требований Организации к CQD

CQD обеспечивает QoEную архивацию данных и быстрый и глубокий анализ данных качества связи. В приведенном ниже руководстве вы можете решить, когда и зачем развертывать CQD.
  
### <a name="when-to-deploy-cqd"></a>Когда следует развертывать CQD

 **CQD можно развернуть, чтобы установить измерение качества основного вызова, даже если Организация не работает в связи с проблемами качества звонков.** Установка измерения качества основного вызова важна, так как каждая организация имеет разные комбинации Wi-Fi, а не проводных и удаленных, а не сотрудников Office. При возникновении проблем с качеством связи последнее измерение качества связи можно сравнить с предыдущими интервалами времени. Функции работы с тенденциями CQD позволяют легко обнаруживать изменения качества связи с течением времени.
  
 **CQD можно разворачивать для упреждающего поиска проблемных областей, которые могут повлиять на качество связи.** Даже если среднее качество связи для организации может соответствовать конечным целям, заданным организацией, может возникнуть небольшие проблем с качеством связи, которые скрыты за средней метрикой. CQD позволяет создавать сводные таблицы, такие как разбивка показателей качества связи, на различные измерения в базе данных Коеметрикс. Обнаружение выбросов в одноранговых группах — это быстрый способ быстро находить проблемы с качеством связи.
  
 **CQD следует развертывать в случае возникновения проблем с качеством связи в Организации, чтобы уменьшить время, необходимое для устранения проблем.** С помощью CQD можно упростить текущее качество связи, обеспечивая быстрое создание отчетов и динамическую возможность детализации. CQD предназначен для работы с несколькими видами рабочих процессов в целях проверки качества связи при восстановлении в среде.
  
### <a name="why-deploy-cqd"></a>Зачем развертывать CQD

 **CQD следует разворачивать, если QoE отчет должен выполняться более 3 месяцев данных.** База данных Коеметрикс и отчеты сервера мониторинга предназначены для хранения и составления отчетов о небольших наборах данных. База данных метрик QoE оптимизирована для быстрой вставки, поэтому она может быть снижена большим объемом звонков или конкурировать за предоставлением доступа к базе данных. Резервная копия CQD QoE обеспечивает вторую копию данных метрик QoE с большим количеством возможностей хранения. Портал также оптимизируется для отображения до 7 месяцев данных за один раз и может сообщать о всех данных в архиве QoE по мере необходимости.
  
 **CQD следует развертывать, если требуются пользовательские отчеты QoE.** На портале есть функция редактора отчетов для быстрого и легкого создания отчетов с созданием прототипов. Кроме того, он делает доступными API для RESTFUL для программного доступа к данным куба, обеспечивая настраиваемую презентацию с помощью HTML/JavaScript или многих других платформ. Больше не требуется создавать новые запросы SQL для создания настраиваемых представлений данных для отчетов.
  
 **CQD следует развертывать в том случае, если существующая функция отчетности QoE не соответствует скорости или глубине, необходимой для Организации.** В CQD входит множество встроенных отчетов. Отчеты немедленно полезны и показывают, как постепенно изменяются данные, чтобы обеспечить дополнительные аналитические сведения на каждом уровне. Кроме того, иерархия отчетов помогает управлять многочисленными отчетами в логическом порядке и способствует созданию большого количества отчетов, которые легко и понятны. CQD не только предоставляет скорость и гибкость, но и оптимизированные для рабочих процессов, разработанных методологией качества связи.
  
## <a name="components-and-topologies-for-cqd"></a>Компоненты и топологии для CQD

CQD поставляется с несколькими компонентами и помогает понять требования каждого компонента и их связь друг с другом, чтобы получить простое и оптимальное развертывание средства. В приведенной ниже таблице описаны зависимые компоненты для каждого компонента CQD.
  

|**Имя компонента**|**Зависимый компонент**|
|:-----|:-----|
|Архив QoE  <br/> |Microsoft SQL Server  <br/> |
|Кубическ  <br/> |Службы Microsoft SQL Server Analysis Services  <br/> |
|Узла  <br/> |Информационные службы Майкрософт  <br/> |
|Служба репозитория (часть установки на портал)  <br/> |Microsoft SQL Server  <br/> |
   
> [!NOTE]
> Для архивации и Куба QoE для некоторых параметров развертывания требуется корпоративная аналитика или выпуск Microsoft SQL Server. Дополнительные сведения можно найти в разделе [требования к инфраструктуре для CQD](plan.md#Infrastructure_Req) ниже.
  
![Компоненты CQD](../../media/a52f2e6c-a4dd-4de3-879c-47295d2366c3.png)
  
### <a name="single-server-configuration"></a>Конфигурация с одним сервером

Все компоненты CQD и зависимые компоненты могут быть установлены на одном компьютере. Одноблочная конфигурация — это простейшая конфигурация, позволяющая CQD быть самодостаточными. CQD бы просто получить доступ к базе данных метрик QoE на сервере мониторинга. Сервер CQD может быть автономным компьютером, виртуальной машиной или даже сервером мониторинга в зависимости от доступных ресурсов хост-компьютера и требований к производительности. 
  
Во время установки пользователь, выполняющий установку, должен предоставить экземпляры служб Microsoft SQL Server и Microsoft SQL Server Analysis Services, которые уже были настроены на компьютере, на котором установлено CQD. Для получения дополнительных сведений обратитесь к разделу [развертывание панели мониторинга качества звонков для Skype для бизнеса Server](deploy-0.md) .
  
### <a name="multiserver-configuration"></a>Многосерверная конфигурация

В многосерверной конфигурации QoE Архив, куб и портал могут находиться на разных компьютерах. Многосерверная конфигурация состоит из двух основных способов:
  
- Размещение веб-портала CQD и CQD Куба на разных серверах.
    
- Разместите портал разработки отдельно от «производственного» портала. 
    
  **Размещение веб-портала CQD и CQD Куба на разных компьютерах.** Организации, у которых есть требования, чтобы отделить портал CQD от установки SQL Server, а также могут использовать выпуски SQL Server для экземпляра SQL Server и экземпляра служб SQL Server Analysis Services для установки портала CQD и CQD куб на разных компьютерах. Компонент архивации QoE также может быть единственным компонентом CQD, установленным в том случае, если в Организации просто требуется устойчивый метод для архивации данных QoE без достижения ограничений производительности на сервере мониторинга.
  
![Один сервер CQD](../../media/f65be6f3-6bba-4c3d-b3ae-c05e03551b5b.png)
  
 **Разместите портал разработки отдельно от «производственного» портала.** Организации, которые разрабатывают собственные пользовательские отчеты (с помощью API-интерфейсов), могут предпочесть развернуть дополнительные экземпляры портала (CQD) рядом с производственным порталом, с помощью которых пользователи обычно обращаются к мониторингу качества звонков или расследованию. Портал разработки может изолировать любые изменения на портале из производственной среды. Дополнительные веб-порталы можно разворачивать на разных компьютерах (показанных ниже) или разворачивать на разных веб-каталогах на том же компьютере (не показана). Чтобы выполнить Последнее действие, дополнительный веб-портал CQD необходимо скопировать на рабочий компьютер вручную, так как процесс настройки CQD всегда развертывает веб-портал CQD на веб-сайте по умолчанию с предварительно заданными именами веб-приложений.
  
![Планирование для нескольких серверов CQD](../../media/2326e61e-b485-43e6-9f82-145237ba89cf.png)
  
### <a name="supported-topologies"></a>Поддерживаемые топологии

CQD не объединяет данные из нескольких баз данных Коеметрикс, так как используется несколько топологий Skype для бизнеса Server, каждый из которых имеет собственный сервер мониторинга. Каждый экземпляр CQD должен указывать на одну базу данных Коеметрикс. Тем не менее, так как CQD перейдет на сервер мониторинга значительно больше, чем на сервере наблюдения, в крупных организациях, которым требовалось развертывание одного сервера мониторинга для топологии серверов в Skype для бизнеса Server, следует использовать один сервер мониторинга для всех топологий.
  
## <a name="infrastructure-requirements-for-cqd"></a>Требования к инфраструктуре для CQD
<a name="Infrastructure_Req"> </a>

CQD, в том числе все компоненты и зависимые компоненты, можно развернуть на виртуальной машине, одном компьютере или на нескольких компьютерах. Ниже приведены минимальные требования к программному обеспечению и оборудованию. Доступность данных и производительность запросов могут варьироваться от минут до часов, в зависимости от количества активных пользователей и оборудования и конфигурации сервера Skype для бизнеса, поэтому ниже приведены некоторые измерения производительности.
  
|||
|:-----|:-----|
|Для CQD 2015 <br/> |  <br/> |
|Поддерживаемые операционные системы  <br/> |Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2  <br/> |
|Поддерживаемые SQL Server  <br/> |SQL Server 2012, SQL Server 2014, SQL Server 2016  <br/> |

|||
|:-----|:-----|
|Для CQD 2019 <br/> |  <br/> |
|Поддерживаемые операционные системы  <br/> |Windows Server 2016, Windows Server 2019  <br/> |
|Поддерживаемые SQL Server  <br/> |SQL Server 2017, SQL Server 2019  <br/> |
   
CQD использует Microsoft SQL Server, службы Microsoft SQL Server Analysis Services и службы Microsoft IIS, так что CQD минимальные требования к оборудованию и программному обеспечению в основном совпадают с зависимыми компонентами. Тем не менее, в зависимости от потребностей Организации в отношении актуальности данных (которая будет зависеть от объема данных QoE) и стоимости развертывания, необходимо выполнить дополнительные рекомендации по развертыванию.
  
Обработка данных в CQD разделяется на два основных этапа: 
  
- Процесс архивации QoE
    
- Обработка куба CQD
    
  **Обработка архивации QoE.** Задача обработки архива QoE копирует данные из базы данных метрик QoE на сервере мониторинга в архивную базу данных QoE. Существуют две ситуации, в которых время обработки задачи может иметь фундаментальные характеристики производительности. Первый — после первоначальной установки CQD. Когда задача запускается в первый раз после новой установки, задача обработки архива QoE копирует все данные из QoE показателей метрик в QoE архивную базу данных. Вторая — это периодическая обработка после начального круга. Задача обработки архивации QoE будет выполняться каждые 15 минут и обрабатывать новые записи QoE, которые находятся в базе данных QoE Metrics. Обычно первоначальное время обработки не является проблемой, поскольку оно выполняется только в первый раз, когда CQD установлен. Тем не менее, если сервер CQD сильно настроен, эта задача может занять несколько часов. Ниже приведена таблица, в которой показано, как изначальные значения времен обработки архивации QoE.
  
  **Обработка куба CQD.** Задача «Обработка куба» объединяет данные из архивной базы QoE в куб. Начальное время обработки куба и время обработки последующего Куба определяются выпуском SQL Server Analysis Services Edition, используемым для куба CQD. Если используется стандартный выпуск, разница между временем обработки исходного куба и последующим временем обработки куба отсутствует, так как при каждом обновлении данных куба будет всегда выполняться полная обработка всех доступных данных. (Это означает, что время обработки куба увеличивается по мере увеличения количества данных в архивной базе данных QoE.) Из-за того, что при использовании любого из выпусков на сервере SQL Server выводится поддержка секций, но при этом все данные в архивной базе данных QoE будут обрабатываться только начальным запуском. Если при последующих запусках задача запускается каждые 15 минут, задача будет обрабатывать только новые записи, добавленные в архивную базу данных QoE с момента последнего запуска задачи. Как раз в день, будет также выполняться полная обработка раздела, содержащего данные текущего месяца.
  
Характеристики физического компьютера могут влиять на производительность CQD и программные возможности, доступные в компонентах SQL Server. Компонент архивации QoE будет более ресурсоемким по сравнению с другими компонентами, в то время как компонент Куба будет больше ресурсов ЦП и памяти. Все эти факторы влияют на общее время обработки данных CQD, которое напрямую влияет на актуальность и доступность данных. Организации должны принимать решения на оборудование и программное обеспечение в соответствии с индивидуальными потребностями Организации. 
  
### <a name="tested-hardware-configurations"></a>Список протестированных аппаратных конфигураций

В этом разделе предполагается, что в среде есть единая база данных Коеметрикс. 
  
**Профили компьютера**

|**Компьютер**|**Ядра ЦП**|**ДОСТУПНОЙ**|**QoE Архивация и куб на одном и том же диске**|**QoE архива и базы данных SQL Temp на одном и том же диске**|
|:-----|:-----|:-----|:-----|:-----|
|Виртуальная машина  <br/> |4  <br/> |7 ГБ  <br/> |Да  <br/> |Да  <br/> |
|4 ядра  <br/> |4  <br/> |20 ГБ  <br/> |Да  <br/> |Нет  <br/> |
|8 основных  <br/> |No8  <br/> |32 ГБ  <br/> |Да  <br/> |Нет  <br/> |
|16 ядер  <br/> |шестнадцат  <br/> |128 ГБ  <br/> |Нет  <br/> |Нет  <br/> |
   
**Результаты производительности**

|**Компьютер**|**Размер базы данных метрик QoE**|**Разделы SQL**|**Тип диска**|**Число потоков**|**Начальный процесс архивации**|**Процесс начального куба**|**Последующий процесс архивации**|**Последующий процесс Куба**|
|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|
|Виртуальная машина  <br/> |900 МБ  <br/> |Единственное  <br/> |VHD (переменный размер)  <br/> |.5 м  <br/> |30 м  <br/> |2 м  <br/> |30 s  <br/> |1 м  <br/> |
|Виртуальная машина  <br/> |9 ГБ  <br/> |Единственное  <br/> |VHD (переменный размер)  <br/> |5 м  <br/> |4 ч  <br/> |15 м  <br/> |1 м  <br/> |5 м  <br/> |
|Виртуальная машина  <br/> |9 ГБ  <br/> |Единственное  <br/> |VHD (фиксированный размер)  <br/> |5 м  <br/> |2 ч  <br/> |5 м  <br/> |1 м  <br/> |5 м  <br/> |
|Виртуальная машина  <br/> |30 + GB  <br/> |Единственное  <br/> |VHD (фиксированный размер)  <br/> |10 м  <br/> |15 р  <br/> |20 м  <br/> |2 м  <br/> |45 м  <br/> |
|8 основных  <br/> |9 ГБ  <br/> |Единственное  <br/> |Несколько дисков  <br/> |5 м  <br/> |2 ч  <br/> |5 м  <br/> |25 s  <br/> |5 м  <br/> |
|8 основных  <br/> |9 ГБ  <br/> |Сервер  <br/> |Несколько дисков  <br/> |5 м  <br/> |2 ч  <br/> |15 м  <br/> |35 с  <br/> |2 м  <br/> |
|8 основных  <br/> |30 + GB  <br/> |Единственное  <br/> |Несколько дисков  <br/> |20 м  <br/> |9 ч  <br/> |20 м  <br/> |1 м  <br/> |20 м  <br/> |
|8 основных  <br/> |30 + GB  <br/> |Сервер  <br/> |Несколько дисков  <br/> |20 м  <br/> |9 ч  <br/> |30 м  <br/> |2 м  <br/> |2 м  <br/> |
|4 ядра  <br/> |200 ГБ  <br/> |Единственное  <br/> |Несколько дисков  <br/> |125 м  <br/> |6 + дн.  <br/> |7 h  <br/> |2 м  <br/> |6 ч  <br/> |
|16 ядер  <br/> |500 ГБ  <br/> |Сервер  <br/> |Множественные вращения  <br/> |250 м  <br/> |8 дней  <br/> |2 ч  <br/> |2 м  <br/> |10 м  <br/> |
   
\*Они не ожидаются в реальных развертываниях, так как база данных метрик QoE должна иметь 9 и 18 месяцев данных, соответственно, но они предоставляются здесь для полноты.
  
### <a name="service-account-requirements"></a>Требования к учетной записи службы

Вам понадобится учетная запись (с доступом на чтение к Коеметрикс), которую агент SQL Server на сервере CQD может использовать для импорта данных в Коеарчиведб.
  
Кроме того, вам может потребоваться настроить отдельную учетную запись для задания служб SSAS, чтобы получать данные из Коеарчиведб (это необязательный процесс).
  
IIS чаще всего использует сетевую службу в качестве удостоверения пула приложений, но ее можно настроить для учетной записи службы.
  
### <a name="portal-access-control"></a>Управление доступом к порталу

По умолчанию у любого пользователя, прошедшего проверку подлинности, есть доступ. Это можно изменить с помощью правил авторизации IIS, чтобы ограничить определенную группу.
  
### <a name="pre-install-requirements"></a>Требования к предварительной установке

В этих инструкциях предполагается, что база данных метрик QoE уже установлена и работает где-то в топологии сервера Skype для бизнеса.
  
#### <a name="hardware-requirements"></a>Требования к оборудованию

CQD использует Microsoft SQL Server, сервер Microsoft SQL Analysis Server и Microsoft Internet Information Server, поэтому CQD минимальные требования к оборудованию и программному обеспечению обычно совпадают с зависимыми компонентами. Тем не менее, в зависимости от потребностей Организации в отношении актуальности данных (которая будет зависеть от объема данных QoE) и стоимости развертывания, необходимо выполнить дополнительные рекомендации по развертыванию.
  
#### <a name="software-requirements"></a>Требования к программному обеспечению

Для CQD требуются следующие операционные системы:
  
- Windows Server 2008 R2 с IIS 7,5
    
- Windows Server 2012 с IIS 8,0
    
- Windows Server 2012 R2 с IIS 8,5

- Windows Server 2016 со службами IIS 10,0 (Skype для бизнеса Server 2019 только CQD)

- Windows Server 2019 (только для Skype для бизнеса Server 2019 CQD)
    
Ниже указаны необходимые службы ролей IIS (в иерархическом порядке).
  
- Веб-сервер
    
  - Основные возможности HTTP
    
  - Статическое содержимое
    
  - Документ по умолчанию
    
  - Разработка приложений
    
  - ASP.NET
    
  - Фильтры ISAPI
    
  - Диагностика &amp; работоспособности
    
  - Ведение журнала HTTP
    
  - Безопасность
    
  - Авторизация URL-адреса
    
  - Проверка подлинности Windows
    
  - Средства управления
    
  - Консоль управления IIS
    
> [!NOTE]
>  Обратите внимание на следующие требования: > 3,5 и 4,5 версии .NET Framework доступны. Оба варианта являются обязательными (точнее, требуется 3,5 SP1). > в некоторых системах, если ASP.NET настроен перед установкой IIS, то ASP.NET может не регистрироваться в службах IIS. Проблема проявляется при отсутствии пулов приложений для соответствующей версии .NET и в конфигурации пула приложений также отсутствует версия CLR .NET. Чтобы устранить эту ошибку в Windows Server 2008 R2, выполните `%systemroot%\Microsoft.NET\Framework64\4.0.30319\aspnet_regiis.exe -iru`. В Windows Server 2012 и Windows Server 2012 R2 следует выполнить `dism /online /enable-Feature /all /FeatureName:WCF-HTTP-Activation45` удаление модуля "ServiceModel" с веб-сайта по умолчанию в диспетчере служб IIS. средства управления > не являются обязательными, но рекомендуются.
  
Чтобы установить эти требования с помощью PowerShell, выполните указанные ниже действия.
  
```PowerShell
import-module servermanager
```

```PowerShell
add-windowsfeature Web-Server, Web-Static-Content, Web-Default-Doc, Web-Asp-Net, Web-Asp-Net45, Web-Net-Ext, Web-Net-Ext45, Web-ISAPI-Ext, Web-ISAPI-Filter, Web-Http-Logging, Web-Url-Auth, Web-Windows-Auth, Web-Mgmt-Console
```

Поддерживаются следующие версии SQL Server:
  
- SQL Server 2012
    
- SQL Server 2014

- SQL Server 2016

- SQL Server 2017

- SQL Server 2019 (только для Skype для бизнеса Server 2019 CQD)
    
Рекомендуется использовать бизнес-аналитику или выпуск Enterprise Edition для повышения производительности. В этих выпусках разрешено использование нескольких файлов разделов, которые могут обрабатываться параллельно, что выгодно для обработки данных, охватывающих несколько месяцев или дольше. 
  
Хотя это и не рекомендуется, поддерживается также стандартный выпуск. Обработка будет ограничена одной секцией (которая должна быть настроена во время настройки). 
  
Во всех случаях должны быть установлены службы ядра СУБД и службы Analysis Services. Рекомендуется (но не обязательно) устанавливать функцию "средства управления-завершение", которая добавляет поддержку SQL Server Management Studio для служб Analysis Services. Экран Выбор компонентов должен выглядеть так, как показано на рисунке.
  
![Функциональные требования SQL Server](../../media/37f2f64b-49c8-4620-94ba-f6d1ae9abf83.png)
  
При настройке настройки SSAS в конфигурации служб Analysis Services установите для режима сервера режим "многомерные данные и интеллектуальный анализ данных". 
  
Дополнительные сведения о том, как установить и настроить функции бизнес-аналитики SQL Server, приведены [в разделе Установка служб Analysis Services в режиме многомерных и интеллектуальных данных](https://msdn.microsoft.com/en-us/library/ms143708%28v=sql.110%29.aspx).
  
#### <a name="account-requirements"></a>Требования к учетной записи

Три учетные записи службы домена рекомендуются на принципе минимальных привилегий. 
  
- У пользователя, у которого уже есть участник безопасности для входа в базу данных метрик QoE (с правами db_datareader) и участником безопасности входа в QoE архивном экземпляре SQL Server (требуется создать объект связанного сервера во время настройки). Эта учетная запись будет использоваться для запуска задания "QoE Archive Data" агента SQL Server.
    
- Один, который будет использоваться для выполнения шага "процессный куб" для задания агента SQL Server. Программа установки создаст участника безопасности входа в QoE архивной базе данных (с правами на чтение и запись), а также создать участника в роли QoE (с правами на полный доступ) для куба.
    
- Один, который будет использоваться для запуска рабочего процесса IIS для веб-порталов и веб-API. Программа установки создаст участника безопасности для входа в QoE архивную базу данных (с правами на чтение), участником безопасности входа в базу данных репозитория (с правами на чтение и запись), а также членом Коероле (с правами на полный доступ) для куба. 
    
    > [!NOTE]
    > Если база данных QoE и база данных репозитория размещаются на одном и том же сервере SQL Server, создается только один участник безопасности для входа в систему с двумя сопоставлениями пользователей. 
  
Первые два счета могут логически рассматриваться как "учетные записи службы" на сервер ", а последний — в учетной записи службы переднего плана. Не рекомендуется использовать одну учетную запись во всех случаях.
  
> [!NOTE]
> Учетная запись пользователя, инициирующая установку, должна иметь доступ на чтение к QoE метрикам (Кроме того, если у вас есть права администратора компьютера на QoE архивном сервере DB, где должна быть установлена установка). 
  
## <a name="capacity-planning"></a>Планирование мощностей
<a name="Infrastructure_Req"> </a>

CQD предназначен для минимального воздействия на Коеметрикс: код был оптимизирован для того, чтобы не блокировать данные, а задания импорта настроены.
  
Тип используемого оборудования зависит от требований, которые необходимо выполнить для быстрой синхронизации. Размер диска выглядит следующим образом:
  
- Коеарчиве ~ 1,5 x более Коеметрикс DB изначально
    
- Куб служб SSIS сжимает данные почти 10x по сравнению с базой данных
    
- Данные секционированы ежемесячно. разделы можно удалить
    

