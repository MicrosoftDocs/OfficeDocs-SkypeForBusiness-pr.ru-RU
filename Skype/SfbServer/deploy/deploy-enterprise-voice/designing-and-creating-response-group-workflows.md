---
title: Проектирование и создание рабочих процессов группы ответа в Skype для бизнеса 2015
ms.author: kenwith
author: kenwith
manager: serdars
ms.date: 2/7/2018
ms.audience: ITPro
ms.topic: get-started-article
ms.prod: skype-for-business-itpro
localization_priority: Priority
ms.collection:
- IT_Skype16
- Strat_SB_Admin
ms.custom: ''
ms.assetid: dcb9effb-5d12-4dee-80fc-ab9654222d5a
description: Разработка и создание рабочих процессов для группы ответа, в Скайп Business Server корпоративной голосовой связи. Описаны как рабочие процессы сервисной группы, так и интерактивные процессы.
ms.openlocfilehash: 71380d7dc048663eca9543a31d67462ead0321c3
ms.sourcegitcommit: fa61d0b380a6ee559ad78e06bba85bc28d1045a6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2018
---
# <a name="designing-and-creating-response-group-workflows-in-skype-for-business-2015"></a>Проектирование и создание рабочих процессов группы ответа в Skype для бизнеса 2015
 
Разработка и создание рабочих процессов для группы ответа, в Скайп Business Server корпоративной голосовой связи. Описаны как рабочие процессы сервисной группы, так и интерактивные процессы.
  
Рабочий процесс определяет последовательность обработки вызова с момента звукового сигнала до момента ответа на вызов. Рабочий процесс указывает очередь, которая будет использовать для удержания вызова и метод маршрутизации для использования для рабочих процессов для сервисной группы или вопросы и ответы для рабочих процессов для группы ответа интерактивного. 
  
Рабочий процесс также задает такие параметры, как приветственное сообщение, музыка при удержании, часы работы и выходные.
  
> [!NOTE]
> Вам следует создать группы агентов и очереди до создания рабочего процесса, который их использует. 
  
## <a name="creating-or-modifying-a-hunt-group-workflow"></a>Создание или изменение рабочего процесса

### <a name="to-use-response-group-configuration-tool-to-create-or-modify-a-hunt-group-workflow"></a>Использование средства настройки группы ответа для создания или изменения рабочего процесса

1. Выполните вход как член группы RTCUniversalServerAdmins или одной из предварительно заданных административных ролей, поддерживающих группу ответа.
    
2. Откройте окно браузера и введите URL-адрес администрирования, чтобы открыть Скайп для панели управления Business Server.  
    
3. В левой области навигации щелкните **Группы ответа**, затем **Рабочий процесс**.
    
4. На странице **Рабочий процесс** щелкните **Создать или редактировать рабочий процесс**.
    
5. В поле поиска **выберите службу** введите полностью или частично имя службы **сервера приложений** , на котором размещается рабочий процесс, чтобы создать или изменить. В сформированном списке служб щелкните требуемую службу, затем нажмите кнопку **ОК**.
    
    > [!NOTE]
    > Откроется окно программы настройки группы ответа. Можно также открыть средство настройки группы ответа непосредственно из веб-браузера, введя следующий URL-адрес: https:// _ \<Полное_доменное_имя_веб\>_/RgsConfig. 
  
6. Выполните одно из указанных ниже действий.
    
   - В разделе **Создание рабочего процесса** рядом с элементом **Сервисная группа** нажмите кнопку "Создать".
    
   - В разделе **Управление существующим рабочим процессом** найдите рабочий процесс, который требуется изменить, затем в разделе **Действие** нажмите кнопку **Изменить**.
    
7. Если все готово к тому, чтобы разрешить пользователям вызывать рабочий процесс, установите флажок **Активировать рабочий процесс**.
    
    > [!NOTE]
    >  При создании управляемого рабочего процесса необходимо выбрать функцию **Активировать рабочий процесс**. После сохранения активного управляемого рабочего процесс его можно изменить или отключить. 
  
8. Чтобы разрешить федеративным пользователям звонки группе, установите флажок **Включить поддержку федерации** . Кроме того, необходимо иметь политики внешнего доступа, применяемое к приложения группы ответа, настроенные для федерации.
    
    > [!NOTE]
    > Глобальную политику внешнего доступа применяется к приложения группы ответа. Глобальная политика для федерации группы ответа можно настроить с помощью Скайп для панели управления Business Server или с помощью командлета **Set-CsExternalAccessPolicy** задать для параметра EnableOutsideAccess значение True. Имейте в виду, параметров глобальной политики применяются ко всем пользователям, если они назначена политика узла или пользователя. Таким образом прежде чем изменять этот параметр для групп ответа, убедитесь в том, что параметр федерации отвечает требованиям вашей организации. Для получения дополнительных сведений о как политики применяются к пользователям видеть [Управление внешнюю политику доступа для вашей организации](http://technet.microsoft.com/library/5571811e-34c8-443a-b94c-1ab5d4275581.aspx). Для получения дополнительных сведений о настройке федерации видеть [Set-CsExternalAccessPolicy](https://docs.microsoft.com/powershell/module/skype/set-csexternalaccesspolicy?view=skype-ps). 
  
    > [!NOTE]
    > Пользователей, которые размещаются в Скайп для бизнеса в Интернет не может размещать звонки для группы ответа, которые размещаются в локальное развертывание. Это значение true в обоих гибридных развертываниях и в тех случаях, где федеративных локальное развертывание с помощью Скайп для бизнеса в Интернет развертывания. 
  
9. Если требуется скрыть идентификационные данные агентов во время вызовов, установите флажок **Включить анонимность агента**.
    
    > [!NOTE]
    > Анонимные вызовы не должны начинаться с сеанса видеосвязи или обмена мгновенными сообщениями (после начала сеанса вызова можно добавить видео и мгновенные сообщения). Анонимный агент также может поставить вызов на удержание, передать вызов (скрытая передача и передача после консультации), а также выполнять парковку и извлечение вызовов. Анонимные вызовы не поддерживают конференц-связь, совместный доступ к приложениям и рабочему столу, передачу файлов, работу с доской, совместную работу с данными и запись звонков. Агенты, использующие подключаемый модуль VDI Lync, могут анонимно получать входящие вызовы, но не отправлять исходящие вызовы. 
  
10. В поле **Введите адрес группы, которая будет принимать звонки** введите основной адрес универсального кода ресурса (URI) SIP группы, которая будет отвечать на вызовы рабочего процесса.
    
    > [!NOTE]
    > Основной адрес универсального кода ресурса для рабочего процесса служит для распознавания рабочего процесса и ссылок на него. URI SIP, введенные создается в качестве контактного объекта в доменных службах Active Directory. Чтобы создать URI, объект должно быть уникальным в Active Directory. 
  
11. В поле **отображаемое имя**введите имя, которое должно отображаться для рабочего процесса (например, группа ответа отдела продаж).
    
    > [!NOTE]
    > В отображаемом имени не разрешено употребление символов "<" или ">". Не допускаются отображаемые имена **RGS Presence Watcher** (Наблюдатель присутствия RGS) и **Announcement Service** (Служба оповещения), так как они зарезервированы. 
  
12. В поле **Номер телефона** введите строку универсального кода ресурса для группы ответа (например, +14255550165).
    
13. В поле **Отображаемый номер** введите номер группы ответа для отображения (например, +1 (425) 555-0165).
    
14. (Необязательно) В поле **Описание**введите описание рабочего процесса, как он должен отображаться в карточке контакта в Скайп для бизнеса.
    
15. В поле **Тип рабочего процесса** выберите **Управляемый**, если этот им будет управлять руководитель группы ответа. Выполните следующие действия, чтобы назначить менеджеров группы ответа в рабочий процесс:
    
    а. Введите универсальный код ресурса SIP, назначенный руководителю данного рабочего процесса, и нажмите кнопку **Добавить**.
    
    б. Введите универсальный код ресурса SIP, назначенный дополнительным руководителям, которых требуется добавить к рабочему процессу, и нажмите кнопку **Добавить**.
    
    > [!IMPORTANT]
    > Каждому пользователю, который назначен менеджером группы ответа, необходимо присвоить роль CsResponseGroupManager. Если пользователям не назначена эта роль, они не могут управлять группами ответа. 
  
16. В разделе **Шаг 2. Выберите язык** щелкните язык, на котором будет выполняться распознавание речи и преобразование текста в речь.
    
17. Если необходимо настроить приветствие, в разделе **Шаг 3. Настройте приветствие** установите флажок **Отображать приветствие**, затем выполните одно из следующих действий:
    
   - Для ввода приветствия в виде текста, который будет преобразовываться в речь для вызывающих абонентов, щелкните **Использовать текст, преобразованный в речь**, затем введите приветствие в текстовом поле.
    
    > [!NOTE]
    > Не включайте в вводимый текст теги HTML. В случае добавления тегов HTML появится сообщение об ошибке. 
  
   - Для воспроизведения записи приветствия из звукового файла Wave (.wav) или файла Windows Media (.wma) щелкните **Выбрать запись**. Для загрузки нового звукового файла щелкните ссылку **запись**. В новом окне браузера нажмите кнопку **Обзор** и выберите требуемый звуковой файл, затем нажмите кнопку **Открыть**. Нажмите кнопку **Загрузить** для загрузки звукового файла.
    
    > [!NOTE]
    > Все звуковые файлы, предоставленные пользователями, должны удовлетворять определенным требованиям. Для получения дополнительных сведений о форматах файлов, поддерживаемые видеть [Технические требования для групп ответа](http://technet.microsoft.com/library/477488bd-124f-437b-9327-732a0d7271ca.aspx). 
  
18. В разделе **Шаг 4. Укажите часы работы** в поле **Ваш часовой пояс** щелкните часовой пояс для рабочего процесса.
    
    > [!NOTE]
    > Часовой пояс – это пояс, к которому относятся вызывающие абоненты и агенты. Он используется для расчета часов открытия и закрытия. Например, если для рабочего процесса задано использование часового пояса "Североамериканское восточное стандартное время" и в качестве времени открытия указано 7:00, а в качестве времени закрытия – 23:00, предполагается, что офис открывается в 7:00 по восточному времени, а закрывается в 23:00 по восточному времени, соответственно. (Время необходимо вводить в 24-часовом формате.) 
  
19. Выберите тип рабочего графика, который следует использовать. Для этого выполните одно из следующих действий:
    
   - Для применения предварительно заданного графика рабочего времени щелкните **Использовать готовое расписание**, затем выберите требуемое расписание в раскрывающемся списке.
    
     > [!NOTE]
     > Необходимо определить по крайней мере один стандартное расписание, ранее, чтобы иметь возможность установите этот флажок. Определение предварительно расписания с помощью командлета **New-CSRgsHoursOfBusiness** . Дополнительные сведения см [(необязательно) группы ответа определение рабочих часов в Скайп для бизнеса 2015](optional-define-response-group-business-hours.md). 
  
     > [!NOTE]
     > При выборе предварительно заданного расписания дни и часы работы группы ответа автоматически водятся в полях **День**, **Открыть** и **Закрыть**.
  
   - Для применения пользовательского графика, относящегося только к данному рабочему процессу, щелкните **Использовать расписание пользователя**.
    
20. Если вы создаете индивидуальное расписание для данного рабочего процесса, установите флажки, чтобы выбрать дни недели, по которым группа ответа доступна.
    
21. При создании пользовательского расписания введите в полях **Открыть** и **Закрыть** часы работы группы ответа для каждого дня недели.
    
    > [!NOTE]
    > Часы вводятся в полях **Открыть** и **Закрыть** в 24-часовом формате. Например, если рабочий день продолжается с 9.00 до 17.00 с перерывом на обед в полдень, часы работы указываются следующим образом: **Открыть** 9:00, **Закрыть** 12:00, **Открыть** 13:00, **Закрыть** 17:00.
  
22. Если требуется воспроизводить сообщение в нерабочее время, установите флажок **Отображать сообщение в нерабочее для группы ответа время**, затем укажите сообщение для воспроизведения, выполнив одно из следующих действий.
    
   - Для ввода сообщения в виде текста, подлежащего преобразованию в речь для вызывающего абонента, щелкните **Использовать текст, преобразованный в речь**, затем введите сообщение в текстовом поле.
    
     > [!NOTE]
     > Не включайте в вводимый текст теги HTML. В случае добавления тегов HTML появится сообщение об ошибке. 
  
   - Если требуется воспроизводить записанное сообщение из звукового файла, щелкните **Выбрать запись**. Для загрузки нового звукового файла щелкните ссылку **запись**. В новом окне браузера щелкните **Обзор**, выберите требуемый файл, затем нажмите кнопку **Открыть**. Для загрузки звукового файла нажмите кнопку **Загрузить**.
    
     > [!NOTE]
     > Все звуковые файлы, предоставленные пользователями, должны удовлетворять определенным требованиям. Для получения дополнительных сведений о форматах файлов, поддерживаемые звука видеть [Технические требования для групп ответа](http://technet.microsoft.com/library/477488bd-124f-437b-9327-732a0d7271ca.aspx). 
  
23. Укажите способ обработки вызовов после воспроизведения сообщения (если оно настроено):
    
   - Для разрыва связи щелкните **Разъединить звонок**.
    
   - Для переадресации вызова на голосовую почту щелкните **Переадресовывать на голосовую почту**, затем введите адрес голосовой почты. Формат адреса голосовой почты _ \<username\>_@ _\<domainName\> _ (например, bob@contoso.com).
    
   - Для переадресации вызова другому пользователю щелкните **Переадресовывать на URI для SIP**, затем введите адрес пользователя. Имеет формат для пользователя адрес _ \<username\>_@ _\<domainName\>_.
    
   - Для переадресации вызова на другой телефонный номер щелкните **Переадресовывать на номер телефона**, затем введите номер телефона. — Номер телефона в формате _ \<номер\>_@ _\<domainName\> _ (например, +14255550121@contoso.com). Имя домена необходимо для правильного определения адресата, которому перенаправляется вызывающий абонент.
    
24. В разделе **Шаг 5. Указание выходных дней** установите флажки для одной или нескольких групп выходных дней, когда группа ответа не будет работать.
    
    > [!NOTE]
    > Необходимо определить праздников и наборах праздников, прежде чем настраивать этот рабочий процесс. Используйте командлеты **New-CsRgsHoliday** и **Командлет New-CsRgsHolidaySet** для определения праздников и победы наборов. Дополнительные сведения см [(необязательно) определение наборах праздников ответа в Скайп для 2015 бизнеса](optional-define-response-group-holiday-sets.md). 
  
25. Если требуется воспроизводить сообщение в выходные дни, установите флажок **Отображать сообщение в выходные дни**, затем укажите воспроизводимое сообщение, выполнив одно из следующих действий.
    
  - Для ввода сообщения в виде текста, подлежащего преобразованию в речь для вызывающего абонента, щелкните **Использовать текст, преобразованный в речь**, затем введите сообщение в текстовом поле.
    
    > [!NOTE]
    > Не включайте в вводимый текст теги HTML. В случае добавления тегов HTML появится сообщение об ошибке. 
  
   - Если требуется воспроизводить записанное сообщение из звукового файла, щелкните **Выбрать запись**. Для загрузки нового звукового файла щелкните ссылку **запись**. В новом окне браузера щелкните **Обзор**, выберите требуемый файл, затем нажмите кнопку **Открыть**. Для загрузки звукового файла нажмите кнопку **Загрузить**.
    
     > [!NOTE]
     > Все звуковые файлы, предоставленные пользователями, должны удовлетворять определенным требованиям. Для получения дополнительных сведений о форматах файлов, поддерживаемые звука видеть [Технические требования для групп ответа](http://technet.microsoft.com/library/477488bd-124f-437b-9327-732a0d7271ca.aspx). 
  
26. Укажите способ обработки вызовов после воспроизведения сообщения (если оно настроено):
    
   - Для разрыва связи щелкните **Разъединить звонок**.
    
   - Для переадресации вызова на голосовую почту щелкните **Переадресовывать на голосовую почту**, затем введите адрес голосовой почты. Формат адреса голосовой почты _ \<username\>_@ _\<domainName\> _ (например, bob@contoso.com).
    
   - Для переадресации вызова другому пользователю щелкните **Переадресовывать на URI для SIP**, затем введите адрес пользователя. Имеет формат для пользователя адрес _ \<username\>_@ _\<domainName\>_.
    
   - Для переадресации вызова на другой телефонный номер щелкните **Переадресовывать на номер телефона**, затем введите номер телефона. — Номер телефона в формате _ \<номер\>_@ _\<domainName\> _ (например, +14255550121@contoso.com). Имя домена необходимо для правильного определения адресата, которому перенаправляется вызывающий абонент.
    
27. В разделе **Шаг 6. Настройте очередь** (Шаг 6. Настройка очереди) в списке **Выберите очередь, которая будет принимать звонки** выберите очередь для удержания вызывающих абонентов до освобождения оператора.
    
28. В разделе **Шаг 7. Настройте музыку для режима удержания** выберите музыку, которую должны будут прослушивать вызывающие абоненты в ожидании ответа агента. Для этого выполните одно из следующих действий.
    
   - Если в режиме удержания требуется воспроизводить музыкальную запись по умолчанию, щелкните **По умолчанию**.
    
   - Если в режиме удержания требуется воспроизводить музыкальную запись из звукового файла, щелкните **Выбрать музыкальный файл**. Для загрузки нового звукового файла щелкните ссылку **музыкальный файл**. В новом окне браузера нажмите кнопку **Обзор** и выберите требуемый файл, затем нажмите кнопку **Открыть**. Для загрузки звукового файла нажмите кнопку **Загрузить**.
    
     > [!NOTE]
     > Все звуковые файлы, предоставленные пользователями, должны удовлетворять определенным требованиям. Для получения дополнительных сведений о форматах файлов, поддерживаемые звука видеть [Технические требования для групп ответа](http://technet.microsoft.com/library/477488bd-124f-437b-9327-732a0d7271ca.aspx). 
  
29. Нажмите кнопку **Развернуть**.
    
### <a name="to-use-skype-for-business-server-management-shell-to-create-or-modify-a-hunt-group-workflow"></a>Чтобы использовать Скайп для консоли Business Server для создания или изменения рабочего процесса

1. Выполните вход как член группы RTCUniversalServerAdmins или одной из предварительно заданных административных ролей, поддерживающих группу ответа.
    
2. Запустите командную консоль Skype для бизнеса: нажмите кнопку **Пуск**, последовательно выберите пункты **Все программы** и **Skype для бизнеса 2015** и щелкните элемент **Командная консоль Skype для бизнеса**.
    
3. Создайте подсказку для воспроизведения в качестве приветственного сообщения и сохраните ее в качестве переменной. В командной строке выполните команду:
    
   ```
   $promptWM = New-CsRgsPrompt -TextToSpeechPrompt "<text for TTS prompt>"
   ```

    Например:
    
   ```
   $promptWM = New-CsRgsPrompt -TextToSpeechPrompt "Welcome to Contoso. Please wait for an available agent."
   ```

     > [!NOTE]
     > Чтобы использовать звукового файла в строке, используйте командлет **Import-CsRgsAudioFile** . Дополнительные сведения см [Import-CsRgsAudioFile](https://docs.microsoft.com/powershell/module/skype/import-csrgsaudiofile?view=skype-ps). 
  
4. Получите идентификатор очереди или вопроса при перенаправлении вызовов. В командной строке выполните команду:
    
   ```
   $qid = (Get-CsRgsQueue -Name "Help Desk").Identity
   ```

    Для получения дополнительных сведений о создании очереди видеть [New-CsRgsQueue](https://docs.microsoft.com/powershell/module/skype/new-csrgsqueue?view=skype-ps).
    
5. Определите действие по умолчанию, которое будет выполняться при открытии рабочего процесса в рабочие часы, и сохраните его в качестве переменной. В командной строке выполните команду:
    
   ```
   $actionWM = New-CsRgsCallAction -Prompt <saved prompt from previous step> -Action <action to be taken> -QueueID $qid
   ```

    > [!NOTE]
    > Для рабочих процессов сервисной группы действие по умолчанию должно перенаправлять вызов в очередь. Этот параметр требуется для активных рабочих процессов. Для неактивных рабочих процессов этот параметр указывать не нужно. 
  
    Например:
    
   ```
   $actionWM = New-CsRgsCallAction -Prompt $promptWM -Action TransferToQueue -QueueID $qid.Identity
   ```

6. Если вы хотите определить рабочее время и выходные дни, необходимо создать их до создания или изменения рабочего процесса. Дополнительные сведения см [(необязательно) группы ответа определение рабочих часов в Скайп для бизнеса 2015](optional-define-response-group-business-hours.md) и [(необязательно) определение наборах праздников ответа в Скайп для 2015 бизнеса](optional-define-response-group-holiday-sets.md).
    
7. Если требуется предоставить запросы для вызовов, полученных из рабочих часов или в выходные дни, используйте командлет **New-CsRgsPrompt** для определения в строке и используйте **New-CsRgsCallAction** , чтобы определить действие, выполняемое после в строке. Дополнительные сведения см [New-CsRgsPrompt](https://docs.microsoft.com/powershell/module/skype/new-csrgsprompt?view=skype-ps) и [New-CsRgsCallAction](https://docs.microsoft.com/powershell/module/skype/new-csrgscallaction?view=skype-ps).
    
8. Получить имя службы для службы группы ответа Lync Server и присвойте переменной. В командной строке выполните следующую команду:
    
   ```
   $serviceId="service:"+(Get-CSService | ?{$_.Applications -like "*RGS*"}).ServiceId;
   ```

9. Создайте или измените рабочий процесс. Чтобы создать рабочий процесс, используйте **Командлет New-CsRgsWorkflow**. Чтобы изменить рабочий процесс, используйте **Командлет Set-CsRgsWorkflow**. В командной строке введите следующую команду:
    
   ```
   $workflowHG = New-CsRgsWorkflow -Parent <service ID for the Response Group service> -Name "<hunt group name>" [-Description "<hunt group description>"] -PrimaryUri "<SIP address for the workflow>" [-LineUri "<Phone number for the workflow>"] [-DisplayNumber "<Phone number displayed in Lync>"] [-Active <$true | $false>] [-Anonymous <$true | $false>] [-DefaultAction <variable from preceding step>] [-EnabledForFederation <$true | $false>] [-Managed <$true | $false>] [-MangersByUri <SIP addresses for Response Group Managers who can manage the workflow>]
   ```

    Например:
    
   ```
   $workflowHG = New-CsRgsWorkflow -Parent $serviceID -Name "Human Resources" -Description "Human Resources workflow" -PrimaryUri "sip:humanresources@contoso.com" -LineUri "TEL:+14255551219" -DisplayNumber "555-1219" -Active $true -Anonymous $true -DefaultAction $actionWM -EnabledForFederation $false -Managed $true -ManagersByUri "sip:bob@contoso.com", "mindy@contoso.com"
   ```

     > [!IMPORTANT]
     > Всем пользователям, которые назначены менеджерами рабочих процессов, необходимо присвоить роль CsResponseGroupManager. 
  
     > [!NOTE]
     > Для получения дополнительных сведений о дополнительных параметра отображаться [New-CsRgsWorkflow](https://docs.microsoft.com/powershell/module/skype/new-csrgsworkflow?view=skype-ps) или [Set-CsRgsWorkflow](https://docs.microsoft.com/powershell/module/skype/set-csrgsworkflow?view=skype-ps)
  
## <a name="designing-an-interactive-workflow"></a>Проектирование интерактивного рабочего процесса

Интерактивного автоответчика (IVR) можно использовать для получения сведений из абонентов и направления вызовов в соответствующую очередь. Пар вопросов и ответов определить, какие очереди для использования. В зависимости от вызывающего абонента ответа звонящий слышит следующим вопросом либо маршрутизируются в соответствующую очередь. Вопросы IVR и ответы вызывающего абонента предоставляются отвечающему агенту, принимающему звонок, предоставляя ценные сведения для агента.
  
### <a name="overview-of-ivr-features"></a>Обзор возможностей интерактивного автоответчика

Приложение группы ответа предлагает распознавания речи и преобразования текста в речь возможности на 26 языках. Вопросы интерактивного автоответчика вводятся с помощью функции преобразования текста в речь либо из звукового файла Wave (.wav) или Windows Media (.wma). Вызывающие абоненты могут отвечать голосом или в режиме двухтонального многочастотного набора (DTMF).
  
Интерактивные рабочие процессы поддерживает до двух уровнями вопросов, каждый вопрос, создавая до четырех вариантов ответов. IVR запрашивает у вызывающего абонента вопрос и в зависимости от вызывающего абонента ответа маршрутизирует звонящего в очередь или второй вопрос. Второй вопрос также может иметь четыре варианта ответов. В зависимости от того, ответ на вопрос второго уровня Звонящий перенаправляется в соответствующую очередь.
  
> [!NOTE]
> При создании потоков обработки вызовов с помощью Скайп для консоли Business Server можно назначить любое число уровней вопросы IVR и любого количества ответов. Тем не менее для удобства вызывающего абонента, рекомендуется не использовать более трех уровней вопросов, с не более пяти ответы. Кроме того при разработке потока вызовов с более чем двумя уровнями вопросов с более четырех ответы нельзя изменить поток вызовов с помощью Скайп для панели управления Business Server. 
  
Вопросы IVR и ответы вызывающего абонента предоставляются отвечающему агенту, принимающему звонок.
  
### <a name="working-with-speech-technologies"></a>Работа с речевыми технологиями

Речевые технологии, такие как распознавание и синтез речи, могут улучшить работу пользователей и позволить получать доступ к информации более естественно и эффективно. Но могут быть ситуации, когда заданный текст или голосовой ответ пользователя распознается неправильно речевой системой. Например, символ "#" интерпретируется модулем преобразования текста в речь как слово "номер". Эту проблему можно устранить следующим способом.
  
- Речевой модуль предоставляет звонящему пять попыток для ответа на вопрос. Если звонящий неправильно отвечает на вопрос (т. е. ответ не входит в число допустимых ответов) или не отвечает на вопрос, то ему или ей предоставляется еще одна попытка. Звонящему предоставляется 5 попыток, после чего звонок разъединяется. Вы можете настроить IVR для воспроизведения настраиваемого сообщения после каждой ошибки. Вопрос повторяется каждый раз.
    
- Чтобы минимизировать возможность интерпретации шума окружающей среды как ответа, используйте более длительные ответы. Например, в ответах должно быть более одного слога и они должны значительно отличаться друг от друга.
    
- Если ваши вопросы предполагают как речевые, так и тональные (DTMF) ответы, настройте речевые ответы со словами, представляющими концепцию, а не ответы DTMF. Например, вместо "Нажмите или скажите один" используйте "Нажмите 1 или скажите «счета»".
    
- После настройки IVR, позвоните но номеру, прослушайте голосовые подсказки, ответьте на каждую из них голосом и убедитесь, что IVR звучит и работает, как ожидается. Затем вы можете изменить IVR, чтобы определить проблемы с интерпретацией. Вспомним предыдущий пример – если требуется указать клавишу #, вы можете перезаписать подсказку IVR и использовать имя клавиши вместо символа. Пример: Для связи с сотрудником отдела продаж нажмите кнопку с решеткой.
    
### <a name="ivr-design-examples"></a>Примеры IVR

В следующих разделах представлены примеры различных сценариев IVR и пар вопросов и ответов. 
  
#### <a name="ivr-with-one-level-of-questions"></a>IVR с одним уровнем вопросов

В следующем примере показан IVR, использующий один уровень вопросов. Распознавание речи используется для обнаружения ответа вызывающего абонента.
  
 **Вопрос:** "Благодарим за звонок в отдел кадров. Для обсуждения заработной платы скажите «зарплата». Для обсуждения других вопросов скажите «кадры»".
  
- **Выбран вариант 1:** вызывающий абонент перенаправляется в группу, отвечающую за зарплату.
    
- **Выбран вариант 2:** вызывающий абонент перенаправляется в группу отдела кадров.
    
На следующем рисунке показан поток вызовов.
  
 **Одноуровневый интерактивный поток вызовов**
  
![Создание потоков обработки вызовов с использованием систем речевого взаимодействия](../../media/Ops_OCS_RGS_IVRLevel1.jpg)
  
#### <a name="ivr-with-two-levels-of-questions"></a>IVR с двумя уровнями вопросов

В следующем примере показан IVR, использующий два уровня вопросов. Он позволяет звонящим отвечать с использованием речи или команд DTMF.
  
 **Вопрос:** "Благодарим за звонок в справочную службу отдела информационных технологий. Если неполадка связана с доступом к сети, нажмите 1 или скажите «сеть». Если неполадка связана с программным обеспечением, нажмите 2 или скажите «программное обеспечение». Если неполадка связана с оборудованием, нажмите 3 или скажите «оборудование»".
  
- **Выбран вариант 1:** вызывающий абонент перенаправляется в группу поддержки сети.
    
- **Выбран вариант 2:** вызывающему абоненту задается следующий вопрос.
    
    **Вопрос:** "Если неполадка связана с операционной системой, нажмите 1 или скажите «операционная система». Если неполадка связана с внутренним приложением, нажмите 2 или скажите «внутреннее приложение». В случае иных неполадок нажмите 3 или скажите иное".
    
  - **Выбран вариант 1:** вызывающий абонент перенаправляется в группу поддержки операционных систем.
    
  - **Выбран вариант 2:** вызывающий абонент перенаправляется в группу поддержки внутренних приложений.
    
  - **Выбран вариант 3:** вызывающий абонент перенаправляется в группу поддержки программного обеспечения.
    
- **Выбран вариант 3:** вызывающему абоненту задается следующий вопрос.
    
    **Вопрос:** "Если неполадка связана с принтером, нажмите 1. В противном случае нажмите 2".
    
  - **Выбран вариант 1:** вызывающий абонент перенаправляется в группу поддержки принтеров.
    
  - **Выбран вариант 2:** вызывающий абонент перенаправляется в группу поддержки оборудования.
    
На следующем рисунке показан поток вызовов.
  
 **Двухуровневый интерактивный поток вызовов**
  
![Создание потоков обработки вызовов с использованием систем речевого взаимодействия](../../media/Ops_OCS_RGS_IVRLevel2.jpg)
  
### <a name="best-practices"></a>Рекомендации

В следующем списке описываются некоторые рекомендации по созданию IVR.
  
- Позвольте звонящему быстро перейти к нужной задаче. Избегайте слишком большого объема информации или длинных маркетинговых сообщений.
    
- Если вы хотите включить длинное сообщение, рассмотрите возможность добавления его к первому вопросу, а не к сообщению приветствия. Звонящие смогут пропустить сообщение, если оно входит в первый вопрос, ответив на него, но они не смогут пропустить приветствие.
    
- Говорите на языке вызывающего абонента. Избегайте stilted языка. Произнесите несколько слов естественным образом.
    
- Пишите эффективные подсказки. Удалите все ненужные варианты. Структура сведения, чтобы у вызывающего абонента ожидается ответ — в конце предложения. Например «говорить Группа продаж, нажмите 1.»
    
- Сделайте голосовые ответы понятными для пользователя. Например, если вы указываете и тональные, и голосовые ответы, используйте, например, следующую фразу: "Чтобы поговорить с группой продаж, нажмите 1 или скажите «продажи»".
    
- Проверьте IVR на группе пользователей перед развертыванием в организации.
    
## <a name="creating-or-modifying-an-interactive-workflow"></a>Создание и изменение интерактивного рабочего процесса

### <a name="to-use-response-group-configuration-tool-to-create-or-modify-an-interactive-workflow"></a>Использование средства настройки группы ответа для создания или изменения интерактивного рабочего процесса

1. Выполните вход как член группы RTCUniversalServerAdmins или одной из предварительно заданных административных ролей, поддерживающих группу ответа.
    
2. Откройте окно браузера и введите URL-адрес администрирования, чтобы открыть Скайп для панели управления Business Server.  
    
3. В левой области навигации щелкните **Группы ответа**, затем **Рабочий процесс**.
    
4. На странице **Рабочий процесс** щелкните **Создать или редактировать рабочий процесс**.
    
5. В поле поиска **выберите службу** введите полностью или частично имя службы **сервера приложений** , на котором размещается рабочий процесс, чтобы создать или изменить. В сформированном списке служб щелкните требуемую службу, затем нажмите кнопку **ОК**.
    
    > [!NOTE]
    > Откроется окно программы настройки группы ответа. Можно также открыть средство настройки группы ответа непосредственно из веб-браузера, введя следующий URL-адрес: https:// _ \<Полное_доменное_имя_веб\>_/RgsConfig. 
  
6. Выполните одно из указанных ниже действий.
    
   - На странице **Создание рабочего процесса** рядом с элементом **Интерактивный** нажмите кнопку **Создать**.
    
   - В разделе **Управление существующим рабочим процессом** найдите рабочий процесс, который требуется изменить, затем в разделе **Действие** нажмите кнопку **Изменить**.
    
7. Если для предоставления пользователям возможность вызывать рабочий процесс требуется дополнительная подготовка, снимите флажок **Активировать рабочий процесс**.
    
    > [!NOTE]
    >  При создании управляемого рабочего процесса необходимо выбрать функцию **Активировать рабочий процесс**. После сохранения активного управляемого рабочего процесс его можно изменить или отключить. 
  
8. Чтобы разрешить федеративным пользователям звонки группе, установите флажок **Включить поддержку федерации** . Кроме того, необходимо иметь политики внешнего доступа, применяемое к приложения группы ответа, настроенные для федерации.
    
    > [!NOTE]
    > Глобальную политику внешнего доступа применяется к приложения группы ответа. Глобальная политика для федерации группы ответа можно настроить с помощью Скайп для панели управления Business Server или с помощью командлета **Set-CsExternalAccessPolicy** задать для параметра EnableOutsideAccess значение True. Имейте в виду, параметров глобальной политики применяются ко всем пользователям, если они назначена политика узла или пользователя. Таким образом прежде чем изменять этот параметр для групп ответа, убедитесь в том, что параметр федерации отвечает требованиям вашей организации. Для получения дополнительных сведений о как политики применяются к пользователям видеть [Управление внешнюю политику доступа для вашей организации](http://technet.microsoft.com/library/5571811e-34c8-443a-b94c-1ab5d4275581.aspx). Для получения дополнительных сведений о настройке федерации см **Set-CsExternalAccessPolicy** в документации.
  
    > [!NOTE]
    > Пользователей, которые размещаются в Скайп для бизнеса в Интернет не может размещать звонки для группы ответа, которые размещаются в локальное развертывание. Это значение true в обоих гибридных развертываниях и в тех случаях, где федеративных локальное развертывание с помощью Скайп для бизнеса в Интернет развертывания. 
  
9. Если требуется скрыть идентификационные данные агентов во время вызовов, установите флажок **Включить анонимность агента**.
    
    > [!NOTE]
    > Анонимные вызовы не должны начинаться с сеанса видеосвязи или обмена мгновенными сообщениями (после начала сеанса вызова можно добавить видео и мгновенные сообщения). Анонимный агент также может поставить вызов на удержание, передать вызов (скрытая передача и передача после консультации), а также выполнять парковку и извлечение вызовов. Анонимные вызовы не поддерживают конференц-связь, совместный доступ к приложениям и рабочему столу, передачу файлов, работу с доской, совместную работу с данными и запись звонков. Агенты, использующие подключаемый модуль VDI Lync, могут анонимно получать входящие вызовы, но не отправлять исходящие вызовы. 
  
10. В поле **Введите адрес группы, которая будет принимать звонки** введите основной адрес универсального кода ресурса (URI) SIP группы, которая будет отвечать на вызовы рабочего процесса.
    
11. В поле **Отображаемое имя** введите отображаемое имя рабочего процесса (например, группа ответа интерактивного автоответчика отдела продаж).
    
    > [!NOTE]
    > Исключение "\<«или»\>" символов в поле отображаемое имя. Не используйте следующие отображаемые имена, поскольку они зарезервированы: RGS Presence Watcher (Наблюдатель присутствия RGS) или Announcement Service (Служба оповещения). 
  
12. В поле **Номер телефона** введите универсальный код ресурса, назначенный группе ответа (например, +14255550165).
    
13. В поле **Отображаемый номер** введите номер группы ответа для отображения (например, +1 (425) 555-0165).
    
14. (Необязательно) В поле **Описание**введите описание рабочего процесса, которое будет отображаться в карточке контакта в Скайп для бизнеса. 
    
15. В поле **Тип рабочего процесса** выберите **Управляемый**, если этот им будет управлять руководитель группы ответа. Выполните следующие действия, чтобы назначить менеджеров группы ответа в рабочий процесс:
    
    а. Введите универсальный код ресурса SIP, назначенный руководителю данного рабочего процесса, и нажмите кнопку **Добавить**.
    
    б. Введите универсальный код ресурса SIP, назначенный дополнительным руководителям, которых требуется добавить к рабочему процессу, и нажмите кнопку **Добавить**.
    
    > [!IMPORTANT]
    > Каждому пользователю, который назначен менеджером группы ответа, необходимо присвоить роль CsResponseGroupManager. Если пользователям не назначена эта роль, они не могут управлять группами ответа. 
  
16. В разделе **Шаг 2. Выберите язык** щелкните язык, на котором будет выполняться распознавание речи и преобразование текста в речь.
    
17. Если необходимо настроить приветствие, в разделе **Шаг 3. Настройте приветствие** установите флажок **Отображать приветствие**, затем выполните одно из следующих действий:
    
    - Для ввода приветствия в виде текста, который будет преобразовываться в речь для вызывающих абонентов, щелкните **Использовать текст, преобразованный в речь**, затем введите приветствие в текстовом поле.
    
    > [!NOTE]
    > Не включайте в вводимый текст теги HTML. В случае добавления тегов HTML появится сообщение об ошибке. 
  
    - Для воспроизведения записи приветствия из звукового файла Wave или Windows Media щелкните **Выбрать запись**. Для загрузки нового звукового файла щелкните ссылку **запись**. В новом окне браузера нажмите кнопку **Обзор** и выберите требуемый звуковой файл, затем нажмите кнопку **Открыть**. Нажмите кнопку **Загрузить** для загрузки звукового файла.
    
    > [!NOTE]
    > Все звуковые файлы, предоставленные пользователями, должны удовлетворять определенным требованиям. Для получения дополнительных сведений о форматах файлов, поддерживаемые видеть [Технические требования для групп ответа](http://technet.microsoft.com/library/477488bd-124f-437b-9327-732a0d7271ca.aspx). 
  
18. В разделе **Шаг 4. Укажите часы работы** щелкните часовой пояс рабочего процесса в списке **Часовой пояс**.
    
    > [!NOTE]
    > Часовой пояс – это пояс, к которому относятся вызывающие абоненты и агенты. Он используется для расчета часов открытия и закрытия. Например, если для рабочего процесса задано использование часового пояса "Североамериканское восточное стандартное время" и в качестве времени открытия указано 7:00, а в качестве времени закрытия – 11:00, предполагается, что офис открывается в 7:00 по восточному времени, а закрывается в 23:00 по восточному времени, соответственно. (Время необходимо вводить в 24-часовом формате.) 
  
19. Выберите тип рабочего графика, который следует использовать. Для этого выполните одно из следующих действий:
    
   - Для применения предварительно заданного графика рабочего времени щелкните **Использовать готовое расписание**, затем выберите требуемое расписание в раскрывающемся списке.
    
     > [!NOTE]
     > Необходимо определить по крайней мере один стандартное расписание, ранее, чтобы иметь возможность установите этот флажок. Определение предварительно расписания с помощью командлета **New-CSRgsHoursOfBusiness** . Дополнительные сведения см [(необязательно) группы ответа определение рабочих часов в Скайп для бизнеса 2015](optional-define-response-group-business-hours.md). При выборе предварительно заданного расписания дни и часы работы группы ответа автоматически водятся в полях **День**, **Открыть** и **Закрыть**.
  
   - Для применения пользовательского графика, относящегося только к данному рабочему процессу, щелкните **Использовать расписание пользователя**.
    
20. Если вы создаете индивидуальное расписание для данного рабочего процесса, установите флажки, чтобы выбрать дни недели, по которым группа ответа доступна.
    
21. При создании пользовательского расписания введите в поля **Открыть** и **Закрыть** часы работы группы ответа для каждого дня недели..
    
     > [!NOTE]
     > Часы вводятся в полях **Открыть** и **Закрыть** в 24-часовом формате. Например, если рабочий день продолжается с 9.00 до 17.00 с перерывом на обед в полдень, часы работы указываются следующим образом: **Открыть** 9:00, **Закрыть** 12:00, **Открыть** 13:00, **Закрыть** 17:00.
  
22. Если требуется воспроизводить сообщение в нерабочее время, установите флажок **Отображать сообщение в нерабочее для группы ответа время**, затем укажите сообщение для воспроизведения, выполнив одно из следующих действий.
    
    - Для ввода сообщения в виде текста, подлежащего преобразованию в речь для вызывающего абонента, щелкните **Использовать текст, преобразованный в речь**, затем введите сообщение в текстовом поле.
    
     > [!NOTE]
     > Не включайте в вводимый текст теги HTML. В случае добавления тегов HTML появится сообщение об ошибке. 
  
    - Если требуется воспроизводить записанное сообщение из звукового файла, щелкните **Выбрать запись**. Для загрузки нового звукового файла щелкните ссылку **запись**. В новом окне браузера щелкните **Обзор**, выберите требуемый файл, затем нажмите кнопку **Открыть**. Для загрузки звукового файла нажмите кнопку **Загрузить**.
    
    > [!NOTE]
    > Все звуковые файлы, предоставленные пользователями, должны удовлетворять определенным требованиям. Для получения дополнительных сведений о форматах файлов, поддерживаемые видеть [Технические требования для групп ответа](http://technet.microsoft.com/library/477488bd-124f-437b-9327-732a0d7271ca.aspx). 
  
23. Укажите способ обработки вызовов после воспроизведения сообщения (если оно настроено):
    
     - Для разрыва связи щелкните **Разъединить звонок**.
    
     - Для переадресации вызова на голосовую почту щелкните **Переадресовывать на голосовую почту**, затем введите адрес голосовой почты. Формат адреса голосовой почты _ \<username\>_@ _\<domainname\> _ (например, bob@contoso.com).
    
     - Для переадресации вызова другому пользователю щелкните **Переадресовывать на URI для SIP**, затем введите адрес пользователя. Имеет формат для пользователя адрес _ \<username\>_@ _\<domainname\>_.
    
     - Для переадресации вызова на другой телефонный номер щелкните **Переадресовывать на номер телефона**, затем введите номер телефона. — Номер телефона в формате _ \<номер\>_@ _\<domainname\> _ (например, +14255550121@contoso.com). Имя домена необходимо для правильного определения адресата, которому перенаправляется вызывающий абонент.
    
24. В разделе **Шаг 5. Указание выходных дней** установите флажки для одной или нескольких групп выходных дней, когда группа ответа не будет работать.
    
    > [!NOTE]
    > Необходимо определить праздников и наборах праздников, прежде чем настраивать этот рабочий процесс. Используйте командлеты **New-CsRgsHoliday** и **Командлет New-CsRgsHolidaySet** для определения праздников и победы наборов. Дополнительные сведения см [(необязательно) определение наборах праздников ответа в Скайп для 2015 бизнеса](optional-define-response-group-holiday-sets.md). 
  
25. Если требуется воспроизводить сообщение в выходные дни, установите флажок **Отображать сообщение в выходные дни**, затем укажите воспроизводимое сообщение, выполнив одно из следующих действий.
    
   - Для ввода сообщения в виде текста, подлежащего преобразованию в речь для вызывающего абонента, щелкните **Использовать текст, преобразованный в речь**, затем введите сообщение в текстовом поле.
    
     > [!NOTE]
     > Не включайте в вводимый текст теги HTML. В случае добавления тегов HTML появится сообщение об ошибке. 
  
   - Если требуется воспроизводить записанное сообщение из звукового файла, щелкните **Выбрать запись**. Для загрузки нового звукового файла щелкните ссылку **запись**. В новом окне браузера щелкните **Обзор**, выберите требуемый файл, затем нажмите кнопку **Открыть**. Для загрузки звукового файла нажмите кнопку **Загрузить**.
    
     > [!NOTE]
     > Все звуковые файлы, предоставленные пользователями, должны удовлетворять определенным требованиям. Для получения дополнительных сведений о форматах файлов, поддерживаемые звука видеть [Технические требования для групп ответа](http://technet.microsoft.com/library/477488bd-124f-437b-9327-732a0d7271ca.aspx). 
  
26. Укажите способ обработки вызовов после воспроизведения сообщения (если оно настроено):
    
    - Для разрыва связи щелкните **Разъединить звонок**.
    
    - Для переадресации вызова на голосовую почту щелкните **Переадресовывать на голосовую почту**, затем введите адрес голосовой почты. Формат адреса голосовой почты _ \<username\>_@ _\<domainname\> _ (например, bob@contoso.com).
    
    - Для переадресации вызова другому пользователю щелкните **Переадресовывать на URI для SIP**, затем введите адрес пользователя. Имеет формат для пользователя адрес _ \<username\>_@ _\<domainname\>_.
    
    - Для переадресации вызова на другой телефонный номер щелкните **Переадресовывать на номер телефона**, затем введите номер телефона. — Номер телефона в формате _ \<номер\>_@ _\<domainname\> _ (например, +14255550121@contoso.com). Имя домена необходимо для правильного определения адресата, которому перенаправляется вызывающий абонент.
    
27. В разделе **Шаг 6. Настройте музыку для режима удержания** выберите музыку, которую должны будут прослушивать вызывающие абоненты в ожидании ответа агента. Для этого выполните одно из следующих действий.
    
    - Если в режиме удержания требуется воспроизводить музыкальную запись по умолчанию, щелкните **По умолчанию**.
    
    - Чтобы использовать запись музыки при удержании звуковой файл, нажмите кнопку **выбрать файл музыки**. Для загрузки нового звукового файла щелкните ссылку **музыкальный файл**. В новом окне браузера нажмите кнопку **Обзор** и выберите требуемый файл, затем нажмите кнопку **Открыть**. Для загрузки звукового файла нажмите кнопку **Загрузить**.
    
    > [!NOTE]
    > Все звуковые файлы, предоставленные пользователями, должны удовлетворять определенным требованиям. Для получения дополнительных сведений о форматах файлов, поддерживаемые видеть [Технические требования для групп ответа](http://technet.microsoft.com/library/477488bd-124f-437b-9327-732a0d7271ca.aspx). 
  
28. В разделе **Шаг 7. Настройте интерактивный голосовой ответ** под заголовком **Пользователь услышит следующий текст или записанное сообщение** укажите вопрос, адресованный вызывающим абонентам, выполнив следующие действия.
    
    - Для ввода вопроса в текстовом формате щелкните **Использовать текст, преобразованный в речь** (Использовать преобразование текста в речь) и введите вопрос в текстовом поле.
    
    > [!NOTE]
    > Не включайте в вводимый текст теги HTML. В случае добавления тегов HTML появится сообщение об ошибке. 
  
    > [!NOTE]
    > Символ "#" интерпретируется модулем преобразования текста в речь как слово "номер". Если требуется указать клавишу #, то вместо символа используйте имя клавиши. Пример: Для связи с сотрудником отдела продаж нажмите кнопку с решеткой. 
  
   - Для воспроизведения вопроса из заранее записанного звукового файла щелкните **Выбрать запись**, затем щелкните ссылку **запись** для загрузки файла. В новом окне браузера нажмите кнопку **Обзор** и выберите требуемый звуковой файл, затем нажмите кнопку **Открыть**. Нажмите кнопку **Отправить** загрузить файл и затем при необходимости можно ввести вопрос в текстовом поле (Это позволяет вопрос и ответ вызывающего абонента, пересылаемые отвечающему агенту).
    
     > [!NOTE]
     > Все звуковые файлы, предоставленные пользователями, должны удовлетворять определенным требованиям. Для получения дополнительных сведений о форматах файлов, поддерживаемые видеть [Технические требования для групп ответа](http://technet.microsoft.com/library/477488bd-124f-437b-9327-732a0d7271ca.aspx). 
  
29. В поле **Ответ 1** (1 ответ) укажите первый возможный ответ на вопрос, выполнив следующие действия.
    
    > [!IMPORTANT]
    > При указании голосовых ответов не используйте двойные кавычки ("). Это может привести к сбою интерактивного автоответчика. 
  
    > [!NOTE]
    > Для ответа звонящий может использовать речь или буквенно-цифровые клавиши либо и то, и другое. 
  
    - Если требуется разрешить вызывающему абоненту отвечать голосом, введите ответ в поле **Введите голосовой ответ**.
    
    - Если требуется разрешить вызывающему абоненту отвечать нажатием клавиши на клавиатуре, щелкните цифровую клавишу в поле **Цифра**.
    
30. Укажите, требуется ли перенаправлять звонящего в очередь или задать ему другой вопрос, выполнив следующие действия:
    
    - Для перенаправления вызывающего абонента в очередь щелкните **Отправить в очередь** и в списке **Выбрать очередь** щелкните требуемую очередь.
    
    - Если требуется задать другой вопрос, щелкните **Задать другой вопрос**, затем щелкните **Использовать текст, преобразованный в речь**, и введите вопрос либо щелкните **Выбрать запись**. Группируя ответы, укажите в этом разделе до четырех возможных ответов на дополнительный вопрос и очередь для каждого ответа. Для задания третьего или четвертого возможного ответа установите флажки **Ответ 3** или **Ответ 4**.
    
31. Укажите до трех других возможных ответов на исходный вопрос и выполняемые действия для каждого ответа, повторив шаги 28 и 29. Для задания третьего или четвертого возможного ответа установите флажки **Ответ 3** или **Ответ 4**.
    
32. Нажмите кнопку **Развернуть**.
    
### <a name="to-use-skype-for-business-server-management-shell-to-create-or-modify-an-interactive-workflow"></a>Чтобы использовать Скайп для консоли Business Server для создания или изменения интерактивного рабочего процесса

1.  Выполните вход как член группы RTCUniversalServerAdmins или одной из предварительно заданных административных ролей, поддерживающих группу ответа.
    
2. Запустите командную консоль Skype для бизнеса: нажмите кнопку **Пуск**, последовательно выберите пункты **Все программы** и **Skype для бизнеса 2015** и щелкните элемент **Командная консоль Skype для бизнеса**.
    
3. Извлеките имя службы из службы группы ответа и назначьте его переменной. В командной строке выполните следующую команду:
    
   ```
   $serviceId="service:"+(Get-CSService | ?{$_.Applications -like "*RGS*"}) .ServiceId;
   ```

4. Интерактивному рабочему процессу требуется как минимум две очереди и две группы агентов. Сначала создайте группы агентов. Выполните следующую команду:
    
   ```
   $AGSupport = New-CsRgsAgentGroup -Parent $serviceId -Name "Technical Support" [-AgentAlertTime "20"] [-ParticipationPolicy "Informal"] [-RoutingMethod LongestIdle] [-AgentsByUri("sip:agent1@contoso.com", "sip:agent2@contoso.com")]
   $AGSales = New-CsRgsAgentGroup -Parent $serviceId -Name "Sales Team" [-AgentAlertTime "20"] [-ParticipationPolicy "Informal"] [-RoutingMethod LongestIdle] [-AgentsByUri("sip:bob@contoso.com", "sip:alice@contoso.com")]
   ```

5. Создайте очереди. Выполните следующую команду:
    
   ```
   $QSupport = New-CsRgsQueue -Parent $ServiceId -Name "Contoso Support" -AgentGroupIDList($AG-Support.Identity)
   $QSales = New-CsRgsQueue -Parent $ServiceId -Name "Contoso Sales" -AgentGroupIDList($AG-Sales.Identity)
   ```

6. Создайте приглашение для первой группы ответа с помощью следующей команды:
    
   ```
   $SupportPrompt = New-CsRgsPrompt -TextToSpeechPrompt "Please be patient while we connect you with Contoso Technical Support."
   ```

7. Теперь создайте действие, которое должно выполняться после приглашения, с помощью следующей команды:
    
   ```
   $SupportAction = New-CsRgsCallAction -Prompt $SupportPrompt -Action TransferToQueue -QueueID $QSupport.Identity
   ```

8. Создайте ответ для первой группы ответа с помощью следующей команды:
    
   ```
   $SupportAnswer = New-CsRgsAnswer -Action $SupportAction [-DtmfResponse 1]
   ```

9. Теперь создайте второе приглашение, действие вызова и ответ. Сначала создайте приглашение с помощью следующей команды:
    
   ```
   $SalesPrompt = New-CsRgsPrompt -TextToSpeechPrompt "Please hold while we connect you with Contoso Sales."
   ```

10. Создайте второе действие вызова с помощью следующей команды:
    
    ```
    $SalesAction = New-CsRgsCallAction -Prompt $SalesPrompt -Action TransferToQueue -QueueID $QSales.Identity
    ```

11. Создайте ответ для второй группы ответа с помощью следующей команды:
    
    ```
    $SalesAnswer = New-CsRgsAnswer -Action $SalesAction [-DtmfResponse 2]
    ```

12. Создайте приглашение верхнего уровня с помощью следующей команды:
    
    ```
    $TopLevelPrompt = New-CsRgsPrompt -TextToSpeechPrompt "Thank you for calling Contoso. For Technical Support, press 1. For a Sales Representative, press 2."
    ```

13. Создайте вопрос верхнего уровня с помощью следующей команды:
    
    ```
    $TopLevelQuestion = New-CsRgsQuestion -Prompt $TopLevelPrompt [-AnswerList ($SupportAnswer, $SalesAnswer)]
    ```

14. Теперь создайте рабочий процесс с помощью следующей команды:
    
    ```
    $IVRAction = New-CsRgsCallAction -Action TransferToQuestion [-Question $Question]
    $IVRWorkflow = New-CsRgsWorkflow -Parent $ServiceId -Name "Contoso Helpdesk" [-Description "The Contoso Helpdesk line."] -PrimaryUri "sip:helpdesk@contoso.com" [-LineUri tel:+14255554321] [-DisplayNumber "+1 (425) 555-4321"] [-Active $true] [-Anonymous $true] [-DefaultAction $IVRAction] [-Managed $true] [-ManagersByURI ("sip:mindy@contoso.com", "sip:bob@contoso.com")]
    ```

     > [!NOTE]
     > Всем пользователям, назначенным менеджерами группы ответа, должна быть назначена роль CsResponseGroupManager. Если пользователям не назначить эту роль, то они не смогут управлять группами ответа. 
  
## <a name="see-also"></a>См. также

#### 

[(Необязательно) Определение группы ответа праздничные дни в Скайп для бизнеса 2015](optional-define-response-group-holiday-sets.md)
#### 

[(Необязательно) Группа ответа определение рабочих часов в Скайп для бизнеса 2015](optional-define-response-group-business-hours.md)
#### 

[Командлет New-CsRgsWorkflow](https://docs.microsoft.com/powershell/module/skype/new-csrgsworkflow?view=skype-ps)
  
[Командлет Set-CsRgsWorkflow](https://docs.microsoft.com/powershell/module/skype/set-csrgsworkflow?view=skype-ps)
  
[Командлет New-CsRgsPrompt](https://docs.microsoft.com/powershell/module/skype/new-csrgsprompt?view=skype-ps)
  
[Командлет New-CsRgsCallAction](https://docs.microsoft.com/powershell/module/skype/new-csrgscallaction?view=skype-ps)

